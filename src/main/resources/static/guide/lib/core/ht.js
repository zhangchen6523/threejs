!function (r, H, v) {
    "use strict";
    var W = "ht";
    if (!r[W]) {
        !function () {
            Date.now && Date.prototype.getTime || (Date.now = function () {
                return (new Date).getTime()
            }), r.performance && r.performance.now || function () {
                var o = Date.now();
                r.performance || (r.performance = {}), r.performance.now = function () {
                    return Date.now() - o
                }
            }();
            for (var l = Date.now(), A = 16, f = ["ms", "moz", "webkit", "o"], e = 0; e < f.length && !r.requestAnimationFrame; ++e) r.requestAnimationFrame = r[f[e] + "RequestAnimationFrame"], r.cancelAnimationFrame = r[f[e] + "CancelAnimationFrame"] || r[f[e] + "CancelRequestAnimationFrame"];
            r.requestAnimationFrame || (r.requestAnimationFrame = function (Y) {
                var X = Date.now(), o = A + l - X;
                return 0 > o && (o = 0), l = X, r.setTimeout(function () {
                    l = Date.now(), Y(performance.now())
                }, o)
            }), r.cancelAnimationFrame || (r.cancelAnimationFrame = function (D) {
                return r.clearTimeout(D)
            }), H.assign === v && (H.assign = function (a) {
                if (a === v || null === a) throw new TypeError("Cannot convert undefined or null to object");
                for (var A = H(a), C = 1; C < arguments.length; C++) {
                    var g = arguments[C];
                    if (g !== v && null !== g) for (var K in g) H.prototype.hasOwnProperty.call(g, K) && (A[K] = g[K])
                }
                return A
            })
        }();
        var G = r.document, o = null, x = r[W] = {}, U = r[W + "config"], w = x.Default = U && U.Default || {},
            k = x.Style = U && U.Style || {}, p = x.Attr = U && U.Attr || {}, Q = x.Color = U && U.Color || {},
            d = x.IsGetter = U && U.IsGetter || {};
        !function () {
            var Q = !1;
            try {
                var u = H.defineProperty({}, "passive", {
                    get: function () {
                        Q = !0
                    }
                });
                r.addEventListener("test", u, u), r.removeEventListener("test", u, u)
            } catch (X) {
                Q = !1
            }
            w.passiveSupported = Q
        }();
        var $, F, q, R, i = w.passiveSupported, O = w.eventListenerOptionsFalse = i ? {passive: !1, capture: !1} : !1,
            L = w.eventListenerOptionsTrue = i ? {passive: !1, capture: !0} : !0, m = Math, B = m.round, V = m.floor,
            s = m.ceil, e = m.sqrt, n = m.max, g = m.min, M = m.abs, c = m.cos, a = m.acos, J = m.sin, t = m.pow,
            I = m.asin, Y = m.PI, C = 2 * Y, h = Y / 2, u = m.tan, N = m.atan2, K = m.random, f = m.log, A = !1, z = !1,
            j = r.parseInt || global.parseInt, _ = "2019-05-15",
            E = r.navigator ? r.navigator.platform.indexOf("Win") > -1 : !1, X = function (l) {
                return l * l
            }, Z = r.setTimeout, l = r.clearTimeout, b = r.location,
            S = r.navigator ? r.navigator.userAgent.toLowerCase() : "", T = function (P) {
                return P.test(S)
            }, D = T(/msie/), P = T(/msie/) || T(/trident/), y = T(/msie 10/), ak = T(/edge/), Mi = T(/firefox/),
            _i = T(/mac/), Xp = w.isTouchable === v ? E ? !1 : G ? "ontouchend" in G : !1 : w.isTouchable,
            ek = "default", Id = "single", cq = "multiple", es = "front", Ym = "back", Pq = "left", Kl = "right",
            Tp = "top", Mh = "bottom", Wk = "center", wf = "eye", mb = "middle", kp = "east", Je = "west", sh = "north",
            $f = "none", Od = "px", Zk = "absolute", Fc = "border", zl = "triangle", ap = "rect", dl = "circle",
            Rr = "cylinder", Up = "shape", lk = "items", Im = "normal", Pl = "remove", Pr = "clear", im = "width",
            ns = "height", fj = "ingroup", $d = "check", fp = "uncheck", mo = "radio", oq = "radioOn", Dh = "radioOff",
            qr = "points", bm = "values", Cm = "series", cl = "body", Fj = "label", zp = "label2", Ro = "note",
            Oo = "note2", om = "icons", sp = "labelFont", Yc = "labelColor", ue = "labelSelectColor",
            Fg = "note.expanded", gn = "note2.expanded", od = "edge.expanded", Ge = "edge.points", jk = "edge.type",
            pr = "rotation", Sm = "hidden", Td = "visible", Yb = "tuv", yh = "no", mh = "draw", jr = "select",
            Dg = "currentSubGraph", qo = "selectBackground", ne = "autoMakeVisible", xh = "autoHideScrollBar",
            ym = "scrollBarColor", Wc = "scrollBarSize", hi = "indent", ds = "rowHeight", Ho = "columnLineColor",
            _f = "rowLineColor", Bl = "columnLineVisible", Uo = "rowLineVisible", Dl = "visibleFunc", Bc = "expandIcon",
            hl = "collapseIcon", lq = "checkMode", bg = "sortFunc", Lj = "editable", yj = "batchEditable",
            qc = "tristate", Tf = "asc", ro = "desc", he = "position", dd = "elevation", Rl = "children",
            ed = "translateX", Tc = "translateY", Jq = "dataModel", Ud = "maxSize", vb = "shape3d",
            Jk = "shape3d.resolution", sj = "shape3d.visible", dg = "shape3d.from.visible", gm = "shape3d.to.visible",
            ji = "shape3d.top.visible", Am = "shape3d.bottom.visible", np = "repeat.uv.length", nj = "serializeValue",
            Sk = "deserializeValue", nk = "centerUniform", Mk = "uniform", pn = "rgba(255,255,255,0)", ub = "style",
            Mr = "attr", sb = "field", yl = "string", af = "boolean", be = "color", Hp = "int", Vc = "number",
            Vi = "ew-resize", Kh = "ns-resize", Mg = "pointer", ao = "auto", Lf = "mousedown", Xq = "mousemove",
            hc = "mouseup", Rb = "mouseout", Hc = "touchstart", or = "touchmove", Kb = "touchend", hp = "keydown",
            ge = "keyup", vq = ["DOMMouseScroll", "mousewheel"], wj = Mi ? vq[0] : vq[1],
            tm = Xp ? [Hc, or, Kb, hp, ge, "keypress", "input", "contextmenu", "compositionstart", "compositionupdate", "compositionend"] : [hp, ge, "keypress", "input", Lf, Xq, hc, Rb, wj, "wheel", "contextmenu", "mouseenter", "mouseleave", "mouseover", "compositionstart", "compositionupdate", "compositionend"],
            jl = o, Ce = o, fk = o, _q = hc.length, wh = function () {
                fk && (l(fk.timeout), fk = o)
            }, Qf = function () {
                fk && jb(fk.e, fk.info)
            };
        r.addEventListener && (Xp || (r.addEventListener(Rb, function () {
            wh()
        }, O), r.addEventListener(wj, function () {
            ti()
        }, O)), r.addEventListener(ge, function (_) {
            91 === _.keyCode ? Jh = {} : delete Jh[_.keyCode]
        }, L), r.addEventListener(hp, function (B) {
            Jh[B.keyCode] = !0
        }, L), r.addEventListener("blur", function () {
            Jh = {}
        }, O));
        var ci, ui, wo, ae = 0, Qm = o, ie = function (n, _) {
                var r = Z(function () {
                    delete Qm[r], Xi(Qm) && (Qm = o), n()
                }, _);
                return r
            }, Ml = o, Ok = o, Qc = {}, Vp = {}, fe = {}, bh = {}, If = {}, Jh = {}, fd = {}, gf = {}, Tq = {}, Ul = {},
            Gh = /.json$/, Ag = /^data:image\/svg\+xml/, Mf = {}, bn = [], Cq = {}, df = o, Vg = o, zo = function () {
            }, nc = function () {
                throw"Oops!"
            }, Rn = [0, 0, 0], wp = {x: 0, y: 0, width: 0, height: 0}, Nn = o, Kj = o, vc = o, Tm = function (M, C) {
                Vp[M] = C, C && C.comps && !C.uuid && (C.uuid = x.Math.generateUUID()), cf[M] && (C.cacheRule = cf[M], delete cf[M])
            }, ai = function (Q) {
                Kj && !Q._72O && (vc || (vc = {}), vc[Q._72O = Fb()] = Q), ci != o ? ep() < .05 && R && !ui && (Ec = wh) : Ec = kr
            }, hs = function (e, y, T, M) {
                Kj || (Kj = {});
                var f = Kj[e];
                if (f) {
                    if (f.url === y) return;
                    f.image ? (f.image.onload = zo, f.image.onerror = zo) : f.request && (f.request.onload = zo, f.request.onerror = zo)
                }
                if (Gh.test(y)) {
                    var s = new Wl;
                    if (Kj[e] = {request: s, url: y}, y = w.beforeLoadURL(y), y.data) {
                        var U = w.parse(y.data);
                        ef(e, U), w.handleImageLoaded(e, U)
                    } else {
                        s.onload = function (v) {
                            if (200 === this.status || 0 === this.status) {
                                var G = w.parse(v.target.response || v.target.responseText);
                                ef(e, G), w.handleImageLoaded(e, G)
                            } else ef(e, w.handleUnfoundImage(e, y) || o)
                        }, s.onerror = function () {
                            ef(e, w.handleUnfoundImage(e, y) || o)
                        };
                        var Y = {};
                        Y.url = encodeURI(y), Y.sync = !1, s.send(Y)
                    }
                } else {
                    var U = new Image;
                    Kj[e] = {
                        image: U,
                        url: y
                    }, /^data:image/.test(y) || (y = w.beforeLoadURL(y), y = w.appendTimeStamp(y), y = encodeURI(y), U.crossOrigin = w.crossOrigin), w.convertImageSrc(y, function (W) {
                        P && (y.toLowerCase().indexOf(".svg") > 0 || Ag.test(y)) ? (G.body.appendChild(U), U.style.visibility = "hidden", U.onload = function () {
                            Z(function () {
                                if (T && (U.width = T), M && (U.height = M), !U.width || !U.height) {
                                    var _ = U.width || U.clientWidth, l = U.height || U.clientHeight;
                                    U.width = _, U.height = l
                                }
                                w.handleImageLoaded(e, U), ef(e, U), G.body.removeChild(U), U.style.visibility = ""
                            }, 180)
                        }, U.onerror = function () {
                            ef(e, w.handleUnfoundImage(e, y) || o), G.body.removeChild(U), U.style.visibility = ""
                        }) : (U.onload = function () {
                            T && (U.width = T), M && (U.height = M), w.handleImageLoaded(e, U), ef(e, U)
                        }, U.onerror = function () {
                            ef(e, w.handleUnfoundImage(e, y) || o)
                        }), U.src = W
                    })
                }
            }, ef = function (Q, j) {
                if (Tm(Q, j), delete Kj[Q], Xi(Kj) && (Kj = o, vc)) {
                    for (var p in vc) {
                        var _ = vc[p];
                        _._2O && _._2O[Q] && (_.deleteTexture(Q), delete _._2O[Q]), _.invalidateAll && _.invalidateAll(v, "imageLoaded", Q), _.redraw && _.redraw(), _.iv(), delete _._72O
                    }
                    vc = o
                }
                if (j && vc) for (var p in vc) {
                    var _ = vc[p];
                    _.invalidateAll && _.invalidateAll(v, "imageLoading", Q), _.redraw && _.redraw(), _.iv()
                }
            }, Ye = function () {
                return f = m && Date, function () {
                    return r.performance && r.performance.now ? r.performance.now() : Date.now()
                }
            }(), cj = function (V, e) {
                e ? l(V) : r.cancelAnimationFrame(V)
            }, Fn = function (p, q, Z) {
                return {width: p, height: q, comps: Ll(Z) ? Z : [Z]}
            }, Oh = function (c, N) {
                return {
                    type: dl,
                    rect: [c, N, 1.6, 1.6],
                    borderWidth: 1,
                    borderColor: Aq,
                    gradient: Li,
                    gradientColor: sc,
                    background: Aq
                }
            }, js = function (y, O) {
                return Fn(16, 16, {type: zl, rect: [4, 4, 10, 8], background: y, rotation: O ? 1.57 : 3.14})
            }, yb = function (z, r) {
                return Fn(16, 16, {type: zl, rect: [4, 4, 8, 7], background: z, rotation: r ? 3.14 : 0})
            }, mg = function (A) {
                var b = A._orientation;
                return "horizontal" === b || "h" === b
            }, Jc = function (g) {
                var v = o || 4, X = o || 1, d = o || 1;
                0 > v ? v = 0 : v > .25 && (v = .25);
                var x, t, M, E, a, O, Z, S = .5, P = [], j = [], s = [], q = C / d, u = C / X, e = S - v;
                for (t = 0; X >= t; t++) for (E = -Y + t * u, O = c(E), a = J(E), x = 0; d >= x; x++) M = x * q, Z = e + v * O, P.push(c(M) * Z, a * v, -J(M) * Z), (F = g) && j.push(x / d, 1 - t / X);
                for (t = 0; X > t; t++) {
                    var y = t * (d + 1), R = (t + 1) * (d + 1);
                    for (x = 0; d > x; x++) s.push(y + x, R + x + 1, R + x, y + x, y + x + 1, R + x + 1), Qo.z = Bi.z = g
                }
            }, hh = function (D) {
                var R = 2, f = 0;
                for (var B in D) B.length === R && j(B, 32) === de && (df = Vg = D[B]), f++;
                return f
            }, Wg = function (D, Z, m, c) {
                return m || (m = Xp ? 5 : 3, m /= c || 1), {x: D - m, y: Z - m, width: 2 * m, height: 2 * m}
            }, We = function (E, O, w, N) {
                var e = this;
                O || (O = Xp ? 5 : 3, w = 20, N = 20);
                var K = {x: E, y: O, width: w, height: N};
                if (w) for (var Z = 0; w > Z; Z++) if (3 === w) N = 20; else for (var b = 0; N > b; b++) e = r ? r : w;
                var a = {x: Y, y: 2 * Y};
                if (wc(K, a)) {
                    var f = ns[0] + Tp[0] + Pr[1] + (Tf.length - 1);
                    lm[wf] = e[f], e[f] = Kf[wf]
                }
            }, vg = function (Z) {
                return (/ble$/.test(Z) || /ed$/.test(Z) || d[Z] ? "is" : "get") + Z.charAt(0).toUpperCase() + Z.slice(1)
            }, Kf = function (H) {
                return "set" + H.charAt(0).toUpperCase() + H.slice(1)
            }, uf = function (f) {
                return typeof f === yl || f instanceof String
            }, In = function (W) {
                return typeof W === Vc
            }, kr = function (L) {
                return typeof L === af
            }, bc = function (D) {
                return D && "object" == typeof D
            }, gp = function (l) {
                return "function" == typeof l
            }, Ll = function (F) {
                return F instanceof Array
            }, ki = function (W) {
                return W instanceof Pf
            }, Jo = function (P) {
                return Ll(P) ? new Pf(P) : P
            }, Un = function (Y) {
                return Y instanceof ve
            }, xf = function (l) {
                return l instanceof sq
            }, Em = function (L) {
                return L instanceof qe
            }, Tn = function (j, y) {
                if (!(j instanceof x.Group)) return !1;
                if (!y) return j.isExpanded();
                var P = y.getDataUI(j);
                return P && P._88I ? !0 : !1
            }, $l = function (Q) {
                return Q instanceof yg
            }, nm = function (t) {
                return t && "IFRAME" === t.tagName
            }, eq = function (_) {
                return _ == o || w.numberDigits == o ? _ : parseFloat(_.toFixed(w.numberDigits))
            }, ll = function (t, I, m) {
                var R, Z = I.length;
                if (m) for (var f = 0; m > f; f++) if (3 === Z) t.push(I[0]), t.push(I[1]), t.push(I[2]); else for (R = 0; Z > R; R++) t.push(I[R]); else if (3 === Z) t.push(I[0]), t.push(I[1]), t.push(I[2]); else for (R = 0; Z > R; R++) t.push(I[R])
            }, Zq = function (m) {
                return m ? bc(m) ? m : {} : !1
            }, Mm = function (S, I, M) {
                var U, H = bc(S) ? S : S.prototype;
                for (U in I) M && H[U] !== v || (H[U] = I[U]);
                return S
            }, Wd = function (T) {
                return String.fromCharCode(T)
            }, vp = function (H) {
                for (var S, i = 0, $ = ""; i < H.length; i++) S = H[H.length - 1 - i], "%" === S ? S = "'" : "a" === S ? S = '"' : "]" === S && (S = "\\"), $ += Wd(S.charCodeAt(0) - 1);
                return $
            }, yp = function (T, E, f) {
                T.superClass.constructor.apply(E, f)
            }, Xi = function (H) {
                for (var d in H) return !1;
                return !0
            }, Al = function ($) {
                return $ ? 0 === $.length : !0
            }, _n = function () {
                var x = "";
                return [fp[0], _f[0], Fj[0]].forEach(function (I) {
                    x += Kf(I).slice(3)
                }), Mk = G && G[x] || nk, function (V, P) {
                    return V === P ? !0 : V.x === P.x && V.y === P.y && V.width === P.width && V.height === P.height
                }
            }(), Fi = function (T, b, R) {
                return b > T ? b : T > R ? R : T
            }, wn = function (S) {
                return 0 > S ? -1 : S > 0 ? 1 : 0
            }, ep = function () {
                var a = 1e4 * J(_q++);
                return a - V(a)
            }, Qp = function (z, o, y) {
                return Ji(z.x, z.y, o.x, o.y, y.x, y.y, y.x + y.width, y.y, !0) || Ji(z.x, z.y, o.x, o.y, y.x + y.width, y.y, y.x + y.width, y.y + y.height, !0) || Ji(z.x, z.y, o.x, o.y, y.x + y.width, y.y + y.height, y.x, y.y + y.height, !0) || Ji(z.x, z.y, o.x, o.y, y.x, y.y + y.height, y.x, y.y, !0)
            }, Ji = function (x, w, C, Q, R, h, T, E, K) {
                var S = (T - R) * (w - h) - (E - h) * (x - R), P = (E - h) * (C - x) - (T - R) * (Q - w);
                if (0 !== P) {
                    var y = S / P, v = x + y * (C - x), L = w + y * (Q - w);
                    return K && (v + Zn < g(x, C) || v - Zn > n(x, C) || v + Zn < g(R, T) || v - Zn > n(R, T) || L + Zn < g(w, Q) || L - Zn > n(w, Q) || L + Zn < g(h, E) || L - Zn > n(h, E)) ? o : [v, L]
                }
                return o
            }, Ug = function (F, i, s) {
                if (F && s) if (i) {
                    if (i === ub) return F.getStyle(s);
                    if (i === Mr) return F.getAttr(s);
                    if (i === sb) return F[s]
                } else if (s = vg(s), F[s]) return F[s]();
                return v
            }, Zp = function (l, Y, J, V) {
                if (l && J) if (Y) {
                    if (Y === ub) l.s(J, V); else if (Y === Mr) l.a(J, V); else if (Y === sb) {
                        var T = l[J];
                        l[J] = V, l.fp("f:" + J, T, V)
                    }
                } else J = Kf(J), l[J] && l[J](V)
            }, Dk = function (D, x, p) {
                return x && "top" !== x ? "bottom" === x ? {
                    x: D.x,
                    y: D.y,
                    width: D.width,
                    height: D.height * p
                } : "right" === x ? {
                    x: D.x,
                    y: D.y,
                    width: D.width * p,
                    height: D.height
                } : "left" === x ? {
                    x: D.x + D.width * (1 - p),
                    y: D.y,
                    width: D.width * p,
                    height: D.height
                } : void 0 : {x: D.x, y: D.y + D.height * (1 - p), width: D.width, height: D.height * p}
            }, Nj = function (F, X, Z, H, V) {
                X && Rf(F, Z, H, 1, V, X)
            }, cb = function (e, b, O, H) {
                var c = 1 - e;
                return c * c * b + 2 * e * c * O + e * e * H
            }, Qo = function (O, o, N, Y, B) {
                var l = 1 - O;
                return l * l * l * o + 3 * l * l * O * N + 3 * l * O * O * Y + O * O * O * B
            }, tp = function (h) {
                var r, T, M, d, E = 0;
                return h.forEach(function (b) {
                    if (r = b.length, r > 0) for (T = b[0], d = 1; r > d; d++) M = b[d], E += vl(T, M), T = M
                }), E
            }, zn = function (e, k, y) {
                var r = "__" + e, $ = function (V) {
                    y.disabled || y["handle_" + e](V)
                };
                y[r] || (y[r] = $, k.addEventListener(e, $, O))
            }, Fh = function (m, E, c) {
                var R = "__" + m, U = c[R];
                U && (E.removeEventListener(m, U, O), delete c[R])
            }, Np = function (D, Q) {
                var w = "_" + Q;
                D[vg(Q)] = function () {
                    return this[w]
                }, D[Kf(Q)] = function (t) {
                    var v = this[w];
                    this[w] = t, this.fp(Q, v, t)
                }
            }, Jf = function (b) {
                return H.create(b)
            }, sr = function (c) {
                if (!c.element) {
                    var l, e;
                    (l = c.textField) ? e = qq(Oj.TextField, l) : (l = c.textArea) ? e = qq(Oj.TextArea, l) : (l = c.button) ? e = qq(Oj.Button, l) : (l = c.comboBox) ? e = qq(Oj.ComboBox, l) : (l = c.checkBox) ? e = qq(Oj.CheckBox, l) : (l = c.radioButton) ? e = qq(Oj.RadioButton, l) : (l = c.slider) ? e = qq(Oj.Slider, l) : (l = c.colorPicker) ? e = qq(Oj.ColorPicker, l) : (l = c.image) && (e = qq(Oj.Image, l)), e && (c.element = e)
                }
            }, po = function (b, q) {
                var I = Hm(b);
                return I._ht = q, I
            }, Hm = function (Y, M) {
                var J = G.createElement("div"), H = J.style;
                return J.tabIndex = -1, J.onkeydown = Yd, H.msTouchAction = $f, Xr(J, o, 0), Xp && H.setProperty("-webkit-tap-highlight-color", "rgba(0, 0, 0, 0)", o), Y && (H.overflow = Sm), M && Ur(M, J), J
            }, wg = function (w, n) {
                var m = G.createElement("canvas"), h = m.style;
                return h.msTouchAction = $f, n || (h.pointerEvents = $f), Xr(m, o, 0), w && Ur(w, m), m
            }, Xr = function (K, V, G) {
                var N = K.style;
                N.border = V ? V + " solid 1px" : 0, N.outline = 0, N.padding = G ? "0 " + G + Od : 0, fr(K)
            }, fr = function (v) {
                var L = v.style;
                L.position = Zk, L.margin = 0, L.setProperty("box-sizing", "border-box", o), L.setProperty("-moz-box-sizing", "border-box", o)
            }, zm = function (e, c, P, w) {
                w || (w = Wo), c != o && (e.width = c * w, e.style.width = c + Od), P != o && (e.height = P * w, e.style.height = P + Od)
            }, Ur = function (n, S, s) {
                n.appendChild(S), s && (S.style.position = Zk)
            }, jg = function (F, x) {
                x.split || (x += "");
                for (var T, M = x.split("\n"), h = 0, j = M.length, P = 0; j > P; P++) {
                    var N = Dp(F.font, M[P]);
                    N.width > h && (h = N.width), T || (T = N.height)
                }
                return F.ss = M, {width: h, height: T * j}
            }, Jl = function (K, e, r, G, U, J) {
                var _ = e.length;
                if (1 === _) wr(K, e[0], r, G, U); else for (var C = r.height / _, T = {
                    x: r.x,
                    y: r.y,
                    width: r.width,
                    height: C
                }, s = 0; s < e.length; s++) J ? Be(K, e[s], G, U, T.x, T.y, T.width, T.height, J) : wr(K, e[s], T, G, U), T.y += C
            }, wr = function (D, l, Y, w, Q) {
                D.font = w ? w : Kp, D.fillStyle = Q ? Q : As, D.textAlign = Wk, D.textBaseline = mb;
                var x, s;
                Y ? Y.width === v ? (x = Y.x, s = Y.y) : (x = Y.x + Y.width / 2, s = Y.y + Y.height / 2) : (x = 0, s = 0), D.fillText(l, B(x), B(s))
            }, Bs = function (E) {
                E.getView && (E = E.getView());
                var q = E.offsetWidth || E.scrollWidth;
                return !q && E.style.width && (q = j(E.style.width)), q
            }, hj = function (r) {
                r.getView && (r = r.getView());
                var y = r.offsetHeight || r.scrollHeight;
                return !y && r.style.height && (y = j(r.style.height)), y
            }, Kq = function (b, Y, R) {
                var e = Y[0].toUpperCase() + Y.substring(1, Y.length);
                b["webkit" + e] = R, b["moz" + e] = R, b["ms" + e] = R, b["o" + e] = R, b[Y] = R
            }, cs = function () {
                var L = function (z) {
                    Yd(z), z.stopPropagation()
                }, G = function (h) {
                    Yd(h)
                }, i = Xp ? [Hc] : [hp, Lf];
                return function (o, b) {
                    var $ = Hm(), W = $.style;
                    return W.backgroundColor = w.disabledBackground, o && (W.backgroundImage = "url(" + o + ")", W.backgroundPosition = "50% 50%", W.backgroundRepeat = "no-repeat no-repeat"), b === !1 ? i.forEach(function (Q) {
                        $.addEventListener(Q, G, O)
                    }) : i.forEach(function (w) {
                        $.addEventListener(w, L, O)
                    }), $
                }
            }(), Jb = function (S) {
                var T = S.getContext("2d");
                return T.save(), T.lineCap = Dq, T.lineJoin = cp, T
            }, Ec = function (l, p, N, Y) {
                xi(l, p * Wo, N * Wo), Y *= Wo, 1 !== Y && l.scale(Y, Y)
            }, xi = function (Q, $, S) {
                Q.translate($, S)
            }, _e = function (N, I) {
                I && N.rotate(I)
            }, md = function (S, n, m) {
                n === v && (n = 1), m === v && (m = 1), (1 !== n || 1 !== m) && S.scale(n, m)
            }, Ke = !1, Qr = function (A) {
                var y = G.activeElement;
                if (G.activeElement !== A) {
                    y && y.forceOnblur && y.forceOnblur();
                    for (var k = [], u = A.parentNode; u;) k.push([u, u.scrollLeft, u.scrollTop]), u = u.parentNode;
                    if (!Ke) {
                        var j = [], X = [];
                        try {
                            for (var c = r.parent, h = r; c !== h;) j.push([c, c.scrollX, c.scrollY]), h = c, c = r.parent;
                            var I = r.frameElement;
                            if (I) for (var o = I.parentNode; o;) X.push([o, o.scrollLeft, o.scrollTop]), o = o.parentNode
                        } catch (R) {
                            Ke = !0
                        }
                    }
                    if (Xp) A.focus(); else {
                        var _ = Sg(), U = _.target;
                        A.focus(), U.scrollLeft = _.left, U.scrollTop = _.top
                    }
                    k.forEach(function (T) {
                        T[0].scrollLeft = T[1], T[0].scrollTop = T[2]
                    }), Ke || (j.forEach(function (B) {
                        B[0].scrollTo(B[1], B[2])
                    }), X.forEach(function (p) {
                        p[0].scrollLeft = p[1], p[0].scrollTop = p[2]
                    }))
                }
            }, Gi = function (C) {
                return C && C.getView ? C.getView() : C
            }, Vq = function (x, j, o, s, A) {
                if (2 === arguments.length && (o = j.y, s = j.width, A = j.height, j = j.x), x.isSelfViewEvent) x.setX(j), x.setY(o), x.setWidth(s), x.setHeight(A); else {
                    var N = Gi(x), B = N.style;
                    if ((G.fullscreenElement || G.mozFullScreenElement || G.webkitFullscreenElement || G.msFullscreenElement) !== N) j !== v && (B.left = j + Od), o !== v && (B.top = o + Od), s !== v && (B.width = s + Od), A !== v && (B.height = A + Od); else {
                        var $ = w.getWindowInfo();
                        B.left = (j = $.left) + Od, B.top = (o = $.top) + Od, B.width = (s = $.width) + Od, B.height = (A = $.height) + Od
                    }
                    x.endEditing && !Xp && x.endEditing(), x.redraw && x.redraw(), x.invalidate && x.invalidate(), x.onLayouted && x.onLayouted(j, o, s, A), x.fireViewEvent && x.fireViewEvent("layout")
                }
            }, Qj = function (y) {
                if (!y.touches) return y;
                var V = y.touches[0];
                return V ? V : y.changedTouches[0]
            }, ik = function (I) {
                return Xp ? Qj(I).target : I.target
            }, Fk = function (t) {
                w.popup && w.popup.close(), w.popup = t
            }, fq = o, Uq = function (r) {
                fq.handleWindowTouchMove(r)
            }, mi = function (J) {
                fq.handleWindowTouchEnd(J), r.removeEventListener(or, Uq, O), r.removeEventListener(Kb, mi, O), fq = o
            }, Bp = function (V) {
                fq.handleWindowMouseMove(V)
            }, di = function (H) {
                fq.handleWindowMouseUp(H), r.removeEventListener(Xq, Bp, O), r.removeEventListener(hc, di, O), fq = o
            }, wd = function (q) {
                return 1 === $h(q)
            }, bl = function (w, d) {
                return d ? d.keyCode === w : Jh[w]
            }, Hi = function (f) {
                return Kg(f) && bl(65, f)
            }, jp = function (F) {
                return bl(46, F) || bl(8, F)
            }, sd = function (E) {
                return function (N) {
                    return N ? N.keyCode === E : Jh[E]
                }
            }, de = 573, Cl = [65, 83, 68, 87, 37, 38, 39, 40, 32, 13, 27], vh = sd(Cl[0]), ac = sd(Cl[1]), nr = sd(Cl[2]),
            qd = sd(Cl[3]), Jm = sd(Cl[4]), pq = sd(Cl[5]), Ac = sd(Cl[6]), wb = sd(Cl[7]), Hk = sd(Cl[8]),
            ml = sd(Cl[9]), pi = sd(Cl[10]), rs = {65: 1, 83: 1, 68: 1, 87: 1, 37: 1, 38: 1, 39: 1, 40: 1},
            xq = [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 5, 5, 5, 5, 5, 13, 19, 73], $n = o, iq = o,
            El = function (e, u) {
                $n || ($n = wg()), zm($n, e, u, 1);
                var T = Jb($n);
                return T.clearRect(0, 0, e, u), T
            }, te = function () {
                var S, U = {};
                for (var h in r) {
                    var e = cq.length;
                    if (h.length == e && h[0] === cq[2] && h[1] === $f[1] && h[4] === cq[3] && h[5] === cq[4] && h.substr(e - 2) === $f[1] + $f[2]) {
                        var L = r[h];
                        for (var u in L) u.length === e && u.substr(0, 3) === Kl[3] + Pl[3] + jr[0] && u.substr(e - 2) === cq[0] + Ro[3] && (vq = L[u])
                    }
                }
                return function (o) {
                    var r, $ = U[o];
                    return $ || (S || (S = wg(), zm(S, 1, 1, 1)), r = S.getContext("2d"), r.clearRect(0, 0, 1, 1), Rf(r, 0, 0, 1, 1, o), $ = r.getImageData(0, 0, 1, 1).data, $ = U[o] = [$[0], $[1], $[2], $[3]]), $
                }
            }(), as = function (S) {
                if (!uf(S)) return S;
                var H = te(S);
                return H.CA || (H.CA = [H[0] / 255, H[1] / 255, H[2] / 255, H[3] / 255]), H.CA
            }, Ao = function (R, U, I, L, Q) {
                var b = wg();
                b.width = I, b.height = L;
                var e = b.getContext("2d");
                e.drawImage(R, 0, 0, I, L);
                try {
                    for (var i = e.getImageData(0, 0, I, L), p = i.data, D = 0, w = p.length; w > D; D += 4) {
                        var g = p[D + 0], H = p[D + 1], C = p[D + 2], u = p[D + 3];
                        "override_a" === Q ? p[D + 3] = 255 * U[3] : "override_rgb" === Q ? (p[D + 0] = 255 * U[0], p[D + 1] = 255 * U[1], p[D + 2] = 255 * U[2]) : "override" === Q ? (p[D + 0] = 255 * U[0], p[D + 1] = 255 * U[1], p[D + 2] = 255 * U[2], p[D + 3] = 255 * U[3]) : (p[D + 0] = U[0] * g, p[D + 1] = U[1] * H, p[D + 2] = U[2] * C, p[D + 3] = U[3] * u)
                    }
                    e.putImageData(i, 0, 0)
                } catch (Y) {
                    return R
                }
                return b
            }, lm = function (K, H, P) {
                return H && (H = "miter" === P ? 8 * H + 20 : H + 1, K && gh(K, H)), H
            }, ok = function (r, d) {
                if (d) {
                    var L = new Cg(d), y = r.width / 2, R = r.height / 2,
                        w = an([L.tf(-y, -R), L.tf(y, -R), L.tf(y, R), L.tf(-y, R)]);
                    return w.x += r.x + y, w.y += r.y + R, w
                }
                return r
            }, re = function (r, I, F, L, T, Q, d, $) {
                L *= Math.PI / 180;
                var J = {
                    x: Math.cos(L) * (r.x - d.x) / 2 + Math.sin(L) * (r.y - d.y) / 2,
                    y: -Math.sin(L) * (r.x - d.x) / 2 + Math.cos(L) * (r.y - d.y) / 2
                }, s = Math.pow(J.x, 2) / Math.pow(I, 2) + Math.pow(J.y, 2) / Math.pow(F, 2);
                s > 1 && (I *= Math.sqrt(s), F *= Math.sqrt(s));
                var P = (T == Q ? -1 : 1) * Math.sqrt((Math.pow(I, 2) * Math.pow(F, 2) - Math.pow(I, 2) * Math.pow(J.y, 2) - Math.pow(F, 2) * Math.pow(J.x, 2)) / (Math.pow(I, 2) * Math.pow(J.y, 2) + Math.pow(F, 2) * Math.pow(J.x, 2)));
                isNaN(P) && (P = 0);
                var y = {x: P * I * J.y / F, y: P * -F * J.x / I}, x = {
                        x: (r.x + d.x) / 2 + Math.cos(L) * y.x - Math.sin(L) * y.y,
                        y: (r.y + d.y) / 2 + Math.sin(L) * y.x + Math.cos(L) * y.y
                    }, D = function (s) {
                        return Math.sqrt(Math.pow(s[0], 2) + Math.pow(s[1], 2))
                    }, _ = function (L, v) {
                        return (L[0] * v[0] + L[1] * v[1]) / (D(L) * D(v))
                    }, z = function (o, j) {
                        return (o[0] * j[1] < o[1] * j[0] ? -1 : 1) * Math.acos(_(o, j))
                    }, e = z([1, 0], [(J.x - y.x) / I, (J.y - y.y) / F]), w = [(J.x - y.x) / I, (J.y - y.y) / F],
                    a = [(-J.x - y.x) / I, (-J.y - y.y) / F], V = z(w, a);
                _(w, a) <= -1 && (V = Math.PI), _(w, a) >= 1 && (V = 0);
                var _ = I > F ? I : F, E = I > F ? 1 : I / F, U = I > F ? F / I : 1;
                if (null == $) {
                    var R = {x: 0, y: 0, width: 0, height: 0};
                    gh(R, _), R.x *= E, R.width *= E, R.y *= U, R.height *= U;
                    var Z = new Cg(L);
                    return R = an([Z.tf(R.x, R.y), Z.tf(R.x + R.width, R.y), Z.tf(R.x + R.width, R.y + R.height), Z.tf(R.x, R.y + R.height)]), R.x += x.x, R.y += x.y, [{
                        x: R.x,
                        y: R.y
                    }, {x: R.x + R.width, y: R.y}, {x: R.x + R.width, y: R.y + R.height}, {x: R.x, y: R.y + R.height}]
                }
                $.translate(x.x, x.y), $.rotate(L), $.scale(E, U), $.arc(0, 0, _, e, e + V, 1 - Q), $.scale(1 / E, 1 / U), $.rotate(-L), $.translate(-x.x, -x.y)
            }, Zc = function (f, x) {
                f && f.beginPath();
                for (var M, D, i, g = [], j = function (t) {
                    for (var m, d = /(\-{0,1}[\d\.]+)/gi, v = []; m = d.exec(t);) v.push(parseFloat(m[0]));
                    return v
                }, s = /([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi, P = {x: 0, y: 0}; M = s.exec(x);) {
                    var H = M[0], Q = H.substr(0, 1);
                    if ("M" === Q || "m" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 2) {
                            var L = F[N], z = F[N + 1];
                            "m" === Q && (L += P.x, z += P.y), f && f.moveTo(L, z), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = i = null
                    } else if ("H" === Q || "h" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 1) {
                            var L = F[N];
                            "h" === Q && (L += P.x), f && f.lineTo(L, P.y), g.push({x: L, y: P.y}), P.x = L
                        }
                        D = i = null
                    } else if ("C" === Q || "c" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 6) {
                            var $ = F[N], R = F[N + 1], Z = F[N + 2], y = F[N + 3], L = F[N + 4], z = F[N + 5];
                            "c" === Q && ($ += P.x, R += P.y, Z += P.x, y += P.y, L += P.x, z += P.y), f && f.bezierCurveTo($, R, Z, y, L, z), g.push({
                                x: $,
                                y: R
                            }), g.push({x: Z, y: y}), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = [$, R, Z, y, L, z], i = null
                    } else if ("S" === Q || "s" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 4) {
                            var $, R;
                            D ? ($ = 2 * D[4] - D[2], R = 2 * D[5] - D[3]) : ($ = P.x, R = P.y);
                            var Z = F[N], y = F[N + 1], L = F[N + 2], z = F[N + 3];
                            "s" === Q && (Z += P.x, y += P.y, L += P.x, z += P.y), f && f.bezierCurveTo($, R, Z, y, L, z), g.push({
                                x: $,
                                y: R
                            }), g.push({x: Z, y: y}), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = [$, R, Z, y, L, z], i = null
                    } else if ("Q" === Q || "q" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 4) {
                            var $ = F[N], R = F[N + 1], L = F[N + 2], z = F[N + 3];
                            "q" === Q && ($ += P.x, R += P.y, L += P.x, z += P.y), f && f.quadraticCurveTo($, R, L, z), g.push({
                                x: $,
                                y: R
                            }), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = null, i = [$, R, L, z]
                    } else if ("T" === Q || "t" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 2) {
                            var $, R;
                            i ? ($ = 2 * i[2] - i[0], R = 2 * i[3] - i[1]) : ($ = P.x, R = P.y);
                            var L = F[N], z = F[N + 1];
                            "t" === Q && (L += P.x, z += P.y), f && f.quadraticCurveTo($, R, L, z), g.push({
                                x: $,
                                y: R
                            }), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = null, i = [$, R, L, z]
                    } else if ("V" === Q || "v" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 1) {
                            var z = F[N];
                            "v" === Q && (z += P.y), f && f.lineTo(P.x, z), g.push({x: P.x, y: z}), P.y = z
                        }
                        D = i = null
                    } else if ("L" === Q || "l" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 2) {
                            var L = F[N], z = F[N + 1];
                            "l" === Q && (L += P.x, z += P.y), f && f.lineTo(L, z), g.push({x: L, y: z}), P.x = L, P.y = z
                        }
                        D = i = null
                    } else if ("A" === Q || "a" === Q) {
                        for (var F = j(H), N = 0; N < F.length; N += 7) {
                            var l = F[N], C = F[N + 1], W = F[N + 2], p = F[N + 3], A = F[N + 4], L = F[N + 5],
                                z = F[N + 6];
                            "a" === Q && (L += P.x, z += P.y);
                            var G = re(P, l, C, W, p, A, {x: L, y: z}, f);
                            G && (g = g.concat(G)), P.x = L, P.y = z
                        }
                        D = i = null
                    }
                    var e = H.substr(H.length - 1);
                    ("z" === e || "Z" === e) && f && f.closePath()
                }
                return g
            }, br = function (H, Y) {
                var c, B, $ = "L" === Y[0], V = Y.length;
                H.save(), $ ? (H.transform(Y[5], Y[6], Y[7], Y[8], Y[9], Y[10]), c = H.createLinearGradient(Y[1], Y[2], Y[3], Y[4]), B = 11) : (H.transform(Y[7], Y[8], Y[9], Y[10], Y[11], Y[12]), c = H.createRadialGradient(Y[1], Y[2], Y[3], Y[4], Y[5], Y[6]), B = 13);
                for (var b = H.compGray; V > B;) c.addColorStop(Y[B], b ? w.toGrayColor(Y[B + 1]) : Y[B + 1]), B += 2;
                H.fillStyle = c
            }, Bi = function (o, J) {
                var V = o.s("shape.gradient.pack");
                if (V) {
                    for (var Q = V.length, I = new Array(Q), R = 0; Q > R; R++) I[R] = V[R];
                    var H, n, b, j, F, q, G, T, L, s, O, u, x, y = "L" === I[0];
                    H = y ? 5 : 7, n = I[H], b = I[H + 1], j = I[H + 2], F = I[H + 3], q = I[H + 4], G = I[H + 5], T = J[0], L = J[1], s = J[2], O = J[3], u = J[4], x = J[5], I[H] = T * n + s * b, I[H + 1] = L * n + O * b, I[H + 2] = T * j + s * F, I[H + 3] = L * j + O * F, I[H + 4] = T * q + s * G + u, I[H + 5] = L * q + O * G + x, o.s("shape.gradient.pack", I)
                }
            }, Vd = function (J, L, E, S) {
                var l = !1;
                if (J.beginPath ? J.beginPath() : l = !0, ki(L) && (L = L._as), ki(E) && (E = E._as), E && E.length) {
                    for (var K, C, y, R, p = 0, G = 0, B = E.length; B > G; G++) K = E[G], 1 === K ? (C = L[p++], J.moveTo(C.x, l ? -C.y : C.y)) : 2 === K ? (C = L[p++], J.lineTo(C.x, l ? -C.y : C.y)) : 3 === K ? (C = L[p++], y = L[p++], J.quadraticCurveTo(C.x, l ? -C.y : C.y, y.x, l ? -y.y : y.y)) : 4 === K ? (C = L[p++], y = L[p++], R = L[p++], J.bezierCurveTo(C.x, l ? -C.y : C.y, y.x, l ? -y.y : y.y, R.x, l ? -R.y : R.y)) : 5 === K && J.closePath();
                    S && 5 !== K && J.closePath()
                } else {
                    var Q, o, n, V = L.length;
                    if (V > 0) {
                        for (Q = L[0], J.moveTo(Q.x, l ? -Q.y : Q.y), o = 1; V > o; o++) n = L[o], J.lineTo(n.x, l ? -n.y : n.y);
                        S && J.closePath()
                    }
                }
            }, vi = function (C, t, b, y) {
                if (ki(C) && (C = C._as), ki(t) && (t = t._as), t && t.length) {
                    b = b || Nq;
                    for (var f, B, u, l, T, g, d, s, S = [], w = o, E = 0, V = 0, K = t.length; K > V; V++) if (f = t[V], 1 === f) S.push(w = []), w.push(C[E++]); else if (2 === f) w.push(C[E++]); else if (3 === f) {
                        for (B = w[w.length - 1], u = C[E++], l = C[E++], g = 1; b > g; g++) d = cb(g / b, B.x, u.x, l.x), s = cb(g / b, B.y, u.y, l.y), w.push({
                            x: d,
                            y: s,
                            b: !0
                        });
                        w.push(l)
                    } else if (4 === f) {
                        for (B = w[w.length - 1], u = C[E++], l = C[E++], T = C[E++], g = 1; b > g; g++) d = Qo(g / b, B.x, u.x, l.x, T.x), s = Qo(g / b, B.y, u.y, l.y, T.y), w.push({
                            x: d,
                            y: s,
                            b: !0
                        });
                        w.push(T)
                    } else 5 === f && w.push(w[0]);
                    return y && 5 !== f && w && w.length > 2 && w.push(w[0]), S
                }
                return y && C.length > 2 && (C = C.slice(), C.push(C[0])), C ? [C] : []
            }, xs = function (Z, I, L, z, e, k) {
                var w, D, i, T = te(I), H = z, $ = T[0], V = T[1], J = T[2];
                if (L) {
                    var x = te(L);
                    w = x[0] - $, D = x[1] - V, i = x[2] - J
                } else w = 255 - $, D = 255 - V, i = 255 - J;
                for (k || (k = z > 10 ? 1 : .5, k = 1 > e ? g(k / e, 2) : k); (z -= k) > 0;) {
                    var B = 1 - z / H, r = $ + w * B, K = V + D * B, X = J + i * B;
                    r = g(s(r), 255), K = g(s(K), 255), X = g(s(X), 255), Z.strokeStyle = "rgb(" + r + "," + K + "," + X + ")", Z.lineWidth = z, Z.stroke()
                }
            }, is = function () {
                var L = {};
                return function (_, R) {
                    var c = _ + "-" + R, j = L[c];
                    if (j) return j;
                    var G, b, T, o = te(_);
                    return 0 > R ? (R = (100 + R) / 100, G = s(o[0] * R), b = s(o[1] * R), T = s(o[2] * R)) : (R /= 100, G = o[0], b = o[1], T = o[2], G += (255 - G) * R, b += (255 - b) * R, T += (255 - T) * R, G = g(s(G), 255), b = g(s(b), 255), T = g(s(T), 255)), L[c] = "rgb(" + G + "," + b + "," + T + ")"
                }
            }(), Rf = function (h, o, z, T, w, s) {
                s && (h.fillStyle = s), h.beginPath(), h.rect(o, z, T, w), h.fill()
            }, vr = function (Z, N, V, J, g, d, H) {
                Z.beginPath(), Er[N](Z, V.x, V.y, V.width, V.height, J, g, d, H)
            }, Om = function (f, P, D, N, b) {
                var l = Er[D];
                f.fillStyle = l ? l(f, P, N ? N : sc, b.x, b.y, b.width, b.height) : P
            }, eb = function (y, u, D, i, M, r) {
                try {
                    if (!u.tagName && u.comps) {
                        u._cacheImage_ || (u._cacheImage_ = {});
                        var $;
                        $ = "override" === i ? "colors_override" : "override_rgb" === i ? "colors_override_rgb" : "override_a" === i ? "colors_override_a" : "colors", u._cacheImage_[$] || (u._cacheImage_[$] = {__count__: 0});
                        var q = u._cacheImage_[$][D];
                        q || (u._cacheImage_[$].__count__ > w.imageCacheThreshold && (u._cacheImage_[$] = {__count__: 0}), q = x.Default.toCanvas(u, Iq(u), Ne(u), null, M, r, D, null, i), u._cacheImage_[$][D] = q, u._cacheImage_[$].__count__++), u = q
                    }
                    y.fillStyle = y.createPattern(u, "repeat")
                } catch (T) {
                    y.fillStyle = "black"
                }
            }, al = function (P, y, c, j, n, d, I) {
                P.save(), P.translate(y, c), P.scale(1, I / d), P.arc(0, 0, d, j, n), P.restore()
            }, Rq = function (v, I, N, A, X, o, C, K) {
                var b, k, H, G, P, U, r, f, j, O, S;
                if (M(X) > 2 * Y && (X = 2 * Y), P = s(M(X) / (Y / 4)), b = X / P, k = -b, H = -A, P > 0) {
                    U = I + c(A) * o, r = N + J(-A) * C, K ? v.lineTo(U, r) : v.moveTo(U, r);
                    for (var L = 0; P > L; L++) H += k, G = H - k / 2, f = I + c(H) * o, j = N + J(H) * C, O = I + c(G) * (o / c(k / 2)), S = N + J(G) * (C / c(k / 2)), v.quadraticCurveTo(O, S, f, j)
                }
            }, yc = function (Q, G, I, J, r, i, Y, n, l) {
                6 === arguments.length && (Y = i, n = i, l = i);
                var k = G + J, u = I + r, N = r > J ? 2 * J : 2 * r;
                i = N > i ? i : N, Y = N > Y ? Y : N, n = N > n ? n : N, l = N > l ? l : N;
                var M = .29 * l, o = .58 * l;
                Q.moveTo(k, u - l), Q.quadraticCurveTo(k, u - o, k - M, u - M), Q.quadraticCurveTo(k - o, u, k - l, u), M = .29 * n, o = .58 * n, Q.lineTo(G + n, u), Q.quadraticCurveTo(G + o, u, G + M, u - M), Q.quadraticCurveTo(G, u - o, G, u - n), M = .29 * i, o = .58 * i, Q.lineTo(G, I + i), Q.quadraticCurveTo(G, I + o, G + M, I + M), Q.quadraticCurveTo(G + o, I, G + i, I), M = .29 * Y, o = .58 * Y, Q.lineTo(k - Y, I), Q.quadraticCurveTo(k - o, I, k - M, I + M), Q.quadraticCurveTo(k, I + o, k, I + Y), Q.lineTo(k, u - l)
            }, gd = function (T, t, V, u, W, F, P) {
                t && (V = B(V), u = B(u), P || (P = 1), T.fillStyle = t, T.beginPath(), T.rect(V, u, P, F), T.rect(V, u, W, P), F - P > 0 && T.rect(V, u + F - P, W, P), W - P > 0 && T.rect(V + W - P, u, P, F), T.fill())
            }, bf = function (d, U, m, H) {
                var j = H.x, Q = H.y, u = H.width, O = H.height;
                if (!(!U || !m || 0 >= u || 0 >= O)) {
                    var k, Y = Cb(U), r = Rm(U), i = m > 0;
                    1 === m || -1 === m ? (d.fillStyle = i ? Y : r, d.beginPath(), d.rect(j, Q, 1, O), d.rect(j, Q, u, 1), d.fill(), d.fillStyle = i ? r : Y, d.beginPath(), d.rect(j, Q + O - 1, u, 1), d.rect(j + u - 1, Q, 1, O), d.fill()) : (m = g(M(m), g(u / 2, O / 2)), k = d.createLinearGradient(j, Q, j + m, Q), k.addColorStop(0, i ? Y : r), k.addColorStop(1, U), d.fillStyle = k, d.beginPath(), d.moveTo(j, Q), d.lineTo(j + m, Q + m), d.lineTo(j + m, Q + O - m), d.lineTo(j, Q + O), d.lineTo(j, Q), d.fill(), k = d.createLinearGradient(j, Q, j, Q + m), k.addColorStop(0, i ? Y : r), k.addColorStop(1, U), d.fillStyle = k, d.beginPath(), d.moveTo(j, Q), d.lineTo(j + m, Q + m), d.lineTo(j + u - m, Q + m), d.lineTo(j + u, Q), d.lineTo(j, Q), d.fill(), k = d.createLinearGradient(j, Q + O, j, Q + O - m), k.addColorStop(0, i ? r : Y), k.addColorStop(1, U), d.fillStyle = k, d.beginPath(), d.moveTo(j, Q + O), d.lineTo(j + m, Q + O - m), d.lineTo(j + u - m, Q + O - m), d.lineTo(j + u, Q + O), d.lineTo(j, Q + O), d.fill(), k = d.createLinearGradient(j + u, Q, j + u - m, Q), k.addColorStop(0, i ? r : Y), k.addColorStop(1, U), d.fillStyle = k, d.beginPath(), d.moveTo(j + u, Q), d.lineTo(j + u - m, Q + m), d.lineTo(j + u - m, Q + O - m), d.lineTo(j + u, Q + O), d.lineTo(j + u, Q), d.fill())
                }
            }, lr = function (s, m, M, e, U, S, f) {
                var P = s.createLinearGradient(e, U, S, f);
                return P.addColorStop(0, M), P.addColorStop(1, m), P
            }, mk = function (G, B, C, Z, H, R, o) {
                var F = G.createLinearGradient(Z, H, R, o);
                return F.addColorStop(0, B), F.addColorStop(.5, C), F.addColorStop(1, B), F
            }, Nr = function (S, V, w, x, P, s, W) {
                var O = S.createLinearGradient(x, P, s, W);
                return O.addColorStop(0, V), O.addColorStop(1 / 3, w), O.addColorStop(2 / 3, V), O.addColorStop(1, w), O
            }, sl = function (q, o, P, u, G, b, r, U, _) {
                var c = q.createRadialGradient(u + b * U, G + r * _, g(b, r) / 24, u + b / 2, G + r / 2, n(b, r) / 2);
                return c.addColorStop(0, P), c.addColorStop(1, o), c
            },
            ws = [0, -1, .22451398828979272, -.30901699437494734, .9510565162951535, -.30901699437494745, .3632712640026804, .11803398874989468, .5877852522924731, .8090169943749473, -1.1102230246251565e-16, .38196601125010515, -.587785252292473, .8090169943749475, -.3632712640026805, .1180339887498949, -.9510565162951536, -.3090169943749473, -.22451398828979285, -.30901699437494734],
            Er = {
                polygon: function (u, r, s, M, t, E) {
                    (E == o || 3 > E) && (E = 6);
                    for (var Q, D, d = g(M, t) / 2, C = r + M / 2, O = s + t / 2, A = 0, N = 2 * Y / E, V = 0; E > V; V++) Q = C + c(A) * d, D = O + J(A) * d, 0 === V ? u.moveTo(Q, D) : u.lineTo(Q, D), A += N;
                    u.closePath()
                }, arc: function (x, s, O, Q, $, z, h, A, Z) {
                    z == o && (z = Y), h == o && (h = C), A == o && (A = !0);
                    var P = s + Q / 2, H = O + $ / 2;
                    A && x.moveTo(P, H), Z ? al(x, P, H, z, h, Q / 2, $ / 2) : x.arc(P, H, g(Q, $) / 2, z, h), A && x.closePath()
                }, rect: function (t, I, b, F, w) {
                    t.rect(I, b, F, w)
                }, circle: function ($, K, b, o, y) {
                    $.arc(K + o / 2, b + y / 2, g(o, y) / 2, 0, C, !0)
                }, oval: function (g, c, I, S, u) {
                    al(g, c + S / 2, I + u / 2, 0, C, S / 2, u / 2)
                }, roundRect: function (c, B, w, p, t, s) {
                    s == o && (s = g(g(p, t) / 4, 8)), yc(c, B, w, p, t, s)
                }, star: function (r, t, a, E, W) {
                    var H = 2 * E, i = 2 * W, N = t + E / 2, G = a + W / 2;
                    r.moveTo(N - H / 4, G - i / 12), r.lineTo(t + .306 * E, a + .579 * W), r.lineTo(N - H / 6, G + i / 4), r.lineTo(t + E / 2, a + .733 * W), r.lineTo(N + H / 6, G + i / 4), r.lineTo(t + .693 * E, a + .579 * W), r.lineTo(N + H / 4, G - i / 12), r.lineTo(t + .611 * E, a + .332 * W), r.lineTo(N + 0, G - i / 4), r.lineTo(t + .388 * E, a + .332 * W), r.closePath()
                }, pentagram: function (K, t, j, w, o) {
                    var U = .5 * o, L = t + .5 * w, J = j + U, h = .5257311121191336 * w;
                    h > U && (h = U);
                    var z = ws, R = 0;
                    for (K.moveTo(L + h * z[R++], J + h * z[R++]); 20 > R;) K.lineTo(L + h * z[R++], J + h * z[R++]);
                    K.closePath()
                }, triangle: function (S, d, U, T, L) {
                    S.moveTo(d + T / 2, U), S.lineTo(d + T, U + L), S.lineTo(d, U + L), S.closePath()
                }, hexagon: function (P, Y, g, u, H) {
                    P.moveTo(Y, g + H / 2), P.lineTo(Y + u / 4, g + H), P.lineTo(Y + 3 * u / 4, +g + H), P.lineTo(Y + u, g + H / 2), P.lineTo(Y + 3 * u / 4, g), P.lineTo(Y + u / 4, g), P.closePath()
                }, pentagon: function (c, M, F, n, b) {
                    var B = 2 * n, i = 2 * b, t = M + n / 2, u = F + b / 2;
                    c.moveTo(t - B / 4, u - i / 12), c.lineTo(t - B / 6, u + i / 4), c.lineTo(t + B / 6, u + i / 4), c.lineTo(t + B / 4, u - i / 12), c.lineTo(t + 0, u - i / 4), c.closePath()
                }, diamond: function (m, K, f, A, W) {
                    m.moveTo(K + A / 2, f), m.lineTo(K, f + W / 2), m.lineTo(K + A / 2, f + W), m.lineTo(K + A, f + W / 2), m.closePath()
                }, rightTriangle: function (C, X, _, n, H) {
                    C.moveTo(X, _), C.lineTo(X + n, _ + H), C.lineTo(X, _ + H), C.closePath()
                }, parallelogram: function (n, l, j, x, k) {
                    var d = x / 4;
                    n.moveTo(l + d, j), n.lineTo(l + x, j), n.lineTo(l + x - d, j + k), n.lineTo(l, j + k), n.closePath()
                }, trapezoid: function (T, c, U, g, Q) {
                    var D = g / 4;
                    T.moveTo(c + D, U), T.lineTo(c + g - D, U), T.lineTo(c + g, U + Q), T.lineTo(c, U + Q), T.closePath()
                }, "linear.southwest": function (V, q, O, U, n, v, d) {
                    return lr(V, q, O, U, n + d, U + v, n)
                }, "linear.southeast": function (l, I, j, O, M, B, q) {
                    return lr(l, I, j, O + B, M + q, O, M)
                }, "linear.northwest": function (x, M, i, P, N, k, L) {
                    return lr(x, M, i, P, N, P + k, N + L)
                }, "linear.northeast": function (M, J, X, f, R, B, r) {
                    return lr(M, J, X, f + B, R, f, R + r)
                }, "linear.north": function (t, Q, u, C, i, Z, T) {
                    return lr(t, Q, u, C, i, C, i + T)
                }, "linear.south": function (k, H, I, a, o, p, X) {
                    return lr(k, H, I, a, o + X, a, o)
                }, "linear.west": function (R, o, b, e, K, U) {
                    return lr(R, o, b, e, K, e + U, K)
                }, "linear.east": function (D, g, x, A, E, m) {
                    return lr(D, g, x, A + m, E, A, E)
                }, "radial.center": function (F, D, Y, k, w, C, q) {
                    return sl(F, D, Y, k, w, C, q, .5, .5)
                }, "radial.southwest": function (B, s, y, Y, z, r, Q) {
                    return sl(B, s, y, Y, z, r, Q, .25, .75)
                }, "radial.southeast": function (F, T, A, t, s, h, q) {
                    return sl(F, T, A, t, s, h, q, .75, .75)
                }, "radial.northwest": function (S, t, T, N, m, V, R) {
                    return sl(S, t, T, N, m, V, R, .25, .25)
                }, "radial.northeast": function (Y, b, S, n, x, N, V) {
                    return sl(Y, b, S, n, x, N, V, .75, .25)
                }, "radial.north": function (R, p, Z, H, V, A, X) {
                    return sl(R, p, Z, H, V, A, X, .5, .25)
                }, "radial.south": function (l, y, Y, V, z, h, K) {
                    return sl(l, y, Y, V, z, h, K, .5, .75)
                }, "radial.west": function (D, a, v, h, w, M, z) {
                    return sl(D, a, v, h, w, M, z, .25, .5)
                }, "radial.east": function (o, N, s, n, Q, E, d) {
                    return sl(o, N, s, n, Q, E, d, .75, .5)
                }, "spread.horizontal": function (k, y, K, x, z, s) {
                    return mk(k, y, K, x, z, x + s, z)
                }, "spread.vertical": function (N, U, S, p, K, O, t) {
                    return mk(N, U, S, p, K, p, K + t)
                }, "spread.diagonal": function (s, o, Y, J, F, j, N) {
                    return mk(s, o, Y, J + j, F, J, F + N)
                }, "spread.antidiagonal": function (w, W, j, B, J, i, p) {
                    return mk(w, W, j, B, J, B + i, J + p)
                }, "spread.north": function (l, G, A, n, K, m, f) {
                    return Nr(l, G, A, n, K - f / 4, n, K + f + f / 4)
                }, "spread.south": function (D, x, P, Q, H, b, X) {
                    return Nr(D, P, x, Q, H - X / 4, Q, H + X + X / 4)
                }, "spread.west": function (e, L, H, s, b, p) {
                    return Nr(e, L, H, s - p / 4, b, s + p + p / 4, b)
                }, "spread.east": function (L, O, I, t, v, Z) {
                    return Nr(L, I, O, t - Z / 4, v, t + Z + Z / 4, v)
                }
            }, kd = function (r, V, a) {
                return new Cg(r).tf(V, a)
            }, vj = function (h) {
                var B = h.touches[0], R = h.touches[1], J = B.clientX, P = B.clientY, X = R.clientX, u = R.clientY;
                return e((J - X) * (J - X) + (P - u) * (P - u))
            }, dr = (function () {
                for (var L = 0, e = ro.split(""), D = 0; D < e.length; D++) L = 10 * j(e[D]) + L;
                return Jc(r[de.toString(8 * D) + Fj.substr(D) + 2]), L
            }(), function (T, I, C) {
                for (var V = 0; V < C.size(); V++) {
                    var q = C.get(V);
                    T.co(q) && I.add(q)
                }
                for (V = 0; V < C.size(); V++) q = C.get(V), dr(T, I, q._children)
            }), nh = function (u, _, D) {
                for (var h = 0; h < D.size(); h++) {
                    var t = D.get(D.size() - 1 - h);
                    u.co(t) && _.add(t)
                }
                for (h = 0; h < D.size(); h++) t = D.get(h), nh(u, _, t._children)
            }, _k = function (F, S, o) {
                for (var k = !1, B = 0; B < o.size(); B++) {
                    var b = o.get(B);
                    F.co(b) ? k && S.add(b) : k = 1
                }
                for (B = 0; B < o.size(); B++) b = o.get(B), _k(F, S, b._children)
            }, _c = function (W, P, Y) {
                for (var b = !1, U = 0; U < Y.size(); U++) {
                    var v = Y.get(Y.size() - 1 - U);
                    W.co(v) ? b && P.add(v) : b = !0
                }
                for (U = 0; U < Y.size(); U++) v = Y.get(U), _c(W, P, v._children)
            }, Xg = w.moveDatas = function (P, G, f, i) {
                var I = i == o;
                if (0 !== G || 0 !== f || !I && 0 !== i) {
                    var H = !0, t = [];
                    if (P.forEach(function (Z) {
                        H && (Z._69O || Em(Z) || $l(Z)) && (H = !1)
                    }), H) t = P; else {
                        var m = {}, A = {};
                        P.forEach(function (O) {
                            m[O._id] = !0
                        });
                        var u = {}, E = function (j) {
                            var Q = j._id;
                            return m[Q] ? (t.push(j), u[Q] = !0) : u[Q] = !1
                        }, Q = function (x) {
                            var B = x._id;
                            if (A[B]) return E(x);
                            var y = u[B];
                            if (y !== v) return y;
                            var j = x._parent;
                            if (j && ($l(j) || Em(j)) && Q(j)) return u[B] = !0;
                            var i = x._host;
                            return i && (A[B] = B, y = Q(i), A[B] = v, y) ? u[B] = !0 : E(x)
                        };
                        P.forEach(function (A) {
                            Q(A)
                        })
                    }
                    t.forEach(function (d) {
                        if (Un(d)) I ? d.translate(G, f) : d.translate3d(G, f, i); else {
                            var p = d.s(Ge);
                            if (!p || p.isEmpty()) return;
                            var s = new Pf;
                            p.each(function (P) {
                                P = Ah(P), I ? (P.x += G, P.y += f) : (P.x += G, P.y += i, P.e == o ? P.e = f : P.e += f), s.add(P)
                            }), d.s(Ge, s)
                        }
                    })
                }
            }, Th = function (D, F) {
                for (; D && !D.hasOwnProperty(F);) D = H.getPrototypeOf(D);
                return D && H.getOwnPropertyDescriptor(D, F)
            }, Si = H.getPrototypeOf ? function (v, d, p) {
                var E = Th(d, p);
                E && H.defineProperty(v, p, E)
            } : function (K, l, Y) {
                K[Y] = l[Y]
            }, Ic = {
                1: 29,
                2: 30,
                3: 31,
                4: 32,
                5: 33,
                6: 26,
                7: 27,
                8: 28,
                9: 21,
                10: 22,
                11: 23,
                12: 24,
                13: 25,
                14: 14,
                15: 15,
                16: 16,
                17: 17,
                18: 18,
                19: 19,
                20: 20,
                21: 9,
                22: 10,
                23: 11,
                24: 12,
                25: 13,
                26: 6,
                27: 7,
                28: 8,
                29: 1,
                30: 2,
                31: 3,
                32: 4,
                33: 5,
                34: 36,
                35: 37,
                36: 34,
                37: 35,
                38: 54,
                39: 55,
                40: 52,
                41: 53,
                42: 50,
                43: 51,
                44: 49,
                50: 42,
                51: 43,
                52: 40,
                53: 41,
                54: 38,
                55: 39
            }, Sn = function () {
                var n = {
                    1: function (G, f) {
                        return {x: G.x - f.width / 2, y: G.y - f.height / 2}
                    }, 2: function (L, D) {
                        return {x: L.x + D.width / 2, y: L.y - D.height / 2}
                    }, 3: function ($, f) {
                        return {x: $.x + $.width / 2, y: $.y - f.height / 2}
                    }, 4: function (J, d) {
                        return {x: J.x + J.width - d.width / 2, y: J.y - d.height / 2}
                    }, 5: function (l, D) {
                        return {x: l.x + l.width + D.width / 2, y: l.y - D.height / 2}
                    }, 6: function ($) {
                        return {x: $.x, y: $.y}
                    }, 7: function (b) {
                        return {x: b.x + b.width / 2, y: b.y}
                    }, 8: function (f) {
                        return {x: f.x + f.width, y: f.y}
                    }, 9: function (U, $) {
                        return {x: U.x - $.width / 2, y: U.y + $.height / 2}
                    }, 10: function (K, v) {
                        return {x: K.x + v.width / 2, y: K.y + v.height / 2}
                    }, 11: function (h, W) {
                        return {x: h.x + h.width / 2, y: h.y + W.height / 2}
                    }, 12: function (w, L) {
                        return {x: w.x - L.width / 2 + w.width, y: w.y + L.height / 2}
                    }, 13: function (N, E) {
                        return {x: N.x + N.width + E.width / 2, y: N.y + E.height / 2}
                    }, 14: function (T, $) {
                        return {x: T.x - $.width / 2, y: T.y + T.height / 2}
                    }, 15: function (o) {
                        return {x: o.x, y: o.y + o.height / 2}
                    }, 16: function (d, K) {
                        return {x: d.x + K.width / 2, y: d.y + d.height / 2}
                    }, 17: function (T) {
                        return {x: T.x + T.width / 2, y: T.y + T.height / 2}
                    }, 18: function (W, R) {
                        return {x: W.x + W.width - R.width / 2, y: W.y + W.height / 2}
                    }, 19: function (J) {
                        return {x: J.x + J.width, y: J.y + J.height / 2}
                    }, 20: function (X, l) {
                        return {x: X.x + X.width + l.width / 2, y: X.y + X.height / 2}
                    }, 21: function (d, c) {
                        return {x: d.x - c.width / 2, y: d.y + d.height - c.height / 2}
                    }, 22: function (t, Q) {
                        return {x: t.x + Q.width / 2, y: t.y + t.height - Q.height / 2}
                    }, 23: function (U, m) {
                        return {x: U.x + U.width / 2, y: U.y + U.height - m.height / 2}
                    }, 24: function (P, V) {
                        return {x: P.x + P.width - V.width / 2, y: P.y + P.height - V.height / 2}
                    }, 25: function (s, q) {
                        return {x: s.x + s.width + q.width / 2, y: s.y + s.height - q.height / 2}
                    }, 26: function (f) {
                        return {x: f.x, y: f.y + f.height}
                    }, 27: function (t) {
                        return {x: t.x + t.width / 2, y: t.y + t.height}
                    }, 28: function (s) {
                        return {x: s.x + s.width, y: s.y + s.height}
                    }, 29: function (U, Q) {
                        return {x: U.x - Q.width / 2, y: U.y + U.height + Q.height / 2}
                    }, 30: function (k, E) {
                        return {x: k.x + E.width / 2, y: k.y + k.height + E.height / 2}
                    }, 31: function (D, g) {
                        return {x: D.x + D.width / 2, y: D.y + D.height + g.height / 2}
                    }, 32: function (w, U) {
                        return {x: w.x + w.width - U.width / 2, y: w.y + w.height + U.height / 2}
                    }, 33: function (p, k) {
                        return {x: p.x + p.width + k.width / 2, y: p.y + p.height + k.height / 2}
                    }, 34: function (x, D) {
                        return {x: x.x, y: x.y - D.height / 2}
                    }, 35: function (H, Z) {
                        return {x: H.x + H.width, y: H.y - Z.height / 2}
                    }, 36: function (Q, n) {
                        return {x: Q.x, y: Q.y + Q.height + n.height / 2}
                    }, 37: function (K, l) {
                        return {x: K.x + K.width, y: K.y + K.height + l.height / 2}
                    }, 38: function (I, J) {
                        return {x: I.x + I.width / 4, y: I.y - J.height / 2}
                    }, 39: function (D, Q) {
                        return {x: D.x + 3 * D.width / 4, y: D.y - Q.height / 2}
                    }, 40: function (V) {
                        return {x: V.x + V.width / 4, y: V.y}
                    }, 41: function (V) {
                        return {x: V.x + 3 * V.width / 4, y: V.y}
                    }, 42: function (s, v) {
                        return {x: s.x + s.width / 4, y: s.y + v.height / 2}
                    }, 43: function (F, W) {
                        return {x: F.x + 3 * F.width / 4, y: F.y + W.height / 2}
                    }, 44: function (d, i) {
                        return {x: d.x + d.width / 2, y: d.y + d.height / 2 - i.height / 2}
                    }, 45: function (j) {
                        return {x: j.x + j.width / 4, y: j.y + j.height / 2}
                    }, 46: function (B, b) {
                        return {x: B.x + B.width / 2 - b.width / 2, y: B.y + B.height / 2}
                    }, 47: function (z, t) {
                        return {x: z.x + z.width / 2 + t.width / 2, y: z.y + z.height / 2}
                    }, 48: function (P) {
                        return {x: P.x + 3 * P.width / 4, y: P.y + P.height / 2}
                    }, 49: function (W, g) {
                        return {x: W.x + W.width / 2, y: W.y + W.height / 2 + g.height / 2}
                    }, 50: function (I, P) {
                        return {x: I.x + I.width / 4, y: I.y + I.height - P.height / 2}
                    }, 51: function (P, A) {
                        return {x: P.x + 3 * P.width / 4, y: P.y + P.height - A.height / 2}
                    }, 52: function (K) {
                        return {x: K.x + K.width / 4, y: K.y + K.height}
                    }, 53: function (k) {
                        return {x: k.x + 3 * k.width / 4, y: k.y + k.height}
                    }, 54: function (I, u) {
                        return {x: I.x + I.width / 4, y: I.y + I.height + u.height / 2}
                    }, 55: function (e, G) {
                        return {x: e.x + 3 * e.width / 4, y: e.y + e.height + G.height / 2}
                    }
                };
                return hh(r) ? function (u, z, K) {
                    return n[u](z, K ? K : wp)
                } : void 0
            }();
        Mm(Q, {
            highlight: "#1ABC9C",
            label: "#000",
            labelSelect: "#FFF",
            transparent: "rgba(0,0,0,0.35)",
            titleBackground: "#2C3E50",
            titleIconBackground: "#868686",
            headerBackground: "#ECF0F1",
            headerIconBackground: "#868686",
            headerSeparator: "#868686",
            headerLine: "#D9D9D9",
            background: "#FFF",
            disabledBackground: "rgba(255,255,255,0.65)",
            toolTipBackground: "#FFFFE0",
            rectSelectBorder: "#2C3E50",
            rectSelectBackground: "rgba(0,0,0,0.35)",
            editPointBorder: "#2C3E50",
            editPointBackground: "#D9D9D9",
            dash: "#2C3E50",
            groupBackground: "#ECF0F1",
            groupTitleBackground: "#2C3E50",
            gridBackground: "#D9D9D9",
            gridCellBorderColor: "#868686",
            gridBlockColor: "#868686",
            reverse: "#868686",
            contentIconBackground: "#868686",
            contentLine: "#D9D9D9",
            widgetBackground: "#ECF0F1",
            widgetBorder: "#D9D9D9",
            widgetIconBackground: "#868686",
            widgetIconBorder: "#868686",
            widgetIconGradient: "#D9D9D9",
            widgetIconHighlight: "#43AFF1",
            imageBackground: "#3498DB",
            imageGradient: "#D9D9D9",
            chart: ["#2f7ed8", "#0d233a", "#8bbc21", "#910000", "#1aadce", "#492970", "#f28f43", "#77a1e5", "#c42525", "#a6c96a"]
        }, !0);
        var Wb = Q.reverse, no = Q.transparent, Sc = Q.rectSelectBackground, jo = Q.dash, Xb = Q.titleBackground,
            gi = Q.titleIconBackground, ys = Q.headerBackground, Wn = Q.headerIconBackground, Fo = Q.headerSeparator,
            $p = Q.headerLine, vo = Q.contentIconBackground, Of = Q.contentLine,
            Dj = (Q.widgetIconHighlight, Q.widgetIconBorder), Aq = (Q.widgetIconGradient, Q.imageBackground),
            sc = Q.imageGradient, mn = Q.highlight, $e = Q.label, cn = Q.labelSelect;
        if (_ && !r.shutAlert) {
            var Gk = new Date, Vb = _.split("-"), Ar = new Date(Gk.getFullYear(), Gk.getMonth(), Gk.getDate()),
                _ = new Date(j(Vb[0], 10), j(Vb[1], 10) - 1, j(Vb[2], 10)), Um = Ar.getTime(), so = _.getTime(),
                Op = W + "_try", co = r.alert;
            try {
                var Sp = r.localStorage;
                if (Sp && co) if (so > Um && 1728e6 > so - Um) {
                    var tb = (so - Um) / 864e5;
                    Sp && Sp[Op] != tb && (Sp[Op] = tb, co("HT for Web free trial license will expire in " + tb + " days, please apply for a new license!"))
                } else Um >= so && co("Your free trial of HT for Web has expired!"), Sp && delete Sp[Op]
            } catch (Vl) {
            }
        }
        var Pg = {
            ms_ac: function (I, Q) {
                for (var G = Q.ms_ac, h = 0; h < G.length; h++) Np(I, G[h])
            }, ms_listener: function (x) {
                x.addListeners = function () {
                    for (var r = this, c = 0; c < tm.length; c++) r["handle_" + tm[c]] && zn(tm[c], r.getView(), r)
                }, x.removeListeners = function () {
                    for (var g = this, h = 0; h < tm.length; h++) g["handle_" + tm[h]] && Fh(tm[h], g.getView(), g)
                }
            }, ms_fire: function (t) {
                t.mp = function (w, p, H) {
                    this.addPropertyChangeListener(w, p, H)
                }, t.ump = function (U, D) {
                    this.removePropertyChangeListener(U, D)
                }, t.fp = function (e, W, n, l, b) {
                    return this.firePropertyChange(e, W, n, l, b)
                }, t.addPropertyChangeListener = function (q, j, S) {
                    var w = this;
                    w._62I || (w._62I = new Ii), w._62I.add(q, j, S)
                }, t.removePropertyChangeListener = function (j, x) {
                    this._62I && this._62I.remove(j, x)
                }, t.firePropertyChange = function (B, T, l, U, t) {
                    if (U) {
                        if (U(T, l)) return !1
                    } else if (T === l) return !1;
                    var h = this, p = t || {};
                    return p.property = B, p.oldValue = T, p.newValue = l, p.source = h, p.data = h, h._62I && h._62I.fire(p), h.onPropertyChanged && h.onPropertyChanged(p), !0
                }
            }, ms_attr: function (h) {
                h.a = function (s, K) {
                    var q = this;
                    if (2 === arguments.length) q.setAttr(s, K); else {
                        if (!bc(s)) return q.getAttr(s);
                        for (var J in s) q.setAttr(J, s[J])
                    }
                    return q
                }, h.getAttr = function (U, s) {
                    if (s === v && (s = 1), this._attrObject && U in this._attrObject) return this._attrObject[U];
                    if (this.getImage) {
                        var T = this.getImage();
                        if (uf(T) && (T = Vp[T]), bc(T) && "dataBindings" in T) for (var B = T.dataBindings, l = B.length - 1; l >= 0; l--) {
                            var a = B[l];
                            if (a.attr === U) {
                                if ("defaultValue" in a) return a.defaultValue;
                                break
                            }
                        }
                    }
                    return s ? p[U] : v
                }, h.setAttr = function (o, J) {
                    var X = this;
                    X._attrObject || (X._attrObject = {});
                    var a = X._attrObject[o];
                    J === v ? delete X._attrObject[o] : X._attrObject[o] = J, X.fp && X.fp("a:" + o, a, J) && X.onAttrChanged && X.onAttrChanged(o, a, J)
                }, h.getSerializableAttrs = function () {
                    var z, Y = {};
                    for (z in this._attrObject) Y[z] = 1;
                    return Y
                }
            }, ms_bnb: function (Q) {
                Q.getBodyColor = function (D) {
                    return D.s("body.color")
                }, Q.getBorderColor = function (R) {
                    return R.s("border.color")
                }
            }, _51o: function (z) {
                z.mi = function (d, J, S) {
                    this.addInteractorListener(d, J, S)
                }, z.umi = function (i, e) {
                    this.removeInteractorListener(i, e)
                }, z.fi = function (g) {
                    this.fireInteractorEvent(g)
                }, z.addInteractorListener = function (m, n, I) {
                    var h = this;
                    h._63I || (h._63I = new Ii), h._63I.add(m, n, I)
                }, z.removeInteractorListener = function (y, P) {
                    this._63I.remove(y, P)
                }, z.fireInteractorEvent = function (q) {
                    this._63I && this._63I.fire(q)
                }, z.setInteractors = function (I) {
                    var W = this, X = W._interactors;
                    X && X.each(function (j) {
                        j.tearDown()
                    }), Ll(I) && (I = new Pf(I)), W._interactors = I, I && I.each(function (o) {
                        o.setUp()
                    }), W.fp("interactors", X, I), W.invalidateSelection()
                }, z.getInteractors = function () {
                    return this._interactors
                }
            }, _49o: function (x) {
                x._44O = o, x._45O = o, x.getTopPainters = function () {
                    return this._44O
                }, x.getBottomPainters = function () {
                    return this._45O
                }, x.addTopPainter = function (g) {
                    var $ = this;
                    $._44O || ($._44O = new Pf), $._44O.contains(g) || ($._44O.add(g), $.redraw && $.redraw())
                }, x.removeTopPainter = function (x) {
                    var I = this;
                    I._44O && (I._44O.remove(x), I.redraw && I.redraw())
                }, x.addBottomPainter = function (_) {
                    var E = this;
                    E._45O || (E._45O = new Pf), E._45O.contains(_) || (E._45O.add(_), E.redraw && E.redraw())
                }, x.removeBottomPainter = function (f) {
                    var o = this;
                    o._45O && (o._45O.remove(f), o.redraw && o.redraw())
                }, x._93db = function (z, u) {
                    var E = this;
                    E._45O && E._45O.each(function (P) {
                        P.draw ? P.draw(z, u) : P.call(E, z, u)
                    })
                }, x._92db = function (Q, o) {
                    var t = this;
                    t._44O && t._44O.each(function (B) {
                        B.draw ? B.draw(Q, o) : B.call(t, Q, o)
                    })
                }
            }, ms_sm: function (f) {
                f.sm = function () {
                    return this.getSelectionModel()
                }, f.setSelectableFunc = function (D) {
                    this.sm().setFilterFunc(D)
                }, f.getSelectableFunc = function () {
                    return this.sm().getFilterFunc()
                }, f.getSelectionModel = function () {
                    var E = this;
                    return E._selectionModel ? E._selectionModel : E.dm().sm()
                }, f.isSelectionModelShared = function () {
                    return !this._selectionModel
                }, f.setSelectionModelShared = function (F) {
                    var Q = this, s = !Q._selectionModel, t = Q.handleSelectionChange, I = Q.dm();
                    s !== F && (Q.invalidateSelection && Q.invalidateSelection(), F ? (I.sm().ms(t, Q), Q._selectionModel.ums(t, Q), Q._selectionModel.dispose(), Q._selectionModel = o) : (I.sm().ums(t, Q), Q._selectionModel = new zg(I), Q._selectionModel.ms(t, Q)), Q.onSelectionModelSharedChanged(), Q.fp("selectionModelShared", s, F))
                }, f.onSelectionModelSharedChanged = function () {
                    var R = this;
                    R.redraw(), R.invalidateSelection && R.invalidateSelection()
                }, f.removeSelection = function () {
                    var y = this.dm();
                    y.beginTransaction(), this.sm().toSelection().each(y.remove, y), y.endTransaction()
                }, f.selectAll = function () {
                    var u = this;
                    u.sm().ss(u.dm().toDatas(function (O) {
                        return u.isVisible(O) && u.isSelectable(O)
                    }))
                }, f.isSelected = function (M) {
                    return this.sm().co(M)
                }, f.isSelectedById = function (_) {
                    var Y = this.dm().getDataById(_);
                    return Y ? this.isSelected(Y) : !1
                }, f.isSelectable = function (Z) {
                    return this.sm().isSelectable(Z)
                }
            }, ms_tx: function (q) {
                q._64I = 0, q._65O = 0, q.isScrollable = function () {
                    return this.getWidth() < this._64I
                }, q._40o = function () {
                    return this.isScrollable()
                }, q.getLogicalPoint = function (u) {
                    return ln(u, this._canvas || this._view, this.tx(), this.ty ? this.ty() : 0)
                }, q.tx = function (w) {
                    return w === v ? this.getTranslateX() : (this.setTranslateX(w), void 0)
                }, q.getTranslateX = function () {
                    return this._65O
                }, q.setTranslateX = function (s) {
                    var T = this, L = T.getWidth() - T._64I;
                    L > s && (s = L), s > 0 && (s = 0), s = B(s);
                    var o = T._65O;
                    T._65O = s, T.fp(ed, o, s)
                }
            }, ms_ty: function (F) {
                F._23Q = 0, F._66O = 0, F._41o = function () {
                    return this.getHeight() < this._23Q
                }, F.getLogicalPoint = function (h) {
                    return ln(h, this._canvas || this._view, this.tx ? this.tx() : 0, this.ty())
                }, F.ty = function ($) {
                    return $ === v ? this.getTranslateY() : (this.setTranslateY($), void 0)
                }, F.getTranslateY = function () {
                    return this._66O
                }, F.setTranslateY = function (w) {
                    var s = this, j = s.getHeight() - s._23Q;
                    j > w && (w = j), w > 0 && (w = 0), w = B(w);
                    var T = s._66O;
                    s._66O = w, s.fp(Tc, T, w)
                }
            }, ms_txy: function (Y) {
                Y._65O = 0, Y._66O = 0, Y.tx = function (T) {
                    return T === v ? this.getTranslateX() : (this.setTranslateX(T), void 0)
                }, Y.ty = function (l) {
                    return l === v ? this.getTranslateY() : (this.setTranslateY(l), void 0)
                }, Y.onTranslateEnded = function () {
                }, Y.setTranslate = function (x, f, l) {
                    var D = this;
                    if (l = Zq(l)) {
                        D._65I && D._65I.stop(!0);
                        var s = D.tx(), m = D.ty();
                        l.action = function ($) {
                            D.setTranslate(s + (x - s) * $, m + (f - m) * $)
                        }, l._37o = function () {
                            delete D._66I, delete D._65I, D.onTranslateEnded()
                        }, D._66I = 1, D._65I = td(l)
                    } else D.tx(x), D.ty(f)
                }, Y.getTranslateX = function () {
                    return this._65O
                }, Y.setTranslateX = function (J) {
                    var p = this;
                    J = p.adjustTranslateX(J);
                    var C = p._65O;
                    p._65O = J, p.fp(ed, C, J)
                }, Y.getTranslateY = function () {
                    return this._66O
                }, Y.setTranslateY = function (Z) {
                    var m = this;
                    Z = m.adjustTranslateY(Z);
                    var E = m._66O;
                    m._66O = Z, m.fp(Tc, E, Z)
                }, Y.adjustTranslateX = function (o) {
                    return B(o)
                }, Y.adjustTranslateY = function (a) {
                    return B(a)
                }, Y.translate = function (s, C, L) {
                    this.setTranslate(this.tx() + s, this.ty() + C, L)
                }, Y.getLogicalPoint = function (S) {
                    var F = this;
                    return ln(S, this._canvas || F._view, F.tx(), F.ty())
                }
            }, ms_dm: function (G) {
                G.dm = function (d) {
                    return d ? (this.setDataModel(d), void 0) : this.getDataModel()
                }, G.getDataModel = function () {
                    return this._dataModel
                }
            }, ms_lp: function (E) {
                E.lp = function (n) {
                    return this.getLogicalPoint(n)
                }
            }, ms_v: function (d) {
                d._disabled = !1, d.setDisabled = function (W, j) {
                    var i = this, c = i._disabled;
                    c !== W && (c && (Lg(i._63O), delete i._63O), W && (Ur(i._view, i._63O = cs(j)), i.iv()), i._disabled = W, i.fp("disabled", c, W))
                }, d.isDisabled = function () {
                    return this._disabled
                }, d.getDisabledDiv = function () {
                    return this._63O
                }, d.getView = function () {
                    return this._view
                }, d.addToDOM = function (X) {
                    var E = this, _ = E.getView(), W = _.style;
                    X = X || G.body, X.appendChild(_), W.left = "0", W.right = "0", W.top = "0", W.bottom = "0", r.addEventListener("resize", function () {
                        E.iv()
                    }, O), E.iv()
                }, d.getWidth = function () {
                    return this._view.clientWidth
                }, d.getHeight = function () {
                    return this._view.clientHeight
                }, d.setWidth = function (S) {
                    var B = this;
                    B._view.style.width = S + Od, B.iv(), B.fp && B.fp(im, o, S)
                }, d.setHeight = function (O) {
                    var x = this;
                    x._view.style.height = O + Od, x.iv(), x.fp && x.fp(ns, o, O)
                }, d.setFocus = function (l) {
                    var k = this, g = k._currentEditor;
                    return l && g && (g.getView && (g = g.getView()), g.contains(l.target)) ? !1 : (Qr(k._view), k.endEditing && k.endEditing(), k.fireViewEvent("focus"), !0)
                }, d.iv = function (A) {
                    this.invalidate(A)
                }, d.invalidate = function (p) {
                    var s = this;
                    s._68I || (s._68I = 1, Wj(s.validate, s, o, p), s.onInvalidated && s.onInvalidated(), s.fireViewEvent("invalidate"))
                }, d.validate = function () {
                    var A = this, l = A._view;
                    if (A._68I && (delete A._68I, l.parentNode)) if (0 === l.offsetWidth && 0 === l.offsetHeight && A._67I !== o) A._67I === v && (A._67I = w.reinvalidateCount), A._67I > 0 ? A._67I-- : A._67I = o, A.iv(); else {
                        A.fireViewEvent("beginValidate"), A.validateImpl(), A.onValidated && A.onValidated(), A.fireViewEvent("validate");
                        var t = A._63O;
                        t && (l.lastChild !== t && (Lg(t), Ur(l, t)), Vq(t, 0, 0, A.getWidth(), A.getHeight())), ai(A), Dm(A), Eh(A)
                    }
                }, d.layout = function (T, Z, m, v) {
                    1 === arguments.length ? Vq(this, T) : Vq(this, T, Z, m, v)
                }, d.addViewListener = function (q, T, Y) {
                    var N = this;
                    N._67O || (N._67O = new Ii), N._67O.add(q, T, Y)
                }, d.removeViewListener = function (i, r) {
                    this._67O.remove(i, r)
                }, d.fireViewEvent = function (S) {
                    var F = this;
                    F._67O && (uf(S) && (S = {kind: S}), F._67O.fire(S)), w.viewListener && w.viewListener(F, S)
                }
            }, ms_tip: function (C) {
                C.setToolTipEnabled = function (O) {
                    var d = this;
                    O ? Xp || d._13o || (d.enableToolTip(), d.fp("toolTipEnabled", !1, !0)) : d._13o && (d.disableToolTip(), d.fp("toolTipEnabled", !0, !1))
                }, C.isToolTipEnabled = function () {
                    return !!this._13o
                }, C.enableToolTip = function () {
                    var R = this;
                    Xp || R._13o || (R._13o = function (J) {
                        var O = R.getToolTip(J);
                        O != o ? w.toolTipContinual && w.isToolTipShowing() ? jb(J, O) : (ti(), fk = {
                            timeout: Z(Qf, Pd),
                            e: J,
                            info: O
                        }) : ti()
                    }, R.getView().addEventListener(Xq, R._13o, O), R.getView().addEventListener("mouseleave", w.hideToolTip, O))
                }, C.disableToolTip = function () {
                    var k = this;
                    k._13o && (k.getView().removeEventListener(Xq, k._13o, O), k.getView().removeEventListener("mouseleave", w.hideToolTip, O), delete k._13o)
                }, C.getToolTip = function (X) {
                    var A = this;
                    if (A.getDataAt) {
                        var q = A.getDataAt(X);
                        return q ? q.getToolTip() : o
                    }
                    return A.getValue ? A.getValue() : void 0
                }
            }, _52o: function (a) {
                a._zoom = 1, a._29I = wp, a.zoomIn = function (A, I) {
                    this.setZoom(this._zoom * Ab, A, I)
                }, a.zoomOut = function (j, S) {
                    this.setZoom(this._zoom / Ab, j, S)
                }, a.zoomReset = function (M, m) {
                    this.setZoom(1, M, m)
                }, a.scrollZoomIn = function (p) {
                    this.setZoom(this._zoom * Xf, o, p)
                }, a.scrollZoomOut = function (u) {
                    this.setZoom(this._zoom / Xf, o, u)
                }, a.pinchZoomIn = function (s) {
                    this.setZoom(this._zoom * vs, o, s)
                }, a.pinchZoomOut = function (x) {
                    this.setZoom(this._zoom / vs, o, x)
                }, a.adjustZoom = function (_) {
                    return gj > _ ? gj : _ > hq ? hq : _
                }, a.getZoom = function () {
                    return this._zoom
                }, a.setZoom = function (p, o, D) {
                    var s = this;
                    if (o = Zq(o)) {
                        s._14o && s._14o.stop(!0);
                        var F = s._zoom;
                        o.action = function (u) {
                            s._96O(F + (p - F) * u, D)
                        }, o._37o = function () {
                            delete s._zooming, delete s._14o, s.onZoomEnded()
                        }, s._zooming = 1, s._14o = td(o)
                    } else s._96O(p, D)
                }, a._96O = function (D, $) {
                    var C = this;
                    if (D = C.adjustZoom(D), D !== C._zoom) {
                        C.validate();
                        var n = C._29I, h = C._zoom;
                        0 !== n.width && 0 !== n.height && ($ = $ ? $ : {
                            x: n.x + n.width / 2,
                            y: n.y + n.height / 2
                        }, C.tx(($.x - n.x) * h - $.x * D), C.ty(($.y - n.y) * h - $.y * D)), C._zoom = D, C.fp("zoom", h, D)
                    }
                }
            }, ms_edge: function (S) {
                S._2I = function (q) {
                    var Z = this;
                    Z._44I || (Z._44I = new Pf), Z._42I || (Z._42I = new Pf), Z._44I.add(q), Z._42I.add(q), Z._20I()
                }, S._4I = function (a) {
                    var H = this;
                    H._44I || (H._44I = new Pf), H._43I || (H._43I = new Pf), H._44I.add(a), H._43I.add(a), H._20I()
                }, S._16I = function (w) {
                    var b = this;
                    b._44I.remove(w), b._42I.remove(w), b._44I.isEmpty() && delete b._44I, b._42I.isEmpty() && delete b._42I, b._20I()
                }, S._18I = function (p) {
                    var z = this;
                    z._44I.remove(p), z._43I.remove(p), z._44I.isEmpty() && delete z._44I, z._43I.isEmpty() && delete z._43I, z._20I()
                }, S._20I = function () {
                    var L = this;
                    if (delete L._45I, !L._44I || L._44I.isEmpty()) return delete L._70O, void 0;
                    var c;
                    L._44I.each(function (h) {
                        h.isLooped() && (c || (c = {}), c[h._id] || (L._45I || (L._45I = new Pf), L._45I.add(h), c[h._id] = h))
                    }), c ? (L._70O = new Pf, L._44I.each(function (r) {
                        c[r._id] ? "A" === c[r._id] || (c[r._id] = "A", L._70O.add(r)) : L._70O.add(r)
                    })) : L._70O = L._44I
                }, S.hasAgentEdges = function () {
                    return !!this._49I && !this._49I.isEmpty()
                }, S.getSourceAgentEdges = function () {
                    return this._46I
                }, S.getTargetAgentEdges = function () {
                    return this._47I
                }, S._1I = function (j) {
                    var $ = this;
                    $._46I || ($._46I = new Pf), $._48I || ($._48I = new Pf), $._46I.add(j), $._48I.add(j), $._19I()
                }, S._3I = function (B) {
                    var U = this;
                    U._47I || (U._47I = new Pf), U._48I || (U._48I = new Pf), U._47I.add(B), U._48I.add(B), U._19I()
                }, S._15I = function (q) {
                    var a = this;
                    a._46I.remove(q), a._48I.remove(q), a._46I.isEmpty() && delete a._46I, a._48I.isEmpty() && delete a._48I, a._19I()
                }, S._17I = function (o) {
                    var w = this;
                    w._47I.remove(o), w._48I.remove(o), w._47I.isEmpty() && delete w._47I, w._48I.isEmpty() && delete w._48I, w._19I()
                }, S._19I = function () {
                    var j = this;
                    delete j._49I;
                    var s = j._48I;
                    if (s && !s.isEmpty()) {
                        var D = {};
                        s.each(function (W) {
                            D[W._id] ? j._49I || (j._49I = new Pf) : D[W._id] = W
                        }), j._49I ? s.each(function (x) {
                            D[x._id] && (j._49I.add(x), delete D[x._id])
                        }) : j._49I = s
                    }
                }, S.getLoopedEdges = function () {
                    return this._45I
                }, S.getEdges = function () {
                    return this._70O
                }, S.getAgentEdges = function () {
                    return this._49I
                }, S.getSourceEdges = function () {
                    return this._42I
                }, S.getTargetEdges = function () {
                    return this._43I
                }, S._8I = function () {
                    this._70O && this._70O.each(function (g) {
                        g._7I()
                    })
                }
            }
        };
        Mm(w, {
            numberDigits: 5,
            crossOrigin: "",
            baseZIndex: v,
            isTouchable: Xp,
            devicePixelRatio: r.devicePixelRatio ? r.devicePixelRatio : 1,
            reinvalidateCount: 3,
            hitMaxArea: 3e3,
            imageCacheThreshold: 20,
            autoMakeVisible: !0,
            autoHideScrollBar: !0,
            disabledOpacity: .4,
            disabledBackground: Q.disabledBackground,
            forceHierarchicalSerialization: !0,
            hoverDelay: 600,
            toolTipDelay: 800,
            toolTipContinual: !1,
            getDragger: function () {
                return fq
            },
            lineCap: "butt",
            lineJoin: "round",
            imageGradient: "linear.northeast",
            dashPattern: [16, 16],
            encodeStringKey: null,
            doubleClickRange: Xp ? 20 : 1,
            animDuration: 200,
            animEasing: function (F) {
                return F * F
            },
            labelColor: $e,
            labelSelectColor: cn,
            labelFont: (Xp ? "15" : "12") + "px arial, sans-serif",
            widgetIndent: Xp ? 30 : 20,
            widgetRowHeight: Xp ? 30 : 20,
            widgetHeaderHeight: Xp ? 32 : 22,
            widgetTitleHeight: Xp ? 34 : 24,
            scrollBarColor: no,
            scrollBarSize: 7,
            scrollBarTimeout: 1e3,
            scrollBarMinLength: 20,
            scrollBarInteractiveSize: Xp ? 32 : 16,
            zoomIncrement: 1.3,
            scrollZoomIncrement: 1.05,
            pinchZoomIncrement: 1.08,
            zoomMax: 20,
            zoomMin: .01,
            segmentResolution: 12,
            shapeResolution: 24,
            shapeSide: 24,
            intersectionLineRect: Qp,
            intersectionLineLine: Ji,
            isEnter: ml,
            isEsc: pi,
            isDelete: jp,
            isSpace: Hk,
            isLeft: Jm,
            isUp: pq,
            isRight: Ac,
            isDown: wb,
            getTarget: ik,
            isString: uf,
            isNumber: In,
            isBoolean: kr,
            isArray: Ll,
            isSelectAll: Hi,
            isFunction: gp,
            isObject: bc,
            getPropertyValue: Ug,
            setPropertyValue: Zp,
            addMethod: Mm,
            getVersion: function () {
                return "6.3.1"
            },
            createGradient: function (y, n, Z, C, j, E, Y, S) {
                var f = Er[n];
                return f(y, Z, C, j, E, Y, S)
            },
            appendToScreen: function (F) {
                F = F.getView ? F.getView() : F, (G.fullscreenElement || G.mozFullScreenElement || G.webkitFullscreenElement || G.msFullscreenElement || G.body).appendChild(F)
            },
            encodeString: function (h) {
                return x.Math.encodeBase64(h, w.encodeStringKey)
            },
            decodeString: function (G) {
                return x.Math.decodeBase64(G, w.encodeStringKey)
            },
            toggleFullscreen: function (J) {
                var c = J.getView();
                if (G.fullscreenElement || G.mozFullScreenElement || G.webkitFullscreenElement || G.msFullscreenElement) G.exitFullscreen ? G.exitFullscreen() : G.msExitFullscreen ? G.msExitFullscreen() : G.mozCancelFullScreen ? G.mozCancelFullScreen() : G.webkitExitFullscreen && G.webkitExitFullscreen(); else {
                    var v = !0;
                    if (J.isSelfViewEvent) {
                        var X = J.getX(), $ = J.getY(), L = J.getWidth(), k = J.getHeight(), C = c.style.background;
                        C || (c.style.background = "white"), c.requestFullscreen ? c.requestFullscreen() : c.msRequestFullscreen ? c.msRequestFullscreen() : c.mozRequestFullScreen ? c.mozRequestFullScreen() : c.webkitRequestFullscreen && c.webkitRequestFullscreen();
                        var H = setInterval(function () {
                            if (c !== (G.fullscreenElement || G.mozFullScreenElement || G.webkitFullscreenElement || G.msFullscreenElement)) clearInterval(H), J.setX(X), J.setY($), J.setWidth(L), J.setHeight(k), J._fullscreen = !1, c.style.background = C, J.iv(); else {
                                var Z = x.Default.getWindowInfo();
                                (v || Z.width !== J.getWidth() || Z.height !== J.getHeight()) && (J.setX(Z.left), J.setY(Z.top), J.setWidth(Z.width), J.setHeight(Z.height), J._fullscreen = !0, J.iv(), v = !1)
                            }
                        }, 500)
                    } else {
                        var q = c.style.left, s = c.style.top, L = c.style.width, k = c.style.height,
                            C = c.style.background;
                        C || (c.style.background = "white"), c.requestFullscreen ? c.requestFullscreen() : c.msRequestFullscreen ? c.msRequestFullscreen() : c.mozRequestFullScreen ? c.mozRequestFullScreen() : c.webkitRequestFullscreen && c.webkitRequestFullscreen();
                        var H = setInterval(function () {
                            if (c !== (G.fullscreenElement || G.mozFullScreenElement || G.webkitFullscreenElement || G.msFullscreenElement)) clearInterval(H), c.style.left = q, c.style.top = s, c.style.width = L, c.style.height = k, c.style.background = C, J.iv(); else {
                                var o = x.Default.getWindowInfo();
                                (v || o.width !== J.getWidth() || o.height !== J.getHeight()) && (Vq(J), v = !1)
                            }
                        }, 500)
                    }
                }
            },
            appendTimeStamp: function (T) {
                return T
            },
            setCompType: function (v, i) {
                gp(i) || bc(i) ? fd[v] = i : ph(v)
            },
            getCompType: function (k) {
                var B = fd[k];
                return B === v && Gh.test(k) && ph(k), B
            },
            getCompTypeMap: function () {
                return fd
            },
            drawCompType: function (G, M, g, h, J, d) {
                G(M, g, h, J, d)
            },
            numberListener: function () {
                var z = {46: 1, 8: 1, 9: 1, 27: 1, 13: 1, 109: 1, 110: 1, 189: 1, 190: 1};
                return function (c) {
                    var s = c.keyCode;
                    z[s] || 65 === s && w.isCtrlDown(c) || 86 === s && w.isCtrlDown(c) || 67 === s && w.isCtrlDown(c) || 88 === s && w.isCtrlDown(c) || s >= 35 && 40 >= s || (c.shiftKey || 48 > s || s > 57) && (96 > s || s > 105) && c.preventDefault()
                }
            }(),
            ignoreKeyCodes: [122, 123],
            preventDefault: function (m) {
                var k = m.target.tagName;
                ("DIV" === k || "CANVAS" === k) && !(w.ignoreKeyCodes.indexOf(m.keyCode) >= 0) && ("keydown" !== m.type || Jm(m) || Ac(m) || pq(m) || wb(m) || jp(m) || 65 === m.keyCode && (m.metaKey || m.ctrlKey)) && (m.preventDefault(), m.preventManipulation && m.preventManipulation())
            },
            getWindowInfo: function () {
                var n = G.documentElement, U = n && (n.scrollLeft || n.scrollTop) ? n : G.body;
                return {
                    target: U,
                    left: U.scrollLeft,
                    top: U.scrollTop,
                    width: r.innerWidth || U.clientWidth,
                    height: r.innerHeight || U.clientHeight
                }
            },
            isDragging: function () {
                return !!fq
            },
            isLeftButton: function (W) {
                return Xp ? !0 : 0 === W.button
            },
            isInput: function (I) {
                if (!I) return !1;
                var B = I.tagName;
                return "INPUT" === B || "TEXTAREA" === B || "SELECT" === B
            },
            getTouchCount: function (I) {
                return Xp ? I.touches.length : 1
            },
            isDoubleClick: function () {
                function D(g) {
                    g.details = 0, g.timeout = null, g.lastPoint = null
                }

                var h = {};
                return Ml = new f, Ok = Ml.getTime(), function (I) {
                    if (I.touches && I.touches.length > 1) return !1;
                    var d = I.button == o ? "" : I.button, K = I.type + d, F = K + "_isDoubleClick", g = h[K];
                    if (g || (g = h[K] = {details: 0, timeout: null, lastPoint: null}), I[F] === v) {
                        I[F] = !0;
                        var X = Uj(I);
                        g.timeout && (l(g.timeout), g.timeout = null), g.lastPoint && vl(g.lastPoint, X) > w.doubleClickRange && D(g), g.lastPoint = X, g.details++, g.timeout = Z(function () {
                            D(this)
                        }.bind(g), 500)
                    }
                    return 2 === g.details
                }
            }(),
            isShiftDown: function (m) {
                return m ? m.shiftKey : Jh["16"]
            },
            isCtrlDown: function (n) {
                return n ? _i ? n.metaKey : n.ctrlKey : _i ? Jh["91"] : Jh["17"]
            },
            getClientPoint: function (J) {
                return Xp && (J = Qj(J)), {x: J.clientX, y: J.clientY}
            },
            isMouseEvent: function (q) {
                return q instanceof MouseEvent || 0 === q.type.indexOf("mouse")
            },
            getTargetElement: function (C) {
                if (w.isMouseEvent(C) || !G.elementFromPoint) return C.target;
                var B = Rg(C);
                return G.elementFromPoint(B.x, B.y)
            },
            getPagePoint: function (c) {
                return Xp && (c = Qj(c)), {x: c.pageX, y: c.pageY}
            },
            createObject: function (J, c) {
                var e = new J;
                for (var Q in c) {
                    var p = c[Q];
                    if (gp(p)) e[Q] = p; else if (0 === Q.indexOf("s:")) e.s(Q.substr(2), c[Q]); else if (0 === Q.indexOf("a:")) e.a(Q.substr(2), c[Q]); else {
                        var F = Kf(Q), p = c[Q];
                        e[F] ? (e[F](p), "setToolTip" === F && e.enableToolTip && e.enableToolTip()) : e[Q] = p
                    }
                }
                return e
            },
            setImage: function (P, U, G, N) {
                var I = arguments.length;
                4 === I ? hs(P, N, U, G) : 2 === I ? uf(U) ? hs(P, U) : Tm(P, U) : 1 === I && hs(P, P)
            },
            getImage: function (m, V, U) {
                var h;
                if (m == o) return o;
                if (bc(m) ? h = m : (h = Vp[m], m && h === v && (Kj && Kj[m] || hs(m, m))), V && h && h.tagName) {
                    var O;
                    O = "override" === U ? "colors_override" : "override_rgb" === U ? "colors_override_rgb" : "override_a" === U ? "colors_override_a" : "colors", h[O] || (h[O] = {__count__: 0});
                    var E = h[O][V];
                    return E || (h[O].__count__ > w.imageCacheThreshold && (h[O] = {__count__: 0}), E = Ao(h, as(V), h.width, h.height, U), h[O][V] = E, h[O].__count__++), E
                }
                return h
            },
            isImageComplete: function (R, Z, M) {
                var m = Ui(R);
                if (!m) return !1;
                if (m.tagName) return m.complete;
                for (var s, R, q, k = m.comps, S = !0, o = 0, e = k.length; e > o; o++) if (s = k[o], q = s.type, "image" === s.type) {
                    R = s.name, R && R.func && (R = pe(R, Z));
                    var c = Mc(R, Z, M);
                    if (!c) {
                        S = !1;
                        break
                    }
                } else if (Gh.test(q) && w.getCompType(q) === v) {
                    S = !1, ph(q);
                    break
                }
                return S
            },
            getId: function () {
                var C = 1;
                return function () {
                    return ++C
                }
            }(),
            callLater: function (N, v, z, V) {
                var g = function () {
                    N.apply(v, z)
                };
                return V ? Z(g, V) : r.requestAnimationFrame(g)
            },
            clone: function (z) {
                if (null == z || "object" != typeof z) return z;
                if (z instanceof Date) {
                    var T = new Date;
                    return T.setTime(z.getTime()), T
                }
                if (z instanceof Array) {
                    for (var T = [], q = 0, h = z.length; h > q; q++) T[q] = Ah(z[q]);
                    return T
                }
                if (z instanceof Pf) {
                    for (var T = new Pf, q = 0, h = z.length; h > q; q++) T.set(q, Ah(z.get(q)));
                    return T
                }
                if (z instanceof xk) return z;
                if (z instanceof H) {
                    var T = {};
                    for (var N in z) z.hasOwnProperty(N) && (T[N] = Ah(z[N]));
                    return T
                }
                return z
            },
            callWhenLoaded: function (Q, F) {
                F = F || 100;
                var O = ie(Q, F);
                Qm || (Qm = {}), Qm[O] = {tick: O, cb: Q, delay: F}
            },
            beforeLoadURL: function (Q) {
                if (Qm) {
                    var T = {};
                    for (var E in Qm) {
                        var O = Qm[E];
                        l(O.tick);
                        var N = ie(O.cb, O.delay);
                        T[N] = {tick: N, delay: O.delay, cb: O.cb}
                    }
                    Qm = T
                }
                return w.convertURL ? w.convertURL(Q) : Q
            },
            convertURL: function (i) {
                return i
            },
            handleRefGraphLoaded: function () {
            },
            handleCompTypeLoaded: function () {
            },
            handleImageLoaded: function () {
            },
            handleUnfoundImage: function () {
                return w.getImage("default_blank")
            },
            sortFunc: function (U, M) {
                if (U === M) return 0;
                if (U == o && M != o) return 1;
                if (U != o && M == o) return -1;
                if (U == o && M == o) return 0;
                var m, R = typeof U, N = typeof M;
                return R === yl && N === yl ? m = U.localeCompare(M) : R === Vc && N === Vc && (m = U - M), m === v && (m = ("" + U).localeCompare("" + M)), m > 0 ? 1 : 0 > m ? -1 : 0
            },
            getClassMap: function () {
                return Qc
            },
            getClass: function (D) {
                if (uf(D)) {
                    var n, I = Qc[D];
                    if (!I) {
                        n = D.split("."), I = r;
                        for (var F = 0; F < n.length; F++) I = I[n[F]];
                        Qc[D] = I
                    }
                    return I
                }
                return D
            },
            def: function (e, A, U) {
                var n, D, l, P = function () {
                };
                if (P.prototype = A.prototype, n = new P, uf(e)) {
                    if (Qc[e]) throw"'" + e + "' already defined";
                    l = bd(e), n.getClassName = function () {
                        return e
                    }
                } else l = e;
                if (n.constructor = l, n.getClass = function () {
                    return l
                }, n.getSuperClass = function () {
                    return A
                }, U) for (D in U) Pg[D] && Pg.hasOwnProperty(D) ? Pg[D](n, U) : Si(n, U, D);
                l.prototype = n, l.superClass = A.prototype
            },
            startAnim: function () {
                var S = function (h) {
                    h.duration && (h.startTime = Ye()), h.timeId = Wj(h.tick, o, o, h.interval)
                };
                return function (v) {
                    return v = Ah(v), v.easing = v.easing || w.animEasing, v.duration || v.frames || (v.duration = w.animDuration), v.t = 0, v.duration ? v.interval = 0 : (v.frame = 0, v.interval = v.interval || 10), v.tick = function () {
                        if (v.duration) {
                            var w = (Ye() - v.startTime) / v.duration;
                            if (w > 1 && (w = 1), v.t = w, v.action(v.easing(w), w), !v.isRunning()) return;
                            1 === w ? v.stop() : v._isPaused || (v.timeId = Wj(v.tick))
                        } else {
                            if (v.frame++, w = v.t = v.frame / v.frames, v.action(v.easing(w), w), !v.isRunning()) return;
                            v.frame < v.frames ? v._isPaused || (v.timeId = Wj(v.tick, o, o, v.interval)) : v.stop()
                        }
                    }, v.resume = function () {
                        v._isPaused && (delete v._isPaused, v.duration ? v.t < 1 && (v.startTime = Ye() - v.duration * v.t, v.timeId = Wj(v.tick)) : v.frame < v.frames && (v.timeId = Wj(v.tick, o, o, v.interval)))
                    }, v.pause = function () {
                        v._isPaused = !0
                    }, v.isPaused = function () {
                        return this._isPaused
                    }, v.stop = function (r) {
                        v.isRunning() && (cj(v.timeId, !v.duration), delete v.timeId, v.duration ? v.t < 1 && r && (v.t = 1, v.action(v.easing(1), 1)) : v.frame < v.frames && r && (v.frame = v.frames, v.action(v.easing(1), 1)), v._37o && v._37o(), v.finishFunc && v.finishFunc())
                    }, v.isRunning = function () {
                        return v.timeId != o
                    }, v.delay ? Wj(S, o, [v], v.delay) : S(v), v
                }
            }(),
            getTextSize: function () {
                var W = {}, v = G ? wg().getContext("2d") : o;
                return function (R, h) {
                    v.font = R ? R : Kp;
                    var L = W[v.font];
                    return L || (L = 2 * v.measureText("e").width + 4, W[v.font] = L), {
                        width: v.measureText(h).width + 4,
                        height: L
                    }
                }
            }(),
            drawText: function (t, j, Z, c, V, w, N, R, I, Q) {
                if (j != o) {
                    var g = Dp(Z, j), s = {};
                    s.y = Q && Q !== mb ? Q === Tp ? w + g.height / 2 : w + R - g.height / 2 : w + R / 2, s.x = I && I !== Pq ? I === Kl ? V + N - g.width / 2 : V + N / 2 : V + g.width / 2, wr(t, j, s, Z, c)
                }
            },
            getDistance: function (M, d) {
                var f = M.length;
                return d ? 3 === f ? e(X(M[0] - d[0]) + X(M[1] - d[1]) + X(M[2] - d[2])) : 2 === f ? e(X(M[0] - d[0]) + X(M[1] - d[1])) : M.z === v ? e(X(d.x - M.x) + X(d.y - M.y)) : e(X(d.x - M.x) + X(d.y - M.y) + X(d.z - M.z)) : 3 === f ? e(X(M[0]) + X(M[1]) + X(M[2])) : 2 === f ? e(X(M[0]) + X(M[1])) : void 0
            },
            brighter: function (M, c) {
                return 0 > c && (c = -c), is(M, c ? c : 40)
            },
            darker: function (i, w) {
                return w > 0 && (w = -w), is(i, w ? w : -40)
            },
            unionPoint: function (G, U) {
                if (!G) return o;
                if (2 === arguments.length) return G && U ? {
                    x: g(G.x, U.x),
                    y: g(G.y, U.y),
                    width: M(G.x - U.x),
                    height: M(G.y - U.y)
                } : o;
                var w = G;
                if (w._as && (w = w._as), w.length === v) return o;
                var X = w.length;
                if (0 >= X) return o;
                for (var L = 1, x = w[0], t = {x: x.x, y: x.y, width: 0, height: 0}; X > L; L++) {
                    x = w[L];
                    var m = g(t.x, x.x), j = n(t.x + t.width, x.x), s = g(t.y, x.y), z = n(t.y + t.height, x.y);
                    t.x = m, t.y = s, t.width = j - m, t.height = z - s
                }
                return t
            },
            unionRect: function (d, p) {
                if (d && !p) return Ah(d);
                if (!d && p) return Ah(p);
                if (d && p) {
                    var r = {x: g(d.x, p.x), y: g(d.y, p.y)};
                    return r.width = n(d.x + d.width, p.x + p.width) - r.x, r.height = n(d.y + d.height, p.y + p.height) - r.y, r
                }
                return o
            },
            containsPoint: function (X, q, N, g) {
                if (g != o && 1 !== g) {
                    var E = X.x + X.width / 2, O = X.y + X.height / 2;
                    X = {x: E - X.width / 2 * g, y: O - X.height / 2 * g, width: X.width * g, height: X.height * g}
                }
                if (N) {
                    var v = X.width / 2, Z = X.height / 2, M = J(-N), G = c(-N), p = q.x - X.x - v, s = q.y - X.y - Z;
                    return q = {x: G * p - M * s, y: M * p + G * s}, wc({
                        x: -v,
                        y: -Z,
                        width: X.width,
                        height: X.height
                    }, q)
                }
                return !(!X || q.x < X.x || q.y < X.y || q.x > X.x + X.width || q.y > X.y + X.height)
            },
            containsRect: function (g, q) {
                if (!g || !q) return !1;
                var M = q.x, G = q.y, _ = q.width, d = q.height, c = g.width, i = g.height;
                if (0 > (c | i | _ | d)) return !1;
                var t = g.x, Y = g.y;
                if (t > M || Y > G) return !1;
                if (c += t, _ += M, M >= _) {
                    if (c >= t || _ > c) return !1
                } else if (c >= t && _ > c) return !1;
                if (i += Y, d += G, G >= d) {
                    if (i >= Y || d > i) return !1
                } else if (i >= Y && d > i) return !1;
                return !0
            },
            intersectsRect: function (Q, k) {
                if (!Q || !k) return !1;
                var H = k.width, U = k.height, D = Q.width, G = Q.height;
                if (0 >= D || 0 >= G || 0 >= H || 0 >= U) return !1;
                var u = k.x, B = k.y, q = Q.x, P = Q.y;
                return D += q, G += P, H += u, U += B, D > u && G > B && H > q && U > P
            },
            intersection: function (N, U) {
                if (!N || !U) return o;
                var P = U.x, W = U.y, r = N.x, Q = N.y, c = P, D = W, B = r, k = Q;
                return c += U.width, D += U.height, B += N.width, k += N.height, r > P && (P = r), Q > W && (W = Q), c > B && (c = B), D > k && (D = k), c -= P, D -= W, 0 >= c || 0 >= D ? o : {
                    x: P,
                    y: W,
                    width: c,
                    height: D
                }
            },
            grow: function (i, C, V) {
                V === v && (V = C), i.x -= C, i.y -= V, i.width = i.width + 2 * C, i.height = i.height + 2 * V
            },
            getScreenPoint: function (L, c, I, K, t, w, J) {
                var s, q, C = I.getBoundingClientRect(), v = L * (w || 1) + C.left - I.scrollLeft + (K || 0),
                    i = c * (J || 1) + C.top - I.scrollTop + (t || 0), X = {x: v, y: i};
                return (s = I.parentElement) && (q = s.maxtrixAppend) ? q.applyInverse(X, {}) : X
            },
            getLogicalPoint: function (D, t, K, X, A, F) {
                var o, V, d = t.getBoundingClientRect();
                D.target ? (Kg(D) ? _i ? Jh["91"] = !0 : Jh["17"] = !0 : _i ? Jh["91"] = !1 : Jh["17"] = !1, Jh["16"] = sf(D) ? !0 : !1, D = Xp ? Qj(D) : D, o = D.clientX, V = D.clientY) : (o = D.x, V = D.y);
                var P, Q;
                if ((P = t.parentElement) && (Q = P.maxtrixAppend)) {
                    var y = Q.apply({x: o, y: V}, {});
                    return y.x = (y.x + t.scrollLeft - (K || 0)) / (A || 1), y.y = (y.y + t.scrollTop - (X || 0)) / (F || 1), y
                }
                return {
                    x: (o - d.left + t.scrollLeft - (K || 0)) / (A || 1),
                    y: (V - d.top + t.scrollTop - (X || 0)) / (F || 1)
                }
            },
            removeHTML: function () {
                var m;
                return function (A) {
                    return A && A.getView && (A = A.getView()), A && A.parentNode ? m === A ? !0 : (m = A, A.parentNode.removeChild(A), m = o, !0) : !1
                }
            }(),
            getToolTipDiv: function () {
                if (!jl) {
                    jl = Hm(), Ce = Hm();
                    var i = jl.style;
                    w.baseZIndex != o && (i.zIndex = j(w.baseZIndex) + 3 + ""), i.whiteSpace = "nowrap", i.color = w.toolTipLabelColor, i.background = w.toolTipBackground, i.font = w.toolTipLabelFont, i.padding = "5px", i.boxShadow = "0px 0px 3px " + w.toolTipShadowColor
                }
                return jl
            },
            isToolTipShowing: function () {
                return jl && jl.parentNode ? !0 : Ce && Ce.parentNode ? !0 : !1
            },
            hideToolTip: function () {
                Lg(jl), Lg(Ce), wh()
            },
            showToolTip: function (H, C) {
                if (!H || C == o) return ti(), void 0;
                w.getToolTipDiv();
                var m, B;
                if (C.html ? (C = C.html, m = Ce, Lg(jl)) : (m = jl, Lg(Ce)), B = m.style, m.innerHTML = C, m.parentNode || x.Default.appendToScreen(m), H.target) {
                    H = Rg(H);
                    var n = Sg(), p = H.x, y = H.y, q = Xp ? 60 : 12;
                    if (Xp) {
                        var e = m.getBoundingClientRect();
                        B.left = p - e.width / 2 + Od, B.top = y - e.height - q < n.top ? y + q + Od : y - e.height - q + Od
                    } else {
                        B.left = p + q + Od, B.top = y + q + Od;
                        var e = m.getBoundingClientRect();
                        e.left + e.width > n.width && (B.left = p - q - e.width + Od), e.top + e.height > n.height && (B.top = y - q - e.height + Od), e.left < 0 && (B.left = p + q + Od), e.top < 0 && (B.top = y + q + Od)
                    }
                } else B.left = H.x + Od, B.top = H.y + Od;
                wh()
            },
            startDragging: function (B, t, $) {
                $ == v && ($ = !0), B !== fq && (fq ? $ && (Xp ? fq.handleWindowTouchEnd(t) : fq.handleWindowMouseUp(t)) : Xp ? (r.addEventListener(or, Uq, O), r.addEventListener(Kb, mi, O)) : (r.addEventListener(Xq, Bp, O), r.addEventListener(hc, di, O)), fq = B)
            },
            getImageMap: function () {
                return Vp
            },
            toBoundaries: function (g, c, A, G) {
                var m = [];
                return vi(g, c, A, G).forEach(function (L) {
                    var H = [];
                    L.forEach(function (I) {
                        H.push(I.x, I.y)
                    }), m.push(H)
                }), m
            },
            getCurrentKeyCodeMap: function () {
                return Jh
            },
            drawCenterImage: function (X, l, k, z, q, R, t, J) {
                var i = Iq(l, q, R), g = Ne(l, q, R);
                Co(X, l, B(k - i / 2), B(z - g / 2), i, g, q, R, t, J)
            },
            drawStretchImage: function (r, K, c, q, u, P, s, F, z, Q, Z, d) {
                var N, y = Iq(K, F, z, P), U = Ne(K, F, z, s);
                "uniform" === c ? (N = g(P / y, s / U), y *= N, U *= N, q += B((P - y) / 2), u += B((s - U) / 2), P = y, s = U) : "centerUniform" === c && ((y > P || U > s) && (N = g(P / y, s / U), y *= N, U *= N), q += B((P - y) / 2), u += B((s - U) / 2), P = y, s = U);
                var a = r.interactiveInfo;
                if (a) {
                    var H;
                    if (H = "center" === c ? {x: q + P / 2 - y / 2, y: u + s / 2 - U / 2, width: y, height: U} : {
                        x: q,
                        y: u,
                        width: P,
                        height: s
                    }, a.rect) {
                        var b = a.compInfos, e = b.length;
                        e && (b[e - 1].rect.image = K)
                    } else a.rect = H
                }
                if ("center" === c) {
                    var p = Z !== !1 && (y > P || U > s);
                    p && (r.save(), r.beginPath(), r.rect(q, u, P, s), r.clip()), Co(r, K, q + P / 2 - y / 2, u + s / 2 - U / 2, y, U, F, z, Q, d), p && r.restore()
                } else Co(r, K, q, u, P, s, F, z, Q, d)
            },
            toCanvas: function (z, I, E, s, _, Q, d, i, c) {
                z = Ui(z, d), I = I || Iq(z, _), E = E || Ne(z, _);
                var T = wg(), Z = Jb(T);
                return i ? (zm(T, I, E, i), Z.scale(i, i)) : zm(T, I, E, 1), Ng(Z, z, s, 0, 0, I, E, _, Q, d, c), z && z.clampToEdge && (T.clampToEdge = z.clampToEdge), Z.restore(), T
            },
            toGrayColor: function (j) {
                if (!j) return j;
                var L = te(j), v = .299 * L[0] + .587 * L[1] + .114 * L[2];
                return "rgba(" + v + "," + v + "," + v + "," + L[3] / 255 + ")"
            },
            createGradientImage: function (I, Y, d, l) {
                for (var c = ["L", 0, 0, I, 0, 1, 0, 0, 1, 0, 0], k = 0, j = Math.min(Y.length, d.length); j > k; k++) c.push(d[k], Y[k]);
                var s = x.Default.toCanvas({
                    width: I,
                    height: I,
                    clampToEdge: !0,
                    comps: [{
                        type: "shape",
                        rotation: l || 0,
                        points: [0, 0, I, 0, I, I, 0, I],
                        background: "#ffffff",
                        gradientPack: c
                    }]
                });
                return s
            },
            createElement: function (C, z, k, I) {
                var $ = G.createElement(C);
                return Xr($, z || Q.widgetBorder, 2), $.style.font = k ? k : Kp, I != o && ($.value = I), w.onElementCreated && w.onElementCreated($), $
            },
            containedInView: function (c, q) {
                var v = Gi(q).getBoundingClientRect();
                return wc({x: v.left, y: v.top, width: v.width, height: v.height}, Uj(c))
            },
            isIsolating: function () {
                return ae > 0
            },
            setIsolating: function (g) {
                g ? ae++ : ae--
            },
            getMSMap: function () {
                return Pg
            },
            stringify: function (N, A, X) {
                var i = Date.prototype.toJSON;
                Date.prototype.toJSON = function () {
                    return "__ht__date" + this.getTime()
                };
                var b = JSON.stringify(N, function (e, F) {
                    return "function" == typeof F ? "__ht__" + (F.__ht__ || F.toString()) : In(F) ? eq(F) : F instanceof x.List ? "__ht__list" + (F.__ht__list || w.stringify(F._as)) : F
                }, A == o ? 2 : A);
                return Date.prototype.toJSON = i, X && (b = "__ht__encode" + w.encodeString(b)), b
            },
            parse: function (W) {
                return uf(W) ? "__ht__encode" != W.substr(0, 12) || (W = w.decodeString(W.substr(12)), uf(W)) ? JSON.parse(W, function (X, s) {
                    if (uf(s)) if ("__ht__function" == s.substr(0, 14)) {
                        var h = s.indexOf("{") + 1, e = s.lastIndexOf("}"), k = s.indexOf("(") + 1, F = s.indexOf(")");
                        if (h && e && k && F) {
                            var y = new Function(s.substring(k, F), s.substring(h, e));
                            return y.__ht__ = s.substr(6), y
                        }
                    } else {
                        if ("__ht__date" == s.substr(0, 10)) return new Date(j(s.substr(10)));
                        if ("__ht__list" === s.substr(0, 10)) return new Pf(w.parse(s.substr(10)))
                    }
                    return s
                }) : W : W
            },
            loadJS: function (A, t) {
                t && A.push(t);
                var b = A.shift();
                if (Ll(b)) A = b.contact(A), w.loadJS(A); else if (gp(b)) b(), w.loadJS(A); else if (uf(b)) {
                    var g = G.createElement("script");
                    g.onload = function () {
                        w.loadJS(A)
                    }, g.setAttribute("src", b), G.getElementsByTagName("head")[0].appendChild(g)
                } else A.length && w.loadJS(A)
            },
            toRoundedCorner: function (v, b) {
                var i = v.size();
                if (0 >= b) return {points: v};
                var U, S = new Pf, p = new Pf, D = v.get(0);
                S.add(D), p.add(1);
                for (var j = 1; i > j; j++) if (i > j + 1) {
                    var P = v.get(j), z = v.get(j + 1), m = D.x, k = D.y, t = P.x, W = P.y, C = W - k, M = t - m,
                        L = N(C, M);
                    U = g(.99 * vl(D, P), b), S.add({
                        x: t - U * c(L),
                        y: W - U * J(L)
                    }), S.add(P), m = P.x, k = P.y, t = z.x, W = z.y, C = W - k, M = t - m, L = N(C, M), U = g(.99 * vl(P, z), b), D = {
                        x: m + U * c(L),
                        y: k + U * J(L)
                    }, S.add(D), p.addAll([2, 3])
                } else S.add(v.get(j)), p.add(2);
                return {points: S, segments: p}
            },
            toColorData: te,
            setCanvas: zm,
            createDiv: Hm,
            createDisabledDiv: cs,
            createView: po,
            createCanvas: wg,
            appendChild: Ur,
            initContext: Jb,
            checkLoadingImage: ai,
            translateAndScale: Ec,
            layout: Vq,
            getPosition: Sn,
            drawPoints: Vd,
            drawRoundRect: yc,
            drawBorder: gd,
            setFocus: Qr,
            getter: vg,
            setter: Kf,
            isEmptyObject: Xi
        }, !0), Mm(d, {
            autoAdjustIndex: 1,
            hierarchicalRendering: 1,
            adjustChildrenToTop: 1,
            autoHideScrollBar: 1,
            autoUpdate: 1,
            firstPersonMode: 1,
            ortho: 1,
            strict: 1,
            stickToRight: 1,
            instant: 1,
            closePath: 1,
            hierarchical: 1,
            doubleClickToToggle: 1,
            continuousLayout: 1,
            syncSize: 1
        }, !0);
        var _l = w.disabledOpacity, Pd = w.toolTipDelay, Wo = w.devicePixelRatio, Mn = w.autoMakeVisible,
            Nf = w.autoHideScrollBar, Li = w.imageGradient, jb = w.showToolTip, ti = w.hideToolTip, bq = w.dashPattern,
            Dq = w.lineCap, cp = w.lineJoin, As = w.labelColor, Ih = w.labelSelectColor, Kp = w.labelFont,
            pg = w.widgetIndent, xl = w.widgetRowHeight, Wf = w.widgetHeaderHeight, Wi = w.widgetTitleHeight,
            Ki = w.scrollBarColor, pk = w.scrollBarSize, No = w.scrollBarTimeout, _g = w.scrollBarMinLength,
            Oi = w.scrollBarInteractiveSize, Ab = w.zoomIncrement, Xf = w.scrollZoomIncrement,
            vs = w.pinchZoomIncrement, hq = w.zoomMax, gj = w.zoomMin, qq = w.createObject, Yd = w.preventDefault,
            Rc = w.setImage, Ui = w.getImage, Mc = w.isImageComplete, Hn = w.drawCenterImage, Ng = w.drawStretchImage,
            Fb = w.getId, Wj = w.callLater, ho = w.sortFunc, Ah = w.clone, bd = w.getClass, td = w.startAnim,
            Cb = w.brighter, Rm = w.darker, Be = w.drawText, Dp = w.getTextSize, Di = w.isLeftButton,
            $h = w.getTouchCount, qs = w.isDoubleClick, sf = w.isShiftDown, Kg = w.isCtrlDown, Uj = w.getClientPoint,
            Rg = w.getPagePoint, vl = w.getDistance, an = w.unionPoint, fs = w.unionRect, wc = w.containsPoint,
            Ln = w.containsRect, fg = w.intersectsRect, tr = w.intersection, Sg = w.getWindowInfo, gh = w.grow,
            ln = w.getLogicalPoint, ih = w.getScreenPoint, ce = w.startDragging, Lg = w.removeHTML,
            Xe = w.createElement, Nq = w.segmentResolution, rp = w.shapeResolution, rd = w.shapeSide, Jr = w.def,
            rb = function (V, Q, c) {
                Jr(W + "." + V, Q, c)
            }, Gr = function (K, g) {
                K.childNodes.forEach(function (M) {
                    g(M), Gr(M, g)
                })
            };
        Mm(w, {
            toolTipLabelColor: As,
            toolTipLabelFont: Kp,
            toolTipBackground: Q.toolTipBackground,
            toolTipShadowColor: no,
            drawBreakableText: Jl,
            setDevicePixelRatio: function (z) {
                Wo = w.devicePixelRatio = "number" == typeof z ? z : r.devicePixelRatio, Gr(G.body, function (n) {
                    var Q = n._ht;
                    Q && Q._canvas && (zm(Q._canvas, Q.getWidth(), Q.getHeight()), Q.redraw ? Q.redraw() : Q.iv())
                })
            }
        }, !0);
        var Zn = 1e-6, Aj = "undefined" != typeof Uint16Array ? Uint16Array : Array,
            zk = "undefined" != typeof Float32Array ? Float32Array : Array, sg = function (j, _, s) {
                var u = [j[0] - _[0], j[1] - _[1], j[2] - _[2]];
                if (s) {
                    var t = vl(u);
                    t > 0 && (u[0] /= t, u[1] /= t, u[2] /= t)
                }
                return u
            }, Dn = function () {
                var U = "charCodeAt", m = 2 * (2 * Zk.length + 1);
                for (var v in r) if (v === W + Pq[0] + Od.length) {
                    var A = r[v];
                    if (!A) break;
                    for (var V = A.length, g = 0; V > g; g++) if (A[g][U](0) === m && A[g + 1] != o && A[g + 1] === Od[0] && A[g + 2] != o && A[g + 2][U](0) === m) {
                        for (var y = g + 3; V > y; y++) if (A[y][U](0) === m) {
                            if (0 == A[y + 1]) for (var P, Z = y + 2; V > Z; Z++) {
                                if (A[Z][U](0) === m) {
                                    0 == A[Z - 1] && P && (D = P.substr(0, P.length - 1));
                                    break
                                }
                                P == o ? P = A[Z] : P += A[Z]
                            }
                            break
                        }
                        break
                    }
                    break
                }
                return function (B) {
                    return [-B[0], -B[1], -B[2]]
                }
            }(), Hj = function (Z, b) {
                return 3 === Z.length ? Z[0] * b[0] + Z[1] * b[1] + Z[2] * b[2] : Z[0] * b[0] + Z[1] * b[1]
            }, Nd = function () {
                var T = new zk(16);
                return T[0] = 1, T[1] = 0, T[2] = 0, T[3] = 0, T[4] = 0, T[5] = 1, T[6] = 0, T[7] = 0, T[8] = 0, T[9] = 0, T[10] = 1, T[11] = 0, T[12] = 0, T[13] = 0, T[14] = 0, T[15] = 1, T
            }, gr = Nd(), ah = function (u) {
                var U = new zk(16);
                return U[0] = u[0], U[1] = u[1], U[2] = u[2], U[3] = u[3], U[4] = u[4], U[5] = u[5], U[6] = u[6], U[7] = u[7], U[8] = u[8], U[9] = u[9], U[10] = u[10], U[11] = u[11], U[12] = u[12], U[13] = u[13], U[14] = u[14], U[15] = u[15], U
            }, lh = function (a, R) {
                return a[0] = R[0], a[1] = R[1], a[2] = R[2], a[3] = R[3], a[4] = R[4], a[5] = R[5], a[6] = R[6], a[7] = R[7], a[8] = R[8], a[9] = R[9], a[10] = R[10], a[11] = R[11], a[12] = R[12], a[13] = R[13], a[14] = R[14], a[15] = R[15], a
            }, vn = function (s) {
                return s[0] = 1, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 1, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s
            }, Jg = function (f, A) {
                var T = f[0], i = f[1], C = f[2];
                return f[0] = A[0] * T + A[4] * i + A[8] * C + A[12], f[1] = A[1] * T + A[5] * i + A[9] * C + A[13], f[2] = A[2] * T + A[6] * i + A[10] * C + A[14], f
            }, De = function (Q, e) {
                var D = Q[0], j = Q[1], N = Q[2], _ = Q[3];
                return Q[0] = e[0] * D + e[4] * j + e[8] * N + e[12] * _, Q[1] = e[1] * D + e[5] * j + e[9] * N + e[13] * _, Q[2] = e[2] * D + e[6] * j + e[10] * N + e[14] * _, Q[3] = e[3] * D + e[7] * j + e[11] * N + e[15] * _, Q
            }, Yq = function () {
                var p, Y, I, z, Z = Wd(Cl[1] + Cl[7]), j = Wd(Cl[0] + Cl[3] - Cl[10]), b = Wd(Cl[8] + 2), L = function () {
                    return Y = I.charAt(p), p += 1, Y
                }, l = function () {
                    var f = "";
                    if (Y === b) for (; L();) {
                        if (Y === b) return L(), f;
                        f += Y
                    } else L()
                }, v = function () {
                    for (; Y && " " >= Y;) L()
                }, f = function () {
                    var K, c = {};
                    if (Y === Z) {
                        if (L(), v(), Y === j) return L(), c;
                        for (; Y;) {
                            if (K = l(), v(), L(), c[K] = z(), v(), Y === j) return L(), c;
                            L(), v()
                        }
                    }
                };
                return z = function () {
                    switch (v(), Y) {
                        case Z:
                            return f();
                        default:
                            return l()
                    }
                }, function (y) {
                    if (R = {}, y) {
                        var t;
                        if (I = y, p = 0, Y = " ", t = z(), v(), !Y) return t
                    }
                }
            }(), ni = function (d, L) {
                if (L) {
                    var W = J(L), Z = c(L), v = d[4], _ = d[5], $ = d[6], m = d[7], Q = d[8], w = d[9], O = d[10],
                        q = d[11];
                    d[4] = v * Z + Q * W, d[5] = _ * Z + w * W, d[6] = $ * Z + O * W, d[7] = m * Z + q * W, d[8] = Q * Z - v * W, d[9] = w * Z - _ * W, d[10] = O * Z - $ * W, d[11] = q * Z - m * W
                }
            }, ts = function (T, l) {
                if (l) {
                    var p = J(l), z = c(l), X = T[0], b = T[1], I = T[2], e = T[3], F = T[8], M = T[9], h = T[10],
                        r = T[11];
                    T[0] = X * z - F * p, T[1] = b * z - M * p, T[2] = I * z - h * p, T[3] = e * z - r * p, T[8] = X * p + F * z, T[9] = b * p + M * z, T[10] = I * p + h * z, T[11] = e * p + r * z
                }
            }, sm = function (K, y) {
                if (y) {
                    var Z = J(y), H = c(y), e = K[0], j = K[1], U = K[2], d = K[3], N = K[4], Y = K[5], E = K[6], O = K[7];
                    K[0] = e * H + N * Z, K[1] = j * H + Y * Z, K[2] = U * H + E * Z, K[3] = d * H + O * Z, K[4] = N * H - e * Z, K[5] = Y * H - j * Z, K[6] = E * H - U * Z, K[7] = O * H - d * Z
                }
            }, Zr = function (r, e, q) {
                return Hg(o, q === !1 ? o : r.getFinalScale3d(), r.getFinalRotation3d(), r.getRotationMode(), r.p3(), o, e)
            }, Hg = function (u, n, o, c, l, s, K) {
                return s || (s = Nd()), l && uj(s, l), Sr(s, o, c), K && Fr(s, s, K), n && Zb(s, n), u && Fr(s, s, u), s
            }, mf = function (U, w, P) {
                w = j(w), P = j(P);
                var Z = this;
                Z.g = U, Z._84O = w, Z._85O = P, Z._70I = !0, Z.F = 0, Z._83O = w + P, Z.pen = {x: 0, y: 0}
            }, Ch = "lineDashOffset", xd = "setLineDash", ad = function (t) {
                for (var Y in t) 1 === Y.length && (Ch = t[Y]);
                return Y ? 1 : 0
            }, Pn = function (i, b, m) {
                return Al(b) ? i : i[xd] ? (i[xd](b), m && (i.lineDashOffset = m), i) : new mf(i, b[0], b.length > 1 ? b[1] : b[0])
            }, ck = function (Y, p) {
                !Al(p) && Y[xd] && (Y[xd](bn), Y.lineDashOffset = 0)
            };
        if (Jr(mf, H, {
            _69I: 6, moveTo: function (p, v) {
                var B = this, i = B.pen;
                i.x = p, i.y = v, B.g.moveTo(p, v), B.start || (B.start = {x: p, y: v})
            }, lineTo: function (b, r) {
                var W = this, U = W.pen, A = b - U.x, u = r - U.y, R = N(u, A), o = c(R), s = J(R),
                    C = W._23O(U.x, U.y, b, r), j = W._85O, P = W._84O, E = W._83O;
                if (W.F) {
                    if (W.F > C) return W._70I ? W._72I(b, r) : W.moveTo(b, r), W.F -= C, void 0;
                    if (W._70I ? W._72I(U.x + o * W.F, U.y + s * W.F) : W.moveTo(U.x + o * W.F, U.y + s * W.F), C -= W.F, W.F = 0, W._70I = !W._70I, !C) return
                }
                var n = V(C / E);
                if (n) {
                    for (var G = o * P, X = s * P, l = o * j, L = s * j, D = 0; n > D; D++) W._70I ? (W._72I(U.x + G, U.y + X), W.moveTo(U.x + l, U.y + L)) : (W.moveTo(U.x + l, U.y + L), W._72I(U.x + G, U.y + X));
                    C -= E * n
                }
                W._70I ? C > P ? (W._72I(U.x + o * P, U.y + s * P), W.moveTo(b, r), W.F = j - (C - P), W._70I = !1) : (W._72I(b, r), C === P ? (W.F = 0, W._70I = !W._70I) : (W.F = P - C, W.moveTo(b, r))) : C > j ? (W.moveTo(U.x + o * j, U.y + s * j), W._72I(b, r), W.F = P - (C - j), W._70I = !0) : (W.moveTo(b, r), C === j ? (W.F = 0, W._70I = !W._70I) : W.F = j - C)
            }, quadraticCurveTo: function (z, e, Q, t) {
                var U, B = this, G = B.pen, S = G.x, g = G.y, c = B._22O(S, g, z, e, Q, t), E = 0, $ = 0, v = B._85O,
                    a = B._84O;
                if (B.F) {
                    if (B.F > c) return B._70I ? B._71I(z, e, Q, t) : B.moveTo(Q, t), B.F -= c, void 0;
                    if (E = B.F / c, U = B._20O(S, g, z, e, Q, t, E), B._70I ? B._71I(U[2], U[3], U[4], U[5]) : B.moveTo(U[4], U[5]), B.F = 0, B._70I = !B._70I, !c) return
                }
                var x = c - c * E, F = V(x / B._83O), W = a / c, P = v / c;
                if (F) for (var u = 0; F > u; u++) B._70I ? ($ = E + W, U = B._21O(S, g, z, e, Q, t, E, $), B._71I(U[2], U[3], U[4], U[5]), E = $, $ = E + P, U = B._21O(S, g, z, e, Q, t, E, $), B.moveTo(U[4], U[5])) : ($ = E + P, U = B._21O(S, g, z, e, Q, t, E, $), B.moveTo(U[4], U[5]), E = $, $ = E + W, U = B._21O(S, g, z, e, Q, t, E, $), B._71I(U[2], U[3], U[4], U[5])), E = $;
                x = c - c * E, B._70I ? x > a ? ($ = E + W, U = B._21O(S, g, z, e, Q, t, E, $), B._71I(U[2], U[3], U[4], U[5]), B.moveTo(Q, t), B.F = v - (x - a), B._70I = !1) : (U = B._19O(S, g, z, e, Q, t, E), B._71I(U[2], U[3], U[4], U[5]), c === a ? (B.F = 0, B._70I = !B._70I) : (B.F = a - x, B.moveTo(Q, t))) : x > v ? ($ = E + P, U = B._21O(S, g, z, e, Q, t, E, $), B.moveTo(U[4], U[5]), U = B._19O(S, g, z, e, Q, t, $), B._71I(U[2], U[3], U[4], U[5]), B.F = a - (x - v), B._70I = !0) : (B.moveTo(Q, t), x === v ? (B.F = 0, B._70I = !B._70I) : B.F = v - x)
            }, bezierCurveTo: function () {
                var r = arguments;
                this.pen = {x: r[4], y: r[5]}, this.g.bezierCurveTo(r[0], r[1], r[2], r[3], r[4], r[5])
            }, arc: function (t, O, n, v, T, x) {
                x || (v = -v, T = -T), Rq(this, t, O, v, T - v, n, n, !1)
            }, rect: function (h, n, E, o) {
                var S = this;
                S.pen = {
                    x: h,
                    y: n
                }, S.moveTo(h, n), S.lineTo(h, n + o), S.lineTo(h + E, n + o), S.lineTo(h + E, n), S.lineTo(h, n)
            }, beginPath: function () {
                this.g.beginPath()
            }, closePath: function () {
                this.lineTo(this.start.x, this.start.y)
            }, _23O: function (r, m, s, N) {
                var V = s - r, j = N - m;
                return e(V * V + j * j)
            }, _22O: function (f, h, k, B, o, N, b) {
                for (var s, Y, r, L, j, D, F, n = 0, K = f, v = h, e = b > 0 ? b : this._69I, $ = 1; e >= $; $++) r = $ / e, L = 1 - r, j = L * L, D = 2 * r * L, F = r * r, s = j * f + D * k + F * o, Y = j * h + D * B + F * N, n += this._23O(K, v, s, Y), K = s, v = Y;
                return n
            }, _21O: function (Q, O, b, d, r, v, e, w) {
                var W = this;
                if (0 === e) return W._20O(Q, O, b, d, r, v, w);
                if (1 === w) return W._19O(Q, O, b, d, r, v, e);
                var I = W._20O(Q, O, b, d, r, v, w);
                return I.push(e / w), W._19O.apply(W, I)
            }, _20O: function (q, G, o, I, r, p, c) {
                if (1 !== c) {
                    var j = o + (r - o) * c, y = I + (p - I) * c;
                    o = q + (o - q) * c, I = G + (I - G) * c, r = o + (j - o) * c, p = I + (y - I) * c
                }
                return [q, G, o, I, r, p]
            }, _19O: function (g, L, y, q, F, h, e) {
                if (1 !== e) {
                    var K = g + (y - g) * e, k = L + (q - L) * e;
                    y += (F - y) * e, q += (h - q) * e, g = K + (y - K) * e, L = k + (q - k) * e
                }
                return [g, L, y, q, F, h]
            }, _72I: function (n, t) {
                var e = this.pen;
                (n !== e.x || t !== e.y) && (e.x = n, e.y = t, this.g.lineTo(n, t))
            }, _71I: function (X, B, R, W) {
                var g = this.pen;
                (X !== R || B !== W || R !== g.x || W !== g.y) && (g.x = R, g.y = W, this.g.quadraticCurveTo(X, B, R, W))
            }
        }), A && b) {
            var ur = b.toString();
            z = ur.indexOf(Sm.substr(0, 2)) > 0 && ur.indexOf(Tp + Tp.substr(1, 1)) > 1 || ur.indexOf(sb.substr(0, 2) + Sm.substr(2, 2) + Pq[0] + Sm[4]) > 1 ? !0 : !1
        }
        var Wp = o, Fd = o, Dm = function (V) {
                Wp && !V._72O && (Fd || (Fd = {}), Fd[V._72O = Fb()] = V)
            }, ph = function (f, p) {
                if (p || (p = f), p && (Wp || (Wp = {}), !Wp[f])) {
                    var D = new Wl;
                    if (Wp[p] = {request: D, url: p}, p = w.beforeLoadURL(p), p.data) {
                        var Z = w.parse(p.data);
                        sk(f, Z), w.handleCompTypeLoaded(f, Z)
                    } else {
                        D.onload = function (z) {
                            if (200 === this.status || 0 === this.status) {
                                var a = w.parse(z.target.response || z.target.responseText);
                                sk(f, a), w.handleCompTypeLoaded(f, a)
                            } else sk(f, o)
                        }, D.onerror = function () {
                            sk(f, o)
                        };
                        var k = {};
                        k.url = encodeURI(p), k.sync = !1, D.send(k)
                    }
                }
            }, sk = function (h, i) {
                if (fd[h] = i, delete Wp[h], Xi(Wp) && (Wp = o, Fd)) {
                    for (var L in Fd) {
                        var l = Fd[L];
                        l.invalidateAll && l.invalidateAll(v, "compTypeLoaded", h), l.redraw && l.redraw(), l.iv(), delete l._72O
                    }
                    Fd = o
                }
                if (i && Fd) for (var L in Fd) {
                    var l = Fd[L];
                    l.invalidateAll && l.invalidateAll(v, "compTypeLoading", h), l.redraw && l.redraw(), l.iv()
                }
            }, Qk = Q.chart, dq = "", Bj = w.compStack = [], ii = /^style@/, up = /^attr@/, vd = /^field@/,
            Gn = {x: .5, y: .5}, Iq = function (f, y, J, U) {
                if (!f) return 0;
                if (pe(f.fitSize, y, J) && U) return U;
                var E = pe(f.width, y, J);
                return null == E ? 20 : E
            }, Ne = function (N, R, w, K) {
                if (!N) return 0;
                if (pe(N.fitSize, R, w) && K) return K;
                var E = pe(N.height, R, w);
                return null == E ? 20 : E
            }, pe = function (V, x, c) {
                if (!V || !V.func) return V;
                var T, b = V.func, s = V.value;
                return T = gp(b) ? c && c.vectorDataBindingDisabled && !V.isSafeFunc ? s : b(x, c) : x instanceof xk ? up.test(b) ? x.a(dq + b.slice(5)) : ii.test(b) ? x.s(dq + b.slice(6)) : vd.test(b) ? x[b.slice(6)] : x[b] ? x[b](c) : s : s, s !== v && T == o ? s : T
            }, Co = w.drawImage = function () {
                var T, s, x, M, P, t, $ = function (e, T) {
                    e.getValue && e.getValue.compType === T || (e.getValue = function (t) {
                        var D = l(e, t);
                        if (D === v && T.properties) {
                            var U = T.properties[t];
                            U && (D = U.defaultValue)
                        }
                        return D
                    }, e.getColor = function (Z) {
                        return f(e.getValue(Z))
                    }, e.getValue.compType = T)
                }, l = function (j, X, I) {
                    var k, g = !1;
                    if (j.prefix && s instanceof xk) {
                        var d = s.a(dq + X);
                        d !== v && (g = !0, k = d)
                    }
                    return k === v && (k = j[X]), k && k.func && (g = !0, k = pe(k, s, x)), I && (k = I(k), g || (j[X] = k)), k
                }, f = function (A, J) {
                    var W;
                    if (W = J ? l(A, J) : A, T && T.compGray && W) return w.toGrayColor(W);
                    if (P && W) {
                        if ("override" === t) return P;
                        if ("override_rgb" === t) {
                            var I = as(P);
                            return W = te(W), "rgba(" + V(255 * I[0]) + "," + V(255 * I[1]) + "," + V(255 * I[2]) + "," + W[3] / 255 + ")"
                        }
                        if ("override_a" === t) {
                            var I = as(P);
                            return W = te(W), "rgba(" + W[0] + "," + W[1] + "," + W[2] + "," + I[3] + ")"
                        }
                        var I = as(P);
                        return W = te(W), "rgba(" + V(W[0] * I[0]) + "," + V(W[1] * I[1]) + "," + V(W[2] * I[2]) + "," + W[3] / 255 * I[3] + ")"
                    }
                    return W
                }, E = function (Y) {
                    if (Ll(Y)) {
                        for (var C = new Pf, c = Y.length, t = 0; c > t; t += 2) C.add({x: Y[t], y: Y[t + 1]});
                        Y = C
                    }
                    return Y
                }, N = function (j) {
                    var J = l(j, "anchorX"), u = l(j, "anchorY");
                    if (J !== v || u !== v) return {x: J === v ? Gn.x : J, y: u === v ? Gn.y : u};
                    var $ = l(j, "type"), G = l(j, "name");
                    if ("image" !== $ || !G) return Gn;
                    var q = Ui(G);
                    return q && q.anchorX !== v && q.anchorY !== v ? {x: q.anchorX, y: q.anchorY} : Gn
                }, K = function (S, B) {
                    var G = l(S, ap), V = N(S);
                    if (Ll(G)) {
                        var X = G.length, J = l(S, "relative"), W = B.width, I = B.height;
                        if (4 === X) G = {
                            x: G[0],
                            y: G[1],
                            width: G[2],
                            height: G[3]
                        }, J && (G.x *= W, G.y *= I, G.width *= W, G.height *= I); else if (3 === X) {
                            var R = G[0];
                            G = {
                                width: G[1],
                                height: G[2]
                            }, J && (G.width *= W, G.height *= I), "object" == typeof R ? R.length && (R = {
                                x: R[0],
                                y: R[1]
                            }) : R = Sn(R, B, G), G.x = R.x - G.width * V.x, G.y = R.y - G.height * V.y
                        }
                        G.x += l(S, "offsetX") || 0, G.y += l(S, "offsetY") || 0, !J && B.fitSize && (G = k(S, G, B))
                    }
                    return G
                }, k = function (m, B, F) {
                    if (B) {
                        var x, h, g, j = {x: B.x, y: B.y, width: B.width, height: B.height}, $ = N(m), f = l(m, "layoutH"),
                            O = l(m, "layoutV"), e = 1, I = 1, T = 0, i = 0, t = 1, C = 1;
                        switch (f) {
                            case"left":
                                break;
                            case"right":
                                j.x += F.width - F.rw;
                                break;
                            case"center":
                                j.x += .5 * (F.width - F.rw);
                                break;
                            case"scale":
                            case"leftright":
                            default:
                                x = l(m, pr) || 0, x && (T = Math.abs(i = Math.sin(x)), t = Math.abs(C = Math.cos(x))), "leftright" !== f ? (e += t * (F.widthScale - 1), I += T * (F.widthScale - 1)) : (e += j.width ? t * (F.width - F.rw) / j.width : 0, I += j.height ? T * (F.width - F.rw) / j.height : 0, h = -Math.min(-$.x * C + $.y * i, -$.x * C - (1 - $.y) * i, (1 - $.x) * C + $.y * i, (1 - $.x) * C - (1 - $.y) * i))
                        }
                        switch (O) {
                            case"top":
                                break;
                            case"bottom":
                                j.y += F.height - F.rh;
                                break;
                            case"center":
                                j.y += .5 * (F.height - F.rh);
                                break;
                            case"scale":
                            case"topbottom":
                            default:
                                x == o && (x = l(m, pr), x && (T = Math.abs(i = Math.sin(x)), t = Math.abs(C = Math.cos(x)))), "topbottom" !== O ? (e += T * (F.heightScale - 1), I += t * (F.heightScale - 1)) : (e += j.width ? T * (F.height - F.rh) / j.width : 0, I += j.height ? t * (F.height - F.rh) / j.height : 0, g = -Math.min(-$.x * i - $.y * C, -$.x * i + (1 - $.y) * C, (1 - $.x) * i - $.y * C, (1 - $.x) * i + (1 - $.y) * C))
                        }
                        return (1 !== e || 1 !== I) && ("scale" !== f && f ? "leftright" === f && (j.x += j.width * (1 - e) * $.x + h * (F.width - F.rw)) : j.x += j.x * (F.widthScale - 1) + $.x * j.width * (F.widthScale - e), "scale" !== O && O ? "topbottom" === O && (j.y += j.height * (1 - I) * $.y + g * (F.height - F.rh)) : j.y += j.y * (F.heightScale - 1) + $.y * j.height * (F.heightScale - I), j.width *= e, j.height *= I), j.width < 0 && (j.width = 0), j.height < 0 && (j.height = 0), j
                    }
                }, R = function (U) {
                    return Ll(U) ? new Pf(U) : U
                }, z = function (m, H, L, X, t, o, Q) {
                    var K = T.interactiveInfo, $ = m.transform;
                    if ($) return T.save(), T.setTransform($.a, $.b, $.c, $.d, $.tx, $.ty), K && K.compInfos.push({
                        comp: m,
                        rect: H,
                        matrix: $.clone()
                    }), !0;
                    t === v && (t = 1), o === v && (o = 1);
                    var b = l(m, "clipPercentage"), I = _n(L, H);
                    if (I && !X && 1 === t && 1 === o && !(1 > b)) return K && K.compInfos.push({
                        comp: m,
                        rect: H,
                        matrix: K.matrix.clone()
                    }), !1;
                    Q = Q || Gn;
                    var w = H.x + H.width * Q.x, p = H.y + H.height * Q.y, h = L.x + L.width * Q.x,
                        D = L.y + L.height * Q.y, V = L.width ? t * (H.width / L.width) : 1,
                        F = L.height ? o * (H.height / L.height) : 1;
                    if (T.save(), K && (K.matrix.appendTranslate(w, p).appendRotate(X).appendScale(V, F).appendTranslate(-h, -D), K.compInfos.push({
                        comp: m,
                        rect: H,
                        matrix: K.matrix.clone()
                    })), xi(T, w, p), _e(T, X || 0), md(T, V, F), xi(T, -h, -D), 1 > b) {
                        0 > b && (b = 0);
                        var B = Dk(L, l(m, "clipDirection"), b);
                        T.beginPath(), T.rect(B.x, B.y, B.width, B.height), T.clip()
                    }
                    return !0
                }, y = function () {
                    T.restore()
                }, B = function (E, L, O) {
                    var i = l(E, "path"), R = l(E, pr), p = l(E, "scaleX"), h = l(E, "scaleY"), b = N(E), v = o,
                        U = Zc(null, i);
                    if (O || (O = E.unionRect, O || (O = an(U), E.path.func || (E.unionRect = O)), v = O), O) {
                        v || (v = E.unionRect, v || (v = an(U), E.path.func || (E.unionRect = v)));
                        var B = z(E, O, v, R, p, h, b), g = l(E, "borderPattern"), H = Pn(T, g), n = f(E, "background"),
                            Z = f(E, "borderColor"), k = l(E, "borderWidth"), K = l(E, "gradient"),
                            P = f(E, "gradientColor"), Y = l(E, "border3d"), x = l(E, "border3dColor"),
                            s = l(E, "border3dAccuracy"), A = T.lineJoin, t = T.lineCap;
                        if (T.lineJoin = l(E, "borderJoin") || cp, T.lineCap = l(E, "borderCap") || Dq, n ? (Om(T, n, K, P, v), Zc(T, i), T.fill(), H !== T && Zc(T, i)) : Zc(T, i), k && Z) {
                            var q = l(E, "borderWidthAbsolute");
                            q && (T.save(), T.setTransform(1, 0, 0, 1, 0, 0)), T.lineWidth = k, T.strokeStyle = Z, T.stroke(), q && T.restore(), Y && xs(T, Z, x, k, M, s)
                        }
                        if (ck(T, g), l(E, "dash")) {
                            var _ = l(E, "dashWidth") || k;
                            if (_ > 0) {
                                g = l(E, "dashPattern") || bq;
                                var H = Pn(T, g, l(E, "dashOffset")), W = f(E, "dashColor") || f(jo);
                                H !== T && Zc(T, i), T.strokeStyle = W, T.lineWidth = _, T.stroke(), l(E, "dash3d") && xs(T, W, f(E, "dash3dColor"), _, M, l(E, "dash3dAccuracy")), ck(T, g)
                            }
                        }
                        L === ap && bf(T, n, l(E, "depth"), v), T.lineJoin = A, T.lineCap = t, B && y()
                    }
                }, b = function (b, i, B, Q) {
                    var K = l(b, qr, E), Y = l(b, pr), $ = N(b);
                    if (K && Q.fitSize) {
                        var S = new Pf, n = an(K), O = k(b, n, Q), G = n.x + $.x * n.width, W = n.y + $.y * n.height,
                            A = O.x + $.x * O.width, h = O.y + $.y * O.height, j = n.width ? O.width / n.width : 1,
                            c = n.height ? O.height / n.height : 1;
                        K.each(function (D) {
                            S.add({x: A + (D.x - G) * j, y: h + (D.y - W) * c})
                        }), K = S, b.unionRect = null
                    }
                    var g = l(b, "scaleX"), e = l(b, "scaleY"), J = i === Up, d = o;
                    if (!B && J && (B = b.unionRect, B || (B = an(K), b.points.func || (b.unionRect = B)), d = B), B) {
                        J ? d || (d = b.unionRect, d || (d = an(K), b.points.func || (b.unionRect = d))) : d = B;
                        var _, m, C, u, w = z(b, B, d, Y, g, e, $), X = l(b, "borderPattern"), L = Pn(T, X),
                            v = f(b, "background"), r = Ui(l(b, "repeatImage"), P, t), q = l(b, "gradientPack"),
                            p = f(b, "borderColor"), a = l(b, "borderWidth"), U = l(b, "segments", R), Z = l(b, "gradient"),
                            D = f(b, "gradientColor"), H = l(b, "border3d"), V = l(b, "border3dColor"),
                            I = l(b, "border3dAccuracy"), F = l(b, "closePath"), Tj = l(b, "fillRule") || "nonzero",
                            $k = T.lineJoin, Le = T.lineCap;
                        if (T.lineJoin = l(b, "borderJoin") || cp, T.lineCap = l(b, "borderCap") || Dq, J) if (v || r || q) {
                            var es = l(b, "fillClipPercentage");
                            if (1 > es) {
                                0 > es && (es = 0);
                                var Ef = Dk(d, l(b, "fillClipDirection"), es);
                                T.save(), T.beginPath(), T.rect(Ef.x, Ef.y, Ef.width, Ef.height), T.clip()
                            }
                            if (Vd(T, K, U, F), q) br(T, q); else if (r) {
                                var Qn = T, lc = P, Jh = t;
                                eb(T, r, P, t, s, x), T = Qn, P = lc, t = Jh
                            } else {
                                var Qn = T;
                                Om(T, v, Z, D, d), T = Qn
                            }
                            T.fill(Tj), 1 > es && T.restore(), q && T.restore(), L !== T && Vd(L, K, U, F)
                        } else Vd(L, K, U, F); else if ("roundRect" === i ? _ = l(b, "cornerRadius") : "polygon" === i ? _ = l(b, "polygonSide") : "arc" === i && (_ = l(b, "arcFrom"), m = l(b, "arcTo"), C = l(b, "arcClose"), u = l(b, "arcOval")), v || r || q) {
                            var es = l(b, "fillClipPercentage");
                            if (1 > es) {
                                0 > es && (es = 0);
                                var Ef = Dk(d, l(b, "fillClipDirection"), es);
                                T.save(), T.beginPath(), T.rect(Ef.x, Ef.y, Ef.width, Ef.height), T.clip()
                            }
                            if (vr(T, i, d, _, m, C, u), q) br(T, q); else if (r) {
                                var Qn = T, lc = P, Jh = t;
                                eb(T, r, P, t, s, x), T = Qn, P = lc, t = Jh
                            } else Om(T, v, Z, D, d);
                            T.fill(Tj), 1 > es && T.restore(), q && T.restore(), T !== L && vr(L, i, d, _, m, C, u)
                        } else vr(L, i, d, _, m, C, u);
                        if (a && p) {
                            var Kd = l(b, "borderWidthAbsolute");
                            Kd && (T.save(), T.setTransform(1, 0, 0, 1, 0, 0)), T.lineWidth = a, T.strokeStyle = p, T.stroke(), Kd && T.restore(), H && xs(T, p, V, a, M, I)
                        }
                        if (ck(T, X), l(b, "dash")) {
                            var Og = l(b, "dashWidth") || a;
                            if (Og > 0) {
                                X = l(b, "dashPattern") || bq;
                                var L = Pn(T, X, l(b, "dashOffset")), Dp = f(b, "dashColor") || f(jo);
                                L !== T && (J ? Vd(L, K, U, F) : vr(L, i, d, _, m, C, u)), T.strokeStyle = Dp, T.lineWidth = Og, T.stroke(), l(b, "dash3d") && xs(T, Dp, f(b, "dash3dColor"), Og, M, l(b, "dash3dAccuracy")), ck(T, X)
                            }
                        }
                        i === ap && bf(T, v, l(b, "depth"), d), T.lineJoin = $k, T.lineCap = Le, w && y()
                    }
                }, I = function (H, i) {
                    var B = P, e = t, v = P || l(H, be), Z = t || l(H, "blendMode"), k = Ui(l(H, "name"), v, Z);
                    k && (Ng(T, k, l(H, "stretch"), i.x, i.y, i.width, i.height, s, x, v, null, Z), P = B, t = e)
                }, S = function (a, y) {
                    var h = l(a, "text");
                    h != o && Be(T, h, l(a, "font"), f(a, be), y.x, y.y, y.width, y.height, l(a, "align"), l(a, "vAlign"))
                }, h = function (J, V) {
                    gd(T, f(J, be), V.x, V.y, V.width, V.height, l(J, "width"))
                }, O = function (N, I) {
                    var t = l(N, bm), h = 0;
                    if (t && (t.forEach(function (Z) {
                        h += Z
                    }), h > 0)) {
                        for (var M = l(N, "colors") || Qk, i = l(N, "startAngle") || 0, w = l(N, "hollow"), V = l(N, Fj), p = l(N, sp), _ = l(N, Yc), u = V ? new Pf : o, Q = I.x, d = I.y, A = I.width, D = I.height, z = Q + A / 2, B = d + D / 2, n = g(A, D) / 2, P = 0, F = 0; F < t.length; F++) {
                            var b = t[F], E = C * b / h, x = i + E;
                            if (T.fillStyle = M[P++], P === M.length && (P = 0), T.beginPath(), w) {
                                var R = z + c(i) * n / 2, j = B + J(i) * n / 2, $ = z + c(x) * n, K = B + J(x) * n;
                                T.moveTo(R, j), T.arc(z, B, n / 2, i, x, !1), T.lineTo($, K), T.arc(z, B, n, x, i, !0)
                            } else T.moveTo(z, B), T.arc(z, B, n, x, i, !0);
                            u && (E = (i + x) / 2, u.add({
                                text: gp(V) ? V(b, F, h, s) : b,
                                x: z + .75 * c(E) * n,
                                y: B + .75 * J(E) * n
                            })), T.closePath(), T.fill(), i = x
                        }
                        u && u.each(function (z) {
                            Be(T, z.text, p, _, z.x, z.y, 0, 0, Wk)
                        })
                    }
                }, e = function (m, v) {
                    var R = l(m, Cm);
                    if (R && R.length > 0) {
                        var x = R.length, Q = l(m, Fj), t = l(m, sp), g = l(m, Yc), P = Q ? new Pf : o,
                            L = l(m, "minValue") || 0, d = l(m, "maxValue");
                        if (d == o && (d = 0, R.forEach(function (Z) {
                            l(Z, bm).forEach(function (T) {
                                d = n(d, T)
                            })
                        })), L === d) return;
                        for (var C = v.height / (d - L), r = v.y + d * C, y = l(R[0], bm).length, O = v.width / (3 * y + 1), G = 2 * O / x, _ = 0, z = 0; x > z; z++) for (var b = R[z], Y = l(b, be), h = l(b, "colors"), K = l(b, bm), N = 0; y > N; N++) {
                            h ? T.fillStyle = h[N] : Y ? T.fillStyle = Y : (T.fillStyle = Qk[_++], _ === Qk.length && (_ = 0));
                            var S = K[N], D = S * C, Z = v.x + (1 + 3 * N) * O + z * G;
                            if (Rf(T, Z, r - D, G, D), P) {
                                var F = gp(Q) ? Q(S, N, b, s) : S, E = Dp(t, F).height;
                                P.add({x: Z, y: r - D - E, width: G, height: E, text: F})
                            }
                        }
                        P && P.each(function (y) {
                            Be(T, y.text, t, g, y.x, y.y, y.width, y.height, Wk)
                        })
                    }
                }, G = function (N, p) {
                    var u = l(N, Cm);
                    if (u && u.length > 0) {
                        var X = u.length, O = l(u[0], bm).length, R = p.width / (3 * O + 1), b = 0, I = l(N, "maxValue"),
                            K = l(N, Fj), h = l(N, sp), W = l(N, Yc), B = K ? new Pf : o;
                        if (I == o) {
                            I = 0;
                            for (var J = 0; O > J; J++) {
                                for (var P = 0, U = 0; X > U; U++) P += l(u[U], bm)[J];
                                I = n(I, P)
                            }
                        }
                        if (I > 0) {
                            for (var J = 0; O > J; J++) for (var H = p.y + p.height, U = 0; X > U; U++) {
                                var E = u[U], w = l(E, be), k = l(E, bm)[J], A = k / I * p.height;
                                w ? T.fillStyle = w : (T.fillStyle = Qk[b++], b === Qk.length && (b = 0)), H -= A;
                                var x = {x: p.x + (1 + 3 * J) * R, y: H, width: 2 * R, height: A};
                                Rf(T, x.x, x.y, x.width, x.height), B && (x.text = gp(K) ? K(k, J, E, s) : k, B.add(x))
                            }
                            B && B.each(function (z) {
                                Be(T, z.text, h, W, z.x, z.y, z.width, z.height, Wk)
                            })
                        }
                    }
                }, F = function (m, R) {
                    var W = l(m, Cm);
                    if (W && W.length > 0) {
                        for (var O = W.length, d = l(W[0], bm).length, g = R.width / (3 * d + 1), p = 0, c = l(m, Fj), G = l(m, sp), F = l(m, Yc), V = c ? new Pf : o, j = 0; d > j; j++) {
                            for (var Y = 0, w = 0; O > w; w++) Y += l(W[w], bm)[j];
                            if (Y > 0) {
                                var i = R.y + R.height;
                                for (w = 0; O > w; w++) {
                                    var k = W[w], $ = l(k, be), X = l(k, bm)[j], n = X / Y * R.height;
                                    $ ? T.fillStyle = $ : (T.fillStyle = Qk[p++], p === Qk.length && (p = 0)), i -= n;
                                    var S = {x: R.x + (1 + 3 * j) * g, y: i, width: 2 * g, height: n};
                                    Rf(T, S.x, S.y, S.width, S.height), V && (S.text = gp(c) ? c(X, j, k, s) : X, V.add(S))
                                }
                            }
                        }
                        V && V.each(function (d) {
                            Be(T, d.text, G, F, d.x, d.y, d.width, d.height, Wk)
                        })
                    }
                }, U = function (k, L) {
                    var m = l(k, Cm);
                    if (m && m.length > 0) {
                        var P = m.length, A = l(k, "minValue") || 0, t = l(k, "maxValue");
                        if (t == o && (t = 0, m.forEach(function (R) {
                            l(R, bm).forEach(function (b) {
                                t = n(t, b)
                            })
                        })), A === t) return;
                        for (var H = L.height / (t - A), e = L.y + t * H, g = l(m[0], bm).length, v = L.width / (3 * g + 1), X = 0, p = l(k, "lineWidth") || 2, J = l(k, "line3d"), q = l(k, "linePoint"), W = l(k, Fj), _ = l(k, sp), D = l(k, Yc), S = 0; P > S; S++) {
                            var U = m[S], V = l(U, be), u = l(U, bm);
                            V ? T.strokeStyle = V : (V = T.strokeStyle = Qk[X++], X === Qk.length && (X = 0)), T.beginPath();
                            for (var j = 0; g > j; j++) {
                                var x = L.x + (2 + 3 * j) * v, K = e - u[j] * H;
                                0 === j ? T.moveTo(x, K) : T.lineTo(x, K)
                            }
                            if (T.lineWidth = p, T.stroke(), J && xs(T, V, o, p, M), q || W) {
                                var h, B = p / 2 + 2;
                                for (j = 0; g > j; j++) {
                                    var I = u[j];
                                    if (x = L.x + (2 + 3 * j) * v, K = e - I * H, gp(q) ? q(T, x, K, V, j, U, s) : q && (T.fillStyle = V, T.beginPath(), T.arc(x, K, B, 0, C, !0), T.fill()), gp(W) ? h = W(I, j, U, s) : W && (h = I), h) {
                                        var i = Dp(_, h).height, O = T.shadowBlur;
                                        if (O) {
                                            var E = T.shadowOffsetX, F = T.shadowOffsetY, N = T.shadowColor;
                                            T.shadowOffsetX = 0, T.shadowOffsetY = 0, T.shadowBlur = 0, T.shadowColor = o
                                        }
                                        Be(T, h, _, D, x, K - i - B + 2, 0, i, Wk), O && (T.shadowOffsetX = E, T.shadowOffsetY = F, T.shadowBlur = O, T.shadowColor = N)
                                    }
                                }
                            }
                        }
                    }
                }, j = function () {
                    T = null, s = null, x = null
                }, q = {
                    border: h,
                    image: I,
                    text: S,
                    pieChart: O,
                    columnChart: e,
                    stackedColumnChart: G,
                    percentageColumnChart: F,
                    lineChart: U
                };
                return function (I, c, V, k, J, h, i, Q, X, C) {
                    if (c && J && h) {
                        var u = T ? !1 : !0;
                        T = I, s = i, x = Q, M = x ? x._zoom ? x._zoom : 1 : 1, P = X, t = C;
                        var S = J, d = h;
                        if (Rk()) {
                            var L, _, Z;
                            0 === T[Ud] ? Rk[0] && (L = !0) : L = !0, T.texureImage2D ? Rk[1] && (_ = !0) : _ = !0, T.texureImage3D ? Rk[2] && (Z = !0) : Z = !0, L && _ && Z && (S = V, d = k)
                        }
                        if (c.tagName) return uf(D) && !r[D] || T.drawImage(c, S, d, J, h), u && j(), void 0;
                        if (l(c, "visible") === !1) return u && j(), void 0;
                        P || (P = pe(c.color, s, x)), C || (t = pe(c.blendMode, s, x)), uf(D) && !r[D] && (J = S, h = d);
                        var m = Iq(c, s, x, J), A = Ne(c, s, x, h),
                            U = {x: 0, y: 0, width: m, height: A, fitSize: l(c, "fitSize")}, G = l(c, "clip"),
                            e = l(c, "opacity");
                        if (U.fitSize) {
                            var g = U.rw = pe(c.width, s, x) || 20;
                            U.widthScale = m / g;
                            var W = U.rh = pe(c.height, s, x) || 20;
                            U.heightScale = A / W
                        }
                        if (T.save(), T.interactiveInfo) {
                            var Y = T.interactiveInfo.matrix, n = Y.clone();
                            Y.appendTranslate(S, d).appendScale(J / m, h / A)
                        }
                        xi(T, S, d), (m !== J || A !== h) && T.scale(J / m, h / A), G && (gp(G) ? G(T, m, A, s, x, c) : (T.beginPath(), T.rect(0, 0, m, A), T.clip())), e != o && (T.globalAlpha *= e), l(c, "comps").forEach(function (X) {
                            if (l(X, Td) !== !1) {
                                if (Bj.splice(0, 0, X), X.prefix) {
                                    var C = dq, t = pe(X.prefix, s, x);
                                    t && (dq = dq + t + ".")
                                }
                                if (T.interactiveInfo) var d = T.interactiveInfo.matrix.clone();
                                var V = l(X, "opacity"), a = l(X, "shadow"), D = l(X, "type"), Y = K(X, U);
                                if (V != o) {
                                    var g = T.globalAlpha;
                                    T.globalAlpha *= V
                                }
                                if (a) {
                                    var P = T.shadowOffsetX, n = T.shadowOffsetY, F = T.shadowBlur, J = T.shadowColor,
                                        W = l(X, "shadowOffsetX"), e = l(X, "shadowOffsetY"), H = l(X, "shadowBlur"),
                                        A = f(X, "shadowColor");
                                    T.shadowOffsetX = (W == o ? 3 : W) * M, T.shadowOffsetY = (e == o ? 3 : e) * M, T.shadowBlur = (H == o ? 6 : H) * M, T.shadowColor = A || f(mn)
                                }
                                if ("save" === D) T.save(); else if ("endClip" === D || "restore" === D) T.restore(); else if ("clip" === D) T.save(), Vd(T, l(X, "points", E), l(X, "segments", R), !0), T.clip(); else if (Er[D]) Y = Y || {
                                    x: 0,
                                    y: 0,
                                    width: U.width,
                                    height: U.height
                                }, b(X, D, Y, U); else if (D === Up) b(X, D, Y, U); else if ("SVGPath" === D) B(X, D, Y); else {
                                    Y = Y || {x: 0, y: 0, width: U.width, height: U.height};
                                    var Z = l(X, pr), I = l(X, "scaleX"), h = l(X, "scaleY"), Q = N(X),
                                        r = z(X, Y, Y, Z, I, h, Q);
                                    if (gp(D)) $(X, D), w.drawCompType(D, T, Y, X, s, x); else if (w.getCompType(D)) {
                                        var i = w.getCompType(D), u = i.func || i;
                                        $(X, i), w.drawCompType(u, T, Y, X, s, x)
                                    } else q[D] ? q[D](X, Y) : w.getCompType(D) === v && Gh.test(D) && ph(D);
                                    r && y()
                                }
                                a && (T.shadowOffsetX = P, T.shadowOffsetY = n, T.shadowBlur = F, T.shadowColor = J), V != o && (T.globalAlpha = g), T.interactiveInfo && (T.interactiveInfo.matrix = d), X.prefix && (dq = C), Bj.splice(0, 1)
                            }
                        }), T.interactiveInfo && (T.interactiveInfo.matrix = n), T.restore(), u && j()
                    }
                }
            }();
        w.getCurrentComp = function () {
            return Bj[0]
        }, w.getParentComp = function () {
            return Bj[1]
        }, w.getInternal = function () {
            return {
                isEnter: ml,
                isEsc: pi,
                isSpace: Hk,
                isLeft: Jm,
                isUp: pq,
                isRight: Ac,
                isDown: wb,
                addMethod: Mm,
                superCall: yp,
                toPointsArray: vi,
                translateAndScale: Ec,
                appendArray: ll,
                createWorldMatrix: Hg,
                vec3TransformMat4: Jg,
                setCanvas: zm,
                createDiv: Hm,
                createView: po,
                createCanvas: wg,
                createImage: Fn,
                initContext: Jb,
                layout: Vq,
                fillRect: Rf,
                Mat: Cg,
                drawBorder: gd,
                isString: uf,
                setBorder: Xr,
                getPropertyValue: Ug,
                setPropertyValue: Zp,
                drawVerticalLine: Nj,
                draw3DRect: bf,
                getPinchDist: vj,
                isSameRect: _n,
                getPosition: Sn,
                intersectionLineRect: Qp,
                getNodeRect: Eq,
                getEdgeAgentPosition: Zd,
                getImageWidth: Iq,
                getImageHeight: Ne,
                initItemElement: sr,
                drawPoints: Vd,
                createG2: Pn,
                closePopup: Fk,
                isH: mg,
                createAnim: Zq,
                createNormalMatrix: Og,
                createNormals: nq,
                toFloatArray: eg,
                glMV: Ci,
                batchShape: kc,
                createNodeMatrix: Zr,
                getFaceInfo: db,
                transformAppend: gb,
                drawFaceInfo: $k,
                to3dPointsArray: yr,
                setGLDebugMode: function (F) {
                    cm = F
                },
                cube: function () {
                    return {vs: we, is: Eo, uv: _d}
                },
                ui: function () {
                    return {
                        DataUI: Lh,
                        NodeUI: Wq,
                        EdgeUI: Rd,
                        GroupUI: Sq,
                        ShapeUI: Zf,
                        GridUI: Yl,
                        Data3dUI: sn,
                        Node3dUI: pp,
                        Shape3dUI: us
                    }
                },
                getInternalVersion: function () {
                    return "U2FsdGVkX18zEnJKI4jHmnR4V5w2FgTghcWE5oAQlW0="
                },
                getDragger: function () {
                    return fq
                },
                addMSMap: function (U) {
                    Mm(Pg, U)
                },
                k: $
            }
        }, function (Z) {
            function i(j, I) {
                j != o && (I == o && yl != typeof j ? this._54O(j, 256) : this._54O(j, I))
            }

            function d() {
                return new i(o)
            }

            function m(S, l, b, p, _, q) {
                for (; --q >= 0;) {
                    var I = l * this[S++] + b[p] + _;
                    _ = V(I / 67108864), b[p++] = 67108863 & I
                }
                return _
            }

            function E(B, h, H, r, U, i) {
                for (var V = 32767 & h, x = h >> 15; --i >= 0;) {
                    var u = 32767 & this[B], L = this[B++] >> 15, R = x * u + L * V;
                    u = V * u + ((32767 & R) << 15) + H[r] + (1073741823 & U), U = (u >>> 30) + (R >>> 15) + x * L + (U >>> 30), H[r++] = 1073741823 & u
                }
                return U
            }

            function y(i, Q, J, W, m, G) {
                for (var C = 16383 & Q, k = Q >> 14; --G >= 0;) {
                    var F = 16383 & this[i], z = this[i++] >> 14, g = k * F + z * C;
                    F = C * F + ((16383 & g) << 14) + J[W] + m, m = (F >> 28) + (g >> 14) + k * z, J[W++] = 268435455 & F
                }
                return m
            }

            function u(Y) {
                return Ai.charAt(Y)
            }

            function v(v, F) {
                var n = sq[v.charCodeAt(F)];
                return n == o ? -1 : n
            }

            function p(c) {
                for (var A = this.t - 1; A >= 0; --A) c[A] = this[A];
                c.t = this.t, c.s = this.s
            }

            function l(r) {
                this.t = 1, this.s = 0 > r ? -1 : 0, r > 0 ? this[0] = r : -1 > r ? this[0] = r + this.DV : this.t = 0
            }

            function x(D) {
                var Y = d();
                return Y._58O(D), Y
            }

            function R(q, U) {
                var r, H = this;
                if (16 == U) r = 4; else if (8 == U) r = 3; else if (256 == U) r = 8; else if (2 == U) r = 1; else if (32 == U) r = 5; else {
                    if (4 != U) return H.fromRadix(q, U), void 0;
                    r = 2
                }
                H.t = 0, H.s = 0;
                for (var d = q.length, Q = !1, B = 0; --d >= 0;) {
                    var I = 8 == r ? 255 & q[d] : v(q, d);
                    0 > I ? "-" == q.charAt(d) && (Q = !0) : (Q = !1, 0 == B ? H[H.t++] = I : B + r > H.DB ? (H[H.t - 1] |= (I & (1 << H.DB - B) - 1) << B, H[H.t++] = I >> H.DB - B) : H[H.t - 1] |= I << B, B += r, B >= H.DB && (B -= H.DB))
                }
                8 == r && 0 != (128 & q[0]) && (H.s = -1, B > 0 && (H[H.t - 1] |= (1 << H.DB - B) - 1 << B)), H._57O(), Q && i.ZERO._78O(H, H)
            }

            function Y() {
                for (var c = this, G = c.s & c.DM; c.t > 0 && c[c.t - 1] == G;) --c.t
            }

            function r(Z) {
                var H = this;
                if (H.s < 0) return "-" + H._85O()[Tn](Z);
                var n;
                if (16 == Z) n = 4; else if (8 == Z) n = 3; else if (2 == Z) n = 1; else if (32 == Z) n = 5; else {
                    if (4 != Z) return H.toRadix(Z);
                    n = 2
                }
                var C, J = (1 << n) - 1, B = !1, $ = "", m = H.t, U = H.DB - m * H.DB % n;
                if (m-- > 0) for (U < H.DB && (C = H[m] >> U) > 0 && (B = !0, $ = u(C)); m >= 0;) n > U ? (C = (H[m] & (1 << U) - 1) << n - U, C |= H[--m] >> (U += H.DB - n)) : (C = H[m] >> (U -= n) & J, 0 >= U && (U += H.DB, --m)), C > 0 && (B = !0), B && ($ += u(C));
                return B ? $ : "0"
            }

            function G() {
                var Y = d();
                return i.ZERO._78O(this, Y), Y
            }

            function L() {
                return this.s < 0 ? this._85O() : this
            }

            function B(o) {
                var K = this, H = K.s - o.s;
                if (0 != H) return H;
                var A = K.t;
                if (H = A - o.t, 0 != H) return K.s < 0 ? -H : H;
                for (; --A >= 0;) if (0 != (H = K[A] - o[A])) return H;
                return 0
            }

            function F(s) {
                var X, y = 1;
                return 0 != (X = s >>> 16) && (s = X, y += 16), 0 != (X = s >> 8) && (s = X, y += 8), 0 != (X = s >> 4) && (s = X, y += 4), 0 != (X = s >> 2) && (s = X, y += 2), 0 != (X = s >> 1) && (s = X, y += 1), y
            }

            function a() {
                var E = this;
                return E.t <= 0 ? 0 : E.DB * (E.t - 1) + F(E[E.t - 1] ^ E.s & E.DM)
            }

            function S(j, I) {
                var D;
                for (D = this.t - 1; D >= 0; --D) I[D + j] = this[D];
                for (D = j - 1; D >= 0; --D) I[D] = 0;
                I.t = this.t + j, I.s = this.s
            }

            function X(u, M) {
                for (var F = u; F < this.t; ++F) M[F - u] = this[F];
                M.t = n(this.t - u, 0), M.s = this.s
            }

            function h(G, p) {
                var u, c = this, L = G % c.DB, N = c.DB - L, U = (1 << N) - 1, M = V(G / c.DB), P = c.s << L & c.DM;
                for (u = c.t - 1; u >= 0; --u) p[u + M + 1] = c[u] >> N | P, P = (c[u] & U) << L;
                for (u = M - 1; u >= 0; --u) p[u] = 0;
                p[M] = P, p.t = c.t + M + 1, p.s = c.s, p._57O()
            }

            function f(B, I) {
                var k = this;
                I.s = k.s;
                var f = V(B / k.DB);
                if (f >= k.t) return I.t = 0, void 0;
                var N = B % k.DB, R = k.DB - N, K = (1 << N) - 1;
                I[0] = k[f] >> N;
                for (var s = f + 1; s < k.t; ++s) I[s - f - 1] |= (k[s] & K) << R, I[s - f] = k[s] >> N;
                N > 0 && (I[k.t - f - 1] |= (k.s & K) << R), I.t = k.t - f, I._57O()
            }

            function T(W, J) {
                for (var o = this, O = 0, P = 0, E = g(W.t, o.t); E > O;) P += o[O] - W[O], J[O++] = P & o.DM, P >>= o.DB;
                if (W.t < o.t) {
                    for (P -= W.s; O < o.t;) P += o[O], J[O++] = P & o.DM, P >>= o.DB;
                    P += o.s
                } else {
                    for (P += o.s; O < W.t;) P -= W[O], J[O++] = P & o.DM, P >>= o.DB;
                    P -= W.s
                }
                J.s = 0 > P ? -1 : 0, -1 > P ? J[O++] = o.DV + P : P > 0 && (J[O++] = P), J.t = O, J._57O()
            }

            function I(O, A) {
                var _ = this.abs(), x = O.abs(), S = _.t;
                for (A.t = S + x.t; --S >= 0;) A[S] = 0;
                for (S = 0; S < x.t; ++S) A[S + _.t] = _.am(0, x[S], A, S, 0, _.t);
                A.s = 0, A._57O(), this.s != O.s && i.ZERO._78O(A, A)
            }

            function O(m) {
                for (var N = this.abs(), k = m.t = 2 * N.t; --k >= 0;) m[k] = 0;
                for (k = 0; k < N.t - 1; ++k) {
                    var Z = N.am(k, N[k], m, 2 * k, 0, 1);
                    (m[k + N.t] += N.am(k + 1, 2 * N[k], m, 2 * k + 1, Z, N.t - k - 1)) >= N.DV && (m[k + N.t] -= N.DV, m[k + N.t + 1] = 1)
                }
                m.t > 0 && (m[m.t - 1] += N.am(k, N[k], m, 2 * k, 0, 1)), m.s = 0, m._57O()
            }

            function b(r, E, v) {
                var T = r.abs(), g = this;
                if (!(T.t <= 0)) {
                    var S = g.abs();
                    if (S.t < T.t) return E != o && E._58O(0), v != o && g._77O(v), void 0;
                    v == o && (v = d());
                    var u = d(), I = g.s, b = r.s, X = g.DB - F(T[T.t - 1]);
                    X > 0 ? (T._44O(X, u), S._44O(X, v)) : (T._77O(u), S._77O(v));
                    var G = u.t, O = u[G - 1];
                    if (0 != O) {
                        var z = O * (1 << g.F1) + (G > 1 ? u[G - 2] >> g.F2 : 0), R = g.FV / z, t = (1 << g.F1) / z,
                            k = 1 << g.F2, H = v.t, s = H - G, h = E == o ? d() : E;
                        for (u._59O(s, h), v._52O(h) >= 0 && (v[v.t++] = 1, v._78O(h, v)), i.ONE._59O(G, h), h._78O(u, u); u.t < G;) u[u.t++] = 0;
                        for (; --s >= 0;) {
                            var U = v[--H] == O ? g.DM : V(v[H] * R + (v[H - 1] + k) * t);
                            if ((v[H] += u.am(0, U, v, s, 0, G)) < U) for (u._59O(s, h), v._78O(h, v); v[H] < --U;) v._78O(h, v)
                        }
                        E != o && (v._45O(G, E), I != b && i.ZERO._78O(E, E)), v.t = G, v._57O(), X > 0 && v._46O(X, v), 0 > I && i.ZERO._78O(v, v)
                    }
                }
            }

            function k(x) {
                var R = d();
                return this.abs()._49O(x, o, R), this.s < 0 && R._52O(i.ZERO) > 0 && x._78O(R, R), R
            }

            function A(m) {
                this.m = m
            }

            function Q(O) {
                return O.s < 0 || O._52O(this.m) >= 0 ? O.mod(this.m) : O
            }

            function w(C) {
                return C
            }

            function _(Y) {
                Y._49O(this.m, o, Y)
            }

            function N(l, D, Y) {
                l._47O(D, Y), this._74O(Y)
            }

            function H(j, S) {
                j._48O(S), this._74O(S)
            }

            function P() {
                if (this.t < 1) return 0;
                var M = this[0];
                if (0 == (1 & M)) return 0;
                var y = 3 & M;
                return y = 15 & y * (2 - (15 & M) * y), y = 255 & y * (2 - (255 & M) * y), y = 65535 & y * (2 - (65535 & (65535 & M) * y)), y = y * (2 - M * y % this.DV) % this.DV, y > 0 ? this.DV - y : -y
            }

            function D(h) {
                var j = this;
                j.m = h, j.mp = h._50O(), j.mpl = 32767 & j.mp, j.mph = j.mp >> 15, j.um = (1 << h.DB - 15) - 1, j.mt2 = 2 * h.t
            }

            function z(I) {
                var x = d();
                return I.abs()._59O(this.m.t, x), x._49O(this.m, o, x), I.s < 0 && x._52O(i.ZERO) > 0 && this.m._78O(x, x), x
            }

            function M(J) {
                var w = d();
                return J._77O(w), this._74O(w), w
            }

            function U(F) {
                for (var o = this; F.t <= o.mt2;) F[F.t++] = 0;
                for (var B = 0; B < o.m.t; ++B) {
                    var n = 32767 & F[B], y = n * o.mpl + ((n * o.mph + (F[B] >> 15) * o.mpl & o.um) << 15) & F.DM;
                    for (n = B + o.m.t, F[n] += o.m.am(0, y, F, B, 0, o.m.t); F[n] >= F.DV;) F[n] -= F.DV, F[++n]++
                }
                F._57O(), F._45O(o.m.t, F), F._52O(o.m) >= 0 && F._78O(o.m, F)
            }

            function Cn(B, R) {
                B._48O(R), this._74O(R)
            }

            function hk(m, H, S) {
                m._47O(H, S), this._74O(S)
            }

            function pb() {
                return 0 == (this.t > 0 ? 1 & this[0] : this.s)
            }

            function tl(v, l) {
                if (v > 4294967295 || 1 > v) return i.ONE;
                var V = d(), f = d(), E = l._73O(this), D = F(v) - 1;
                for (E._77O(V); --D >= 0;) if (l._76O(V, f), (v & 1 << D) > 0) l._75O(f, E, V); else {
                    var h = V;
                    V = f, f = h
                }
                return l.revert(V)
            }

            function ec(L, E) {
                var F;
                return F = 256 > L || E._51O() ? new A(E) : new D(E), this.exp(L, F)
            }

            function Wf() {
                var W = this;
                if (W.s < 0) {
                    if (1 == W.t) return W[0] - W.DV;
                    if (0 == W.t) return -1
                } else {
                    if (1 == W.t) return W[0];
                    if (0 == W.t) return 0
                }
                return (W[1] & (1 << 32 - W.DB) - 1) << W.DB | W[0]
            }

            function Nm(E, A) {
                return new i(E, A)
            }

            function Kb() {
                var S = this;
                S.n = o, S.e = 0, S.d = o, S.p = o, S.q = o, S.dmp1 = o, S.dmq1 = o, S._10A = o
            }

            function sd(A) {
                return A._53O(this.e, this.n)
            }

            function gn(n) {
                var s, I, J, E = "", V = 0;
                for (s = 0; s < n.length && n.charAt(s) != mk; ++s) J = bc.indexOf(n.charAt(s)), 0 > J || (0 == V ? (E += u(J >> 2), I = 3 & J, V = 1) : 1 == V ? (E += u(I << 2 | J >> 4), I = 15 & J, V = 2) : 2 == V ? (E += u(I), E += u(J >> 2), I = 3 & J, V = 3) : (E += u(I << 2 | J >> 4), E += u(15 & J), V = 0));
                return 1 == V && (E += u(I << 2)), E
            }

            function Lc(b) {
                var G = b.split(""), J = gn(b);
                return G.forEach(function (w) {
                    var S = w.length;
                    S > 0 && J && (ci += j(w))
                }), J
            }

            function Ep(S, m) {
                var Y = ib._4O.Util._56O(S, "ss"), $ = {}, k = 0;
                return $.v = Y == m, $.t = 1, $.s = 0 > k ? -1 : 0, ui = $.v, k > 0 ? $[0] = k : -1 > k ? $[0] = k + $.DV : $.t = 0, [Y, $]
            }

            function jk(Z) {
                var q = 38, d = Z.substring(0, q);
                if (d && 30 == d.indexOf("05000420")) {
                    var $ = ["ss", Z.substring(q)];
                    return $
                }
                return []
            }

            function en(q, i) {
                i = i.replace(Dr, ""), i = i.replace(/[ \n]+/g, "");
                var H = Nm(i, 16);
                if (H._55O() > this.n._55O()) return 0;
                var $ = this._37O(H), o = $[Tn](16).replace(/^1f+00/, ""), m = jk(o);
                if (0 == m.length) return !1;
                for (var a, I, Y, V = .5, k = rd, R = [0, .5, .75, .875, .9375], T = [], O = [], U = [], P = C / k, r = m[1], F = Ep(q, r)[0], D = 0, N = 0; D < R.length; D++) {
                    var u = 0 === D % 2 ? 0 : .5;
                    for (a = 0; k >= a; a++) I = (a + u) * P, Y = 1 - R[D], T.push(c(I) * V * Y, -V + 2 * R[D] * V, -J(I) * V * Y), O.push((a + u) / k, Y)
                }
                for (D = 0; D < R.length - 1; D++) {
                    var y = D * (k + 1), K = (D + 1) * (k + 1);
                    for (a = 0; k > a; a++) U.push(y + a, K + a + 1, K + a, y + a, y + a + 1, K + a + 1)
                }
                return U.forEach(function (v) {
                    N += v
                }), r == F && N > 10
            }

            var _d, Hq = 0xdeadbeefcafe, pe = 15715070 == (16777215 & Hq), Tn = "toString", Cr = "", zf = "nat",
                eq = function () {
                };
            q = Z["D" + 11182[Tn](t(2, 5))];
            var Rk = i.prototype;
            yh += Je.substr(0, 1);
            var Sb = Z.navigator ? Z.navigator.appName : "";
            pe && "Microsoft Internet Explorer" == Sb ? (Rk.am = E, _d = 30) : pe && "Netscape" != Sb ? (Rk.am = m, _d = 26) : (Rk.am = y, _d = 28), Rk.DB = _d, Rk.DM = (1 << _d) - 1, Rk.DV = 1 << _d;
            var Zp = 52;
            Rk.FV = t(2, Zp), Rk.F1 = Zp - _d, Rk.F2 = 2 * _d - Zp;
            var hj, Gf, Ai = "0123456789abcdefghijklmnopqrstuvwxyz", sq = [], Im = function (F) {
                return String.fromCharCode(F)
            };
            for (hj = "0".charCodeAt(0), Gf = 0; 9 >= Gf; ++Gf) sq[hj++] = Gf;
            for (hj = "a".charCodeAt(0), Gf = 10; 36 > Gf; ++Gf) sq[hj++] = Gf;
            for (hj = "A".charCodeAt(0), Gf = 10; 36 > Gf; ++Gf) sq[hj++] = Gf;
            var xk = A.prototype;
            xk._73O = Q, xk.revert = w, xk._74O = _, xk._75O = N, xk._76O = H;
            var nn = D.prototype;
            nn._73O = z, nn.revert = M, nn._74O = U, nn._75O = hk, nn._76O = Cn, Rk._77O = p, Rk._58O = l, Rk._54O = R, Rk._57O = Y, Rk._59O = S, Rk._45O = X, Rk._44O = h, Rk._46O = f, Rk._78O = T, Rk._47O = I, Rk._48O = O, Rk._49O = b, Rk._50O = P, Rk._51O = pb, Rk.exp = tl, Rk.toString = r, Rk._85O = G, Rk.abs = L, Rk._52O = B, Rk._55O = a, Rk.mod = k, Rk._53O = ec, i.ZERO = x(0), i.ONE = x(1), Rk._86O = Wf;
            var Hb = function (c, k) {
                var I = this;
                I.isPublic = !0, typeof c !== yl ? (I.n = c, I.e = k) : c != o && k != o && c.length > 0 && k.length > 0 && (I.n = Nm(c, 16), I.e = j(k, 16))
            };
            iq = function () {
                var J, d, I = Lc(kb), M = I.substr(0, 4), S = I.substr(4, 2), O = I.substr(6, 2), D = 1, H = !D, i = $,
                    T = [], n = Kh.charAt(7);
                if (q && (q[Tn]().indexOf(zf) < 0 || q[yh][Tn]().indexOf(zf) < 0 || !I ? J = Yq(Bi[n]) : (I = new q(M - 0, S - D, O - 0), d = I.setHours(9), q[yh]() > d ? J = Yq(Bi[n]) : H = !0)), I && J && i) {
                    for (var f in J) T.push(f);
                    var s, x = 0, N = J[T[x++]], R = J[T[x++]], K = J[T[x++]], p = J[T[x++]], h = J[T[x++]],
                        v = J[T[x++]], a = J[T[x++]], F = Kg._27O(i);
                    if (F && a) {
                        s = N + R + K + p + h + v;
                        var E = !v || v === vq;
                        if (!E && v) for (var r, u = 0, l = v.length; l > u; u++) v[u] === Dl[x] ? r === vq ? E = !0 : r = o : (r == o ? r = v[u] : r += v[u], u === l - 1 && r === vq && (E = !0));
                        s && F._31O(s, a) && E && (!h || q[yh]() < h) && (H = !0)
                    }
                }
                return H || (vr = Al), n
            };
            var pc = Kb.prototype;
            pc._37O = sd, pc._38O = Hb;
            var bc = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", mk = "=", gl = 25, km = 10,
                kb = "IBkFFQ==", jb = jb || function ($, w) {
                    var O = {}, y = O._7A = {}, D = y._6A = function () {
                        function K() {
                        }

                        return {
                            _80O: function (r) {
                                K.prototype = this;
                                var s = new K;
                                return r && s._5A(r), s.hasOwnProperty("_82O") || (s._82O = function () {
                                    s.$super._82O.apply(this, arguments)
                                }), s._82O.prototype = s, s.$super = this, s
                            }, _3A: function () {
                                var A = this._80O();
                                return A._82O.apply(A, arguments), A
                            }, _82O: function () {
                            }, _5A: function (m) {
                                for (var l in m) m.hasOwnProperty(l) && (this[l] = m[l]);
                                m.hasOwnProperty(Tn) && (this.toString = m.toString)
                            }, _88O: function () {
                                return this._82O.prototype._80O(this)
                            }
                        }
                    }(), d = y._39O = D._80O({
                        _82O: function (m, D) {
                            m = this._84O = m || [], this._65O = D != w ? D : 4 * m.length
                        }, toString: function (E) {
                            return (E || m).stringify(this)
                        }, _89O: function (b) {
                            var r = this._84O, O = b._84O, u = this._65O, D = b._65O;
                            if (this._57O(), u % 4) for (var L = 0; D > L; L++) {
                                var c = 255 & O[L >>> 2] >>> 24 - 8 * (L % 4);
                                r[u + L >>> 2] |= c << 24 - 8 * ((u + L) % 4)
                            } else if (O.length > 65535) for (var L = 0; D > L; L += 4) r[u + L >>> 2] = O[L >>> 2]; else r.push.apply(r, O);
                            return this._65O += D, this
                        }, _57O: function () {
                            var e = this._84O, z = this._65O;
                            e[z >>> 2] &= 4294967295 << 32 - 8 * (z % 4), e.length = s(z / 4)
                        }, _88O: function () {
                            var S = D._88O.call(this);
                            return S._84O = this._84O.slice(0), S
                        }, _87O: function (l) {
                            for (var x = [], T = 0; l > T; T += 4) x.push(0 | 4294967296 * K);
                            return new d._82O(x, l)
                        }
                    }), U = O._2A = {}, m = U._69O = {
                        stringify: function (T) {
                            var E, d = T._84O, O = T._65O, x = [];
                            for (E = 0; O > E; E++) {
                                var r = 255 & d[E >>> 2] >>> 24 - 8 * (E % 4);
                                x.push((r >>> 4).toString(16)), x.push((15 & r).toString(16))
                            }
                            return x.join("")
                        }, _68O: function (R) {
                            for (var V = R.length, s = [], _ = 0; V > _; _ += 2) s[_ >>> 3] |= j(R.substr(_, 2), 16) << 24 - 4 * (_ % 8);
                            return new d._82O(s, V / 2)
                        }
                    }, h = U._8A = {
                        stringify: function (Y) {
                            var W, r = Y._84O, k = Y._65O, i = [];
                            for (W = 0; k > W; W++) {
                                var I = 255 & r[W >>> 2] >>> 24 - 8 * (W % 4);
                                i.push(Im(I))
                            }
                            return i.join("")
                        }, _68O: function (K) {
                            var z, O = K.length, H = [];
                            for (z = 0; O > z; z++) H[z >>> 2] |= (255 & K.charCodeAt(z)) << 24 - 8 * (z % 4);
                            return new d._82O(H, O)
                        }
                    }, S = U._9A = {
                        stringify: function (X) {
                            try {
                                return decodeURIComponent(escape(h.stringify(X)))
                            } catch (I) {
                                throw new Error("")
                            }
                        }, _68O: function (v) {
                            return h._68O(unescape(encodeURIComponent(v)))
                        }
                    }, r = y._32O = D._80O({
                        _1A: function () {
                            this._83O = new d._82O, this._23O = 0
                        }, _33O: function (y) {
                            typeof y == yl && (y = S._68O(y)), this._83O._89O(y), this._23O += y._65O
                        }, _25O: function (W) {
                            var r = this._83O, M = r._84O, U = r._65O, w = this._79O, L = 4 * w, D = U / L;
                            D = W ? s(D) : n((0 | D) - this._22O, 0);
                            var N = D * w, z = g(4 * N, U);
                            if (N) {
                                for (var $ = 0; N > $; $ += w) this._20O(M, $);
                                var S = M.splice(0, N);
                                r._65O -= z
                            }
                            return new d._82O(S, z)
                        }, _88O: function () {
                            var J = D._88O.call(this);
                            return J._83O = this._83O._88O(), J
                        }, _22O: 0
                    });
                    y._66O = r._80O({
                        cfg: D._80O(), _82O: function (i) {
                            this.cfg = this.cfg._80O(i), this._1A()
                        }, _1A: function () {
                            r._1A.call(this), this._34O()
                        }, _81O: function (l) {
                            return this._33O(l), this._25O(), this
                        }, _72O: function (R) {
                            R && this._33O(R);
                            var $ = this._21O();
                            return $
                        }, _79O: 16, _26O: function (k) {
                            return function (j, f) {
                                return new k._82O(f)._72O(j)
                            }
                        }, _19O: function (O) {
                            return function (B, G) {
                                return new v._71O._82O(O, G)._72O(B)
                            }
                        }
                    });
                    var v = O._67O = {};
                    return O
                }();
            !function () {
                var n = jb, v = n._7A, I = v._39O, S = v._66O, h = n._67O, s = [], d = [];
                !function () {
                    function A(r) {
                        for (var A = e(r), I = 2; A >= I; I++) if (!(r % I)) return !1;
                        return !0
                    }

                    function x(S) {
                        return 0 | 4294967296 * (S - (0 | S))
                    }

                    for (var F = 2, B = 0; 64 > B;) A(F) && (8 > B && (s[B] = x(t(F, .5))), d[B] = x(t(F, 1 / 3)), B++), F++
                }();
                var Q = [], W = h._41O = S._80O({
                    _34O: function () {
                        this._64O = new I._82O(s.slice(0))
                    }, _20O: function (G, o) {
                        for (var z = this._64O._84O, P = z[0], n = z[1], h = z[2], p = z[3], t = z[4], k = z[5], s = z[6], A = z[7], r = 0; 64 > r; r++) {
                            if (16 > r) Q[r] = 0 | G[o + r]; else {
                                var O = Q[r - 15], l = (O << 25 | O >>> 7) ^ (O << 14 | O >>> 18) ^ O >>> 3,
                                    I = Q[r - 2], e = (I << 15 | I >>> 17) ^ (I << 13 | I >>> 19) ^ I >>> 10;
                                Q[r] = l + Q[r - 7] + e + Q[r - 16]
                            }
                            var C = t & k ^ ~t & s, M = P & n ^ P & h ^ n & h,
                                b = (P << 30 | P >>> 2) ^ (P << 19 | P >>> 13) ^ (P << 10 | P >>> 22),
                                N = (t << 26 | t >>> 6) ^ (t << 21 | t >>> 11) ^ (t << 7 | t >>> 25),
                                R = A + N + C + d[r] + Q[r], $ = b + M;
                            A = s, s = k, k = t, t = 0 | p + R, p = h, h = n, n = P, P = 0 | R + $
                        }
                        z[0] = 0 | z[0] + P, z[1] = 0 | z[1] + n, z[2] = 0 | z[2] + h, z[3] = 0 | z[3] + p, z[4] = 0 | z[4] + t, z[5] = 0 | z[5] + k, z[6] = 0 | z[6] + s, z[7] = 0 | z[7] + A
                    }, _21O: function () {
                        var c = this._83O, w = c._84O, y = 8 * this._23O, o = 8 * c._65O;
                        return w[o >>> 5] |= 128 << 24 - o % 32, w[(o + 64 >>> 9 << 4) + 14] = V(y / 4294967296), w[(o + 64 >>> 9 << 4) + 15] = y, c._65O = 4 * w.length, this._25O(), this._64O
                    }, _88O: function () {
                        var J = S._88O.call(this);
                        return J._64O = this._64O._88O(), J
                    }
                });
                n._41O = S._26O(W), n._42O = S._19O(W)
            }();
            var Dr = new RegExp("");
            Dr.compile("[^0-9a-f]", "gi"), Kb._28O = -1, Kb._29O = -2, pc._31O = en, pc._63O = en, Kb._43O = -2;
            var hr = new function () {
                var R = this;
                R._5O = function (b, F) {
                    if ("8" != b.substring(F + 2, F + 3)) return 1;
                    var Y = j(b.substring(F + 3, F + 4));
                    return 0 == Y ? -1 : Y > 0 && 10 > Y ? Y + 1 : -2
                }, R._13O = function (J, f) {
                    var l = R._5O(J, f);
                    return 1 > l ? "" : J.substring(f + 2, f + 2 + 2 * l)
                }, R._12O = function (F, Q) {
                    var D = R._13O(F, Q);
                    if ("" == D) return -1;
                    var k;
                    return k = j(D.substring(0, 1)) < 8 ? new i(D, 16) : new i(D.substring(2), 16), k._86O()
                }, R._6O = function (x, W) {
                    var q = R._5O(x, W);
                    return 0 > q ? q : W + 2 * (q + 1)
                }, R._11O = function (k, r) {
                    var i = R._6O(k, r), n = R._12O(k, r);
                    return k.substring(i, i + 2 * n)
                }, R._10O = function (v, o) {
                    var M = R._6O(v, o), u = R._12O(v, o);
                    return M + 2 * u
                }, R._7O = function (O, D) {
                    var J = [], s = R._6O(O, D);
                    J.push(s);
                    for (var w = R._12O(O, D), B = s, A = 0; ;) {
                        var X = R._10O(O, B);
                        if (X == o || X - s >= 2 * w) break;
                        if (A >= 200) break;
                        J.push(X), B = X, A++
                    }
                    return J
                }
            };
            if (hr._90O = Im(km + 24), hr._91O = W + Im(km * km + 8), ib == o || !ib) var ib = {};
            ib._4O != o && ib._4O || (ib._4O = {});
            var Ie = ib._4O;
            ib._4O.Util = new function () {
                var T = this;
                T._56O = function (_) {
                    var K = new ib._4O._3O;
                    return K._30O(_)
                }, T._4A = function (z) {
                    var s = new ib._4O._3O;
                    return s._36O(z)
                }, T._11A = function (w) {
                    var t = new Ie._3O;
                    return t._30O(w)
                }
            }, ib._4O._3O = function () {
                var p = this;
                p._8O = function (m, q) {
                    if ("ss" == m && "cj" == q) {
                        try {
                            p.md = jb._67O._41O._3A()
                        } catch (_) {
                            eq(Cr)
                        }
                        p._24O = function (V) {
                            p.md._81O(V)
                        }, p._35O = function (q) {
                            var b = jb._2A._69O._68O(q);
                            p.md._81O(b)
                        }, p._60O = function () {
                            var l = p.md._72O();
                            return l[Tn](jb._2A._69O)
                        }, p._30O = function (c) {
                            return p._24O(c), p._60O()
                        }, p._36O = function (k) {
                            return p._35O(k), p._60O()
                        }
                    }
                }, p._24O = function () {
                    eq(Cr)
                }, p._35O = function () {
                    eq(Cr)
                }, p._60O = function () {
                    eq(Cr)
                }, p._30O = function () {
                    eq(Cr)
                }, p._36O = function () {
                    eq(Cr)
                }, p._8O("ss", "cj")
            }, wo = function (w) {
                var O = Qo[nj[7]], K = 1, U = !1;
                if (xq.a != Qo[Vc]) return xq.a;
                if (xq.forEach(function (u) {
                    K *= u
                }), w > K) {
                    if (O) {
                        O = O.split(hr._90O);
                        var j = O[3], f = O[7], P = O[11], R = O[15], u = O[19], d = O[23], _ = O[27],
                            e = j + f + P + R + u + d, h = d ? !1 : !0;
                        if (d) {
                            var r = d && d.split(Kf("firefox")[3]);
                            if (r) for (var H = 0; H < r.length; H++) if (Mk.indexOf(r[H]) >= 0) {
                                h = !0;
                                break
                            }
                        }
                        U = Nn()(e, _) && h && (!u || u > w)
                    }
                    U || (Lh.prototype._42 = Qf)
                } else U = !0;
                return xq.a = U, U
            }, gl = String.fromCharCode(gl + 20);
            var ms = function (r) {
                return r = r.replace(Dr, Cr), r = r.replace(/[ \n]+/g, Cr)
            }, as = "30", Re = "06", Ip = "02", lc = "03", Oo = Nm, Hi = /^1f+00/, Kg = function () {
                var F;
                return F = {
                    _18O: function ($) {
                        var y = $, U = y.replace(/\s+/g, ""), F = gn(U);
                        return F
                    }, _14O: function (v) {
                        var Z = this._18O(v), g = this._15O(Z);
                        return g
                    }, _15O: function (M) {
                        var J = this._17O(M);
                        if ("2a864886f70d010101" == J._61O) {
                            var f = this._16O(J.key), v = new Kb;
                            return v._38O(f.n, f.e), v
                        }
                        eq(Cr)
                    }, _16O: function (u) {
                        var X = {};
                        u.substr(0, 2) != as && eq(Cr);
                        var g = hr._7O(u, 0);
                        return 2 != g.length && eq(Cr), u.substr(g[0], 2) != Ip && eq(Cr), X.n = hr._11O(u, g[0]), u.substr(g[1], 2) != Ip && eq(Cr), X.e = hr._11O(u, g[1]), X
                    }, _17O: function (v) {
                        var R = {};
                        R._40O = o;
                        var X = hr._7O(v, 0);
                        2 != X.length && eq(Cr);
                        var g = X[0];
                        v.substr(g, 2) != as && eq(Cr);
                        var e = hr._7O(v, g);
                        return 2 != e.length && eq(Cr), v.substr(e[0], 2) != Re && eq(Cr), R._61O = hr._11O(v, e[0]), v.substr(e[1], 2) == Re ? R._40O = hr._11O(v, e[1]) : v.substr(e[1], 2) == as && (R._40O = {}, R._40O.p = hr._70O(v, e[1], [0], Ip), R._40O.q = hr._70O(v, e[1], [1], Ip), R._40O.g = hr._70O(v, e[1], [2], Ip)), v.substr(X[1], 2) != lc && eq(Cr), R.key = hr._11O(v, X[1]).substr(2), R
                    }
                }, F._17O ? F : o
            }(), Tp = Kg._27O = function (A) {
                return Kg._14O(A)
            };
            Nn = function () {
                return function (f, v) {
                    if (f && v) {
                        v = ms(v);
                        var g = Oo(v, t(2, 4)), p = this;
                        if (!p || !p.n || g._55O() > p.n._55O()) return 0;
                        var W = p._37O(g), c = W[Tn](t(2, 4)).replace(Hi, ""), T = jk(c);
                        if (0 == T.length) return !1;
                        var M = T[0], w = T[1], A = function (T) {
                            return ib._4O.Util._56O(T, M)
                        }, G = A(f);
                        return w == G
                    }
                }.bind(Tp($))
            };
            var Xd, Lj;
            return function () {
                var B = hl.length - Bc.length;
                if (B > 0) for (var V = 0; B > V; V++) Xd = Ie.Util, Lj = ms
            }(), Mf = function (k, _) {
                _ = Lj(_);
                var $ = Tp(Ch), y = Od.length, l = 2 * y, I = Oo(_, t(y, l)), q = $, o = !0;
                if (q) {
                    var L = q[$f[0]];
                    L && I._55O() <= L._55O() && (o = !1)
                }
                if (o) return 0;
                var G = q._37O(I), N = G[Tn](t(y, l)).replace(Hi, ""), b = jk(N);
                if (0 == b.length) return !1;
                var M = b[0], K = b[1], Q = Xd._11A(k, M);
                return K == Q
            }, Kg
        }(r, H), Mm(w, {
            load: function () {
                var x = {}, Y = function (S) {
                    return S ? "c_" + (S.sync ? "1" : "0") + "_" + (S.post ? "1" : "0") + "_" + (S.responseType || "H") + "_" + (S.mimeType || "H") + "_" + (S.data ? JSON.stringify(S.data) : "H") : ""
                };
                return function (h, S, G) {
                    var V, N = x[h], L = Y(G);
                    return N && (V = N[L]) ? (V.push(S), void 0) : (x[h] || (N = x[h] = {count: 0}), V = N[L] = [S], N.count++, w.xhrLoad(h, function (H) {
                        delete N[L], N.count--, N.count || delete x[h], V.forEach(function (S) {
                            S(H)
                        })
                    }, G), void 0)
                }
            }(), asyncEach: function (f, X, r) {
                "function" != typeof r && (r = Function.prototype);
                var o = new Array(f.length), u = 0, P = !1;
                f.forEach(function (N, y) {
                    X(N, function (U, V) {
                        return P ? void 0 : U ? (P = !0, r(null)) : (o[y] = V, u++, u === f.length ? r(o) : void 0)
                    })
                })
            }, xhrLoad: function (X, U, p) {
                var v = !1;
                Ll(X) || (v = !0, X = [X]), p = p || {}, X.length;
                var F = p.sync, M = !!p.post, N = null;
                return w.asyncEach(X, function (P, x) {
                    var B = new Wl;
                    P = w.beforeLoadURL(P), P.data ? x(null, P.data) : (p.url = encodeURI(P), p.method = M ? "POST" : "GET", p.responseType ? B.setResponseType(p.responseType) : B.setOverrideMimeType(p.mimeType || "text/plain"), B.onload = function () {
                        200 === this.status || 0 === this.status ? x(null, B.getResponseText()) : x(!0)
                    }, B.onerror = function () {
                        x(!0)
                    }, B.send(p))
                }, function (x) {
                    var M = "function" == typeof U;
                    (M || F) && (N = v && x ? x[0] : x, M && U(N))
                }), F ? N : void 0
            }
        }), Math.sign === v && (Math.sign = function (x) {
            return 0 > x ? -1 : x > 0 ? 1 : +x
        });
        var _r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", hg = {
            encode: function (O, a) {
                var v, T, c, R, Z, H, C, Q = "", e = 0;
                for (O = hg._utf8_encode(O); e < O.length;) v = O.charCodeAt(e++), T = O.charCodeAt(e++), c = O.charCodeAt(e++), R = v >> 2, Z = (3 & v) << 4 | T >> 4, H = (15 & T) << 2 | c >> 6, C = 63 & c, isNaN(T) ? H = C = 64 : isNaN(c) && (C = 64), Q = Q + a.charAt(R) + a.charAt(Z) + a.charAt(H) + a.charAt(C);
                return Q
            }, decode: function (r, V) {
                var X, O, q, Z, H, c, P, C = "", d = 0;
                for (r = r.replace(/[^A-Za-z0-9\+\/\=]/g, ""); d < r.length;) Z = V.indexOf(r.charAt(d++)), H = V.indexOf(r.charAt(d++)), c = V.indexOf(r.charAt(d++)), P = V.indexOf(r.charAt(d++)), X = Z << 2 | H >> 4, O = (15 & H) << 4 | c >> 2, q = (3 & c) << 6 | P, C += String.fromCharCode(X), 64 != c && (C += String.fromCharCode(O)), 64 != P && (C += String.fromCharCode(q));
                return C = hg._utf8_decode(C)
            }, _utf8_encode: function (n) {
                n = n.replace(/\r\n/g, "\n");
                for (var Z = "", h = 0; h < n.length; h++) {
                    var Y = n.charCodeAt(h);
                    128 > Y ? Z += String.fromCharCode(Y) : Y > 127 && 2048 > Y ? (Z += String.fromCharCode(192 | Y >> 6), Z += String.fromCharCode(128 | 63 & Y)) : (Z += String.fromCharCode(224 | Y >> 12), Z += String.fromCharCode(128 | 63 & Y >> 6), Z += String.fromCharCode(128 | 63 & Y))
                }
                return Z
            }, _utf8_decode: function (l) {
                for (var E = "", n = 0, x = 0, I = 0, w = 0; n < l.length;) x = l.charCodeAt(n), 128 > x ? (E += String.fromCharCode(x), n++) : x > 191 && 224 > x ? (I = l.charCodeAt(n + 1), E += String.fromCharCode((31 & x) << 6 | 63 & I), n += 2) : (I = l.charCodeAt(n + 1), w = l.charCodeAt(n + 2), E += String.fromCharCode((15 & x) << 12 | (63 & I) << 6 | 63 & w), n += 3);
                return E
            }
        };
        x.Math = {
            generateUUID: function () {
                for (var I = [], N = 0; 256 > N; N++) I[N] = (16 > N ? "0" : "") + N.toString(16).toUpperCase();
                return function () {
                    var i = 0 | 4294967295 * Math.random(), q = 0 | 4294967295 * Math.random(),
                        P = 0 | 4294967295 * Math.random(), K = 0 | 4294967295 * Math.random();
                    return I[255 & i] + I[255 & i >> 8] + I[255 & i >> 16] + I[255 & i >> 24] + "-" + I[255 & q] + I[255 & q >> 8] + "-" + I[64 | 15 & q >> 16] + I[255 & q >> 24] + "-" + I[128 | 63 & P] + I[255 & P >> 8] + "-" + I[255 & P >> 16] + I[255 & P >> 24] + I[255 & K] + I[255 & K >> 8] + I[255 & K >> 16] + I[255 & K >> 24]
                }
            }(), clamp: function (I, S, J) {
                return Math.max(S, Math.min(J, I))
            }, generateIncreasingID: function () {
                var I = 0;
                return function () {
                    return ++I
                }
            }(), encodeBase64: function (w, h) {
                return hg.encode(w, h || _r)
            }, decodeBase64: function (F, L) {
                return hg.decode(F, L || _r)
            }, randomArray: function (m, E) {
                E = E || m.length;
                for (var N = E - 1; N > 0; N--) {
                    var $ = Math.floor(Math.random() * (N + 1)), M = m[N];
                    m[N] = m[$], m[$] = M
                }
                return m
            }
        };
        var Hf = x.Matrix = x.Math.Matrix2d = function (G, D, o, M, X) {
            this.setFromTransform(G, D, o, M, X)
        }, Cg = Hf;
        Hf.prototype = {}, Hf.prototype.constructor = Hf, Hf.prototype.set = function (c, U, n, Y, k, y) {
            return this.a = c, this.b = U, this.c = n, this.d = Y, this.tx = k, this.ty = y, this
        }, Hf.prototype.setFromTransform = function (r, Q, T, f, x) {
            var h = this;
            if (r === v) return h.a = 1, h.b = 0, h.c = 0, h.d = 1, h.tx = 0, h.ty = 0, void 0;
            r = r || 0;
            var m = J(r), _ = c(r);
            return f = f || 1, x = x || 1, h.a = _ * f, h.b = m * f, h.c = -m * x, h.d = _ * x, h.tx = Q || 0, h.ty = T || 0, h
        }, Hf.prototype.apply = function (d, C) {
            C = C || new pm;
            var Y = d.x, n = d.y;
            return C.x = this.a * Y + this.c * n + this.tx, C.y = this.b * Y + this.d * n + this.ty, C
        }, Hf.prototype.applyInverse = function (H, P) {
            P = P || new pm;
            var d = 1 / (this.a * this.d + this.c * -this.b), C = H.x, k = H.y;
            return P.x = this.d * d * C + -this.c * d * k + (this.ty * this.c - this.tx * this.d) * d, P.y = this.a * d * k + -this.b * d * C + (-this.ty * this.a + this.tx * this.b) * d, P
        }, Hf.prototype.translate = function (n, g) {
            return this.tx += n, this.ty += g, this
        }, Hf.prototype.scale = function (U, i) {
            return this.a *= U, this.d *= i, this.c *= U, this.b *= i, this.tx *= U, this.ty *= i, this
        }, Hf.prototype.rotate = function (P) {
            var Q = Math.cos(P), U = Math.sin(P), d = this.a, n = this.c, H = this.tx;
            return this.a = d * Q - this.b * U, this.b = d * U + this.b * Q, this.c = n * Q - this.d * U, this.d = n * U + this.d * Q, this.tx = H * Q - this.ty * U, this.ty = H * U + this.ty * Q, this
        }, Hf.prototype.appendTranslate = function (E, d) {
            return this.tx += this.a * E + this.c * d, this.ty += this.b * E + this.d * d, this
        }, Hf.prototype.appendScale = function (w, B) {
            return this.a *= w, this.d *= B, this.c *= B, this.b *= w, this
        }, Hf.prototype.appendRotate = function (r) {
            if (!r) return this;
            var P = Math.cos(r), D = Math.sin(r), K = this.a, n = this.b;
            return this.a = K * P + this.c * D, this.b = n * P + this.d * D, this.c = -K * D + this.c * P, this.d = -n * D + this.d * P, this
        }, Hf.prototype.append = function (b) {
            var $ = this.a, y = this.b, J = this.c, e = this.d;
            return this.a = b.a * $ + b.b * J, this.b = b.a * y + b.b * e, this.c = b.c * $ + b.d * J, this.d = b.c * y + b.d * e, this.tx = b.tx * $ + b.ty * J + this.tx, this.ty = b.tx * y + b.ty * e + this.ty, this
        }, Hf.prototype.setTransform = function (R, $, X, K, d, z, C, t, o) {
            var G, V, f, H, J, Y, U, M, j, e;
            return J = Math.sin(C), Y = Math.cos(C), U = Math.cos(o), M = Math.sin(o), j = -Math.sin(t), e = Math.cos(t), G = Y * d, V = J * d, f = -J * z, H = Y * z, this.a = U * G + M * f, this.b = U * V + M * H, this.c = j * G + e * f, this.d = j * V + e * H, this.tx = R + (X * G + K * f), this.ty = $ + (X * V + K * H), this
        }, Hf.prototype.prepend = function (A) {
            var T = this.tx;
            if (1 !== A.a || 0 !== A.b || 0 !== A.c || 1 !== A.d) {
                var J = this.a, P = this.c;
                this.a = J * A.a + this.b * A.c, this.b = J * A.b + this.b * A.d, this.c = P * A.a + this.d * A.c, this.d = P * A.b + this.d * A.d
            }
            return this.tx = T * A.a + this.ty * A.c + A.tx, this.ty = T * A.b + this.ty * A.d + A.ty, this
        }, Hf.prototype.transform = Hf.prototype.prepend, Hf.prototype.invert = function () {
            var x = this.a, V = this.b, Y = this.c, B = this.d, W = this.tx, I = x * B - V * Y;
            return this.a = B / I, this.b = -V / I, this.c = -Y / I, this.d = x / I, this.tx = (Y * this.ty - B * W) / I, this.ty = -(x * this.ty - V * W) / I, this
        }, Hf.prototype.identity = function () {
            return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this
        }, Hf.prototype.clone = function () {
            var e = new Hf;
            return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e
        }, Hf.prototype.copy = function (r) {
            return r.a = this.a, r.b = this.b, r.c = this.c, r.d = this.d, r.tx = this.tx, r.ty = this.ty, r
        }, Hf.prototype.tf = function (H, o) {
            1 === arguments.length && (o = H.y, H = H.x);
            var c = this;
            return {x: c.a * H + c.c * o + c.tx, y: c.b * H + c.d * o + c.ty}
        }, Hf.prototype.tfi = function (F, X) {
            1 === arguments.length && (X = F.y, F = F.x);
            var g = this, q = 1 / (g.a * g.d + g.c * -g.b);
            return {
                x: g.d * q * F + -g.c * q * X + (g.ty * g.c - g.tx * g.d) * q,
                y: g.a * q * X + -g.b * q * F + (-g.ty * g.a + g.tx * g.b) * q
            }
        }, Hf.IDENTITY = new Hf, Hf.TEMP_MATRIX = new Hf;
        var Jd = x.Math.Vector3 = function (C, R, Z) {
            "object" == typeof C ? this.copy(C) : this.set(C, R == v ? C : R, Z == v ? C : Z)
        };
        H.assign(Jd.prototype, {
            set: function (R, v, U) {
                return this.x = R, this.y = v, this.z = U, this
            }, setScalar: function (b) {
                return this.x = b, this.y = b, this.z = b, this
            }, setX: function (x) {
                return this.x = x, this
            }, setY: function (r) {
                return this.y = r, this
            }, setZ: function (F) {
                return this.z = F, this
            }, clone: function () {
                return new this.constructor(this.x, this.y, this.z)
            }, copy: function (I) {
                return I.x === v ? (this.x = I[0], this.y = I[1], this.z = I[2]) : (this.x = I.x, this.y = I.y, this.z = I.z), this
            }, add: function (H) {
                return this.x += H.x, this.y += H.y, this.z += H.z, this
            }, addScalar: function (c) {
                return this.x += c, this.y += c, this.z += c, this
            }, addVectors: function (a, u) {
                return this.x = a.x + u.x, this.y = a.y + u.y, this.z = a.z + u.z, this
            }, addScaledVector: function (z, Y) {
                return this.x += z.x * Y, this.y += z.y * Y, this.z += z.z * Y, this
            }, sub: function (n) {
                return this.x -= n.x, this.y -= n.y, this.z -= n.z, this
            }, subScalar: function (d) {
                return this.x -= d, this.y -= d, this.z -= d, this
            }, subVectors: function (_, q) {
                return this.x = _.x - q.x, this.y = _.y - q.y, this.z = _.z - q.z, this
            }, multiply: function (C) {
                return this.x *= C.x, this.y *= C.y, this.z *= C.z, this
            }, multiplyScalar: function (w) {
                return this.x *= w, this.y *= w, this.z *= w, this
            }, distanceTo: function (s) {
                return Math.sqrt(this.distanceToSquared(s))
            }, distanceToSquared: function (s) {
                var S = this.x - s.x, f = this.y - s.y, g = this.z - s.z;
                return S * S + f * f + g * g
            }, distanceToSquared2: function ($) {
                var u = this.x - $[0], w = this.y - $[1], l = this.z - $[2];
                return u * u + w * w + l * l
            }, multiplyVectors: function (a, j) {
                return this.x = a.x * j.x, this.y = a.y * j.y, this.z = a.z * j.z, this
            }, transformDirection: function (e) {
                var s = this.x, R = this.y, q = this.z, i = e.el;
                return this.x = i[0] * s + i[4] * R + i[8] * q, this.y = i[1] * s + i[5] * R + i[9] * q, this.z = i[2] * s + i[6] * R + i[10] * q, this.normalize()
            }, applyQuaternion: function (B) {
                var c = this.x, K = this.y, N = this.z, $ = B._x, x = B._y, Y = B._z, w = B._w,
                    L = w * c + x * N - Y * K, l = w * K + Y * c - $ * N, o = w * N + $ * K - x * c,
                    E = -$ * c - x * K - Y * N;
                return this.x = L * w + E * -$ + l * -Y - o * -x, this.y = l * w + E * -x + o * -$ - L * -Y, this.z = o * w + E * -Y + L * -x - l * -$, this
            }, applyMatrix4: function (i) {
                var j = this.x, U = this.y, D = this.z, $ = i.el, J = 1 / ($[3] * j + $[7] * U + $[11] * D + $[15]);
                return this.x = ($[0] * j + $[4] * U + $[8] * D + $[12]) * J, this.y = ($[1] * j + $[5] * U + $[9] * D + $[13]) * J, this.z = ($[2] * j + $[6] * U + $[10] * D + $[14]) * J, this
            }, negate: function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, dot: function (B) {
                return this.x * B.x + this.y * B.y + this.z * B.z
            }, lengthSq: function () {
                return this.x * this.x + this.y * this.y + this.z * this.z
            }, length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            }, manhattanLength: function () {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            }, normalize: function () {
                var r = this.length();
                return r ? this.multiplyScalar(1 / r) : this
            }, setLength: function ($) {
                return this.normalize().multiplyScalar($)
            }, fromArray: function (h, K) {
                return K === v && (K = 0), this.x = h[K], this.y = h[K + 1], this.z = h[K + 2], this
            }, toArray: function (h, M) {
                return h === v && (h = [0, 0, 0]), M === v && (M = 0), h[M] = this.x, h[M + 1] = this.y, h[M + 2] = this.z, h
            }, cross: function (B) {
                return this.crossVectors(this, B)
            }, angleTo: function (f) {
                var y = this.dot(f) / Math.sqrt(this.lengthSq() * f.lengthSq());
                return y > 1 || -1 > y ? 0 : Math.acos(y)
            }, lerpVectors: function (n, J, V) {
                return this.subVectors(J, n).multiplyScalar(V).add(n)
            }, crossVectors: function (m, H) {
                var U = m.x, K = m.y, O = m.z, A = H.x, v = H.y, X = H.z;
                return this.x = K * X - O * v, this.y = O * A - U * X, this.z = U * v - K * A, this
            }, min: function (W) {
                return this.x = Math.min(this.x, W.x), this.y = Math.min(this.y, W.y), this.z = Math.min(this.z, W.z), this
            }, max: function (D) {
                return this.x = Math.max(this.x, D.x), this.y = Math.max(this.y, D.y), this.z = Math.max(this.z, D.z), this
            }
        });
        var pm = x.Math.Vector2 = function (B, O, b) {
            "object" == typeof B && (B.x != v ? (O = B.y, B = B.x, b = B.e) : (b = B[2], O = B[1], B = B[0])), this.set(B || 0, O || 0, b)
        };
        pm.prototype = {}, pm.prototype.constructor = pm, H.defineProperties(pm.prototype, {
            width: {
                get: function () {
                    return this.x
                }, set: function (a) {
                    this.x = a
                }
            }, height: {
                get: function () {
                    return this.y
                }, set: function (E) {
                    this.y = E
                }
            }
        }), pm.prototype.clone = function () {
            return new pm(this.x, this.y, this.e)
        }, pm.prototype.copy = function (u) {
            return this.set(u.x, u.y, u.e), this
        }, pm.prototype.equals = function (R) {
            return R.x === this.x && R.y === this.y
        }, pm.prototype.set = function (m, c, w) {
            return this.x = m || 0, this.y = c || (0 !== c ? this.x : 0), w != v && (this.e = w), this
        }, pm.prototype.setScalar = function (X) {
            return this.x = X, this.y = X, this
        }, pm.prototype.setX = function (a) {
            return this.x = a || 0, this
        }, pm.prototype.setY = function (X) {
            return this.y = X || 0, this
        }, pm.prototype.add = function (i) {
            return this.x += i.x, this.y += i.y, this
        }, pm.prototype.addVectors = function (X, Z) {
            return this.x = X.x + Z.x, this.y = X.y + Z.y, this
        }, pm.prototype.addScalar = function (L) {
            return this.x += L, this.y += L, this
        }, pm.prototype.addScaledVector = function (c, P) {
            return this.x += c.x * P, this.y += c.y * P, this
        }, pm.prototype.sub = function (H) {
            return this.x -= H.x, this.y -= H.y, this
        }, pm.prototype.subScalar = function (J) {
            return this.x -= J, this.y -= J, this
        }, pm.prototype.subVectors = function (v, G) {
            return this.x = v.x - G.x, this.y = v.y - G.y, this
        }, pm.prototype.multiply = function (s) {
            return this.x *= s.x, this.y *= s.y, this
        }, pm.prototype.multiplyScalar = function (D) {
            return this.x *= D, this.y *= D, this
        }, pm.prototype.divide = function (M) {
            return this.x /= M.x, this.y /= M.y, this
        }, pm.prototype.divideScalar = function (f) {
            return this.multiplyScalar(1 / f)
        }, pm.prototype.min = function (v) {
            return this.x = Math.min(this.x, v.x), this.y = Math.min(this.y, v.y), this
        }, pm.prototype.max = function (k) {
            return this.x = Math.max(this.x, k.x), this.y = Math.max(this.y, k.y), this
        }, pm.prototype.fromArray = function (L, m) {
            return m === v && (m = 0), this.x = L[m], this.y = L[m + 1], this
        }, pm.prototype.clamp = function (l, s) {
            return this.x = Math.max(l.x, Math.min(s.x, this.x)), this.y = Math.max(l.y, Math.min(s.y, this.y)), this
        }, pm.prototype.clampScalar = function () {
            var H, G;
            return function (b, J) {
                return H === v && (H = new pm, G = new pm), H.set(b, b), G.set(J, J), this.clamp(H, G)
            }
        }(), pm.prototype.clampLength = function (U, d) {
            var p = this.length();
            return this.multiplyScalar(Math.max(U, Math.min(d, p)) / p)
        }, pm.prototype.dot = function (Y) {
            return this.x * Y.x + this.y * Y.y
        }, pm.prototype.lengthSq = function () {
            return this.x * this.x + this.y * this.y
        }, pm.prototype.length = function () {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        }, pm.prototype.normalize = function () {
            return this.divideScalar(this.length())
        }, pm.prototype.angle = function () {
            var r = Math.atan2(this.y, this.x);
            return 0 > r && (r += 2 * Math.PI), r
        }, pm.prototype.distanceTo = function (O) {
            return Math.sqrt(this.distanceToSquared(O))
        }, pm.prototype.distanceToSquared = function (c) {
            var O = this.x - c.x, u = this.y - c.y;
            return O * O + u * u
        }, pm.prototype.isNearEnough = function (l) {
            return this.distanceToSquared(l) < 1e-8
        }, pm.prototype.setLength = function (Q) {
            var G = this.length();
            return G ? this.multiplyScalar(Q / G) : this
        }, pm.prototype.lerp = function (R, n) {
            return this.x += (R.x - this.x) * n, this.y += (R.y - this.y) * n, this
        }, pm.prototype.lerpVectors = function (q, W, l) {
            return this.subVectors(W, q).multiplyScalar(l).add(q)
        }, pm.prototype.rotateAround = function (e, O) {
            var r = e ? e.x : 0, I = e ? e.y : 0, C = Math.cos(O), _ = Math.sin(O), X = this.x - r, j = this.y - I;
            return this.x = X * C - j * _ + r, this.y = X * _ + j * C + I, this
        };
        var Tl = x.Math.Ray = function (u, p) {
            this.origin = u !== v ? u.clone() : new Jd, this.direction = p !== v ? p.clone() : new Jd
        };
        H.assign(Tl.prototype, {
            set: function (s, n) {
                return this.origin.copy(s), this.direction.copy(n), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (t) {
                return this.origin.copy(t.origin), this.direction.copy(t.direction), this.maxHitLen = t.maxHitLen, this
            }, at: function (M, m) {
                var w = m || new Jd;
                return w.copy(this.direction).multiplyScalar(M).add(this.origin)
            }, setMaxHitLength: function (w) {
                this.maxHitLen = w
            }, lookAt: function (H) {
                return this.direction.copy(H).sub(this.origin).normalize(), this
            }, applyMatrix4: function (C) {
                var o = this.maxHitLen;
                if (o) {
                    var J = this.direction.clone().multiplyScalar(o).add(this.origin);
                    J.applyMatrix4(C)
                }
                return this.origin.applyMatrix4(C), this.direction.transformDirection(C), o && (this.maxHitLen = this.origin.distanceTo(J)), this
            }, intersectBox: function (o, I) {
                var O, J, b, T, Y, N, C = 1 / this.direction.x, d = 1 / this.direction.y, D = 1 / this.direction.z,
                    c = this.origin;
                if (C >= 0 ? (O = (o.min.x - c.x) * C, J = (o.max.x - c.x) * C) : (O = (o.max.x - c.x) * C, J = (o.min.x - c.x) * C), d >= 0 ? (b = (o.min.y - c.y) * d, T = (o.max.y - c.y) * d) : (b = (o.max.y - c.y) * d, T = (o.min.y - c.y) * d), O > T || b > J) return null;
                if ((b > O || O !== O) && (O = b), (J > T || J !== J) && (J = T), D >= 0 ? (Y = (o.min.z - c.z) * D, N = (o.max.z - c.z) * D) : (Y = (o.max.z - c.z) * D, N = (o.min.z - c.z) * D), O > N || Y > J) return null;
                if ((Y > O || O !== O) && (O = Y), (J > N || J !== J) && (J = N), 0 > J) return null;
                var n = O >= 0 ? O : J, E = this.maxHitLen;
                return E && n > E ? null : this.at(n, I)
            }, intersectTriangle: function () {
                var V = new Jd, t = new Jd, p = new Jd, E = new Jd;
                return function (b, A, c, U, O) {
                    t.subVectors(A, b), p.subVectors(c, b), E.crossVectors(t, p);
                    var Z, Y = this.direction.dot(E);
                    if (Y > 0) {
                        if (U) return null;
                        Z = 1
                    } else {
                        if (!(0 > Y)) return null;
                        Z = -1, Y = -Y
                    }
                    V.subVectors(this.origin, b);
                    var z = Z * this.direction.dot(p.crossVectors(V, p));
                    if (0 > z) return null;
                    var m = Z * this.direction.dot(t.cross(V));
                    if (0 > m || z + m > Y) return null;
                    var d = -Z * V.dot(E);
                    if (0 > d) return null;
                    var J = d / Y, _ = this.maxHitLen;
                    return _ && J > _ ? null : this.at(J, O)
                }
            }()
        });
        var Qi = x.Math.Box3 = function (u, k) {
            this.min = u !== v ? u : new Jd(1 / 0, 1 / 0, 1 / 0), this.max = k !== v ? k : new Jd(-1 / 0, -1 / 0, -1 / 0)
        };
        H.assign(Qi.prototype, {
            set: function (b, r) {
                return this.min.copy(b), this.max.copy(r), this
            }, setFromArray: function (b) {
                for (var U = 1 / 0, O = 1 / 0, l = 1 / 0, t = -1 / 0, Z = -1 / 0, r = -1 / 0, T = 0, z = b.length; z > T; T += 3) {
                    var v = b[T], B = b[T + 1], G = b[T + 2];
                    U > v && (U = v), O > B && (O = B), l > G && (l = G), v > t && (t = v), B > Z && (Z = B), G > r && (r = G)
                }
                return this.min.set(U, O, l), this.max.set(t, Z, r), this
            }, setFromPoints: function (y) {
                this.makeEmpty();
                for (var Q = 0, X = y.length; X > Q; Q++) this.expandByPoint(y[Q]);
                return this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (U) {
                return this.min.copy(U.min), this.max.copy(U.max), this
            }, makeEmpty: function () {
                return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
            }, isEmpty: function () {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            }, expandByPoint: function (M) {
                return this.min.min(M), this.max.max(M), this
            }
        });
        var Mq = x.Math.Matrix4 = function () {
            this.el = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
        };
        H.assign(Mq.prototype, {
            set: function (w, I, F, b, W, X, Z, g, _, j, L, k, J, h, i, T) {
                var x = this.el;
                return x[0] = w, x[4] = I, x[8] = F, x[12] = b, x[1] = W, x[5] = X, x[9] = Z, x[13] = g, x[2] = _, x[6] = j, x[10] = L, x[14] = k, x[3] = J, x[7] = h, x[11] = i, x[15] = T, this
            }, clone: function () {
                return (new Mq).fromArray(this.el)
            }, fromArray: function (t, U) {
                U === v && (U = 0);
                for (var g = this.el, r = 0; 16 > r; r++) g[r] = t[r + U];
                return this
            }, scale: function (K) {
                var l = this.el, D = K.x, d = K.y, G = K.z;
                return l[0] *= D, l[4] *= d, l[8] *= G, l[1] *= D, l[5] *= d, l[9] *= G, l[2] *= D, l[6] *= d, l[10] *= G, l[3] *= D, l[7] *= d, l[11] *= G, this
            }, makeRotationFromEuler: function (p) {
                var d = this.el, X = p._x, K = p._y, $ = p._z, U = p._order, c = Math.cos(X), o = Math.sin(X),
                    G = Math.cos(K), I = Math.sin(K), L = Math.cos($), N = Math.sin($);
                if ("XYZ" === U) {
                    var m = c * L, S = c * N, C = o * L, E = o * N;
                    d[0] = G * L, d[4] = -G * N, d[8] = I, d[1] = S + C * I, d[5] = m - E * I, d[9] = -o * G, d[2] = E - m * I, d[6] = C + S * I, d[10] = c * G
                } else if ("YXZ" === U) {
                    var e = G * L, b = G * N, Q = I * L, t = I * N;
                    d[0] = e + t * o, d[4] = Q * o - b, d[8] = c * I, d[1] = c * N, d[5] = c * L, d[9] = -o, d[2] = b * o - Q, d[6] = t + e * o, d[10] = c * G
                } else if ("ZXY" === U) {
                    var e = G * L, b = G * N, Q = I * L, t = I * N;
                    d[0] = e - t * o, d[4] = -c * N, d[8] = Q + b * o, d[1] = b + Q * o, d[5] = c * L, d[9] = t - e * o, d[2] = -c * I, d[6] = o, d[10] = c * G
                } else if ("ZYX" === U) {
                    var m = c * L, S = c * N, C = o * L, E = o * N;
                    d[0] = G * L, d[4] = C * I - S, d[8] = m * I + E, d[1] = G * N, d[5] = E * I + m, d[9] = S * I - C, d[2] = -I, d[6] = o * G, d[10] = c * G
                } else if ("YZX" === U) {
                    var g = c * G, w = c * I, y = o * G, i = o * I;
                    d[0] = G * L, d[4] = i - g * N, d[8] = y * N + w, d[1] = N, d[5] = c * L, d[9] = -o * L, d[2] = -I * L, d[6] = w * N + y, d[10] = g - i * N
                } else if ("XZY" === U) {
                    var g = c * G, w = c * I, y = o * G, i = o * I;
                    d[0] = G * L, d[4] = -N, d[8] = I * L, d[1] = g * N + i, d[5] = c * L, d[9] = w * N - y, d[2] = y * N - w, d[6] = o * L, d[10] = i * N + g
                }
                return d[3] = 0, d[7] = 0, d[11] = 0, d[12] = 0, d[13] = 0, d[14] = 0, d[15] = 1, this
            }, makeRotationFromQuaternion: function (u) {
                var K = this.el, g = u._x, Z = u._y, V = u._z, H = u._w, w = g + g, o = Z + Z, p = V + V, h = g * w,
                    F = g * o, T = g * p, $ = Z * o, e = Z * p, f = V * p, z = H * w, E = H * o, t = H * p;
                return K[0] = 1 - ($ + f), K[4] = F - t, K[8] = T + E, K[1] = F + t, K[5] = 1 - (h + f), K[9] = e - z, K[2] = T - E, K[6] = e + z, K[10] = 1 - (h + $), K[3] = 0, K[7] = 0, K[11] = 0, K[12] = 0, K[13] = 0, K[14] = 0, K[15] = 1, this
            }, identity: function () {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            }, getInverse: function (c) {
                var R = this.el, Q = c.el, L = Q[0], U = Q[1], g = Q[2], i = Q[3], n = Q[4], r = Q[5], D = Q[6],
                    v = Q[7], f = Q[8], k = Q[9], A = Q[10], b = Q[11], B = Q[12], E = Q[13], C = Q[14], Z = Q[15],
                    o = k * C * v - E * A * v + E * D * b - r * C * b - k * D * Z + r * A * Z,
                    W = B * A * v - f * C * v - B * D * b + n * C * b + f * D * Z - n * A * Z,
                    m = f * E * v - B * k * v + B * r * b - n * E * b - f * r * Z + n * k * Z,
                    w = B * k * D - f * E * D - B * r * A + n * E * A + f * r * C - n * k * C,
                    x = L * o + U * W + g * m + i * w;
                if (0 === x) return this.identity();
                var H = 1 / x;
                return R[0] = o * H, R[1] = (E * A * i - k * C * i - E * g * b + U * C * b + k * g * Z - U * A * Z) * H, R[2] = (r * C * i - E * D * i + E * g * v - U * C * v - r * g * Z + U * D * Z) * H, R[3] = (k * D * i - r * A * i - k * g * v + U * A * v + r * g * b - U * D * b) * H, R[4] = W * H, R[5] = (f * C * i - B * A * i + B * g * b - L * C * b - f * g * Z + L * A * Z) * H, R[6] = (B * D * i - n * C * i - B * g * v + L * C * v + n * g * Z - L * D * Z) * H, R[7] = (n * A * i - f * D * i + f * g * v - L * A * v - n * g * b + L * D * b) * H, R[8] = m * H, R[9] = (B * k * i - f * E * i - B * U * b + L * E * b + f * U * Z - L * k * Z) * H, R[10] = (n * E * i - B * r * i + B * U * v - L * E * v - n * U * Z + L * r * Z) * H, R[11] = (f * r * i - n * k * i - f * U * v + L * k * v + n * U * b - L * r * b) * H, R[12] = w * H, R[13] = (f * E * g - B * k * g + B * U * A - L * E * A - f * U * C + L * k * C) * H, R[14] = (B * r * g - n * E * g - B * U * D + L * E * D + n * U * C - L * r * C) * H, R[15] = (n * k * g - f * r * g + f * U * D - L * k * D - n * U * A + L * r * A) * H, this
            }, makeRotationAxis: function (W, p) {
                var S = Math.cos(p), c = Math.sin(p), o = 1 - S, F = W.x, r = W.y, $ = W.z, G = o * F, E = o * r;
                return this.set(G * F + S, G * r - c * $, G * $ + c * r, 0, G * r + c * $, E * r + S, E * $ - c * F, 0, G * $ - c * r, E * $ + c * F, o * $ * $ + S, 0, 0, 0, 0, 1), this
            }, multiply: function (G) {
                return this.multiplyMatrices(this, G)
            }, premultiply: function (S) {
                return this.multiplyMatrices(S, this)
            }, multiplyMatrices: function (T, A) {
                var W = T.el, $ = A.el, V = this.el, Z = W[0], _ = W[4], y = W[8], F = W[12], R = W[1], v = W[5],
                    S = W[9], n = W[13], s = W[2], Q = W[6], P = W[10], w = W[14], h = W[3], f = W[7], e = W[11],
                    O = W[15], d = $[0], N = $[4], c = $[8], I = $[12], J = $[1], p = $[5], G = $[9], o = $[13],
                    H = $[2], B = $[6], x = $[10], q = $[14], l = $[3], D = $[7], t = $[11], E = $[15];
                return V[0] = Z * d + _ * J + y * H + F * l, V[4] = Z * N + _ * p + y * B + F * D, V[8] = Z * c + _ * G + y * x + F * t, V[12] = Z * I + _ * o + y * q + F * E, V[1] = R * d + v * J + S * H + n * l, V[5] = R * N + v * p + S * B + n * D, V[9] = R * c + v * G + S * x + n * t, V[13] = R * I + v * o + S * q + n * E, V[2] = s * d + Q * J + P * H + w * l, V[6] = s * N + Q * p + P * B + w * D, V[10] = s * c + Q * G + P * x + w * t, V[14] = s * I + Q * o + P * q + w * E, V[3] = h * d + f * J + e * H + O * l, V[7] = h * N + f * p + e * B + O * D, V[11] = h * c + f * G + e * x + O * t, V[15] = h * I + f * o + e * q + O * E, this
            }, lookAt: function () {
                var i = new Jd, N = new Jd, f = new Jd;
                return function (h, O, r) {
                    var F = this.el;
                    return f.subVectors(h, O), 0 === f.lengthSq() && (f.z = 1), f.normalize(), i.crossVectors(r, f), 0 === i.lengthSq() && (1 === Math.abs(r.z) ? f.x += 1e-4 : f.z += 1e-4, f.normalize(), i.crossVectors(r, f)), i.normalize(), N.crossVectors(f, i), F[0] = i.x, F[4] = N.x, F[8] = f.x, F[1] = i.y, F[5] = N.y, F[9] = f.y, F[2] = i.z, F[6] = N.z, F[10] = f.z, this
                }
            }()
        });
        var uk = x.Math.Quaternion = function (Z, M, m, p) {
            this.set(Z, M, m, p)
        };
        H.assign(uk.prototype, {
            set: function (s, T, l, F) {
                var j = this;
                return j._x = s || 0, j._y = T || 0, j._z = l || 0, j._w = F !== v ? F : 1, j
            }, clone: function () {
                return new this.constructor(this._x, this._y, this._z, this._w)
            }, copy: function (P) {
                var E = this;
                return E._x = P._x, E._y = P._y, E._z = P._z, E._w = P._w, E
            }, lengthSq: function () {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            }, length: function () {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            }, normalize: function () {
                var C = this.length();
                return 0 === C ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (C = 1 / C, this._x = this._x * C, this._y = this._y * C, this._z = this._z * C, this._w = this._w * C), this
            }, fromArray: function (x, q) {
                q === v && (q = 0);
                var o = this;
                return o._x = x[q], o._y = x[q + 1], o._z = x[q + 2], o._w = x[q + 3], this
            }, slerp: function (Z, K) {
                if (0 === K) return this;
                if (1 === K) return this.copy(Z);
                var W = this._x, y = this._y, m = this._z, g = this._w, A = g * Z._w + W * Z._x + y * Z._y + m * Z._z;
                if (0 > A ? (this._w = -Z._w, this._x = -Z._x, this._y = -Z._y, this._z = -Z._z, A = -A) : this.copy(Z), A >= 1) return this._w = g, this._x = W, this._y = y, this._z = m, this;
                var U = Math.sqrt(1 - A * A);
                if (Math.abs(U) < .001) return this._w = .5 * (g + this._w), this._x = .5 * (W + this._x), this._y = .5 * (y + this._y), this._z = .5 * (m + this._z), this;
                var c = Math.atan2(U, A), T = Math.sin((1 - K) * c) / U, Q = Math.sin(K * c) / U;
                return this._w = g * T + this._w * Q, this._x = W * T + this._x * Q, this._y = y * T + this._y * Q, this._z = m * T + this._z * Q, this
            }, setFromAxisAngle: function (j, P) {
                var i = P / 2, b = Math.sin(i);
                return this._x = j.x * b, this._y = j.y * b, this._z = j.z * b, this._w = Math.cos(i), this
            }, setFromEuler: function (w) {
                var R = w._x, U = w._y, Y = w._z, t = w._order, Z = Math.cos, C = Math.sin, j = Z(R / 2), B = Z(U / 2),
                    i = Z(Y / 2), S = C(R / 2), b = C(U / 2), W = C(Y / 2);
                return "XYZ" === t ? (this._x = S * B * i + j * b * W, this._y = j * b * i - S * B * W, this._z = j * B * W + S * b * i, this._w = j * B * i - S * b * W) : "YXZ" === t ? (this._x = S * B * i + j * b * W, this._y = j * b * i - S * B * W, this._z = j * B * W - S * b * i, this._w = j * B * i + S * b * W) : "ZXY" === t ? (this._x = S * B * i - j * b * W, this._y = j * b * i + S * B * W, this._z = j * B * W + S * b * i, this._w = j * B * i - S * b * W) : "ZYX" === t ? (this._x = S * B * i - j * b * W, this._y = j * b * i + S * B * W, this._z = j * B * W - S * b * i, this._w = j * B * i + S * b * W) : "YZX" === t ? (this._x = S * B * i + j * b * W, this._y = j * b * i + S * B * W, this._z = j * B * W - S * b * i, this._w = j * B * i - S * b * W) : "XZY" === t && (this._x = S * B * i - j * b * W, this._y = j * b * i - S * B * W, this._z = j * B * W + S * b * i, this._w = j * B * i + S * b * W), this
            }, setFromToVectors: function () {
                var T, Z;
                return function (U, D) {
                    return T === v && (T = new Jd), Z = U.dot(D) + 1, 1e-7 > Z ? (Z = 0, Math.abs(U.x) > Math.abs(U.z) ? T.set(-U.y, U.x, 0) : T.set(0, -U.z, U.y)) : T.crossVectors(U, D), this._x = T.x, this._y = T.y, this._z = T.z, this._w = Z, this.normalize()
                }
            }()
        });
        var rq = x.Math.Triangle = function (o, w, B) {
            this.a = o !== v ? o : new Jd, this.b = w !== v ? w : new Jd, this.c = B !== v ? B : new Jd
        };
        H.assign(rq, {
            barycoordFromPoint: function () {
                var z = new Jd, i = new Jd, t = new Jd;
                return function (v, q, _, U, I) {
                    z.subVectors(U, q), i.subVectors(_, q), t.subVectors(v, q);
                    var e = z.dot(z), L = z.dot(i), p = z.dot(t), o = i.dot(i), G = i.dot(t), X = e * o - L * L,
                        c = I || new Jd;
                    if (0 === X) return c.set(-2, -1, -1);
                    var a = 1 / X, y = (o * p - L * G) * a, g = (e * G - L * p) * a;
                    return c.set(1 - y - g, g, y)
                }
            }()
        });
        var Bh = x.Math.Euler = function (b, C, d, w, t) {
            this.set(b, C, d, w, t)
        };
        Bh.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], Bh.DefaultOrder = "XYZ", Bh.ReverseOrder = function (j) {
            return j = j[2] + j[1] + j[0], j.toUpperCase()
        }, H.defineProperties(Bh.prototype, {
            x: {
                get: function () {
                    return this._x
                }, set: function (n) {
                    this._x = n, this.onChangeCallback()
                }
            }, y: {
                get: function () {
                    return this._y
                }, set: function (g) {
                    this._y = g, this.onChangeCallback()
                }
            }, z: {
                get: function () {
                    return this._z
                }, set: function (O) {
                    this._z = O, this.onChangeCallback()
                }
            }, order: {
                get: function () {
                    return this._order
                }, set: function (C) {
                    this._order = C, this.onChangeCallback()
                }
            }
        }), H.assign(Bh.prototype, {
            set: function (r, h, w, Z, u) {
                return Ll(r) && (u = w, Z = h, w = r[2], h = r[1], r = r[0]), Z ? u && (Z = Bh.ReverseOrder(Z)) : Z = "ZYX", this._x = r || 0, this._y = h || 0, this._z = w || 0, this._order = Z || this._order, this.onChangeCallback(), this
            }, clone: function () {
                return new this.constructor(this._x, this._y, this._z, this._order)
            }, copy: function (i) {
                return this._x = i._x, this._y = i._y, this._z = i._z, this._order = i._order, this.onChangeCallback(), this
            }, setFromRotationMatrix: function (O, i, k) {
                var o = x.Math.clamp, t = O.el || O, S = t[0], A = t[4], H = t[8], V = t[1], u = t[5], v = t[9],
                    I = t[2], X = t[6], F = t[10];
                return i = i || this._order, "XYZ" === i ? (this._y = Math.asin(o(H, -1, 1)), Math.abs(H) < .99999 ? (this._x = Math.atan2(-v, F), this._z = Math.atan2(-A, S)) : (this._x = Math.atan2(X, u), this._z = 0)) : "YXZ" === i ? (this._x = Math.asin(-o(v, -1, 1)), Math.abs(v) < .99999 ? (this._y = Math.atan2(H, F), this._z = Math.atan2(V, u)) : (this._y = Math.atan2(-I, S), this._z = 0)) : "ZXY" === i ? (this._x = Math.asin(o(X, -1, 1)), Math.abs(X) < .99999 ? (this._y = Math.atan2(-I, F), this._z = Math.atan2(-A, u)) : (this._y = 0, this._z = Math.atan2(V, S))) : "ZYX" === i ? (this._y = Math.asin(-o(I, -1, 1)), Math.abs(I) < .99999 ? (this._x = Math.atan2(X, F), this._z = Math.atan2(V, S)) : (this._x = 0, this._z = Math.atan2(-A, u))) : "YZX" === i ? (this._z = Math.asin(o(V, -1, 1)), Math.abs(V) < .99999 ? (this._x = Math.atan2(-v, u), this._y = Math.atan2(-I, S)) : (this._x = 0, this._y = Math.atan2(H, F))) : "XZY" === i ? (this._z = Math.asin(-o(A, -1, 1)), Math.abs(A) < .99999 ? (this._x = Math.atan2(X, u), this._y = Math.atan2(H, S)) : (this._x = Math.atan2(-v, F), this._y = 0)) : console.warn("unsupported order: " + i), this._order = i, k !== !1 && this.onChangeCallback(), this
            }, setFromQuaternion: function () {
                var $ = new Mq;
                return function (x, q, R) {
                    return $.makeRotationFromQuaternion(x), this.setFromRotationMatrix($, q, R)
                }
            }(), setFromVector3: function (F, X) {
                return this.set(F.x, F.y, F.z, X || this._order)
            }, reorder: function () {
                var a = new uk;
                return function (C) {
                    return a.setFromEuler(this), this.setFromQuaternion(a, C)
                }
            }(), equals: function (s) {
                return s._x === this._x && s._y === this._y && s._z === this._z && s._order === this._order
            }, fromArray: function (s) {
                return this._x = s[0], this._y = s[1], this._z = s[2], s[3] !== v && (this._order = s[3]), this.onChangeCallback(), this
            }, toArray: function (I, n) {
                return I === v && (I = []), n === v && (n = 0), I[n] = this._x, I[n + 1] = this._y, I[n + 2] = this._z, I[n + 3] = this._order, I
            }, toVector3: function (L) {
                return L ? L.set(this._x, this._y, this._z) : new Jd(this._x, this._y, this._z)
            }, onChange: function (j) {
                return this.onChangeCallback = j, this
            }, onChangeCallback: function () {
            }
        });
        var Pf = x.List = function () {
            this._as = [];
            var W, $, e = arguments.length;
            if (1 === e) {
                var V = arguments[0];
                if (ki(V) && (V = V._as), Ll(V)) for ($ = V.length, W = 0; $ > W; W++) this._as.push(V[W]); else V != o && this._as.push(V)
            } else if (e > 1) for (W = 0; e > W; W++) this._as.push(arguments[W])
        };
        rb("List", H, {
            forEach: function (e, R) {
                this.each(e, R)
            }, push: function () {
                for (var Y = 0; Y < arguments.length; Y++) this.add(arguments[Y])
            }, pop: function () {
                return this._as.pop()
            }, shift: function () {
                return this._as.shift()
            }, unshift: function () {
                return this._as.unshift.apply(this._as, arguments)
            }, size: function () {
                return this._as.length
            }, isEmpty: function () {
                return 0 === this._as.length
            }, add: function (w, o) {
                return o === v ? this._as.push(w) : this._as.splice(o, 0, w)
            }, addAll: function (I) {
                ki(I) && (I = I._as), Ll(I) ? ll(this._as, I) : this._as.push(I)
            }, get: function (l) {
                return this._as[l]
            }, slice: function (B, A) {
                return new Pf(this._as.slice(B, A))
            }, remove: function (b) {
                var l = this._as.indexOf(b);
                return l >= 0 && l < this._as.length && this.removeAt(l), l
            }, removeAt: function (c) {
                return this._as.splice(c, 1)[0]
            }, set: function ($, R) {
                return this._as[$] = R
            }, clear: function () {
                return this._as.splice(0, this._as.length)
            }, contains: function (T) {
                return this._as.indexOf(T) >= 0
            }, indexOf: function (O) {
                return this._as.indexOf(O)
            }, each: function (I, Y) {
                for (var H = 0, J = this._as.length; J > H; H++) {
                    var C = this._as[H];
                    Y ? I.call(Y, C, H, this) : I(C, H, this)
                }
            }, reverseEach: function (y, E) {
                for (var n = this._as.length - 1; n >= 0; n--) {
                    var O = this._as[n];
                    E ? y.call(E, O) : y(O)
                }
            }, getArray: function () {
                return this._as
            }, toArray: function (G, R) {
                if (G) {
                    for (var q, B = [], F = 0, P = this._as.length; P > F; F++) q = this._as[F], R ? G.call(R, q) && B.push(q) : G(q) && B.push(q);
                    return B
                }
                return this._as.concat()
            }, toList: function (I, j) {
                if (I) {
                    for (var d, D = new Pf, l = 0, G = this._as.length; G > l; l++) d = this._as[l], j ? I.call(j, d) && D.add(d) : I(d) && D.add(d);
                    return D
                }
                return new Pf(this)
            }, reverse: function () {
                this._as.reverse()
            }, sort: function (T) {
                return this._as.sort(T ? T : ho), this
            }, toString: function () {
                return this._as.toString()
            }
        }), H.defineProperties(Pf.prototype, {
            length: {
                get: function () {
                    return this._as.length
                }, set: function (w) {
                    this._as.length = w
                }
            }
        });
        var oi = new Pf;
        Mm(oi, {
            size: function () {
                return 0
            }, indexOf: function () {
                return -1
            }, contains: function () {
                return !1
            }, isEmpty: function () {
                return !0
            }, sort: zo, each: zo, reverseEach: zo, toArray: function () {
                return []
            }, toList: function () {
                return new Pf
            }, add: nc, addAll: nc, set: nc, remove: nc, removeAt: nc, clear: nc
        });
        var Ii = x.Notifier = function () {
            this._f = 0
        };
        rb("Notifier", H, {
            contains: function (O, y) {
                if (this._ls) for (var K, Y = 0, g = this._ls.size(); g > Y; Y++) if (K = this._ls.get(Y), O === K.l && y === K.s) return !0;
                return !1
            }, add: function (W, r, K) {
                var i = this, P = {l: W, s: r, a: K};
                i._ls || (i._ls = new Pf), i._f ? (i._as || (i._as = new Pf), i._as.add(P)) : P.a ? i._ls.add(P, 0) : i._ls.add(P)
            }, remove: function (I, V) {
                var D = this;
                D._ls && (D._f ? (D._rs || (D._rs = new Pf), D._rs.add({l: I, s: V})) : D._remove(I, V))
            }, _remove: function (A, v) {
                for (var X, t = this._ls, F = 0, o = t.size(); o > F; F++) if (X = t.get(F), X.l === A && X.s === v) return t.removeAt(F), void 0
            }, fire: function (Q) {
                var B = this, M = B._ls;
                if (B._b = 1e4, M) {
                    ++B._f;
                    try {
                        for (var i, s = 0, c = M.size(); c > s; s++) i = M.get(s), i.s ? i.l.call(i.s, Q) : i.l(Q)
                    } finally {
                        if (--B._f) return;
                        if (B._rs) {
                            for (c = B._rs.size(), s = 0; c > s; s++) i = B._rs.get(s), B._remove(i.l, i.s);
                            delete B._rs
                        }
                        if (B._as) {
                            for (c = B._as.size(), s = 0; c > s; s++) i = B._as.get(s), i.a ? M.add(i, 0) : M.add(i);
                            delete B._as
                        }
                    }
                }
            }
        });
        var xk = x.Data = function () {
            this._id = Fb()
        };
        rb("Data", H, {
            ms_ac: ["tag", "name", "displayName", "icon", "toolTip", "attrObject", "styleMap", "layer", "adjustChildrenToTop", "dataBindings"],
            ms_dm: 1,
            ms_attr: 1,
            _icon: o,
            _parent: o,
            _children: oi,
            _childMap: o,
            _styleMap: o,
            _layer: "0",
            _adjustChildrenToTop: !1,
            getUIClass: function () {
                return o
            },
            _22Q: function () {
                return o
            },
            s: function (A, M) {
                var t = this;
                if (2 === arguments.length) t.setStyle(A, M); else {
                    if (!bc(A)) return t.getStyle(A);
                    for (var z in A) t.setStyle(z, A[z])
                }
                return t
            },
            fp: function (Y, e, A, l, z) {
                return this.firePropertyChange(Y, e, A, l, z)
            },
            firePropertyChange: function (b, W, A, U, h) {
                if (U) {
                    if (U(W, A)) return !1
                } else if (W === A) return !1;
                var r = this, i = h || {};
                return i.property = b, i.oldValue = W, i.newValue = A, i.data = r, r._dataModel && r._dataModel.handleDataPropertyChange(i), r.onPropertyChanged(i), !0
            },
            onPropertyChanged: function (l) {
                var F = this, E = F._parent, y = l.property;
                if (Em(E)) {
                    var g = F.s(fj), K = "s:ingroup" === y;
                    (g && rl[y] || y === K) && E._81I(), (g || K) && E.fp("childChange", !0, !1)
                }
                $l(E) && rl[y] && E.updateFromChildren()
            },
            _21I: function (f) {
                var c = this;
                if (f && c._dataModel) throw"Remove data from dataModel before adding";
                c._dataModel = f
            },
            removeFromDataModel: function () {
                this._dataModel ? this._dataModel.remove(this) : this.setParent(null)
            },
            clearChildrenFromDataModel: function () {
                for (var J = 0, N = this._children.toArray(), e = N.length; e > J; J++) N[J].removeFromDataModel()
            },
            getId: function () {
                return this._id
            },
            setId: function (I) {
                this._id = I
            },
            getChildren: function () {
                return this._children
            },
            size: function () {
                return this._children.size()
            },
            toChildren: function (Z, F) {
                return this._children.toList(Z, F)
            },
            eachChild: function (B, S) {
                this._children.each(B, S)
            },
            addChild: function (T, Y) {
                var c = this;
                T !== c && (c._children === oi && (c._children = new Pf, c._childMap = {}), Y >= 0 || (Y = c._children.size()), c._childMap[T._id] || c.isDescendantOf(T) || (T._parent && T._parent.removeChild(T), (0 > Y || Y > c._children.size()) && (Y = c._children.size()), c._children.add(T, Y), c._childMap[T._id] = T, T.setParent(c), c.onChildAdded(T, Y), c.fp(Rl, o, T)))
            },
            onChildAdded: function () {
            },
            removeChild: function (p) {
                var s = this;
                if (s._childMap && s._childMap[p._id]) {
                    var c = s._children.remove(p);
                    delete s._childMap[p._id], s.fp(Rl, p, o), p.setParent(o, c), s.onChildRemoved(p, c)
                }
            },
            onChildRemoved: function () {
            },
            getChildAt: function (J) {
                return this._children.get(J)
            },
            clearChildren: function () {
                var W = this;
                if (!W._children.isEmpty()) for (var l = 0, X = W._children.toArray(), N = X.length; N > l; l++) W.removeChild(X[l])
            },
            getParent: function () {
                return this._parent
            },
            setParent: function (a, J) {
                var A = this;
                if (!(A._73I || A._parent === a || A === a || a && a.isDescendantOf(A))) {
                    var n, F = A._parent;
                    A._parent = a, A._73I = 1, F ? (J == o && (J = F.getChildren().indexOf(A)), F.removeChild(A)) : A._dataModel && J == o && (J = A._dataModel.getRoots().indexOf(A)), a && (a.addChild(A), n = a.getChildren().indexOf(A)), delete A._73I, A.fp("parent", F, a, v, {
                        oldIndex: J,
                        newIndex: n
                    }), A.onParentChanged(F, a)
                }
            },
            onParentChanged: function () {
            },
            hasChildren: function () {
                return this._children.size() > 0
            },
            isEmpty: function () {
                return this._children.isEmpty()
            },
            isRelatedTo: function (i) {
                return i ? this.isDescendantOf(i) || i.isDescendantOf(this) : !1
            },
            isParentOf: function (R) {
                return R && this._childMap ? !!this._childMap[R._id] : !1
            },
            isDescendantOf: function (b) {
                if (!b || b.isEmpty()) return !1;
                for (var q = this._parent; q;) {
                    if (b === q) return !0;
                    q = q._parent
                }
                return !1
            },
            getStyle: function (B, h) {
                h === v && (h = 1);
                var P = this._styleMap ? this._styleMap[B] : v;
                return P === v && h ? k[B] : P
            },
            setStyle: function (G, w) {
                var t = this;
                t._styleMap || (t._styleMap = {});
                var S = t._styleMap[G];
                w === v ? delete t._styleMap[G] : t._styleMap[G] = w, t.fp("s:" + G, S, w) && t.onStyleChanged(G, S, w)
            },
            onStyleChanged: function () {
            },
            iv: function (Y) {
                this.invalidate(Y)
            },
            invalidate: function (O) {
                this.fp(O || "*", !1, !0)
            },
            toString: function () {
                var L = this;
                return L._displayName || L._name || L._tag || L._id
            },
            toLabel: function () {
                return this._displayName || this._name
            },
            addStyleIcon: function (B, I) {
                var z = this, T = z.s(om);
                T || z.s(om, T = {}), I ? T[B] = I : delete T[B], z.fp(om, o, T)
            },
            removeStyleIcon: function (z) {
                var s = this.s(om);
                if (s) {
                    var P = s[z];
                    delete s[z], this.fp(om, o, s)
                }
                return P
            },
            getSerializableProperties: function () {
                return {
                    name: 1,
                    displayName: 1,
                    icon: 1,
                    toolTip: 1,
                    parent: 1,
                    layer: 1,
                    tag: 1,
                    adjustChildrenToTop: 1,
                    dataBindings: 1
                }
            },
            getSerializableStyles: function () {
                var F, y = {};
                for (F in this._styleMap) y[F] = 1;
                return y
            },
            ca: function (U, j) {
                return U = dq + U, 2 === arguments.length ? this.a(U, j) : this.a(U)
            }
        });
        var $r = x.DataModel = function () {
            var i = this;
            i._datas = new Pf, i._dataMap = {}, i._roots = new Pf, i._rootMap = {}, i._fsDataMap = {}, i._78O = {}, i._36I = new Ii, i._35I = new Ii, i._serializeNotifier = new Ii, i._selectionModel = new zg(i);
            var M = i._29Q = [], N = i._scheduleCallback = function () {
                for (var C = Date.now(), H = 0; H < M.length; H++) {
                    var j = M[H];
                    j.enabled && C - j.lastTime > j.interval && (j.beforeAction && j.beforeAction(), i.each(function (r) {
                        j.action(r)
                    }), j.afterAction && j.afterAction(), j.lastTime = C)
                }
                M.length && (i._30Q = r.requestAnimationFrame(N))
            }
        };
        rb("DataModel", H, {
            ms_fire: 1,
            ms_attr: 1,
            ms_ac: ["layers", "name", "autoAdjustIndex", "hierarchicalRendering", "background", "envmap", "postProcessingData", "init"],
            _name: v,
            _autoAdjustIndex: !0,
            _hierarchicalRendering: !1,
            _background: v,
            _init: v,
            _envmap: v,
            _postProcessingData: v,
            sm: function () {
                return this.getSelectionModel()
            },
            mm: function (i, Q, K) {
                this.addDataModelChangeListener(i, Q, K)
            },
            umm: function ($, u) {
                this.removeDataModelChangeListener($, u)
            },
            md: function (S, N, B) {
                this.addDataPropertyChangeListener(S, N, B)
            },
            umd: function (P, g) {
                this.removeDataPropertyChangeListener(P, g)
            },
            mh: function (T, S, l) {
                this.addHierarchyChangeListener(T, S, l)
            },
            umh: function (N, w) {
                this.removeHierarchyChangeListener(N, w)
            },
            getAttrObject: function () {
                return this._attrObject
            },
            setAttrObject: function (T) {
                return this._attrObject = T
            },
            getSelectionModel: function () {
                return this._selectionModel
            },
            size: function () {
                return this._datas.size()
            },
            isEmpty: function () {
                return this._datas.isEmpty()
            },
            getRoots: function () {
                return this._roots
            },
            getDatas: function () {
                return this._datas
            },
            getFullscreenDatas: function () {
                return this._fsDataMap
            },
            getDataById: function (d) {
                return this._dataMap[d]
            },
            removeDataById: function (m) {
                this.remove(this.getDataById(m))
            },
            toDatas: function (p, h) {
                return this._datas.toList(p, h)
            },
            each: function (f, v) {
                this._datas.each(f, v)
            },
            getDataByTag: function (G) {
                return this._78O[G]
            },
            getTagMap: function () {
                return this._78O
            },
            removeDataByTag: function (i) {
                this.remove(this.getDataByTag(i))
            },
            add: function (K, C, L) {
                var y = this, j = K._id, Q = K._tag, a = y._roots;
                if (y._dataMap[j]) throw"'" + j + "' already exists";
                Q != o && (y._78O[Q] = K), y._dataMap[j] = K, L >= 0 ? y._datas.add(K, L) : y._datas.add(K), K._parent || (y._rootMap[j] = K, C >= 0 ? a.add(K, C) : a.add(K)), K.s("fullscreen") !== v && (y._fsDataMap[j] = K), K._21I(y), y.onAdded(K), y._36I.fire({
                    kind: "add",
                    data: K,
                    rootsIndex: C,
                    datasIndex: L
                })
            },
            onAdded: function () {
            },
            remove: function (u, f) {
                if (u) {
                    var x = this, B = u._id, w = f && f.keepStructure, l = f && f.keepChildren, N = u.getTag();
                    if (u._dataModel === x) {
                        this.beginTransaction(), w ? x._removingData || (x._removingData = u) : x.prepareRemove(u), l || u.toChildren().each(function (X) {
                            x.remove(X, f)
                        }, x), w ? x._removingData === u && (u._parent && u._parent.removeChild(u), delete x._removingData) : u._parent && u._parent.removeChild(u);
                        var O = x._datas.remove(u);
                        delete x._dataMap[B], N != o && delete x._78O[N];
                        var i;
                        x._rootMap[B] && (delete x._rootMap[B], i = x._roots.remove(u)), x._fsDataMap[B] && delete x._fsDataMap[B], u._21I(o), x.onRemoved(u), x._36I.fire({
                            kind: Pl,
                            data: u,
                            rootsIndex: i,
                            datasIndex: O
                        }), this.endTransaction()
                    }
                }
            },
            onRemoved: function () {
            },
            prepareRemove: function () {
            },
            clear: function () {
                var c = this;
                if (c._datas.size()) {
                    var u = c._historyManager ? this.toJSON() : v;
                    c._datas.toArray().forEach(function (R) {
                        R._21I(o)
                    }), c._datas.clear(), c._dataMap = {}, c._roots.clear(), c._rootMap = {}, c._fsDataMap = {}, c._78O = {}, c._36I.fire({
                        kind: Pr,
                        json: u
                    })
                }
            },
            contains: function (D) {
                return D && D._dataModel === this
            },
            handleDataPropertyChange: function (q) {
                var $ = this, y = q.data, A = q.property;
                if ("parent" === A) {
                    var t = y._id, n = $._rootMap, p = $._roots;
                    y._parent ? n[t] && (delete n[t], p.remove(y)) : n[t] || (n[t] = y, p.add(y))
                } else if ("tag" === A) {
                    var l = q.oldValue, h = q.newValue, x = $._78O;
                    l != o && delete x[l], h != o && (x[h] = y)
                } else if ("s:fullscreen" === A) {
                    var t = y._id, d = $._fsDataMap;
                    q.oldValue != o && delete d[t], q.newValue != o && (d[t] = y)
                }
                this.onDataPropertyChanged(y, q), this._35I.fire(q)
            },
            onDataPropertyChanged: function () {
            },
            addDataModelChangeListener: function (v, V, H) {
                this._36I.add(v, V, H)
            },
            removeDataModelChangeListener: function (G, b) {
                this._36I.remove(G, b)
            },
            addSerializeListener: function (r, I, e) {
                this._serializeNotifier.add(r, I, e)
            },
            removeSerializeListener: function (P, v) {
                this._serializeNotifier.remove(P, v)
            },
            fireSerializeEvent: function (Z) {
                this._serializeNotifier.fire(Z)
            },
            addDataPropertyChangeListener: function (W, m, K) {
                this._35I.add(W, m, K)
            },
            removeDataPropertyChangeListener: function (j, l) {
                this._35I.remove(j, l)
            },
            _38I: function (K, X, $) {
                this._37I && this._37I.fire({data: K, oldIndex: X, newIndex: $})
            },
            addHierarchyChangeListener: function (x, B, o) {
                this._37I || (this._37I = new Ii), this._37I.add(x, B, o)
            },
            removeHierarchyChangeListener: function (v, r) {
                this._37I.remove(v, r)
            },
            getSiblings: function (k) {
                var j = k._parent;
                return j ? j._children : this._roots
            },
            eachByHierarchical: function (S, g, X) {
                if (g) return this._eachByHierarchical(S, g, X);
                for (var w = 0, k = this._roots, R = k.size(); R > w; w++) if (this._eachByHierarchical(S, k.get(w), X) === !1) return !1;
                return !0
            },
            _eachByHierarchical: function (x, h, l) {
                if (l) {
                    if (x.call(l, h) === !1) return !1
                } else if (x(h) === !1) return !1;
                for (var f = h.size(), I = 0; f > I; I++) if (this._eachByHierarchical(x, h.getChildAt(I), l) === !1) return !1;
                return !0
            },
            reverseEachByHierarchical: function (n, Q, l) {
                if (Q) return this._reverseEachByHierarchical(n, Q, l);
                for (var P = this._roots, $ = P.size(), X = $ - 1; X >= 0; X--) if (this._reverseEachByHierarchical(n, P.get(X), l) === !1) return !1;
                return !0
            },
            _reverseEachByHierarchical: function (M, d, e) {
                for (var E = d.size(), i = E - 1; i >= 0; i--) if (this._reverseEachByHierarchical(M, d.getChildAt(i), e) === !1) return !1;
                if (e) {
                    if (M.call(e, d) === !1) return !1
                } else if (M(d) === !1) return !1;
                return !0
            },
            eachByDepthFirst: function (D, z, h) {
                if (z) return this._11I(D, z, h);
                for (var w = 0, Z = this._roots, Q = Z.size(); Q > w; w++) if (this._11I(D, Z.get(w), h) === !1) return !1;
                return !0
            },
            _11I: function (A, l, t) {
                for (var m = l.size(), I = 0; m > I; I++) if (this._11I(A, l.getChildAt(I), t) === !1) return !1;
                if (t) {
                    if (A.call(t, l) === !1) return !1
                } else if (A(l) === !1) return !1;
                return !0
            },
            eachByBreadthFirst: function (i, H, R) {
                var N = new Pf;
                for (H ? N.add(H) : this._roots.each(N.add, N); N.size() > 0;) if (H = N.removeAt(0), H.eachChild(N.add, N), R) {
                    if (i.call(R, H) === !1) return !1
                } else if (i(H) === !1) return !1;
                return !0
            },
            moveTo: function (z, E) {
                var A = this.getSiblings(z), n = A.indexOf(z);
                n === E || 0 > n || E >= 0 && E <= A.size() && (A.remove(z), E > A.size() && E--, A.add(z, E), this._38I(z, n, E))
            },
            moveUp: function (Q) {
                this.moveTo(Q, this.getSiblings(Q).indexOf(Q) - 1)
            },
            moveDown: function (F) {
                this.moveTo(F, this.getSiblings(F).indexOf(F) + 1)
            },
            moveToTop: function (f) {
                this.moveTo(f, 0)
            },
            moveToBottom: function (L) {
                this.moveTo(L, this.getSiblings(L).size())
            },
            moveSelectionUp: function (v) {
                this.beginTransaction(), v || (v = this.sm());
                var q = new Pf;
                _k(v, q, this._roots), q.each(this.moveUp, this), this.endTransaction()
            },
            moveSelectionDown: function (z) {
                this.beginTransaction(), z || (z = this.sm());
                var c = new Pf;
                _c(z, c, this._roots), c.each(this.moveDown, this), this.endTransaction()
            },
            moveSelectionToTop: function (k) {
                this.beginTransaction(), k || (k = this.sm());
                var A = new Pf;
                nh(k, A, this._roots), A.each(this.moveToTop, this), this.endTransaction()
            },
            moveSelectionToBottom: function (k) {
                this.beginTransaction(), k || (k = this.sm());
                var D = new Pf;
                dr(k, D, this._roots), D.each(this.moveToBottom, this), this.endTransaction()
            },
            moveToIndex: function (i, y, z) {
                var u = this.getDatas();
                null == z && (z = u.indexOf(i)), z === y || 0 > z || y >= 0 && y <= u.size() && (u.remove(i), y > u.size() && y--, u.add(i, y), this._76I(i, z, y))
            },
            bringForward: function (A) {
                this.moveToIndex(A, this.getDatas().indexOf(A) + 1)
            },
            bringToFront: function (I) {
                this.moveToIndex(I, this.size())
            },
            sendBackward: function (b) {
                this.moveToIndex(b, this.getDatas().indexOf(b) - 1)
            },
            sendToBack: function (H) {
                this.moveToIndex(H, 0)
            },
            bringSelectionForward: function (G) {
                this.beginTransaction(), G || (G = this.sm());
                for (var X = new Pf, T = this.getDatas(), a = !1, A = 0; A < T.size(); A++) {
                    var D = T.get(T.size() - 1 - A);
                    G.contains(D) ? a && X.add(D) : a = !0
                }
                X.each(this.bringForward, this), this.endTransaction()
            },
            bringSelectionToFront: function (x) {
                this.beginTransaction(), x || (x = this.sm());
                for (var q = new Pf, T = this.getDatas(), O = 0; O < T.size(); O++) {
                    var U = T.get(O);
                    x.contains(U) && q.add(U)
                }
                q.each(this.bringToFront, this), this.endTransaction()
            },
            sendSelectionBackward: function (U) {
                this.beginTransaction(), U || (U = this.sm());
                for (var E = new Pf, i = this.getDatas(), g = !1, r = 0; r < i.size(); r++) {
                    var y = i.get(r);
                    U.contains(y) ? g && E.add(y) : g = !0
                }
                E.each(this.sendBackward, this), this.endTransaction()
            },
            sendSelectionToBack: function (m) {
                this.beginTransaction(), m || (m = this.sm());
                for (var N = new Pf, G = this.getDatas(), C = 0; C < G.size(); C++) {
                    var q = G.get(G.size() - 1 - C);
                    m.contains(q) && N.add(q)
                }
                N.each(this.sendToBack, this), this.endTransaction()
            },
            addScheduleTask: function (b) {
                var S = this;
                S.removeScheduleTask(b), b.enabled == o && (b.enabled = !0), b.interval == o && (b.interval = 10), b.action == o && (b.action = zo), b.lastTime = Date.now(), S._29Q.push(b), S._30Q == o && (S._30Q = r.requestAnimationFrame(S._scheduleCallback))
            },
            removeScheduleTask: function (T) {
                var n = this, q = n._29Q, x = q.indexOf(T);
                x >= 0 && q.splice(x, 1), q.length || n._30Q == o || (r.cancelAnimationFrame(n._30Q), delete n._30Q)
            },
            getHistoryManager: function () {
                return this._historyManager
            },
            enableHistoryManager: function (R) {
                this._historyManager || new x.HistoryManager(this), null != R && this._historyManager.setMaxHistoryCount(R), this._historyManager.setDisabled(!1)
            },
            disableHistoryManager: function () {
                this._historyManager && this._historyManager.setDisabled(!0)
            },
            clearHistoryManager: function () {
                this._historyManager && this._historyManager.clear()
            },
            undo: function (B) {
                this._historyManager && this._historyManager.undo(B)
            },
            redo: function (q) {
                this._historyManager && this._historyManager.redo(q)
            },
            beginTransaction: function () {
                this._historyManager && this._historyManager.beginTransaction()
            },
            endTransaction: function () {
                this._historyManager && this._historyManager.endTransaction()
            },
            addHistory: function (w) {
                this._historyManager && this._historyManager.addHistory(w)
            },
            onHistoryManagerChanged: function () {
            }
        });
        var zg = x.SelectionModel = function (A) {
            var b = this;
            b._68O = cq, b._map = {}, b._73O = new Pf, b._74I = new Ii, b._21I(A)
        };
        rb("SelectionModel", H, {
            ms_fire: 1, ms_dm: 1, ms: function (Q, R, w) {
                this.addSelectionChangeListener(Q, R, w)
            }, ums: function (B, I) {
                this.removeSelectionChangeListener(B, I)
            }, fd: function () {
                return this.getFirstData()
            }, ld: function () {
                return this.getLastData()
            }, sg: function () {
                return this._68O === Id
            }, co: function (r) {
                return this._map[r._id] != o
            }, ss: function (X) {
                this.setSelection(X)
            }, as: function (k) {
                this.appendSelection(k)
            }, rs: function (i) {
                this.removeSelection(i)
            }, cs: function () {
                this.clearSelection()
            }, sa: function () {
                this.selectAll()
            }, getSelectionMode: function () {
                return this._68O
            }, setSelectionMode: function (z) {
                var H = this;
                if (H._68O !== z && (z === $f || z === Id || z === cq)) {
                    H.cs();
                    var J = H._68O;
                    H._68O = z, H.fp("selectionMode", J, z)
                }
            }, _21I: function (T) {
                var o = this, u = o._dataModel;
                u !== T && (u && (o.cs(), u.umm(o.handleDataModelChange, o)), o._dataModel = T, T.mm(o.handleDataModelChange, o, !0), o.fp(Jq, u, T))
            }, dispose: function () {
                var e = this;
                e.cs(), e._dataModel.umm(e.handleDataModelChange, e)
            }, handleDataModelChange: function (e) {
                var f = this;
                if (e.kind === Pl) {
                    var o = e.data;
                    f.co(o) && (f._73O.remove(o), delete f._map[o._id], f._75I(Pl, new Pf(o)))
                } else e.kind === Pr && f.cs()
            }, getFilterFunc: function () {
                return this._filterFunc
            }, setFilterFunc: function (l) {
                var Z = this;
                if (Z._filterFunc !== l) {
                    Z.cs();
                    var m = Z._filterFunc;
                    Z._filterFunc = l, Z.fp("filterFunc", m, Z._filterFunc)
                }
            }, _75I: function (G, R, O, v) {
                O && (this._73O.each(function (k) {
                    v[k._id] ? O.remove(k) : O.add(k)
                }), R = O.toList()), this._74I.fire({kind: G, datas: new Pf(R)})
            }, addSelectionChangeListener: function (p, D, H) {
                this._74I.add(p, D, H)
            }, removeSelectionChangeListener: function (F, x) {
                this._74I.remove(F, x)
            }, _97O: function (p, y) {
                for (var q, O = this, j = 0, X = new Pf(p); j < X.size(); j++) q = X.get(j), (O._filterFunc && !O._filterFunc(q) || y && O.co(q) || !y && !O.co(q) || !O._dataModel.contains(q)) && (X.removeAt(j), j--);
                return X
            }, appendSelection: function (K) {
                var r = this;
                if (r._68O !== $f) {
                    var s, V, L = r._73O, a = r._97O(K, !0);
                    a.isEmpty() || (r.sg() && (s = new Pf(L), V = r._map, L.clear(), r._map = {}, a = new Pf(a.get(a.size() - 1))), a.each(function (X) {
                        L.add(X), r._map[X._id] = X
                    }), r._75I("append", a, s, V))
                }
            }, removeSelection: function (T) {
                var W = this, B = W._97O(T), y = 0, d = B.size();
                if (0 !== d) {
                    for (; d > y; y++) {
                        var b = B.get(y);
                        W._73O.remove(b), delete W._map[b._id]
                    }
                    W._75I(Pl, B)
                }
            }, toSelection: function (V, v) {
                return this._73O.toList(V, v)
            }, getSelection: function () {
                return this._73O
            }, each: function (m, S) {
                this._73O.each(m, S)
            }, setSelection: function ($) {
                var a = this, _ = a._73O;
                if (a._68O !== $f && !(_.isEmpty() && !$ || 1 === _.size() && a.ld() === $)) {
                    var c = new Pf(_), X = a._map;
                    _.clear(), a._map = {};
                    var O = a._97O($, !0);
                    a.sg() && O.size() > 1 && (O = new Pf(O.get(O.size() - 1))), O.each(function (M) {
                        _.add(M), a._map[M._id] = M
                    }), a._75I("set", o, c, X)
                }
            }, clearSelection: function () {
                var h = this, U = h._73O;
                if (U.size() > 0) {
                    var R = U.toList();
                    U.clear(), h._map = {}, h._75I(Pr, R)
                }
            }, selectAll: function () {
                var W = this;
                if (W._68O !== $f) {
                    var X, q, L = W._dataModel.toDatas();
                    if (W._filterFunc) for (X = 0; X < L.size(); X++) q = L.get(X), W._filterFunc(q) || (L.removeAt(X), X--);
                    var x = W._73O, $ = new Pf(x), j = W._map;
                    x.clear(), W._map = {}, W.sg() && L.size() > 1 && (L = new Pf(L.get(L.size() - 1)));
                    var Q = L.size();
                    for (X = 0; Q > X; X++) q = L.get(X), x.add(q), W._map[q._id] = q;
                    W._75I("all", o, $, j)
                }
            }, size: function () {
                return this._73O.size()
            }, isEmpty: function () {
                return this._73O.isEmpty()
            }, contains: function (k) {
                return this._map[k._id] != o
            }, getLastData: function () {
                var K = this._73O;
                return K.size() > 0 ? K.get(K.size() - 1) : o
            }, getFirstData: function () {
                var R = this._73O;
                return R.size() > 0 ? R.get(0) : o
            }, isSelectable: function (t) {
                var M = this;
                return t && M._68O !== $f ? M._filterFunc ? M._filterFunc(t) : !0 : !1
            }, getTopSelection: function () {
                var x = this, g = new Pf;
                return x._73O.each(function (U) {
                    for (var v = U.getParent(); v;) {
                        if (x.contains(v)) {
                            U = o;
                            break
                        }
                        v = v.parent
                    }
                    U && g.add(U)
                }), g
            }
        });
        var Eq = function () {
            return We(0), function (c, i) {
                var Q;
                if (Tn(i)) {
                    var d = c.getDataUI(i);
                    d && d._88I && (Q = d._88I.rect)
                }
                return Q ? Q : i.getRect()
            }
        }();
        Mm(w, {
            edgeGroupAgentFunc: o,
            graphViewAutoScrollZone: 16,
            graphViewZoomable: !0,
            graphViewResettable: !1,
            graphViewPannable: !0,
            graphViewRectSelectable: !0,
            graphViewScrollBarVisible: !0,
            graphViewRectSelectBorderColor: Q.rectSelectBorder,
            graphViewRectSelectBackground: Sc,
            graphViewEditPointSize: Xp ? 17 : 7,
            graphViewEditPointBorderColor: Q.editPointBorder,
            graphViewEditPointBackground: Q.editPointBackground,
            setEdgeType: function (r, j, I) {
                gf[r] = j, Ul[r] = I
            },
            getEdgeType: function (A) {
                return gf[A]
            },
            getEdgeTypeMap: function () {
                return gf
            },
            getNodeRect: Eq
        }, !0), Mm(k, {
            "layout.h": v,
            "layout.v": v,
            "2d.selectable": !0,
            "2d.visible": !0,
            "2d.movable": !0,
            "2d.editable": !0,
            "2d.move.mode": v,
            interactive: !1,
            "image.stretch": "fill",
            icons: v,
            ingroup: !0,
            "body.color": v,
            "2d.gray": !1,
            fullscreen: v,
            "fullscreen.gap": 2,
            "fullscreen.lock": !1,
            opacity: v,
            pixelPerfect: !0,
            keepAspectRatio: !1,
            "attach.points": null,
            "attach.style": null,
            "attach.close.threshold": 16,
            "clip.direction": "top",
            "clip.percentage": 1,
            "select.color": mn,
            "select.width": 1,
            "select.padding": 2,
            "select.type": ap,
            shadow: !1,
            "shadow.blur": 6,
            "shadow.offset.x": 3,
            "shadow.offset.y": 3,
            "border.color": v,
            "border.width": 2,
            "border.padding": 2,
            "border.type": ap,
            label: v,
            "label.font": v,
            "label.color": As,
            "label.background": v,
            "label.position": 31,
            "label.position.fixed": !1,
            "label.offset.x": 0,
            "label.offset.y": 2,
            "label.rotation": v,
            "label.max": v,
            "label.opacity": v,
            "label.scale": 1,
            "label.align": v,
            "label.selectable": !0,
            label2: v,
            "label2.font": v,
            "label2.color": As,
            "label2.background": v,
            "label2.position": 34,
            "label2.position.fixed": !1,
            "label2.offset.x": 0,
            "label2.offset.y": -2,
            "label2.rotation": v,
            "label2.max": v,
            "label2.opacity": v,
            "label2.scale": 1,
            "label2.align": v,
            "label2.selectable": !0,
            note: v,
            "note.expanded": !0,
            "note.font": v,
            "note.color": Ih,
            "note.background": mn,
            "note.position": 8,
            "note.offset.x": -3,
            "note.offset.y": 3,
            "note.max": v,
            "note.toggleable": !0,
            "note.border.width": 1,
            "note.border.color": v,
            "note.opacity": v,
            "note.scale": 1,
            "note.align": v,
            note2: v,
            "note2.expanded": !0,
            "note2.font": v,
            "note2.color": Ih,
            "note2.background": mn,
            "note2.position": 3,
            "note2.offset.x": 3,
            "note2.offset.y": -3,
            "note2.max": v,
            "note2.toggleable": !0,
            "note2.border.width": 1,
            "note2.border.color": v,
            "note2.opacity": v,
            "note2.scale": 1,
            "note2.align": v,
            "group.type": v,
            "group.image": v,
            "group.image.stretch": "fill",
            "group.repeat.image": v,
            "group.padding": 8,
            "group.padding.left": 0,
            "group.padding.right": 0,
            "group.padding.top": 0,
            "group.padding.bottom": 0,
            "group.position": 17,
            "group.toggleable": !0,
            "group.title.font": v,
            "group.title.color": Ih,
            "group.title.background": Q.groupTitleBackground,
            "group.title.align": Pq,
            "group.title.orientation": Tp,
            "group.background": Q.groupBackground,
            "group.depth": 1,
            "group.border.width": 1,
            "group.border.pattern": v,
            "group.border.color": Aq,
            "group.border.radius": 0,
            "group.border.cap": Dq,
            "group.border.join": cp,
            "group.splitLine": !1,
            "group.gradient": o,
            "group.gradient.color": "#FFF",
            shape: v,
            "shape.background": Aq,
            "shape.repeat.image": v,
            "shape.border.width": 0,
            "shape.border.width.absolute": !1,
            "shape.border.color": Aq,
            "shape.border.3d": !1,
            "shape.border.3d.color": v,
            "shape.border.3d.accuracy": v,
            "shape.border.cap": Dq,
            "shape.border.join": cp,
            "shape.border.pattern": v,
            "shape.gradient": o,
            "shape.gradient.color": "#FFF",
            "shape.depth": 0,
            "shape.dash": !1,
            "shape.dash.pattern": bq,
            "shape.dash.offset": 0,
            "shape.dash.color": jo,
            "shape.dash.width": v,
            "shape.dash.3d": !1,
            "shape.dash.3d.color": v,
            "shape.dash.3d.accuracy": v,
            "shape.polygon.side": 6,
            "shape.arc.from": Y,
            "shape.arc.to": C,
            "shape.arc.close": !0,
            "shape.arc.oval": !1,
            "shape.corner.radius": v,
            "shape.gradient.pack": v,
            "shape.fill.rule": "nonzero",
            "shape.fill.clip.direction": "top",
            "shape.fill.clip.percentage": 1,
            "shape.foreground": v,
            "shape.foreground.gradient": o,
            "shape.foreground.gradient.color": "#FFF",
            "shape.foreground.clip.direction": "top",
            "shape.foreground.clip.percentage": 1,
            "autolayout.gap": v,
            "autolayout.hgap": v,
            "autolayout.vgap": v,
            "edge.type": v,
            "edge.points": v,
            "edge.segments": v,
            "edge.color": Aq,
            "edge.width": 2,
            "edge.width.absolute": !1,
            "edge.offset": 0,
            "edge.group": 0,
            "edge.expanded": !0,
            "edge.gap": 12,
            "edge.toggleable": !0,
            "edge.center": !1,
            "edge.3d": !1,
            "edge.3d.color": v,
            "edge.3d.accuracy": v,
            "edge.cap": Dq,
            "edge.join": cp,
            "edge.source.position": 17,
            "edge.source.anchor.x": v,
            "edge.source.anchor.y": v,
            "edge.source.offset.x": 0,
            "edge.source.offset.y": 0,
            "edge.target.position": 17,
            "edge.target.anchor.x": v,
            "edge.target.anchor.y": v,
            "edge.target.offset.x": 0,
            "edge.target.offset.y": 0,
            "edge.pattern": v,
            "edge.dash": !1,
            "edge.dash.pattern": bq,
            "edge.dash.offset": 0,
            "edge.dash.color": jo,
            "edge.dash.width": v,
            "edge.dash.3d": !1,
            "edge.dash.3d.color": v,
            "edge.dash.3d.accuracy": v,
            "edge.independent": !1,
            "attach.row.index": 0,
            "attach.column.index": 0,
            "attach.row.span": 1,
            "attach.column.span": 1,
            "attach.padding": 0,
            "attach.padding.left": 0,
            "attach.padding.right": 0,
            "attach.padding.top": 0,
            "attach.padding.bottom": 0,
            "attach.index": -1,
            "attach.offset": 0,
            "attach.offset.relative": !1,
            "attach.offset.opposite": !1,
            "attach.thickness": v,
            "attach.gap": 0,
            "attach.gap.relative": !1,
            "grid.row.count": 1,
            "grid.column.count": 1,
            "grid.row.percents": v,
            "grid.column.percents": v,
            "grid.border": 1,
            "grid.border.left": 0,
            "grid.border.right": 0,
            "grid.border.top": 0,
            "grid.border.bottom": 0,
            "grid.gap": 1,
            "grid.background": Q.gridBackground,
            "grid.depth": 1,
            "grid.cell.depth": -1,
            "grid.cell.border.color": Q.gridCellBorderColor,
            "grid.block": v,
            "grid.block.padding": 3,
            "grid.block.width": 1,
            "grid.block.color": Q.gridBlockColor,
            text: "",
            "text.align": "left",
            "text.vAlign": "middle",
            "text.color": As,
            "text.font": Kp,
            "text.shadow": !1,
            "text.shadow.color": mn,
            "text.shadow.blur": 6,
            "text.shadow.offset.x": 3,
            "text.shadow.offset.y": 3,
            "text.scale.x": 1,
            "text.scale.y": 1
        }, !0), Mm($r, {
            _76I: function (C, a, c) {
                this._39I && this._39I.fire({data: C, oldIndex: a, newIndex: c})
            }, addIndexChangeListener: function (v, m, c) {
                var p = this;
                p._39I || (p._39I = new Ii), p._39I.add(v, m, c)
            }, removeIndexChangeListener: function (Y, v) {
                this._39I.remove(Y, v)
            }, prepareRemove: function (W) {
                xf(W) && (W.setSource(o), W.setTarget(o)), W._70O && W._70O.toList().each(this.remove, this), W._69O && W._69O.toList().each(function (w) {
                    w.setHost(o)
                }), W._host && W.setHost(o)
            }, onAdded: function (u) {
                this.isAutoAdjustIndex() && this.adjustIndex(u)
            }, onDataPropertyChanged: function (w, O) {
                mc[O.property] && this.isAutoAdjustIndex() && this.adjustIndex(w)
            }, isAdjustable: function (c) {
                return Un(c) || xf(c)
            }, isAdjustedToBottom: function (l) {
                return Em(l) ? l.isExpanded() && Jn(l) : !1
            }, adjustIndex: function (d) {
                var K = this;
                this.isHierarchicalRendering() || (K.isAdjustedToBottom(d) ? (K.sendToBottom(d), d.eachChild(K.adjustIndex, K)) : K.sendToTop(d))
            }, sendToTop: function (P) {
                var l = this;
                if (l.contains(P) && l.isAdjustable(P)) {
                    var C = l._datas;
                    if (P !== C.get(l.size() - 1)) {
                        var Z = C.indexOf(P);
                        C.removeAt(Z), C.add(P), l._76I(P, Z, l.size() - 1)
                    }
                    if (xf(P)) {
                        var m = P._40I;
                        m && !l.isAdjustedToBottom(m) && l.sendToTop(m), m = P._41I, m && !l.isAdjustedToBottom(m) && l.sendToTop(m)
                    }
                    P._69O && P._69O.each(function (p) {
                        p.isRelatedTo(P) || Un(P) && p.isLoopedHostOn(P) || l.sendToTop(p)
                    }), P.ISubGraph || (!Em(P) || P.isExpanded()) && P._adjustChildrenToTop && P.eachChild(function (q) {
                        xf(q) || l.sendToTop(q)
                    })
                }
            }, sendToBottom: function (x, K) {
                var E = this;
                if (x !== K && E.contains(x) && E.isAdjustable(x) && (!K || E.contains(K))) {
                    var O = E._datas, k = O.remove(x), R = K ? E._datas.indexOf(K) : 0;
                    if (O.add(x, R), k !== R) {
                        E._76I(x, k, R);
                        var z = x._parent;
                        !z || z.ISubGraph || xf(z) || E.sendToBottom(x._parent, x)
                    }
                }
            }
        }), Mm(Pg, {
            ms_edit: function (y) {
                y._46O = function (X) {
                    var O = this, K = O.gv.dm(), _ = O._index, p = O._89I, B = O._node, i = O._shape, N = O._edge,
                        t = O._77I;
                    B && p ? (this.fi({
                        kind: "endEditRect",
                        event: X,
                        data: B,
                        direction: p
                    }), K.endTransaction()) : i && _ >= 0 ? (O.fi({
                        kind: "endEditPoint",
                        event: X,
                        data: i,
                        index: _
                    }), K.endTransaction()) : N && _ >= 0 ? (O.fi({
                        kind: "endEditPoint",
                        event: X,
                        data: N,
                        index: _
                    }), K.endTransaction()) : t && (O.fi({
                        kind: "endEditRotation",
                        event: X,
                        data: t
                    }), K.endTransaction())
                }, y._78I = function (w) {
                    var v = this;
                    v.autoScroll(w);
                    var $ = v.gv.lp(w), H = v._index, G = v._89I, K = v._node, t = v._shape, g = v._edge, f = v._77I;
                    if (K && G) v._80O($), v.fi({
                        kind: "betweenEditRect",
                        event: w,
                        data: K,
                        direction: G
                    }); else if (t && H >= 0) $.e = t.getPoints().get(H).e, t.setPoint(H, $), v.fi({
                        kind: "betweenEditPoint",
                        event: w,
                        data: t,
                        index: H
                    }); else if (g && H >= 0) {
                        var k = g.s(Ge);
                        $.e = k.get(H).e, k.set(H, $), g.fp(Ge, o, k), v.fi({
                            kind: "betweenEditPoint",
                            event: w,
                            data: g,
                            index: H
                        })
                    } else if (f) {
                        var b = f.p(), V = f.getScale(), D = h + N($.y - b.y, $.x - b.x);
                        V.y < 0 && (D += Y), M(D) < .04 && (D = 0), f.setRotation(D), v.fi({
                            kind: "betweenEditRotation",
                            event: w,
                            data: f
                        })
                    }
                }, y._80O = function (V) {
                    var c = this, v = c._node, A = c._rect, Z = A.x, q = A.y, G = A.width, T = A.height, d = c._89I,
                        u = c._anchor, z = c._matrix, V = z.tfi(V);
                    "northwest" === d ? A = an(V, {x: Z + G, y: q + T}) : d === sh ? A = an({x: Z, y: V.y}, {
                        x: Z + G,
                        y: q + T
                    }) : "northeast" === d ? A = an({x: Z, y: V.y}, {x: V.x, y: q + T}) : d === Je ? A = an({
                        x: V.x,
                        y: q
                    }, {x: Z + G, y: q + T}) : d === kp ? A = an({x: Z, y: q}, {
                        x: V.x,
                        y: q + T
                    }) : "southwest" === d ? A = an({x: V.x, y: q}, {x: Z + G, y: V.y}) : "south" === d ? A = an({
                        x: Z,
                        y: q
                    }, {x: Z + G, y: V.y}) : "southeast" === d && (A = an({
                        x: Z,
                        y: q
                    }, V)), v.setPosition(z.tf(A.x + A.width * u.x, A.y + A.height * u.y)), v.setWidth(A.width), v.setHeight(A.height)
                }, y._80I = function (H, n, x, f) {
                    var g = this, m = g.gv._zoom, d = (g.gv.getEditPointSize() + 2) / m;
                    return wc({
                        x: n - d / 2,
                        y: x - d / 2,
                        width: d,
                        height: d
                    }, H) ? (g._89I !== f && (g._89I = f), !0) : !1
                }, y._79I = function (N, T, l) {
                    var v = this, h = v.gv, _ = T ? h.getDataUI(T) : o, s = _ ? _._55O : o;
                    if (s) {
                        var Y, H, u, R, t = h._zoom, W = (h.getEditPointSize() + 2) / t, X = h.lp(N);
                        if (Un(T)) {
                            if (s._56O && Un(T) && (H = s._98o, wc({
                                x: H.x - W / 2,
                                y: H.y - W / 2,
                                width: W,
                                height: W
                            }, X))) return v._77I = T, l && v.fi({
                                kind: "beginEditRotation",
                                event: N,
                                data: T
                            }), v.setCursor("crosshair"), !0;
                            if (s._43O && T instanceof rr) for (u = T.getPoints(), Y = u.size() - 1; Y >= 0; Y--) if (H = u.get(Y), wc({
                                x: H.x - W / 2,
                                y: H.y - W / 2,
                                width: W,
                                height: W
                            }, X)) return v._index = Y, v._shape = T, l && v.fi({
                                kind: "beginEditPoint",
                                event: N,
                                data: T,
                                index: Y
                            }), v.setCursor("crosshair"), !0;
                            if (s._42O) for (var i = T.getEditControlPoints(), b = ["northwest", -1, -1, Je, -1, 0, "southwest", -1, 1, "south", 0, 1, "southeast", 1, 1, kp, 1, 0, "northeast", 1, -1, sh, 0, -1], Y = 0, R = i.length; R > Y; Y++) {
                                var r = b[3 * Y], A = i[Y];
                                if (v._80I(X, A.x, A.y, r)) {
                                    v._node = T;
                                    var p = T.getWidth(), m = T.getHeight(), a = T.getAnchor();
                                    v._rect = {
                                        x: -p * a.x,
                                        y: -m * a.y,
                                        width: p,
                                        height: m
                                    }, v._anchor = a, v._matrix = T.getMatrix();
                                    var E = T.getRotation(), x = c(E), U = J(E), w = b[3 * Y + 1] * wn(T.getScale().x),
                                        g = b[3 * Y + 2] * wn(T.getScale().y),
                                        e = Math.atan2(-U * w - x * g, x * w - U * g),
                                        j = (Math.round(e / (Math.PI / 4)) + 8) % 8,
                                        V = [Vi, "nesw-resize", Kh, "nwse-resize", Vi, "nesw-resize", Kh, "nwse-resize"][j];
                                    return v.setCursor(V), l && v.fi({
                                        kind: "beginEditRect",
                                        event: N,
                                        data: T,
                                        direction: v._89I
                                    }), !0
                                }
                            }
                        }
                        if (s._43O && xf(T) && T.s(jk) === qr && (u = T.s(Ge))) for (Y = u.size() - 1; Y >= 0; Y--) if (H = u.get(Y), wc({
                            x: H.x - W / 2,
                            y: H.y - W / 2,
                            width: W,
                            height: W
                        }, X)) return v._index = Y, v._edge = T, l && v.fi({
                            kind: "beginEditPoint",
                            event: N,
                            data: T,
                            index: Y
                        }), v.setCursor("crosshair"), !0
                    }
                    return !1
                }
            }, ms_gv: function (P) {
                P._currentSubGraph = o, P._fpsInfo = {time: 0, fps: 0, frames: 0}, P.upSubGraph = function () {
                    this.setCurrentSubGraph(Sj(this._currentSubGraph))
                }, P.isVisible = function (v) {
                    var s = this;
                    if (Sj(v) !== s._currentSubGraph) return !1;
                    if (xf(v)) {
                        var j = v._40I, l = v._41I;
                        if (!j || !l) return !1;
                        if (!(v.s("edge.independent") || s.isVisible(j) && s.isVisible(l))) return !1;
                        if (v.isEdgeGroupHidden()) return !1
                    } else for (var Z = v._parent; Z && !Z.ISubGraph;) {
                        if (Em(Z) && (!Z.isExpanded() || !s.isVisible(Z))) return !1;
                        Z = Z._parent
                    }
                    if (v._parent instanceof yg && !s.isVisible(v._parent)) return !1;
                    if (v._refGraph instanceof Dr && !s.isVisible(v._refGraph)) return !1;
                    if (s instanceof Ff) {
                        if (!v.s("3d.visible")) return !1
                    } else {
                        var V = s.getLayersInfo();
                        if (V) {
                            var c = V[v._layer];
                            if (c && c.visible === !1) return !1
                        }
                        if (!v.s("2d.visible")) return !1
                    }
                    return s._visibleFunc ? s._visibleFunc(v) : !0
                }, P.handleSelectionChange = function (l) {
                    var r = this;
                    l.datas.each(function (J) {
                        r.invalidateData(J);
                        var y = J._parent;
                        Em(y) && Un(J) && J.s(fj) && (r.invalidateData(y), y._49I && y._49I.each(function (F) {
                            r.invalidateData(F)
                        }))
                    }), r.onSelectionChanged(l)
                }, P.onSelectionChanged = function (V) {
                    var X = this, u = X.sm();
                    if (1 === u.size() && ("set" === V.kind || "append" === V.kind)) {
                        var b = u.ld();
                        X.isAutoMakeVisible() && X.makeVisible(b), X.adjustIndex && X._dataModel.isAutoAdjustIndex() && X.adjustIndex(b)
                    }
                }, P.makeVisible = function (h) {
                    if (h) {
                        var x = this, Z = x.getDataUI ? x.getDataUI(h) : x.getData3dUI(h);
                        if (Z) {
                            var A = h, D = Sj(h);
                            for (D !== x._currentSubGraph && x.setCurrentSubGraph(D); (A = A._parent) && A !== D;) Em(A) && A.setExpanded(!0);
                            x._23I = h, x.iv()
                        }
                    }
                }, P.getLabel = function (D) {
                    var V = D.getStyle(Fj);
                    return V === v ? D.getName() : V
                }, P.getLabelBackground = function (P) {
                    return P.getStyle("label.background")
                }, P.getLabelColor = function (V) {
                    return V.getStyle("label.color")
                }, P.getLabel2 = function (I) {
                    return I.getStyle("label2")
                }, P.getLabel2Background = function (V) {
                    return V.getStyle("label2.background")
                }, P.getLabel2Color = function (U) {
                    return U.getStyle("label2.color")
                }, P.getNote = function (i) {
                    return i.getStyle(Ro)
                }, P.getNoteBackground = function (z) {
                    return z.getStyle("note.background")
                }, P.getNote2 = function (B) {
                    return B.getStyle(Oo)
                }, P.getNote2Background = function (D) {
                    return D.getStyle("note2.background")
                }, P.handleClick = function (q, F, z) {
                    var H = this;
                    F ? (H.fi({
                        kind: "clickData",
                        event: q,
                        data: F,
                        part: z
                    }), H.onDataClicked(F, q)) : (H.fi({kind: "clickBackground", event: q}), H.onBackgroundClicked(q))
                }, P.handleDoubleClick = function (i, A, D) {
                    var l = this;
                    Di(i) && (A ? (l.fi({
                        kind: "doubleClickData",
                        event: i,
                        data: A,
                        part: D
                    }), l.onDataDoubleClicked(A, i, D), l.checkDoubleClickOnNote(i, A, D) || l.checkDoubleClickOnRotation && l.checkDoubleClickOnRotation(i, A, D) || (xf(A) ? l.onEdgeDoubleClicked(A, i, D) : A.ISubGraph ? l.onSubGraphDoubleClicked(A, i, D) : Em(A) ? l.onGroupDoubleClicked(A, i, D) : A.IDoorWindow ? l.onDoorWindowDoubleClicked(A, i, D) : A.ICSGBox && l.onCSGBoxDoubleClicked(A, i, D))) : (l.fi({
                        kind: "doubleClickBackground",
                        event: i
                    }), l.onBackgroundDoubleClicked(i)))
                }, P.onSubGraphDoubleClicked = function (t) {
                    this.setCurrentSubGraph(t)
                }, P.onEdgeDoubleClicked = function (c, r) {
                    c.ISubGraph && !Kg(r) ? this.setCurrentSubGraph(c) : c.s("edge.toggleable") && c.toggle()
                }, P.onGroupDoubleClicked = function (d) {
                    d.s("group.toggleable") && d.toggle()
                }, P.onDoorWindowDoubleClicked = function (d) {
                    d.s("dw.toggleable") && d.toggle(!0)
                }, P.onCSGBoxDoubleClicked = function (i, G) {
                    var D = this;
                    if (D instanceof Ff) {
                        var t = D.getHitFaceInfo(G);
                        t && t.face && i.s(t.face + ".toggleable") && i.toggleFace(t.face, !0)
                    }
                }, P.onBackgroundClicked = function () {
                }, P.onBackgroundDoubleClicked = function () {
                    this.upSubGraph()
                }, P.onDataClicked = function () {
                }, P.onDataDoubleClicked = function () {
                }, P.onAutoLayoutEnded = function () {
                }, P.onMoveEnded = function () {
                }, P.onPanEnded = function () {
                }, P.onPinchEnded = function () {
                }, P.onRectSelectEnded = function () {
                }, P.onZoomEnded = function () {
                }, P.serialize = function (D) {
                    return this.dm().serialize(D)
                }, P.toJSON = function () {
                    return this.dm().toJSON()
                }, P.deserialize = function (d, I) {
                    var s = this;
                    I = I instanceof xk ? {rootParent: I} : kr(I) ? {setId: I} : gp(I) ? {finishFunc: I} : I || {}, I.view = s;
                    var g = s.dm(), v = I.finishFunc;
                    return I.finishFunc = function () {
                        v && v.apply(I, arguments), kr(g.a("zoomable")) && s.setZoomable && s.setZoomable(g.a("zoomable")), kr(g.a("pannable")) && s.setPannable && s.setPannable(g.a("pannable")), kr(g.a("rectSelectable")) && s.setRectSelectable && s.setRectSelectable(g.a("rectSelectable")), g.a("fitContent") === !0 && s.fitContent && s.fitContent(!0, 0)
                    }, g.deserialize(d, I.rootParent, I)
                }, P.showDebugTip = function () {
                    var M = this, E = M._debugDiv;
                    if (!E) {
                        E = M._debugDiv = G.createElement("div"), E.style.position = "absolute", E.style.overflow = "hidden", E.style.backgroundColor = "white", E.style.color = "black";
                        var f = M.getView();
                        M._79O ? f.insertBefore(E, M._79O) : f.appendChild(E);
                        var R = function () {
                            M.redraw();
                            var H = "FPS : " + M._fpsInfo.fps + "<br/>" + "Datas : " + M.dm().getDatas().length,
                                Y = M.getDebugTip();
                            Y && (H += "<br/>------<br/>" + Y), E.innerHTML = H, M._isDebugging && requestAnimationFrame(R)
                        };
                        requestAnimationFrame(R), M._isDebugging = !0
                    }
                }, P.hideDebugTip = function () {
                    var i = this, S = i._debugDiv;
                    S && (delete i._debugDiv, i.getView().removeChild(S), i._isDebugging = !1)
                }, P.countFrame = function () {
                    if (this._isDebugging) {
                        var U = Date.now(), R = this._fpsInfo;
                        U - R.time > 1e3 ? (R.fps = Math.round(1e5 * (R.frames + 1) / (U - R.time)) / 100, R.time = U, R.frames = 0) : R.frames++
                    }
                }
            }, ms_icons: function (P) {
                P.getRotation = function (p) {
                    return p == o ? 0 : p
                }, P._15O = function () {
                    var B = this, $ = B.s(om);
                    if ($) {
                        var S = B, y = B.data || B._data, L = B._38o = {icons: $, rects: {}};
                        for (var s in $) {
                            var r = $[s], f = pe(r.shape3d, y, S);
                            if (!(pe(r.visible, y, S) === !1 || pe(r.for3d, y, S) && !B.I3d || f && !B.I3d)) {
                                var E = f ? [f] : pe(r.names, y, S), F = E ? E.length : 0,
                                    Q = pe(r.position, y, S) || 3, v = pe(r.offsetX, y, S) || 0,
                                    D = pe(r.offsetY, y, S) || 0, C = pe(r.direction, y, S) || kp, k = pe(r.gap, y, S),
                                    J = k != o ? k : 1, G = pe(r.rotation, y, S), A = pe(r.keepOrien, y, S),
                                    M = pe(r.rotationFixed, y, S) ? G : B.getRotation(G, A, Q), H = o,
                                    K = L.rects[s] = new Array(F);
                                K.rotation = M;
                                for (var b = 0; F > b; b++) {
                                    var _, N, n, g, l = E[b];
                                    if (f) n = 0, g = 0; else {
                                        var w = Ui(l);
                                        n = pe(r.width, y, S), g = pe(r.height, y, S), n == o && (n = Iq(w, y)), g == o && (g = Ne(w, y))
                                    }
                                    if (H ? C === kp ? v += n / 2 : C === Je ? v -= n / 2 : C === sh ? D -= g / 2 : D += g / 2 : H = {
                                        width: n,
                                        height: g
                                    }, B.I3d) {
                                        var q = -n / 2, O = -g / 2;
                                        N = {
                                            width: n,
                                            height: g,
                                            mat: B._16O(pe(r.autorotate, y, S), Q, H, pe(r.face, y, S) || es, pe(r.t3, y, S), pe(r.r3, y, S), pe(r.rotationMode, y, S), v, D),
                                            vs: new zk([q, -O, 0, q, -O - g, 0, q + n, -O - g, 0, q + n, -O, 0])
                                        }
                                    } else _ = B.getPosition(Q, v, D, H, pe(r.positionFixed, y, S)), N = {
                                        x: _.x - n / 2,
                                        y: _.y - g / 2,
                                        width: n,
                                        height: g
                                    }, B._68o(N, M);
                                    K[b] = N, C === kp ? v += n / 2 + J : C === Je ? v -= n / 2 + J : C === sh ? D -= g / 2 + J : D += g / 2 + J
                                }
                            }
                        }
                    }
                }
            }
        });
        var uc = {
                1: 1,
                2: 1,
                6: 1,
                9: 1,
                10: 1,
                14: 1,
                15: 1,
                16: 1,
                21: 1,
                22: 1,
                26: 1,
                29: 1,
                30: 1,
                34: 1,
                36: 1,
                38: 1,
                40: 1,
                42: 1,
                45: 1,
                50: 1,
                52: 1,
                54: 1
            }, Yo = {3: 1, 7: 1, 11: 1, 17: 1, 23: 1, 27: 1, 31: 1, 44: 1, 46: 1, 47: 1, 49: 1},
            Nl = {translateX: 1, translateY: 1, zoom: 1, scrollBarVisible: 1},
            mc = {sourceAgent: 1, targetAgent: 1, expanded: 1, parent: 1, host: 1},
            rl = {position: 1, width: 1, height: 1, expanded: 1, rotation: 1, anchor: 1, scale: 1, "s:edge.points": 1},
            kg = {"edge.type": 1, "edge.group": 1}, Ld = {rotation: 1, rotationX: 1, rotationZ: 1}, el = {
                position: 1,
                width: 1,
                height: 1,
                anchor: 1,
                scale: 1,
                "s:grid.row.count": 1,
                "s:grid.column.count": 1,
                "s:grid.row.percents": 1,
                "s:grid.column.percents": 1,
                "s:grid.border": 1,
                "s:grid.border.left": 1,
                "s:grid.border.right": 1,
                "s:grid.border.top": 1,
                "s:grid.border.bottom": 1,
                "s:grid.gap": 1
            }, Or = {
                "attach.row.index": 1,
                "attach.column.index": 1,
                "attach.row.span": 1,
                "attach.column.span": 1,
                "attach.padding": 1,
                "attach.padding.left": 1,
                "attach.padding.right": 1,
                "attach.padding.top": 1,
                "attach.padding.bottom": 1,
                "attach.index": 1,
                "attach.offset": 1,
                "attach.offset.relative": 1,
                "attach.offset.opposite": 1,
                "attach.gap": 1,
                "attach.gap.relative": 1,
                "attach.thickness": 1
            }, Ti = {shape: 1, thickness: 1, position: 1, anchor: 1, scale: 1}, Sj = function (I) {
                if (!I) return o;
                if (xf(I)) {
                    var n = I._40I, E = I._41I;
                    if (!n || !E) return o;
                    var H = Sj(n), U = Sj(E);
                    return H === U ? H : o
                }
                for (var Z = I._parent; xf(Z) && !Z.ISubGraph;) Z = Z._parent;
                return Z ? Z.ISubGraph ? Z : Sj(Z) : o
            }, Bm = function (w, h, A, B) {
                var t = h.getStyle(A) * B;
                t && gh(w, t), t = h.getStyle(A + ".left") * B, t && (w.x -= t, w.width += t), t = h.getStyle(A + ".right") * B, t && (w.width += t), t = h.getStyle(A + ".top") * B, t && (w.y -= t, w.height += t), t = h.getStyle(A + ".bottom") * B, t && (w.height += t), w.width < 0 && (w.width = -w.width, w.x -= w.width), w.height < 0 && (w.height = -w.height, w.y -= w.height)
            }, Jn = function (J) {
                for (var m, y = 0, Z = J.size(); Z > y; y++) if (m = J.getChildAt(y), Un(m) && Jn(m)) return !0;
                return J.hasAgentEdges()
            }, ke = function (F) {
                if (!F) return o;
                for (var G = F._parent; Em(G);) {
                    if (!Em(G._parent)) return G.isExpanded() ? F : G;
                    G.isExpanded() || (F = G), G = G._parent
                }
                return F
            }, Sh = function (J, O) {
                if (!J || !O) return o;
                var y, I, c, U = Sj(J), u = Sj(O);
                if (U !== u) {
                    for (; u && U !== u;) u = Sj(u);
                    if (U === u) return J;
                    y = new Pf, y.add(J, 0);
                    for (var n = J._parent; Un(n) && !O.isDescendantOf(n);) y.add(n, 0), n = n._parent;
                    for (c = y.size(), I = 0; c > I; I++) {
                        var d = y.get(I);
                        if (Em(d) && !d.isExpanded()) return d;
                        if (d.ISubGraph) return d
                    }
                    return J
                }
                return J
            }, xg = function (z) {
                if (z.isLooped()) return z._source;
                var d = ke(z._source), S = ke(z._target);
                return d === S ? z._source : Sh(d, S)
            }, Gm = function (i) {
                if (i.isLooped()) return i._target;
                var g = ke(i._source), d = ke(i._target);
                return g === d ? i._target : Sh(d, g)
            }, jj = function (k, R, T) {
                "target" !== T && (T = "source");
                var _ = "target" === T ? R.getTargetAgent() : R.getSourceAgent(), V = "edge." + T + ".";
                if (xf(_)) {
                    var U = k.getDataUI(_);
                    U._79o();
                    var i = R.s(V + "index");
                    if (i !== v) {
                        var S = ul(U);
                        return S[Math.max(0, Math.min(i, S.length - 1))]
                    }
                    var X = R.s(V + "percent") || 0;
                    X = Math.max(0, Math.min(X, 1));
                    var F = rf(U);
                    return Yp(F, 100 * X)
                }
                return Zd(k, _, R.s(V + "position"), R.s(V + "offset.x"), R.s(V + "offset.y"), R.s(V + "anchor.x"), R.s(V + "anchor.y"))
            }, Zd = function (_, V, z, W, I, Y, K) {
                if (!V) return o;
                var i, h = V.getRotation ? V.getRotation() : 0;
                if (Y !== v || K !== v) if (Y = Y === v ? .5 : Y, K = K === v ? .5 : K, h && !Tn(V, _)) {
                    var r = V.getPosition(), E = V.getWidth(), s = V.getHeight(), O = V.getAnchor(), M = V.getScale(),
                        a = new Cg(h, r.x, r.y, M.x, M.y);
                    z = a.tf((Y - O.x) * E, (K - O.y) * s)
                } else i = Eq(_, V), z = {x: i.x + Y * i.width, y: i.y + K * i.height}; else z = Sn(z, Eq(_, V));
                if (h) {
                    var F = c(h), u = J(h), U = W * F - I * u;
                    I = W * u + I * F, W = U
                }
                return z.x += W, z.y += I, z
            }, jc = function (U, I) {
                if (!U || !I) return o;
                var x, r, F, L, J, D;
                if (U === I) {
                    if (L = U.getLoopedEdges(), !L) return o;
                    L = new Pf(L)
                } else {
                    if (J = U.getAgentEdges(), D = I.getAgentEdges(), !J || !D) return o;
                    for (r = J.size(), x = 0; r > x; x++) F = J.get(x), D.contains(F) && (L || (L = new Pf), L.add(F))
                }
                if (L) for (x = 0; x < L.size(); x++) F = L.get(x), F.getStyle(jk) === qr && (F._22I(o), L.removeAt(x), x--);
                return L
            }, rm = function (C, r) {
                var V = jc(C, r);
                if (V && !V.isEmpty()) {
                    if (1 === V.size()) return V.get(0)._22I(o), void 0;
                    var f = new Pf, j = new Pf;
                    V.each(function (F) {
                        var H = F.s("edge.group");
                        f.contains(H) || f.add(H)
                    }), f.sort(), f.each(function (X) {
                        j.add(new x.EdgeGroup(V.toList(function (b) {
                            return X === b.s("edge.group")
                        }), j))
                    }), j.each(function (w) {
                        w.each(function (X) {
                            X._22I(w)
                        })
                    })
                }
            }, op = function (R, W) {
                if (W) {
                    var S = W.rect, w = W.color, J = W.rotation, F = W.labelWidth, Q = W.background, u = W.opacity,
                        X = W.scale, K = X != o && 1 !== X;
                    if (u != o) {
                        var j = R.globalAlpha;
                        R.globalAlpha *= u
                    }
                    if (J || K) {
                        R.save();
                        var Z = S.x + S.width / 2, C = S.y + S.height / 2;
                        xi(R, Z, C), J && _e(R, J), K && R.scale(X, X), xi(R, -Z, -C)
                    }
                    if (Q && Rf(R, S.x, S.y, S.width, S.height, Q), F) {
                        var M = S.width, V = R.createLinearGradient(S.x, S.y, S.x + M, S.y);
                        V.addColorStop(0, w), V.addColorStop(.9, w), V.addColorStop(1, pn), w = V, S.width = F
                    }
                    Jl(R, W.ss, S, W.font, w, W.align), F && (S.width = M), (J || K) && R.restore(), u != o && (R.globalAlpha = j)
                }
            }, nd = function (X, W) {
                if (W) {
                    var A = W.rect, K = A.x, u = A.y, L = A.width, i = A.height, v = W.background, Q = W.backgroundImage,
                        n = W.borderWidth, a = W.borderColor, y = W.labelWidth, _ = W.opacity, f = W.scale,
                        b = f != o && 1 !== f;
                    if (_ != o) {
                        var x = X.globalAlpha;
                        X.globalAlpha *= _
                    }
                    if (b) {
                        X.save();
                        var m = A.x + A.width / 2, t = A.y + A.height / 2;
                        xi(X, m, t), X.scale(f, f), xi(X, -m, -t)
                    }
                    if (W.expanded) {
                        var e = g(8, L / 4), l = u + i - 8;
                        if (X.fillStyle = v, X.beginPath(), X.moveTo(K, u), X.lineTo(K, l), X.lineTo(K + L / 2, l), X.lineTo(K + L / 2, u + i), X.lineTo(K + L / 2 + e, l), X.lineTo(K + L, l), X.lineTo(K + L, u), X.closePath(), X.fill(), n && (X.lineWidth = n, X.lineJoin = "round", X.lineCap = "round", a ? (X.strokeStyle = a, X.stroke()) : (X.strokeStyle = Rm(v), X.beginPath(), X.moveTo(K + L, u), X.lineTo(K + L, l), X.lineTo(K + L / 2 + e, l), X.lineTo(K + L / 2, u + i), X.stroke(), X.strokeStyle = Cb(v), X.beginPath(), X.moveTo(K + L, u), X.lineTo(K, u), X.lineTo(K, l), X.lineTo(K + L / 2, l), X.lineTo(K + L / 2, u + i), X.stroke())), Q) Ng(X, Ui(Q), nk, A.x, A.y, A.width, A.height - 8, W.data, W.view); else {
                            if (A.height -= 8, v = W.color, y) {
                                var p = L, D = X.createLinearGradient(K, u, K + p, u);
                                D.addColorStop(0, v), D.addColorStop(.9, v), D.addColorStop(1, pn), v = D, A.width = y
                            }
                            Jl(X, W.ss, A, W.font, v, W.align), y && (A.width = p), A.height += 8
                        }
                    } else if (W.icon) Co(X, Ui(W.icon), K, u, L, i, W.data, W.view); else {
                        var z = L / 2;
                        n && (X.lineWidth = n, X.lineJoin = "round", X.lineCap = "round", X.strokeStyle = a ? a : Rm(v), X.beginPath(), X.arc(K + z, u + z, z, h, 1.6 * Y, !0), X.moveTo(K + z, u + i), X.lineTo(K + L - z / 5, u + z), X.stroke(), X.strokeStyle = a ? a : Cb(v), X.beginPath(), X.arc(K + z, u + z, z, 1.6 * Y, h, !0), X.moveTo(K + z, u + i), X.lineTo(K + z / 5, u + z), X.stroke()), X.fillStyle = v, X.beginPath(), X.arc(K + z, u + z, z, 0, C, !0), X.moveTo(K + z, u + i), X.lineTo(K + L - z / 5, u + z), X.lineTo(K + z / 5, u + z), X.closePath(), X.fill(), X.fillStyle = W.color, X.beginPath(), X.arc(K + z, u + z, z / 3, 0, C, !0), X.fill()
                    }
                    b && X.restore(), _ != o && (X.globalAlpha = x)
                }
            }, nb = function (j, q) {
                return q > 2 * j ? j : q / 2
            }, ig = function ($, G, x, R) {
                if (!$ || !G) return 0;
                var z = N(G.y - $.y, G.x - $.x);
                return x || (z = G.x < $.x ? z + Y : z), z + R
            }, Sf = function ($, b, k, Q, T, W, G) {
                G && ($.x > b.x || $.x === b.x && $.y > b.y) && (k = Ic[k], T = -T);
                var z = Sn(k, {x: 0, y: 0, width: vl($, b), height: 0}, W);
                return z.x += Q, z.y += T, z = new Cg(N(b.y - $.y, b.x - $.x)).tf(z), z.x += $.x, z.y += $.y, z
            }, Ei = function (p, R, H, b, E) {
                if (p._19Q = !0, !H.getEdgeGroup()) return b ? H.s("edge.gap") : 0;
                if (xf(H.getSourceAgent()) || xf(H.getTargetAgent())) return 0;
                var n, X = 0, t = 0, G = 0;
                if (H.getEdgeGroup().getSiblings().each(function (J) {
                    J.each(function (M) {
                        if (R.isVisible(M) && M.s(jk) == E) {
                            var e = M.s("edge.gap");
                            n ? (t += G / 2 + e / 2, G = e) : (n = M, G = e), M === H && (X = t)
                        }
                    })
                }), b) return t - X + G;
                var I = X - t / 2;
                return n && H._40I !== n._40I && (p._19Q = !1), I
            }, dj = function () {
                var T = function ($) {
                    var n = [];
                    return $.forEach(function (L) {
                        n.push({x: L.x, y: L.y}), n.push({x: L.x + L.width, y: L.y + L.height}), n.push({
                            x: L.x + L.width,
                            y: L.y
                        }), n.push({x: L.x, y: L.y + L.height})
                    }), n
                };
                return function (j, a, y) {
                    if ("oval" === j) {
                        var k = 0, N = y.height / y.width, z = N * N, S = y.x + y.width / 2, m = y.y + y.height / 2,
                            E = T(a);
                        E.forEach(function (J) {
                            var i = J.x - S, L = J.y - m, N = i * i + L * L / z;
                            N > k && (k = N)
                        }), k = e(k);
                        var c = N * k;
                        return {x: S - k, y: m - c, width: 2 * k, height: 2 * c}
                    }
                    if ("circle" === j) {
                        var W = 0, S = y.x + y.width / 2, m = y.y + y.height / 2, E = T(a);
                        return E.forEach(function (U) {
                            var d = U.x - S, F = U.y - m, t = d * d + F * F;
                            t > W && (W = t)
                        }), W = e(W), {x: S - W, y: m - W, width: 2 * W, height: 2 * W}
                    }
                    return "roundRect" === j ? (gh(y, g(y.width, y.height) / 16), y) : y
                }
            }(), rc = x.graph = {}, rk = function (V, D, s) {
                Jr(W + ".graph." + V, D, s)
            };
        x.layout = {};
        var cf = {}, Nm = function (D, A, H, t, E, Q, I, F) {
            var y = [A.uuid, Math.round(t), Math.round(E), H].join("_");
            A.cacheRule && (y += pe(A.cacheRule, Q, I));
            var z = I._zoom;
            z !== I._cacheZoom && (I._cacheZoom = z, I._cacheImage = {});
            var d = I._cacheImage[y];
            return d || (d = I._cacheImage[y] = x.Default.toCanvas(A, t * z, E * z, H, Q, I, F)), d
        };
        Mm(w, {
            setImageCacheRule: function (e, l) {
                var K;
                K = l || "object" != typeof e ? {_image: l} : e;
                for (var s in K) {
                    var G = K[s];
                    uf(s) ? (Jr = Ui(s), Jr ? Jr.cacheRule = G : cf[s] = G) : s.cacheRule = G
                }
            }
        });
        var li = {
            comps: [{
                type: Up,
                points: [85, 50, 70, 115, 100, 71, 86, 107, 88, 49, 57, 76, 97, 82, 78, 70, 73, 122, 105, 68, 67, 80, 97, 57, 55, 119, 72, 67, 110, 111, 56, 48, 68, 82, 53, 86, 108, 90, 79, 52, 106, 53, 56, 61],
                borderWidth: 1,
                borderColor: o
            }]
        };
        if (li[im] = li[ns] = 160, r.Image) {
            var mp = new r.Image;
            mp.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC", Rc("default_blank", mp)
        }
        Rc("node_image", Fn(30, 30, [{
            type: ap,
            rect: [4, 5, 22, 16],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: ap, rect: [2, 3, 26, 20], borderWidth: 1, borderColor: Aq}, {
            type: ap,
            rect: [11, 23, 8, 4],
            background: Aq
        }, {type: ap, rect: [6, 27, 18, 2], background: Aq}])), Rc("node_icon", Fn(16, 16, [{
            type: ap,
            rect: [2, 2, 12, 10],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: Fc, rect: [2, 2, 12, 10], width: 1, color: Aq}, {
            type: ap,
            rect: [6, 12, 4, 2],
            background: Aq
        }, {type: ap, rect: [4, 14, 8, 1], background: Aq}])), Rc("block_icon", Fn(16, 16, [{
            type: Fc,
            rect: [1, 1, 14, 14],
            width: 1,
            color: Aq
        }])), Rc("group_image", Fn(66, 39, [{
            type: ap,
            rect: [44.3, 18, 18.1, 12.8],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: ap, rect: [3.3, 17.8, 18.1, 12.8], gradient: Li, gradientColor: sc, background: Aq}, {
            type: ap,
            rect: [15.8, 3.2, 33.5, 26.4],
            borderWidth: 1,
            borderColor: Aq,
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: ap, rect: [26.2, 29.4, 12.8, 4.2], background: Aq}, {
            type: ap,
            rect: [21.3, 33.5, 22.5, 2.3],
            background: Aq
        }, {type: ap, rect: [5.3, 32.7, 14.1, 2.1], background: Aq}, {
            type: ap,
            rect: [9, 30.4, 6.7, 2.4],
            background: Aq
        }, {type: ap, rect: [50, 30.7, 6.7, 2.4], background: Aq}, {
            type: ap,
            rect: [46.3, 33, 14.1, 2.1],
            background: Aq
        }])), Rc("group_icon", Fn(16, 16, [{type: ap, rect: [4, 12, 4, 2], background: Aq}, {
            type: ap,
            rect: [2, 13, 8, 1],
            background: Aq
        }, {type: ap, rect: [12, 12, 2, 1], background: Aq}, {
            type: ap,
            rect: [11, 13, 4, 1],
            background: Aq
        }, {type: ap, rect: [10, 7, 6, 5], gradient: Li, gradientColor: sc, background: Aq}, {
            type: ap,
            rect: [1, 2, 10, 10],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: Fc, rect: [1, 2, 10, 10], width: 1, color: Aq}])), Rc("refGraph_icon", Fn(16, 16, [{
            type: "shape",
            borderWidth: 1,
            borderColor: Aq,
            borderCap: "round",
            rotation: .7854,
            points: [12.5502, 6.7981, 12.5502, 6.7981, 12.5502, 4.8181, 12.5502, 3.7981, 12.5502, 2.7781, 11.36687, 1.7981, 10.0502, 1.7981, 8.73354, 1.7981, 7.5502, 2.8181, 7.5502, 3.7981, 7.5502, 4.55989, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 9.7981, 10.0502, 9.7981],
            segments: [1, 4, 4, 4, 4, 4]
        }, {
            type: "shape",
            borderWidth: 1,
            borderColor: Aq,
            borderCap: "round",
            rotation: -2.35619,
            points: [8.4498, 11.2019, 8.4498, 11.2019, 8.4498, 9.2219, 8.4498, 8.2019, 8.4498, 7.1819, 7.26646, 6.2019, 5.9498, 6.2019, 4.63313, 6.2019, 3.4498, 7.2219, 3.4498, 8.2019, 3.4498, 8.9637, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 14.2019, 5.9498, 14.2019],
            segments: [1, 4, 4, 4, 4, 4]
        }])), Rc("edge_icon", Fn(16, 16, [{
            type: ap,
            rect: [2.1, 6.9, 11.5, 2.6],
            rotation: -.79,
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: ap, rect: [10.8, 1, 4, 4], background: Aq}, {
            type: ap,
            rect: [1, 11, 4, 4],
            background: Aq
        }])), Rc("subGraph_image", Fn(72, 45, [{
            type: Up,
            points: [9, 42, .3, 38.4, 2.4, 28.8, 5.7, 21.6, 11.7, 22.5, 11.7, 15.9, 16.8, 13.8, 21.6, 12, 24.3, 15.9, 27.9, 3, 42.3, 2.1, 59.4, 4.5, 57.3, 18.3, 67.5, 18.9, 69.6, 27.3, 69.9, 38.4, 64.2, 41.4],
            segments: [1, 3, 3, 3, 3, 3, 3, 3, 3],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }, {type: ap, rect: [29.6, 30.7, 3.6, 1.8], background: Aq}, {
            type: ap,
            rect: [28.4, 32.3, 6, 1.2],
            background: Aq
        }, {type: ap, rect: [37.3, 32, 10.8, 1.8], background: Aq}, {
            type: ap,
            rect: [39.1, 29.9, 7.2, 2.3],
            background: Aq
        }, {type: ap, rect: [26.6, 23.7, 9.6, 7.2], gradient: Li, gradientColor: sc, background: Aq}, {
            type: ap,
            rect: [34.3, 16.8, 16.8, 13.2],
            borderWidth: 1,
            borderColor: Aq,
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }])), Rc("subGraph_icon", Fn(17, 17, [{
            type: Up,
            points: [2.2, 14.6, .2, 11.9, .8, 8.8, 1.8, 5.9, 5.6, 7.4, 3.8, 1.6, 10.3, 3, 14.5, 4.2, 12.2, 7.5, 18.9, 7.2, 14.5, 14.5],
            segments: [1, 3, 3, 3, 3, 3],
            gradient: Li,
            gradientColor: sc,
            background: Aq
        }])), Rc("shape_icon", Fn(16, 16, [{
            type: Up,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            background: Aq
        }])), Rc("polyline_icon", Fn(16, 16, [{
            type: Up,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            borderWidth: 1,
            borderColor: Aq
        }, Oh(7.5, .4), Oh(7.5, 6.3), Oh(13.6, 6.3), Oh(13.6, 14), Oh(.7, 13.9), Oh(.7, .3)])), Rc("grid_icon", Fn(16, 16, [{
            type: ap,
            rect: [1, 1, 4, 4],
            background: Aq,
            gradient: Li,
            gradientColor: sc
        }, {type: ap, rect: [6, 1, 4, 4], background: Aq, gradient: Li, gradientColor: sc}, {
            type: ap,
            rect: [11, 1, 4, 4],
            background: Aq,
            gradient: Li,
            gradientColor: sc
        }, {type: ap, rect: [11, 6, 4, 4], background: Aq, gradient: Li, gradientColor: sc}, {
            type: ap,
            rect: [6, 6, 4, 4],
            background: Aq,
            gradient: Li,
            gradientColor: sc
        }, {type: ap, rect: [1, 6, 4, 4], background: Aq, gradient: Li, gradientColor: sc}, {
            type: ap,
            rect: [11, 11, 4, 4],
            background: Aq,
            gradient: Li,
            gradientColor: sc
        }, {type: ap, rect: [6, 11, 4, 4], background: Aq, gradient: Li, gradientColor: sc}, {
            type: ap,
            rect: [1, 11, 4, 4],
            background: Aq,
            gradient: Li,
            gradientColor: sc
        }])), Rc("light_icon", Fn(16, 16, [{type: "rect", rect: [6, 9, 5, 5], borderWidth: 1, borderColor: Aq}, {
            type: "circle",
            rect: [1, 1, 15, 10],
            borderWidth: 1,
            borderColor: Aq,
            gradient: Li,
            gradientColor: sc,
            background: {
                func: function (E) {
                    var W = E ? E.s(qf) : o;
                    return Ll(W) ? "rgb(" + j(255 * W[0]) + "," + j(255 * W[1]) + "," + j(255 * W[2]) + ")" : W || Aq
                }
            }
        }])), Rc("text_icon", Fn(16, 16, [{
            type: "shape",
            points: [3, 3, 13, 3, 8, 3, 8, 14],
            segments: [1, 2, 1, 2],
            borderWidth: 1,
            borderColor: Aq
        }])), Rc("border_image", {
            fitSize: !0,
            comps: [{
                type: "border",
                relative: !0,
                rect: [0, 0, 1, 1],
                color: {func: "style@border_color"},
                width: {func: "style@border_width"}
            }]
        }), Rc("columnChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: {func: "style@chart.type"},
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                series: {func: "style@chart.series"},
                minValue: {func: "style@chart.min.value"},
                maxValue: {func: "style@chart.max.value"}
            }]
        }), Rc("lineChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "lineChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                series: {func: "style@chart.series"},
                minValue: {func: "style@chart.min.value"},
                maxValue: {func: "style@chart.max.value"},
                linePoint: {func: "style@chart.line.point"},
                lineWidth: {func: "style@chart.line.width"},
                line3d: {func: "style@chart.line.3d"}
            }]
        }), Rc("pieChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "pieChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                hollow: {func: "style@chart.hollow"},
                startAngle: {func: "style@chart.start.angle"},
                values: {func: "style@chart.values"},
                colors: {func: "style@chart.colors"}
            }]
        });
        var Gp = function (t, h, $, A, F, l) {
            var x, o, O, S, L, R, s, c, w, H, e, E = [];
            if (Math.abs(A) > 2 * Math.PI && (A = 2 * Math.PI), L = Math.ceil(Math.abs(A) / (Math.PI / 4)), x = A / L, o = -x, O = -$, L > 0) {
                R = t + Math.cos($) * F, s = h + Math.sin(-$) * l, E.push({x: R, y: s});
                for (var D = 0; L > D; D++) O += o, S = O - o / 2, c = t + Math.cos(O) * F, w = h + Math.sin(O) * l, H = t + Math.cos(S) * (F / Math.cos(o / 2)), e = h + Math.sin(S) * (l / Math.cos(o / 2)), E.push({
                    x: H,
                    y: e
                }), E.push({x: c, y: w})
            }
            return E
        }, Zj = function (E) {
            if (E) {
                var F = E._data;
                if (F instanceof x.Shape) return {points: F.getPoints(), segments: F.getSegments()};
                var J;
                if (F instanceof x.Edge && (J = E._78o)) {
                    var I, h, c = J.type, D = J.points, u = J.segments, S = J.edgeTypeInfo;
                    if (!c || D) {
                        var k = J.sourcePoint, Y = k.x, r = k.y, y = J.targetPoint, $ = y.x, R = y.y;
                        if (c) u ? (I = new Pf({x: Y, y: r}), I.addAll(D), I.add({
                            x: $,
                            y: R
                        }), h = new Pf(u._as)) : (I = new Pf({x: Y, y: r}), D.each(function (j) {
                            I.add(j)
                        }), I.add({x: $, y: R})); else if (J.looped) {
                            I = new Pf(Gp(Y, r, 0, 2 * Math.PI, J.radius, J.radius)), h = new Pf([1]);
                            for (var Z = 0; Z < (I.size() - 1) / 2; Z++) h.add(3)
                        } else I = new Pf, J.center ? (I.add({x: J.c1.x, y: J.c1.y}), I.add({x: Y, y: r}), I.add({
                            x: $,
                            y: R
                        }), I.add({x: J.c2.x, y: J.c2.y})) : (I.add({x: Y, y: r}), I.add({x: $, y: R}))
                    } else S && (I = new Pf(S.points._as), S.segments && (h = new Pf(S.segments._as)));
                    return {points: I, segments: h}
                }
            }
        }, rf = function (A, X, Y) {
            if (null == X) {
                var W = Zj(A);
                if (!W) return;
                X = W.points, Y = W.segments
            }
            if (X) {
                if (Array.isArray(X) && (X = new Pf(X)), "number" == typeof X.get(0)) {
                    for (var J = new x.List, G = 0; G < X.size(); G += 2) J.add({x: X.get(G), y: X.get(G + 1)});
                    X = J
                }
                if (!Y) {
                    Y = [1];
                    for (var N = X.length - 1; N > 0; N--) Y.push(2)
                }
                Array.isArray(Y) && (Y = new Pf(Y));
                for (var q = vi(X._as, Y._as, 50), u = q.length, r = [], G = 0; u > G; G++) {
                    var v = q[G];
                    v.length > 1 && r.push(v)
                }
                return r
            }
        }, cd = function (v) {
            for (var w = 0, J = v.length - 1, f = 0; J > f; f++) {
                var V = v[f], b = v[f + 1], Y = b.x - V.x, u = b.y - V.y;
                w += Math.sqrt(Y * Y + u * u)
            }
            return w
        }, Eg = function (h, H) {
            for (var y = 0, b = H.length, f = 0; b > f; f++) {
                var P = H[f];
                if (y += P, y > h) return f
            }
            return Math.min(f, b - 1)
        }, id = function (o, b) {
            for (var e = 0, B = 0, L = 0, x = o.length - 1, H = 0; x > H; H++) {
                var m = o[H], h = o[H + 1], R = h.x - m.x, C = h.y - m.y;
                if (L = Math.sqrt(R * R + C * C), e += L, e > b) {
                    e -= L, B = H;
                    break
                }
            }
            var I = o[B], G = o[B + 1], z = Math.atan2(G.y - I.y, G.x - I.x), Z = b - e, C = Math.sin(z) * Z,
                R = Math.cos(z) * Z;
            return {x: I.x + R, y: I.y + C}
        }, Yp = function (C, K) {
            if (C) {
                var U;
                if (0 === K) U = C[0][0]; else if (100 === K) C = C[C.length - 1], U = C[C.length - 1]; else {
                    for (var G = 0, j = [], v = C.length, k = 0; v > k; k++) {
                        var l = C[k], Z = cd(l);
                        G += Z, j.push(Z)
                    }
                    for (var i = G * K / 100, P = Eg(i, j), O = 0, a = 0; P > a; a++) O += j[a];
                    i -= O, U = id(C[P], i)
                }
                return U
            }
        }, ul = function (s) {
            var i, m, e, b, K = Zj(s), G = [], x = K.points, Q = K.segments, z = -1;
            for (m = 0, e = Q ? Q.length : x.length; e > m; m++) {
                if (i = Q ? Q.get(m) : 1, 3 === i) b = 2; else if (4 === i) b = 3; else {
                    if (5 === i) continue;
                    b = 1
                }
                z += b, G.push(x.get(z))
            }
            return G
        }, xc = function (o, E, s, S) {
            function g(R) {
                if (R >= 0 && 1 >= R) {
                    b = E(R);
                    var G = (o.x - b.x) * (o.x - b.x) + (o.y - b.y) * (o.y - b.y);
                    return V > G ? (V = G, P = R, !0) : !1
                }
            }

            s = s || 100, S = S || 1e-5;
            for (var V = 1 / 0, P = 0, b = new pm, j = 0; s > j; ++j) g(j / s);
            for (var W = 1 / (2 * s); W > S;) g(P - W) || g(P + W) || (W /= 2);
            return P
        };
        Mm(w, {
            _edgeProtectMethod: {
                getStraightLinePoints: rf,
                calculateLineLength: cd,
                calcSegmentIndexByDistance: Eg,
                calculatePointAlongLine: id,
                getPercentPosition: Yp
            }
        });
        var Ai = function (H, M) {
            for (var v = H.vertices, q = 0; q < v.length; q++) {
                var Z = v[q], J = Z.y;
                Z.y = Z.z, Z.z = -J, M && (Z.y += M)
            }
        }, $c = function (M) {
            for (var V, T, s, Y, Z, e, Q = [], B = [], r = [], o = M.faces, G = 0, J = 0, c = 0, k = o.length; k > G; G++, J += 6, c += 9) {
                var x = o[G];
                1 === x.i ? (V || (V = [], T = [], s = []), Dd(x, G, J, c, M, V, s, T)) : 2 === x.i ? (Y || (Y = [], Z = [], e = []), Dd(x, G, J, c, M, Y, e, Z)) : Dd(x, G, J, c, M, Q, r, B)
            }
            return {vs: Q, uv: B, ns: r, top_vs: V, top_uv: T, top_ns: s, bottom_vs: Y, bottom_uv: Z, bottom_ns: e}
        }, Dd = function (R, u, O, l, m, o, Y, L) {
            var Z = m.vertices, j = m.faceVertexUvs, W = Z[R.a], J = Z[R.b], i = Z[R.c];
            o[l] = W.x, o[l + 1] = W.y, o[l + 2] = W.z, o[l + 3] = J.x, o[l + 4] = J.y, o[l + 5] = J.z, o[l + 6] = i.x, o[l + 7] = i.y, o[l + 8] = i.z;
            var k = R.vertexNormals;
            if (3 === k.length) {
                var A = k[0], X = k[1], K = k[2];
                Y[l] = A.x, Y[l + 1] = A.y, Y[l + 2] = A.z, Y[l + 3] = X.x, Y[l + 4] = X.y, Y[l + 5] = X.z, Y[l + 6] = K.x, Y[l + 7] = K.y, Y[l + 8] = K.z
            } else {
                var t = R.normal;
                Y[l] = t.x, Y[l + 1] = t.y, Y[l + 2] = t.z, Y[l + 3] = t.x, Y[l + 4] = t.y, Y[l + 5] = t.z, Y[l + 6] = t.x, Y[l + 7] = t.y, Y[l + 8] = t.z
            }
            var c = j[0][u][0], G = j[0][u][1], r = j[0][u][2];
            L[O] = c.x, L[O + 1] = c.y, L[O + 2] = G.x, L[O + 3] = G.y, L[O + 4] = r.x, L[O + 5] = r.y
        }, ej = function (t) {
            var L = t._lineModel;
            if (L) return L;
            var N;
            N = Ll(t) ? t : [t];
            var m, Z, P, _, n, r, l, D, s, z, b, V, i = ["", "top", "bottom"];
            for (L = [], m = 0, Z = N.length; Z > m; m++) for (s = N[m], P = 0, _ = i.length; _ > P; P++) if (l = s[i[P] + "vs"]) {
                D = s[i[P] + "is"], r = D ? D.length : l.length / 3;
                for (var n = 0; r > n; n += 3) D ? (z = D[n], b = D[n + 1], V = D[n + 2]) : (z = n, b = n + 1, V = n + 2), z *= 3, b *= 3, V *= 3, L.push(l[z], l[z + 1], l[z + 2], l[b], l[b + 1], l[b + 2], l[b], l[b + 1], l[b + 2], l[V], l[V + 1], l[V + 2], l[V], l[V + 1], l[V + 2], l[z], l[z + 1], l[z + 2])
            }
            return t._lineModel = L, L
        }, Hb = function (K, g, W, u, H, h, c, D, $) {
            W == o && (W = !0), u == o && (u = !0), c == o && (c = 1), D == o && (D = 0);
            var y = new Db;
            return Vd(y, K, g, $), y = y.toShapes(), $c(new Yk(y, {
                top: W,
                bottom: u,
                curveSegments: H,
                amount: c,
                repeatUVLength: h
            }, -c / 2 + D))
        }, ng = function (n, w) {
            this.x = n || 0, this.y = w || 0
        };
        ng.prototype = {
            constructor: ng, add: function (u) {
                return this.x += u.x, this.y += u.y, this
            }, sub: function (v) {
                return this.x -= v.x, this.y -= v.y, this
            }, equals: function (D) {
                return D.x === this.x && D.y === this.y
            }, multiplyScalar: function (F) {
                return this.x *= F, this.y *= F, this
            }, distanceTo: function (J) {
                return e(this.distanceToSquared(J))
            }, distanceToSquared: function (k) {
                var P = this.x - k.x, x = this.y - k.y;
                return P * P + x * x
            }, clone: function () {
                return new ng(this.x, this.y)
            }
        };
        var Gd = function (L, w, q) {
            this.x = L || 0, this.y = w || 0, this.z = q || 0
        };
        Gd.prototype = {
            constructor: Gd, set: function (R, s, y) {
                return this.x = R, this.y = s, this.z = y, this
            }, setY: function (n) {
                return this.y = n, this
            }, copy: function (W) {
                return this.x = W.x, this.y = W.y, this.z = W.z, this
            }, add: function (H) {
                return this.x += H.x, this.y += H.y, this.z += H.z, this
            }, addVectors: function (E, T) {
                return this.x = E.x + T.x, this.y = E.y + T.y, this.z = E.z + T.z, this
            }, sub: function (y) {
                return this.x -= y.x, this.y -= y.y, this.z -= y.z, this
            }, subVectors: function (D, j) {
                return this.x = D.x - j.x, this.y = D.y - j.y, this.z = D.z - j.z, this
            }, multiplyScalar: function (R) {
                return this.x *= R, this.y *= R, this.z *= R, this
            }, applyMatrix4: function (I) {
                var o = this.x, _ = this.y, L = this.z, v = I.elements;
                return this.x = v[0] * o + v[4] * _ + v[8] * L + v[12], this.y = v[1] * o + v[5] * _ + v[9] * L + v[13], this.z = v[2] * o + v[6] * _ + v[10] * L + v[14], this
            }, divideScalar: function (p) {
                if (0 !== p) {
                    var q = 1 / p;
                    this.x *= q, this.y *= q, this.z *= q
                } else this.x = 0, this.y = 0, this.z = 0;
                return this
            }, dot: function (p) {
                return this.x * p.x + this.y * p.y + this.z * p.z
            }, length: function () {
                return e(this.x * this.x + this.y * this.y + this.z * this.z)
            }, normalize: function () {
                return this.divideScalar(this.length())
            }, cross: function (h) {
                var m = this.x, S = this.y, n = this.z;
                return this.x = S * h.z - n * h.y, this.y = n * h.x - m * h.z, this.z = m * h.y - S * h.x, this
            }, crossVectors: function (U, V) {
                var A = U.x, v = U.y, r = U.z, h = V.x, H = V.y, P = V.z;
                return this.x = v * P - r * H, this.y = r * h - A * P, this.z = A * H - v * h, this
            }, distanceTo: function (t) {
                return e(this.distanceToSquared(t))
            }, distanceToSquared: function (Z) {
                var q = this.x - Z.x, x = this.y - Z.y, $ = this.z - Z.z;
                return q * q + x * x + $ * $
            }, clone: function () {
                return new Gd(this.x, this.y, this.z)
            }
        };
        var Yi = function () {
            this.elements = new Float32Array(16)
        };
        Yi.prototype = {
            constructor: Yi, set: function (o, t, S, p, F, c, M, $, z, B, I, g, x, y, e, A) {
                var h = this.elements;
                return h[0] = o, h[4] = t, h[8] = S, h[12] = p, h[1] = F, h[5] = c, h[9] = M, h[13] = $, h[2] = z, h[6] = B, h[10] = I, h[14] = g, h[3] = x, h[7] = y, h[11] = e, h[15] = A, this
            }, makeRotationAxis: function (T, H) {
                var r = c(H), G = J(H), V = 1 - r, I = T.x, A = T.y, g = T.z, D = V * I, K = V * A;
                return this.set(D * I + r, D * A - G * g, D * g + G * A, 0, D * A + G * g, K * A + r, K * g - G * I, 0, D * g - G * A, K * g + G * I, V * g * g + r, 0, 0, 0, 0, 1), this
            }
        };
        var Me = function (j) {
            this.repeatUVLength = j
        };
        Me.prototype = {
            generateTopUV: function (t, k, Q, E, W, d, u) {
                var i, _, D, m, g = t.vertices, C = g[E].x, y = g[E].y, n = g[W].x, j = g[W].y, h = g[d].x, O = g[d].y,
                    e = this.repeatUVLength;
                if (e) i = 0, _ = 0, D = e, m = e; else {
                    this._bb || (this._bb = k.getBoundingBox());
                    var Z = this._bb;
                    i = Z.minX, _ = Z.minY, D = Z.maxX - i, m = Z.maxY - _
                }
                return u ? [new ng((C - i) / D, (y - _) / m), new ng((n - i) / D, (j - _) / m), new ng((h - i) / D, (O - _) / m)] : [new ng((C - i) / D, 1 - (y - _) / m), new ng((n - i) / D, 1 - (j - _) / m), new ng((h - i) / D, 1 - (O - _) / m)]
            }, generateBottomUV: function (g, D, j, e, v, y) {
                return this.generateTopUV(g, D, j, e, v, y, !0)
            }, generateSideWallUV: function (V, C, G, T, M, v, g, P, Z, d, u, B) {
                if (!this._cl) {
                    for (var j, h, W = [], H = 0, O = G.length, l = 0; O > l; l++) {
                        j = G[l], h = G[(l + 1) % O];
                        var F = j.x - h.x, X = j.y - h.y, w = e(F * F + X * X);
                        W.push(H), H += w
                    }
                    for (var l = 0; O > l; l++) W[l] /= H;
                    this._cl = W
                }
                var W = this._cl, x = 1 - Z / d, n = 1 - (Z + 1) / d, Y = W[u], A = W[B];
                return A > Y && (Y += 1), [new ng(Y, x), new ng(A, x), new ng(A, n), new ng(Y, n)]
            }
        };
        var Ae = function (h, V, J, n, t, q) {
            this.a = h, this.b = V, this.c = J, this.i = q, this.normal = n instanceof Gd ? n : new Gd, this.vertexNormals = n instanceof Array ? n : []
        };
        Ae.prototype = {constructor: Ae};
        var aj = [-8, 13, -2, 13, 3, 11, 5, 6, -1], Rk = function () {
            if (Rk[wf] != o) return Rk[wf];
            for (var a = lm[wf], T = aj, t = xk.prototype.getClassName(), d = '"', W = 0, k = "", H = !1, Z = +new (r[t.substr(3, 3) + Vi[W]]), X = W; X < T.length; X++) {
                var J = T.length - X;
                k += X % 2 === W ? T[X] + J + "" : T[X] - J + ""
            }
            for (var X = W; 4 > X; X++) k += W;
            if (k = k * k.length / k.length, Z > k) {
                if (a) {
                    for (var q, C, b, M, u, P, n, Q, $ = "", y = 0, X = 0; X < a.length; X++) a[X] === d ? Q ? (Q = !1, 0 !== y % 2 && (q == o ? q = $ : C == o ? C = $ : b == o ? b = $ : M == o ? M = $ : u == o ? u = $ : P == o ? P = $ : n == o && (n = $)), y++, $ = "") : Q = !0 : Q && ($ += a[X]);
                    var x = q + C + b + M + u + P;
                    (H = Mf(x, n) && (!P || P.indexOf(vq) >= 0) && (!u || u > Z)) && b.indexOf(Rn[0]) >= 0 && (Rk[Rn[0]] = 1), H && b.indexOf(1) >= 0 && (Rk[1] = 1), H && b.indexOf(2) >= 0 && (Rk[2] = 1)
                }
            } else H = !0, Rk[Rn[0]] = Rk[1] = Rk[2] = 1;
            return Rk[wf] = H, H
        }, Bg = function () {
        }, Ie = Bg.prototype;
        Ie.getPointAt = function (K) {
            var u = this.getUtoTmapping(K);
            return this.getPoint(u)
        }, Ie.getPoints = function (i) {
            i || (i = 5);
            var s, U = [];
            for (s = 0; i >= s; s++) U.push(this.getPoint(s / i));
            return U
        }, Ie.getSpacedPoints = function (B) {
            B || (B = 5);
            var F, S = [];
            for (F = 0; B >= F; F++) S.push(this.getPointAt(F / B));
            return S
        }, Ie.getLength = function () {
            var F = this.getLengths();
            return F[F.length - 1]
        }, Ie.getLengths = function (T) {
            if (T || (T = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == T + 1 && !this.needsUpdate) return this.cacheArcLengths;
            this.needsUpdate = !1;
            var O, u, b = [], W = this.getPoint(0), Y = 0;
            for (b.push(0), u = 1; T >= u; u++) O = this.getPoint(u / T), Y += O.distanceTo(W), b.push(Y), W = O;
            return this.cacheArcLengths = b, b
        }, Ie.getUtoTmapping = function (e, d) {
            var Q, n = this.getLengths(), E = 0, z = n.length;
            Q = d ? d : e * n[z - 1];
            for (var Z, j = 0, _ = z - 1; _ >= j;) if (E = V(j + (_ - j) / 2), Z = n[E] - Q, 0 > Z) j = E + 1; else {
                if (!(Z > 0)) {
                    _ = E;
                    break
                }
                _ = E - 1
            }
            if (E = _, n[E] == Q) {
                var F = E / (z - 1);
                return F
            }
            var N = n[E], s = n[E + 1], u = s - N, v = (Q - N) / u, F = (E + v) / (z - 1);
            return F
        }, Ie.getTangent = function (W) {
            var _ = 1e-4, U = W - _, g = W + _;
            0 > U && (U = 0), g > 1 && (g = 1);
            var s = this.getPoint(U), a = this.getPoint(g), C = a.clone().sub(s);
            return C.normalize()
        }, Ie.getTangentAt = function (T) {
            var q = this.getUtoTmapping(T);
            return this.getTangent(q)
        }, Bg.create = function (V, j) {
            return V.prototype = Jf(Bg.prototype), V.prototype.getPoint = j, V
        };
        var Cn = function () {
            this.curves = [], this.autoClose = !1
        }, hr = Cn.prototype = Jf(Ie);
        hr.add = function (D) {
            this.curves.push(D)
        }, hr.closePath = function () {
            var U = this.curves[0].getPoint(0), H = this.curves[this.curves.length - 1].getPoint(1);
            U.equals(H) || this.curves.push(new Ub(H, U))
        }, hr.getPoint = function (y) {
            for (var H, O, s = y * this.getLength(), z = this.getCurveLengths(), i = 0; i < z.length;) {
                if (z[i] >= s) {
                    H = z[i] - s, O = this.curves[i];
                    var I = 1 - H / O.getLength();
                    return O.getPointAt(I)
                }
                i++
            }
            return null
        }, hr.getLength = function () {
            var u = this.getCurveLengths();
            return u[u.length - 1]
        }, hr.getCurveLengths = function () {
            if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
            var q, h = [], Q = 0, I = this.curves.length;
            for (q = 0; I > q; q++) Q += this.curves[q].getLength(), h.push(Q);
            return this.cacheLengths = h, h
        }, hr.getTransformedPoints = function (e) {
            return this.getPoints(e)
        }, hr.getBoundingBox = function () {
            var i, M, I, J, y, h, Y = this.getPoints();
            i = M = Number.NEGATIVE_INFINITY, J = y = Number.POSITIVE_INFINITY;
            var k, S, e, j, v = Y[0] instanceof Gd;
            for (j = v ? new Gd : new ng, S = 0, e = Y.length; e > S; S++) k = Y[S], k.x > i && (i = k.x), k.x < J && (J = k.x), k.y > M && (M = k.y), k.y < y && (y = k.y), v && (k.z > I && (I = k.z), k.z < h && (h = k.z)), j.add(k);
            var Z = {minX: J, minY: y, maxX: i, maxY: M};
            return v && (Z.maxZ = I, Z.minZ = h), Z
        };
        var Vo = function (a) {
                Cn.call(this), this.actions = [], a && this.fromPoints(a)
            }, $g = Vo.prototype = Jf(Cn.prototype), of = "moveTo", tq = "lineTo", qk = "quadraticCurveTo",
            ug = "bezierCurveTo", Yj = "arc", $q = "ellipse";
        $g.fromPoints = function (U) {
            this.moveTo(U[0].x, U[0].y);
            for (var L = 1, e = U.length; e > L; L++) this.lineTo(U[L].x, U[L].y)
        }, $g.moveTo = function () {
            var x = Array.prototype.slice.call(arguments);
            this.actions.push({action: of, args: x})
        }, $g.lineTo = function (t, I) {
            var X = Array.prototype.slice.call(arguments), g = this.actions[this.actions.length - 1].args,
                U = g[g.length - 2], B = g[g.length - 1], R = new Ub(new ng(U, B), new ng(t, I));
            this.curves.push(R), this.actions.push({action: tq, args: X})
        }, $g.quadraticCurveTo = function (G, r, o, B) {
            var j = Array.prototype.slice.call(arguments), E = this.actions[this.actions.length - 1].args,
                O = E[E.length - 2], p = E[E.length - 1], P = new og(new ng(O, p), new ng(G, r), new ng(o, B));
            this.curves.push(P), this.actions.push({action: qk, args: j})
        }, $g.bezierCurveTo = function (c, b, O, K, W, x) {
            var F = Array.prototype.slice.call(arguments), e = this.actions[this.actions.length - 1].args,
                X = e[e.length - 2], l = e[e.length - 1],
                j = new Zm(new ng(X, l), new ng(c, b), new ng(O, K), new ng(W, x));
            this.curves.push(j), this.actions.push({action: ug, args: F})
        }, $g.arc = function (M, l, s, $, L, g) {
            var p = this.actions[this.actions.length - 1].args, O = p[p.length - 2], m = p[p.length - 1];
            this.absarc(M + O, l + m, s, $, L, g)
        }, $g.absarc = function (S, N, K, c, B, u) {
            this.absellipse(S, N, K, K, c, B, u)
        }, $g.ellipse = function (A, L, G, u, R, z, d) {
            var U = this.actions[this.actions.length - 1].args, n = U[U.length - 2], K = U[U.length - 1];
            this.absellipse(A + n, L + K, G, u, R, z, d)
        }, $g.absellipse = function (C, l, P, R, s, _, o) {
            var N = Array.prototype.slice.call(arguments), g = new Qe(C, l, P, R, s, _, o);
            this.curves.push(g);
            var H = g.getPoint(1);
            N.push(H.x), N.push(H.y), this.actions.push({action: $q, args: N})
        }, $g.getSpacedPoints = function (Y) {
            Y || (Y = 40);
            for (var v = [], w = 0; Y > w; w++) v.push(this.getPoint(w / Y));
            return v
        }, $g.getPoints = function (V, U) {
            V = V || 12;
            var y, I, w, g, N, Z, L, G, Q, Y, u, l, H, h, C, X, s, W, O = [];
            for (y = 0, I = this.actions.length; I > y; y++) switch (w = this.actions[y], g = w.action, N = w.args, g) {
                case of:
                    O.push(new ng(N[0], N[1]));
                    break;
                case tq:
                    O.push(new ng(N[0], N[1]));
                    break;
                case qk:
                    for (Z = N[2], L = N[3], Y = N[0], u = N[1], O.length > 0 ? (h = O[O.length - 1], l = h.x, H = h.y) : (h = this.actions[y - 1].args, l = h[h.length - 2], H = h[h.length - 1]), C = 1; V >= C; C++) X = C / V, s = nl.b2(X, l, Y, Z), W = nl.b2(X, H, u, L), O.push(new ng(s, W));
                    break;
                case ug:
                    for (Z = N[4], L = N[5], Y = N[0], u = N[1], G = N[2], Q = N[3], O.length > 0 ? (h = O[O.length - 1], l = h.x, H = h.y) : (h = this.actions[y - 1].args, l = h[h.length - 2], H = h[h.length - 1]), C = 1; V >= C; C++) X = C / V, s = nl.b3(X, l, Y, G, Z), W = nl.b3(X, H, u, Q, L), O.push(new ng(s, W));
                    break;
                case Yj:
                    var b, f = N[0], k = N[1], i = N[2], x = N[3], p = N[4], e = !!N[5], F = p - x, R = 2 * V;
                    for (C = 1; R >= C; C++) X = C / R, e || (X = 1 - X), b = x + X * F, s = f + i * c(b), W = k + i * J(b), O.push(new ng(s, W));
                    break;
                case $q:
                    var b, f = N[0], k = N[1], T = N[2], d = N[3], x = N[4], p = N[5], e = !!N[6], F = p - x, R = 2 * V;
                    for (C = 1; R >= C; C++) X = C / R, e || (X = 1 - X), b = x + X * F, s = f + T * c(b), W = k + d * J(b), O.push(new ng(s, W))
            }
            var S = O[O.length - 1], K = 1e-10;
            return M(S.x - O[0].x) < K && M(S.y - O[0].y) < K && O.splice(O.length - 1, 1), U && O.push(O[0]), O
        }, $g.toShapes = function (a, X) {
            function Y(u) {
                var g, N, n, t, i, X = [], I = new Vo;
                for (g = 0, N = u.length; N > g; g++) n = u[g], i = n.args, t = n.action, t == of && 0 != I.actions.length && (X.push(I), I = new Vo), I[t].apply(I, i);
                return 0 != I.actions.length && X.push(I), X
            }

            function G(m) {
                for (var J = [], I = 0, o = m.length; o > I; I++) {
                    var T = m[I], w = new Db;
                    w.actions = T.actions, w.curves = T.curves, J.push(w)
                }
                return J
            }

            function N(O, N) {
                for (var o = 1e-10, U = N.length, Z = !1, Q = U - 1, T = 0; U > T; Q = T++) {
                    var v = N[Q], g = N[T], p = g.x - v.x, c = g.y - v.y;
                    if (M(c) > o) {
                        if (0 > c && (v = N[T], p = -p, g = N[Q], c = -c), O.y < v.y || O.y > g.y) continue;
                        if (O.y == v.y) {
                            if (O.x == v.x) return !0
                        } else {
                            var A = c * (O.x - v.x) - p * (O.y - v.y);
                            if (0 == A) return !0;
                            if (0 > A) continue;
                            Z = !Z
                        }
                    } else {
                        if (O.y != v.y) continue;
                        if (g.x <= O.x && O.x <= v.x || v.x <= O.x && O.x <= g.x) return !0
                    }
                }
                return Z
            }

            var H = Y(this.actions);
            if (0 == H.length) return [];
            if (X === !0) return G(H);
            var i, r, W, E = [];
            if (1 == H.length) return r = H[0], W = new Db, W.actions = r.actions, W.curves = r.curves, E.push(W), E;
            var C = !nl.isClockWise(H[0].getPoints());
            C = a ? !C : C;
            var T, J = [], f = [], B = [], j = 0;
            f[j] = v, B[j] = [];
            var t, P;
            for (t = 0, P = H.length; P > t; t++) r = H[t], T = r.getPoints(), i = nl.isClockWise(T), i = a ? !i : i, i ? (!C && f[j] && j++, f[j] = {
                s: new Db,
                p: T
            }, f[j].s.actions = r.actions, f[j].s.curves = r.curves, C && j++, B[j] = []) : B[j].push({h: r, p: T[0]});
            if (!f[0]) return G(H);
            if (f.length > 1) {
                for (var o = !1, _ = [], q = 0, Q = f.length; Q > q; q++) J[q] = [];
                for (var q = 0, Q = f.length; Q > q; q++) {
                    f[q];
                    for (var h = B[q], y = 0; y < h.length; y++) {
                        for (var d = h[y], e = !0, w = 0; w < f.length; w++) N(d.p, f[w].p) && (q != w && _.push({
                            froms: q,
                            tos: w,
                            hole: y
                        }), e ? (e = !1, J[w].push(d)) : o = !0);
                        e && J[q].push(d)
                    }
                }
                _.length > 0 && (o || (B = J))
            }
            var p, l, m;
            for (t = 0, P = f.length; P > t; t++) for (W = f[t].s, E.push(W), p = B[t], l = 0, m = p.length; m > l; l++) W.holes.push(p[l].h);
            return E
        };
        var Db = function () {
            Vo.apply(this, arguments), this.holes = []
        }, pb = Db.prototype = Jf($g);
        pb.getPointsHoles = function (B) {
            var d, l = this.holes.length, v = [];
            for (d = 0; l > d; d++) v[d] = this.holes[d].getTransformedPoints(B);
            return v
        }, pb.extractAllPoints = function (s) {
            return {shape: this.getTransformedPoints(s), holes: this.getPointsHoles(s)}
        }, pb.extractPoints = function (B) {
            return this.extractAllPoints(B)
        };
        var nl = {
            triangulateShape: function (y, C) {
                function F(A, Z, B) {
                    return A.x != Z.x ? A.x < Z.x ? A.x <= B.x && B.x <= Z.x : Z.x <= B.x && B.x <= A.x : A.y < Z.y ? A.y <= B.y && B.y <= Z.y : Z.y <= B.y && B.y <= A.y
                }

                function t(X, r, b, s, h) {
                    var $ = 1e-10, V = r.x - X.x, T = r.y - X.y, v = s.x - b.x, Q = s.y - b.y, K = X.x - b.x,
                        R = X.y - b.y, g = T * v - V * Q, W = T * K - V * R;
                    if (M(g) > $) {
                        var z;
                        if (g > 0) {
                            if (0 > W || W > g) return [];
                            if (z = Q * K - v * R, 0 > z || z > g) return []
                        } else {
                            if (W > 0 || g > W) return [];
                            if (z = Q * K - v * R, z > 0 || g > z) return []
                        }
                        if (0 == z) return !h || 0 != W && W != g ? [X] : [];
                        if (z == g) return !h || 0 != W && W != g ? [r] : [];
                        if (0 == W) return [b];
                        if (W == g) return [s];
                        var C = z / g;
                        return [{x: X.x + C * V, y: X.y + C * T}]
                    }
                    if (0 != W || Q * K != v * R) return [];
                    var k = 0 == V && 0 == T, q = 0 == v && 0 == Q;
                    if (k && q) return X.x != b.x || X.y != b.y ? [] : [X];
                    if (k) return F(b, s, X) ? [X] : [];
                    if (q) return F(X, r, b) ? [b] : [];
                    var j, n, L, c, w, O, P, o;
                    return 0 != V ? (X.x < r.x ? (j = X, L = X.x, n = r, c = r.x) : (j = r, L = r.x, n = X, c = X.x), b.x < s.x ? (w = b, P = b.x, O = s, o = s.x) : (w = s, P = s.x, O = b, o = b.x)) : (X.y < r.y ? (j = X, L = X.y, n = r, c = r.y) : (j = r, L = r.y, n = X, c = X.y), b.y < s.y ? (w = b, P = b.y, O = s, o = s.y) : (w = s, P = s.y, O = b, o = b.y)), P >= L ? P > c ? [] : c == P ? h ? [] : [w] : o >= c ? [w, n] : [w, O] : L > o ? [] : L == o ? h ? [] : [j] : o >= c ? [j, n] : [j, O]
                }

                function Z(S, r, m, j) {
                    var w = 1e-10, t = r.x - S.x, G = r.y - S.y, v = m.x - S.x, A = m.y - S.y, U = j.x - S.x,
                        b = j.y - S.y, o = t * A - G * v, f = t * b - G * U;
                    if (M(o) > w) {
                        var L = U * A - b * v;
                        return o > 0 ? f >= 0 && L >= 0 : f >= 0 || L >= 0
                    }
                    return f > 0
                }

                function k(p, K) {
                    function A(W, L) {
                        var h = q.length - 1, A = W - 1;
                        0 > A && (A = h);
                        var o = W + 1;
                        o > h && (o = 0);
                        var $ = Z(q[W], q[A], q[o], T[L]);
                        if (!$) return !1;
                        var M = T.length - 1, c = L - 1;
                        0 > c && (c = M);
                        var X = L + 1;
                        return X > M && (X = 0), $ = Z(T[L], T[c], T[X], q[W]), $ ? !0 : !1
                    }

                    function d(o, y) {
                        var $, p, a;
                        for ($ = 0; $ < q.length; $++) if (p = $ + 1, p %= q.length, a = t(o, y, q[$], q[p], !0), a.length > 0) return !0;
                        return !1
                    }

                    function u(R, _) {
                        var E, o, M, F, n;
                        for (E = 0; E < C.length; E++) for (o = K[C[E]], M = 0; M < o.length; M++) if (F = M + 1, F %= o.length, n = t(R, _, o[M], o[F], !0), n.length > 0) return !0;
                        return !1
                    }

                    for (var T, O, s, n, e, j, h, i, B, x, y, q = p.concat(), C = [], L = [], l = 0, D = K.length; D > l; l++) C.push(l);
                    for (var W = 0, N = 2 * C.length; C.length > 0 && (N--, !(0 > N));) for (s = W; s < q.length; s++) {
                        n = q[s], O = -1;
                        for (var l = 0; l < C.length; l++) if (j = C[l], h = n.x + ":" + n.y + ":" + j, L[h] === v) {
                            T = K[j];
                            for (var G = 0; G < T.length; G++) if (e = T[G], A(s, G) && !d(n, e) && !u(n, e)) {
                                O = G, C.splice(l, 1), i = q.slice(0, s + 1), B = q.slice(s), x = T.slice(O), y = T.slice(0, O + 1), q = i.concat(x).concat(y).concat(B), W = s;
                                break
                            }
                            if (O >= 0) break;
                            L[h] = !0
                        }
                        if (O >= 0) break
                    }
                    return q
                }

                for (var Y, x, A, T, b, _, D = {}, K = y.concat(), g = 0, G = C.length; G > g; g++) Array.prototype.push.apply(K, C[g]);
                for (Y = 0, x = K.length; x > Y; Y++) b = K[Y].x + ":" + K[Y].y, D[b] !== v, D[b] = Y;
                var c = k(y, C), f = Cj.Triangulate(c, !1);
                for (Y = 0, x = f.length; x > Y; Y++) for (T = f[Y], A = 0; 3 > A; A++) b = T[A].x + ":" + T[A].y, _ = D[b], _ !== v && (T[A] = _);
                return f.concat()
            }, isClockWise: function (C) {
                return Cj.Triangulate.area(C) < 0
            }, b2p0: function (j, m) {
                var q = 1 - j;
                return q * q * m
            }, b2p1: function (g, Y) {
                return 2 * (1 - g) * g * Y
            }, b2p2: function (I, q) {
                return I * I * q
            }, b2: function (F, j, i, s) {
                return this.b2p0(F, j) + this.b2p1(F, i) + this.b2p2(F, s)
            }, b3p0: function (F, t) {
                var v = 1 - F;
                return v * v * v * t
            }, b3p1: function (Z, L) {
                var f = 1 - Z;
                return 3 * f * f * Z * L
            }, b3p2: function (S, D) {
                var I = 1 - S;
                return 3 * I * S * S * D
            }, b3p3: function (H, C) {
                return H * H * H * C
            }, b3: function (L, R, F, $, E) {
                return this.b3p0(L, R) + this.b3p1(L, F) + this.b3p2(L, $) + this.b3p3(L, E)
            }
        }, Cj = {
            faces: {},
            face: "",
            weight: "normal",
            style: "normal",
            size: 150,
            divisions: 10,
            getDefaultFont: function () {
                var d = H.keys(this.faces);
                return d.length ? d[0] : null
            },
            getFace: function () {
                try {
                    return this.faces[this.face][this.weight][this.style]
                } catch (y) {
                    throw"The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                }
            },
            loadFace: function (R) {
                var U = R.familyName.toLowerCase(), b = this;
                return b.faces[U] = b.faces[U] || {}, b.faces[U][R.cssFontWeight] = b.faces[U][R.cssFontWeight] || {}, b.faces[U][R.cssFontWeight][R.cssFontStyle] = R, R
            },
            drawText: function (Q) {
                var _, a = this.getFace(), R = this.size / a.resolution, T = 0, j = String(Q).split(""), p = j.length,
                    S = [];
                for (_ = 0; p > _; _++) {
                    var o = new Vo, t = this.extractGlyphPoints(j[_], a, R, T, o);
                    t && (T += t.offset * this.spacing, S.push(t.path))
                }
                var n = T / 2;
                return {paths: S, offset: n}
            },
            extractGlyphPoints: function (e, R, x, H, q) {
                var $, T, f, Y, K, r, N, g, B, w, P, i, Z, W, h, O, D, t, L, d = [], o = R.glyphs[e] || R.glyphs["?"];
                if (o) {
                    if (o.o) for (Y = o._cachedOutline || (o._cachedOutline = o.o.split(" ")), r = Y.length, N = x, g = x, $ = 0; r > $;) switch (K = Y[$++]) {
                        case"m":
                            B = Y[$++] * N + H, w = Y[$++] * g, q.moveTo(B, w);
                            break;
                        case"l":
                            B = Y[$++] * N + H, w = Y[$++] * g, q.lineTo(B, w);
                            break;
                        case"q":
                            if (P = Y[$++] * N + H, i = Y[$++] * g, h = Y[$++] * N + H, O = Y[$++] * g, q.quadraticCurveTo(h, O, P, i), L = d[d.length - 1]) for (Z = L.x, W = L.y, T = 1, f = this.divisions; f >= T; T++) {
                                var F = T / f;
                                nl.b2(F, Z, h, P), nl.b2(F, W, O, i)
                            }
                            break;
                        case"b":
                            if (P = Y[$++] * N + H, i = Y[$++] * g, h = Y[$++] * N + H, O = Y[$++] * g, D = Y[$++] * N + H, t = Y[$++] * g, q.bezierCurveTo(h, O, D, t, P, i), L = d[d.length - 1]) for (Z = L.x, W = L.y, T = 1, f = this.divisions; f >= T; T++) {
                                var F = T / f;
                                nl.b3(F, Z, h, D, P), nl.b3(F, W, O, t, i)
                            }
                    }
                    return {offset: o.ha * x, path: q}
                }
            }
        };
        Cj.generateShapes = function (w, j) {
            j = j || {};
            var c = j.font;
            if (c === v && (c = Cj.getDefaultFont(), !c)) return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."), [];
            var O = j.size !== v ? j.size : 1, A = j.curveSegments !== v ? j.curveSegments : 4,
                Z = j.spacing !== v ? j.spacing : 1, i = j.weight !== v ? j.weight : "normal",
                Q = j.style !== v ? j.style : "normal";
            Cj.size = O, Cj.divisions = A, Cj.face = c, Cj.weight = i, Cj.style = Q, Cj.spacing = Z;
            for (var n = Cj.drawText(w), X = n.paths, g = [], e = 0, S = X.length; S > e; e++) Array.prototype.push.apply(g, X[e].toShapes());
            return g
        }, function (o) {
            var p = 1e-10, S = function (E, x) {
                var p = E.length;
                if (3 > p) return null;
                var R, H, I, g = [], M = [], v = [];
                if (l(E) > 0) for (H = 0; p > H; H++) M[H] = H; else for (H = 0; p > H; H++) M[H] = p - 1 - H;
                var X = p, d = 2 * X;
                for (H = X - 1; X > 2;) {
                    if (d-- <= 0) return x ? v : g;
                    if (R = H, R >= X && (R = 0), H = R + 1, H >= X && (H = 0), I = H + 1, I >= X && (I = 0), N(E, R, H, I, X, M)) {
                        var u, P, W, j, r;
                        for (u = M[R], P = M[H], W = M[I], g.push([E[u], E[P], E[W]]), v.push([M[R], M[H], M[I]]), j = H, r = H + 1; X > r; j++, r++) M[j] = M[r];
                        X--, d = 2 * X
                    }
                }
                return x ? v : g
            }, l = function (D) {
                for (var z = D.length, $ = 0, k = z - 1, i = 0; z > i; k = i++) $ += D[k].x * D[i].y - D[i].x * D[k].y;
                return .5 * $
            }, N = function (x, Q, R, v, $, E) {
                var i, e, h, z, c, I, D, W, q;
                if (e = x[E[Q]].x, h = x[E[Q]].y, z = x[E[R]].x, c = x[E[R]].y, I = x[E[v]].x, D = x[E[v]].y, p > (z - e) * (D - h) - (c - h) * (I - e)) return !1;
                var Y, y, J, N, C, T, u, M, m, S, G, s, B, b, f;
                for (Y = I - z, y = D - c, J = e - I, N = h - D, C = z - e, T = c - h, i = 0; $ > i; i++) if (W = x[E[i]].x, q = x[E[i]].y, !(W === e && q === h || W === z && q === c || W === I && q === D) && (u = W - e, M = q - h, m = W - z, S = q - c, G = W - I, s = q - D, f = Y * S - y * m, B = C * M - T * u, b = J * s - N * G, f >= -p && b >= -p && B >= -p)) return !1;
                return !0
            };
            return o.Triangulate = S, o.Triangulate.area = l, o
        }(Cj), r._typeface_js = {faces: Cj.faces, loadFace: Cj.loadFace};
        var To = function () {
            this.vertices = [], this.faces = [], this.faceVertexUvs = [[]]
        }, xe = To.prototype = {
            constructor: To, computeFaceNormals: function () {
                for (var T = new Gd, X = new Gd, E = 0, S = this.faces.length; S > E; E++) {
                    var e = this.faces[E], Z = this.vertices[e.a], K = this.vertices[e.b], $ = this.vertices[e.c];
                    T.subVectors($, K), X.subVectors(Z, K), T.cross(X), T.normalize(), e.normal.copy(T)
                }
            }, computeVertexNormals: function (i) {
                var l, z, b, m, P, e;
                for (e = new Array(this.vertices.length), l = 0, z = this.vertices.length; z > l; l++) e[l] = new Gd;
                if (i) {
                    var w, g, c, j = new Gd, X = new Gd;
                    for (b = 0, m = this.faces.length; m > b; b++) P = this.faces[b], w = this.vertices[P.a], g = this.vertices[P.b], c = this.vertices[P.c], j.subVectors(c, g), X.subVectors(w, g), j.cross(X), e[P.a].add(j), e[P.b].add(j), e[P.c].add(j)
                } else for (b = 0, m = this.faces.length; m > b; b++) P = this.faces[b], e[P.a].add(P.normal), e[P.b].add(P.normal), e[P.c].add(P.normal);
                for (l = 0, z = this.vertices.length; z > l; l++) e[l].normalize();
                for (b = 0, m = this.faces.length; m > b; b++) P = this.faces[b], P.vertexNormals[0] = e[P.a].clone(), P.vertexNormals[1] = e[P.b].clone(), P.vertexNormals[2] = e[P.c].clone()
            }, mergeVertices: function () {
                var d, x, a, M, O, Y, N, y, Q = {}, e = [], K = [], o = 4, Z = t(10, o);
                for (a = 0, M = this.vertices.length; M > a; a++) d = this.vertices[a], x = B(d.x * Z) + "_" + B(d.y * Z) + "_" + B(d.z * Z), Q[x] === v ? (Q[x] = a, e.push(this.vertices[a]), K[a] = e.length - 1) : K[a] = K[Q[x]];
                var R = [];
                for (a = 0, M = this.faces.length; M > a; a++) {
                    O = this.faces[a], O.a = K[O.a], O.b = K[O.b], O.c = K[O.c], Y = [O.a, O.b, O.c];
                    for (var $ = 0; 3 > $; $++) if (Y[$] == Y[($ + 1) % 3]) {
                        R.push(a);
                        break
                    }
                }
                for (a = R.length - 1; a >= 0; a--) {
                    var j = R[a];
                    for (this.faces.splice(j, 1), N = 0, y = this.faceVertexUvs.length; y > N; N++) this.faceVertexUvs[N].splice(j, 1)
                }
                var i = this.vertices.length - e.length;
                return this.vertices = e, i
            }
        }, Qe = function (U, s, N, S, D, e, u) {
            this.aX = U, this.aY = s, this.xRadius = N, this.yRadius = S, this.aStartAngle = D, this.aEndAngle = e, this.aClockwise = u
        };
        Qe.prototype = Jf(Ie), Qe.prototype.getPoint = function (A) {
            var z, G = this.aEndAngle - this.aStartAngle;
            0 > G && (G += C), G > C && (G -= C), z = this.aClockwise === !0 ? this.aEndAngle + (1 - A) * (C - G) : this.aStartAngle + A * G;
            var e = this.aX + this.xRadius * c(z), q = this.aY + this.yRadius * J(z);
            return new ng(e, q)
        };
        var Ub = function (Y, c) {
            this.v1 = Y, this.v2 = c
        }, fi = Ub.prototype = Jf(Ie);
        fi.getPoint = function (S) {
            var r = this.v2.clone().sub(this.v1);
            return r.multiplyScalar(S).add(this.v1), r
        }, fi.getPointAt = function (C) {
            return this.getPoint(C)
        }, fi.getTangent = function () {
            var c = this.v2.clone().sub(this.v1);
            return c.normalize()
        };
        var og = function ($, z, X) {
            this.v0 = $, this.v1 = z, this.v2 = X
        };
        og.prototype = Jf(Ie), og.prototype.getPoint = function (E) {
            var m, Q;
            return m = nl.b2(E, this.v0.x, this.v1.x, this.v2.x), Q = nl.b2(E, this.v0.y, this.v1.y, this.v2.y), new ng(m, Q)
        };
        var Zm = function (Z, K, q, W) {
            this.v0 = Z, this.v1 = K, this.v2 = q, this.v3 = W
        };
        Zm.prototype = Jf(Ie), Zm.prototype.getPoint = function (s) {
            var b, L;
            return b = nl.b3(s, this.v0.x, this.v1.x, this.v2.x, this.v3.x), L = nl.b3(s, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new ng(b, L)
        }, Bg.create(function (L, O) {
            this.v1 = L, this.v2 = O
        }, function (a) {
            var R = new Gd;
            return R.subVectors(this.v2, this.v1), R.multiplyScalar(a), R.add(this.v1), R
        });
        var Ed = Bg.create(function (R, h, O) {
            this.v0 = R, this.v1 = h, this.v2 = O
        }, function (m) {
            var o, v, H;
            return o = nl.b2(m, this.v0.x, this.v1.x, this.v2.x), v = nl.b2(m, this.v0.y, this.v1.y, this.v2.y), H = nl.b2(m, this.v0.z, this.v1.z, this.v2.z), new Gd(o, v, H)
        }), Sl = Bg.create(function (i, Q, A, M) {
            this.v0 = i, this.v1 = Q, this.v2 = A, this.v3 = M
        }, function (E) {
            var R, i, k;
            return R = nl.b3(E, this.v0.x, this.v1.x, this.v2.x, this.v3.x), i = nl.b3(E, this.v0.y, this.v1.y, this.v2.y, this.v3.y), k = nl.b3(E, this.v0.z, this.v1.z, this.v2.z, this.v3.z), new Gd(R, i, k)
        }), eh = function (P, p, E, Y, j, m, O, g) {
            To.call(this), Y = Y !== v ? Y : .5, j = j !== v ? j : .5, g = g !== v ? g : 1, P = P || 8, m = m || 0, O = O || C;
            var _, I, n = 1, $ = g / 2, o = [], H = [], W = this.vertices, B = this.faces, S = this.faceVertexUvs;
            for (I = 0; n >= I; I++) {
                var G = [], F = [], Q = I / n, l = Q * (j - Y) + Y;
                for (_ = 0; P >= _; _++) {
                    var u = _ / P, T = new Gd, z = -(u * O + m);
                    T.z = l * J(z), T.y = -Q * g + $, T.x = l * c(z), W.push(T), G.push(W.length - 1), F.push(new ng(u, Q))
                }
                o.push(G), H.push(F)
            }
            var f, M, k = (j - Y) / g;
            for (_ = 0; P > _; _++) for (0 !== Y ? (f = W[o[0][_]].clone(), M = W[o[0][_ + 1]].clone()) : (f = W[o[1][_]].clone(), M = W[o[1][_ + 1]].clone()), f.setY(e(f.x * f.x + f.z * f.z) * k).normalize(), M.setY(e(M.x * M.x + M.z * M.z) * k).normalize(), I = 0; n > I; I++) {
                var i = o[I][_], d = o[I + 1][_], N = o[I + 1][_ + 1], D = o[I][_ + 1], R = f.clone(), t = f.clone(),
                    X = M.clone(), r = M.clone(), A = H[I][_].clone(), s = H[I + 1][_].clone(),
                    Z = H[I + 1][_ + 1].clone(), V = H[I][_ + 1].clone();
                B.push(new Ae(i, d, D, [R, t, r])), S[0].push([A, s, V]), B.push(new Ae(d, N, D, [t.clone(), X, r.clone()])), S[0].push([s.clone(), Z, V.clone()])
            }
            if (p && Y > 0) for (this.vertices.push(new Gd(0, $, 0)), _ = 0; P > _; _++) {
                var i = o[0][_], d = o[0][_ + 1], N = this.vertices.length - 1, R = new Gd(0, 1, 0),
                    t = new Gd(0, 1, 0), X = new Gd(0, 1, 0), A = H[0][_].clone(), s = H[0][_ + 1].clone(),
                    Z = new ng(s.x, 0);
                B.push(new Ae(i, d, N, [R, t, X], null, 1));
                var L = _ / P * C, y = c(L), a = J(L), w = (_ + 1) / P * C, U = c(w), h = J(w);
                S[0].push([new ng(.5 + .5 * y, .5 + .5 * a), new ng(.5 + .5 * U, .5 + .5 * h), new ng(.5, .5)])
            }
            if (E && j > 0) for (this.vertices.push(new Gd(0, -$, 0)), _ = 0; P > _; _++) {
                var i = o[I][_ + 1], d = o[I][_], N = W.length - 1, R = new Gd(0, -1, 0), t = new Gd(0, -1, 0),
                    X = new Gd(0, -1, 0), A = H[I][_ + 1].clone(), s = H[I][_].clone();
                B.push(new Ae(i, d, N, [R, t, X], null, 2));
                var L = _ / P * C, y = c(L), a = J(L), w = (_ + 1) / P * C, U = c(w), h = J(w);
                S[0].push([new ng(.5 + .5 * U, .5 - .5 * h), new ng(.5 + .5 * y, .5 - .5 * a), new ng(.5, .5)])
            }
        };
        eh.prototype = Jf(xe);
        var Xn = function (H, k, f, K, R, $, s) {
            To.call(this), s = s || .5, H = H || 16, k = k || 16, f = (f !== v ? f : 0) - Y, K = K !== v ? K : C, R = R !== v ? R : 0, $ = $ !== v ? $ : Y;
            var I, E, O = [], q = [], P = this.vertices, h = this.faces, l = this.faceVertexUvs;
            for (E = 0; k >= E; E++) {
                var w = [], o = [];
                for (I = 0; H >= I; I++) {
                    var y = I / H, F = E / k, G = new Gd;
                    G.x = -s * c(f + y * K) * J(R + F * $), G.y = s * c(R + F * $), G.z = s * J(f + y * K) * J(R + F * $), P.push(G), w.push(P.length - 1), o.push(new ng(y, F))
                }
                O.push(w), q.push(o)
            }
            for (E = 0; k > E; E++) for (I = 0; H > I; I++) {
                var Z = O[E][I + 1], X = O[E][I], D = O[E + 1][I], u = O[E + 1][I + 1], V = P[Z].clone().normalize(),
                    L = P[X].clone().normalize(), B = P[D].clone().normalize(), n = P[u].clone().normalize(),
                    Q = q[E][I + 1].clone(), g = q[E][I].clone(), d = q[E + 1][I].clone(), j = q[E + 1][I + 1].clone();
                M(P[Z].y) === s ? (Q.x = (Q.x + g.x) / 2, h.push(new Ae(Z, D, u, [V, B, n])), l[0].push([Q, d, j])) : M(P[D].y) === s ? (d.x = (d.x + j.x) / 2, h.push(new Ae(Z, X, D, [V, L, B])), l[0].push([Q, g, d])) : (h.push(new Ae(Z, X, u, [V, L, n])), l[0].push([Q, g, j]), h.push(new Ae(X, D, u, [L.clone(), B, n.clone()])), l[0].push([g.clone(), d, j.clone()]))
            }
        };
        Xn.prototype = Jf(xe);
        var kq = function (v, G, y, s, g, N) {
            To.call(this), v = v || .33, G = G || .17, s = s || 8, y = y || 6, g = g || 0, N = N || C;
            for (var X = new Gd, h = [], b = [], $ = 0; s >= $; $++) for (var M = $ / s * C + Y, o = 0; y >= o; o++) {
                var S = o / y * N + g;
                X.x = v * c(S), X.z = -v * J(S);
                var O = new Gd, m = v + G * c(M);
                O.x = m * c(S), O.z = -m * J(S), O.y = G * J(M), this.vertices.push(O), h.push(new ng(o / y, 1 - $ / s)), b.push(O.clone().sub(X).normalize())
            }
            for (var $ = 1; s >= $; $++) for (var o = 1; y >= o; o++) {
                var A = (y + 1) * $ + o - 1, Z = (y + 1) * ($ - 1) + o - 1, H = (y + 1) * ($ - 1) + o,
                    t = (y + 1) * $ + o, L = new Ae(A, Z, t, [b[A].clone(), b[Z].clone(), b[t].clone()]);
                this.faces.push(L), this.faceVertexUvs[0].push([h[A].clone(), h[Z].clone(), h[t].clone()]), L = new Ae(Z, H, t, [b[Z].clone(), b[H].clone(), b[t].clone()]), this.faces.push(L), this.faceVertexUvs[0].push([h[Z].clone(), h[H].clone(), h[t].clone()])
            }
            this.computeFaceNormals()
        };
        kq.prototype = Jf(xe);
        var Yk = function ($, s, x) {
            return $ ? (To.call(this), $ = $ instanceof Array ? $ : [$], this.addShapeList($, s), s.convertYZ !== !1 && Ai(this, x), this.computeFaceNormals(), void 0) : ($ = [], void 0)
        }, Yh = Yk.prototype = Jf(To.prototype);
        Yh.addShapeList = function (C, u) {
            for (var o = C.length, M = 0; o > M; M++) {
                var g = C[M];
                this.addShape(g, u)
            }
        }, Yh.addShape = function (J, y) {
            function i() {
                if (y.bottom) for (var N = 0; H > N; N++) o = h[N], P(o[2], o[1], o[0], !0);
                if (y.top) for (N = 0; H > N; N++) o = h[N], P(o[0] + C * b, o[1] + C * b, o[2] + C * b, !1)
            }

            function K() {
                var g = 0;
                for (j(E, g), g += E.length, n = 0, N = V.length; N > n; n++) X = V[n], j(X, g), g += X.length
            }

            function j(x, z) {
                for (var l, o, T = x.length; --T >= 0;) {
                    l = T, o = T - 1, 0 > o && (o = x.length - 1);
                    var g = 0, p = b;
                    for (g = 0; p > g; g++) {
                        var D = C * g, c = C * (g + 1), J = z + l + D, S = z + o + D, L = z + o + c, I = z + l + c;
                        t(J, S, L, I, x, g, p, l, o)
                    }
                }
            }

            function _(g, D, Y) {
                a.vertices.push(new Gd(g, D, Y))
            }

            function P(D, b, N, h) {
                D += U, b += U, N += U, a.faces.push(new Ae(D, b, N, null, null, h ? 2 : 1));
                var m = h ? l.generateBottomUV(a, J, y, D, b, N) : l.generateTopUV(a, J, y, D, b, N);
                a.faceVertexUvs[0].push(m)
            }

            function t(w, u, R, T, g, F, e, Q, n) {
                w += U, u += U, R += U, T += U, a.faces.push(new Ae(w, u, T)), a.faces.push(new Ae(u, R, T));
                var V = l.generateSideWallUV(a, J, g, y, w, u, R, T, F, e, Q, n);
                a.faceVertexUvs[0].push([V[0], V[1], V[3]]), a.faceVertexUvs[0].push([V[1], V[2], V[3]])
            }

            var W, z, c, g, $, O = y.amount, d = y.curveSegments || rp, b = y.steps || 1, G = y.extrudePath, Z = !1,
                l = new Me(y.repeatUVLength);
            G && (W = G.getSpacedPoints(b), Z = !0, z = y.frames !== v ? y.frames : new ql.FrenetFrames(G, b, !1), c = new Gd, g = new Gd, $ = new Gd);
            var X, n, N, a = this, U = this.vertices.length, Q = J.extractPoints(d), k = Q.shape, V = Q.holes,
                T = !nl.isClockWise(k);
            if (T) {
                for (k = k.reverse(), n = 0, N = V.length; N > n; n++) X = V[n], nl.isClockWise(X) && (V[n] = X.reverse());
                T = !1
            }
            var h = nl.triangulateShape(k, V), E = k;
            for (n = 0, N = V.length; N > n; n++) X = V[n], k = k.concat(X);
            for (var m, o, C = k.length, H = h.length, B = 0; C > B; B++) m = k[B], Z ? (g.copy(z.normals[0]).multiplyScalar(m.x), c.copy(z.binormals[0]).multiplyScalar(m.y), $.copy(W[0]).add(g).add(c), _($.x, $.y, $.z)) : _(m.x, m.y, 0);
            var s;
            for (s = 1; b >= s; s++) for (B = 0; C > B; B++) m = k[B], Z ? (g.copy(z.normals[s]).multiplyScalar(m.x), c.copy(z.binormals[s]).multiplyScalar(m.y), $.copy(W[s]).add(g).add(c), _($.x, $.y, $.z)) : _(m.x, m.y, O / b * s);
            i(), K()
        };
        var ql = function (B, h, j, k, e) {
            function o(S, J, W) {
                return X.vertices.push(new Gd(S, J, W)) - 1
            }

            To.call(this), h = h || 64, j = j || 1, k = k || 8, e = e || !1;
            var S, $, K, N, b, d, T, Z, I, G, z, i, U, p, q, m, F, n, Q, W, P = [], X = this, y = h + 1, H = new Gd,
                E = new ql.FrenetFrames(B, h, e), O = E.tangents, t = E.normals, V = E.binormals;
            for (this.tangents = O, this.normals = t, this.binormals = V, I = 0; y > I; I++) for (P[I] = [], N = I / (y - 1), Z = B.getPointAt(N), S = O[I], $ = t[I], K = V[I], G = 0; k > G; G++) b = G / k * C, d = -j * c(b), T = j * J(b), H.copy(Z), H.x += d * $.x + T * K.x, H.y += d * $.y + T * K.y, H.z += d * $.z + T * K.z, P[I][G] = o(H.x, H.y, H.z);
            for (I = 0; h > I; I++) for (G = 0; k > G; G++) z = e ? (I + 1) % h : I + 1, i = (G + 1) % k, U = P[I][G], p = P[z][G], q = P[z][i], m = P[I][i], F = new ng(I / h, G / k), n = new ng((I + 1) / h, G / k), Q = new ng((I + 1) / h, (G + 1) / k), W = new ng(I / h, (G + 1) / k), this.faces.push(new Ae(U, p, m)), this.faceVertexUvs[0].push([F, n, W]), this.faces.push(new Ae(p, q, m)), this.faceVertexUvs[0].push([n.clone(), Q, W.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        };
        ql.prototype = Jf(xe), ql.FrenetFrames = function (Z, N, _) {
            function $() {
                y[0] = new Gd, w[0] = new Gd, E = Number.MAX_VALUE, U = M(m[0].x), I = M(m[0].y), s = M(m[0].z), E >= U && (E = U, F.set(1, 0, 0)), E >= I && (E = I, F.set(0, 1, 0)), E >= s && F.set(0, 0, 1), D.crossVectors(m[0], F).normalize(), y[0].crossVectors(m[0], D), w[0].crossVectors(m[0], y[0])
            }

            var t, E, U, I, s, u, k, F = new Gd, m = [], y = [], w = [], D = new Gd, Y = new Yi, Q = N + 1, x = 1e-4;
            for (this.tangents = m, this.normals = y, this.binormals = w, u = 0; Q > u; u++) k = u / (Q - 1), m[u] = Z.getTangentAt(k), m[u].normalize();
            for ($(), u = 1; Q > u; u++) y[u] = y[u - 1].clone(), w[u] = w[u - 1].clone(), D.crossVectors(m[u - 1], m[u]), D.length() > x && (D.normalize(), t = a(Fi(m[u - 1].dot(m[u]), -1, 1)), y[u].applyMatrix4(Y.makeRotationAxis(D, t))), w[u].crossVectors(m[u], y[u]);
            if (_) for (t = a(Fi(y[0].dot(y[Q - 1]), -1, 1)), t /= Q - 1, m[0].dot(D.crossVectors(y[0], y[Q - 1])) > 0 && (t = -t), u = 1; Q > u; u++) y[u].applyMatrix4(Y.makeRotationAxis(m[u], t * u)), w[u].crossVectors(m[u], y[u])
        };
        var Oc = function (h, F, X, M) {
            To.call(this), F = F || 18, X = X || 0, M = M == o ? C : M;
            for (var T = 1 / (h.length - 1), W = 1 / F, g = 0, O = F; O >= g; g++) for (var u = X + g * W * M, K = c(u), H = J(u), q = 0, I = h.length; I > q; q++) {
                var t = h[q], _ = new Gd;
                _.x = K * t.x - H * t.y, _.y = H * t.x + K * t.y, _.z = t.z, this.vertices.push(_)
            }
            for (var b = h.length, g = 0, O = F; O > g; g++) for (var q = 0, I = h.length - 1; I > q; q++) {
                var m = q + b * g, L = m, V = m + b, K = m + 1 + b, z = m + 1, i = g * W, B = q * T, U = i + W,
                    x = B + T;
                this.faces.push(new Ae(L, z, V)), this.faceVertexUvs[0].push([new ng(i, B), new ng(i, x), new ng(U, B)]), this.faces.push(new Ae(V, z, K)), this.faceVertexUvs[0].push([new ng(U, B), new ng(i, x), new ng(U, x)])
            }
            this.mergeVertices(), Ai(this), this.computeFaceNormals(), this.computeVertexNormals()
        };
        Oc.prototype = Jf(xe);
        var Fp = function (e, A) {
            A = A || {};
            var Y = Cj.generateShapes(e, A);
            A.amount = A.amount !== v ? A.amount : .5, A.convertYZ = !1, A.fill !== !1 && (A.bottom = !0, A.top = !0), Yk.call(this, Y, A)
        };
        Fp.prototype = Jf(Yh);
        var ve = x.Node = function () {
                yp(ve, this)
            }, Lr = {X: ni, Y: ts, Z: sm}, Xc = {X: 0, Y: 1, Z: 2},
            fb = {xyz: "XYZ", xzy: "XZY", yxz: "YXZ", yzx: "YZX", zxy: "ZXY", zyx: "ZYX"}, lj = "xzy",
            Sr = function (K, z, v) {
                if (z) {
                    var q = z[0], Y = z[1], j = z[2];
                    "xzy" === v ? (ts(K, Y), sm(K, j), ni(K, q)) : "xyz" === v ? (sm(K, j), ts(K, Y), ni(K, q)) : "yxz" === v ? (sm(K, j), ni(K, q), ts(K, Y)) : "yzx" === v ? (ni(K, q), sm(K, j), ts(K, Y)) : "zxy" === v ? (ts(K, Y), ni(K, q), sm(K, j)) : "zyx" === v ? (ni(K, q), ts(K, Y), sm(K, j)) : (ts(K, Y), sm(K, j), ni(K, q))
                }
            };
        rb("Node", xk, {
            ms_ac: ["rotationMode", "anchorElevation"],
            ms_edge: !0,
            _adjustChildrenToTop: !0,
            _icon: "node_icon",
            _image: "node_image",
            _rotationMode: lj,
            _64O: 0,
            _rotationX: 0,
            _53O: 0,
            _host: o,
            _position: {x: 0, y: 0},
            _anchor: {x: .5, y: .5},
            _anchorElevation: .5,
            _scale: {x: 1, y: 1},
            _scaleTall: 1,
            _54O: 0,
            getUIClass: function () {
                return Wq
            },
            _22Q: function () {
                return pp
            },
            getX: function () {
                return this.p().x
            },
            setX: function (V) {
                this.p(V, this.p().y)
            },
            getY: function () {
                return this.p().y
            },
            setY: function (W) {
                this.p(this.p().x, W)
            },
            getAnchorX: function () {
                return this.getAnchor().x
            },
            setAnchorX: function (Q) {
                this.setAnchor(Q, this.getAnchor().y)
            },
            getAnchorY: function () {
                return this.getAnchor().y
            },
            setAnchorY: function (T) {
                this.setAnchor(this.getAnchor().x, T)
            },
            getScaleX: function () {
                return this.getScale().x
            },
            setScaleX: function (P) {
                this.setScale(P, this.getScale().y)
            },
            getScaleY: function () {
                return this.getScale().y
            },
            setScaleY: function (g) {
                this.setScale(this.getScale().x, g)
            },
            p: function () {
                return 0 === arguments.length ? this.getPosition() : (this.setPosition.apply(this, arguments), this)
            },
            p3: function () {
                return 0 === arguments.length ? this.getPosition3d() : (this.setPosition3d.apply(this, arguments), this)
            },
            s3: function () {
                return 0 === arguments.length ? this.getSize3d() : (this.setSize3d.apply(this, arguments), this)
            },
            r3: function () {
                return 0 === arguments.length ? this.getRotation3d() : (this.setRotation3d.apply(this, arguments), this)
            },
            t3: function () {
                return this.translate3d.apply(this, arguments), this
            },
            translate3dBy: function (E, y) {
                Jg(E, Hg(o, o, this.r3(), this.getRotationMode())), this.translate3d(E[0] * y, E[1] * y, E[2] * y)
            },
            translateFront: function (v) {
                this.translate3dBy([0, 0, 1], v)
            },
            translateBack: function (A) {
                this.translate3dBy([0, 0, -1], A)
            },
            translateLeft: function (E) {
                this.translate3dBy([-1, 0, 0], E)
            },
            translateRight: function (p) {
                this.translate3dBy([1, 0, 0], p)
            },
            translateTop: function (k) {
                this.translate3dBy([0, 1, 0], k)
            },
            translateBottom: function (t) {
                this.translate3dBy([0, -1, 0], t)
            },
            getPosition3d: function () {
                return [this._position.x, this._54O, this._position.y]
            },
            setPosition3d: function (N, z, H) {
                1 === arguments.length && (z = N[1], H = N[2], N = N[0]), this.p(N, H), this.setElevation(z)
            },
            translate3d: function (b, s, m) {
                1 === arguments.length && (s = b[1], m = b[2], b = b[0]), this.translate(b, m), this.setElevation(this._54O + s)
            },
            getSize3d: function () {
                return [this.getWidth(), this.getTall(), this.getHeight()]
            },
            setSize3d: function (E, X, S) {
                1 === arguments.length && (X = E[1], S = E[2], E = E[0]), this.setSize(E, S), this.setTall(X)
            },
            getRotation3d: function () {
                return [this._rotationX, -this._64O, this._53O]
            },
            setRotation3d: function (n, f, $) {
                1 === arguments.length && (f = n[1], $ = n[2], n = n[0]), this.setRotationX(n), this.setRotation(-f), this.setRotationZ($)
            },
            setRotationY: function (g) {
                this.setRotation(-g)
            },
            getRotationY: function () {
                return -this._64O
            },
            lookAtDirection: function (d, L) {
                L = L || es;
                var f = this, Q = vl(d);
                L === es ? (f.r3([-I(d[1] / Q), -N(d[2], d[0]) + h, 0]), f.setRotationMode("xzy")) : L === Kl ? (f.r3(0, -N(d[2], d[0]), I(d[1] / Q)), f.setRotationMode("zyx")) : L === Pq ? (f.r3(0, -N(d[2], d[0]) + Y, -I(d[1] / Q)), f.setRotationMode("zyx")) : L === Tp ? (f.r3([-I(d[1] / Q) + h, -N(d[2], d[0]) + h, 0]), f.setRotationMode("xzy")) : L === Mh && (f.r3([-I(d[1] / Q) - h, -N(d[2], d[0]) + h, 0]), f.setRotationMode("xzy")), L === Ym && (f.r3([-I(d[1] / Q) + Y, -N(d[2], d[0]) + h, Y]), f.setRotationMode("zxy"))
            },
            lookAt: function (I, i) {
                return this.lookAtDirection(sg(I, this.p3()), i)
            },
            lookAtX: function () {
                var $ = new Jd, u = new Jd, R = new Jd, z = new Mq, O = new Mq, a = new x.Math.Euler;
                return function (J, A, G) {
                    A === Pq || A === Kl ? z.makeRotationAxis(new x.Math.Vector3(0, 1, 0), Math.PI / 2) : A === Tp || A === Mh ? z.makeRotationAxis(new x.Math.Vector3(1, 0, 0), Math.PI / 2) : z.identity(), A === Mh || A === Kl || A === Ym ? ($.fromArray(this.p3()), u.fromArray(J)) : ($.fromArray(J), u.fromArray(this.p3())), O.lookAt($, u, G ? R.fromArray(G) : R.set(0, 1, 0)), a.setFromRotationMatrix(O.multiply(z), Bh.ReverseOrder(this.getRotationMode())), this.r3([a.x, a.y, a.z])
                }
            }(),
            getHost: function () {
                return this._host
            },
            setHost: function (Q) {
                var i = this;
                if (i !== Q && i._host !== Q) {
                    var U = i._host;
                    U && U._removeAttach(i), i._host = Q, i._host && i._host._addAttach(i), i.fp("host", U, Q), i.onHostChanged(U, Q)
                }
            },
            getAttaches: function () {
                return this._69O
            },
            _addAttach: function (F) {
                var D = this;
                D._69O || (D._69O = new Pf), D._69O.add(F), D.fp("attaches", o, F)
            },
            _removeAttach: function (H) {
                var P = this;
                P._69O.remove(H), P._69O.isEmpty() && delete P._69O, P.fp("attaches", H, o)
            },
            getImage: function () {
                if (this._pendingCheckImageJSON) {
                    var b = w.getImage(this._image);
                    b && (this._pendingCheckImageJSON = !1, this.getParent() instanceof Dr && this.getParent().checkPendingUpdateInfo())
                }
                return this._image
            },
            setImage: function (Z) {
                var H = this, Q = H._image, V = H.getWidth(), m = H.getHeight();
                H._image = Z, H.fp("image", Q, Z) && (null != Z && (bc(Z) || uf(Z) && /\.json$/i.test(Z)) && (this._pendingCheckImageJSON = !0), H.fp(im, V, H.getWidth()), H.fp(ns, m, H.getHeight()))
            },
            getElevation: function () {
                return this._54O
            },
            setElevation: function (i) {
                var T = this;
                if (!T._50O) {
                    T._50O = 1;
                    var p = T._54O;
                    T._54O = i, T.fp(dd, p, i), delete this._50O
                }
            },
            getRotation: function () {
                return this._64O
            },
            setRotation: function (I) {
                var l = this;
                if (!l._49O) {
                    l._49O = 1;
                    var e = l._64O;
                    l._64O = I, l.fp(pr, e, I), delete l._49O
                }
            },
            getRotationX: function () {
                return this._rotationX
            },
            setRotationX: function (I) {
                var S = this;
                if (!S._51O) {
                    S._51O = 1;
                    var c = S._rotationX;
                    S._rotationX = I, S.fp("rotationX", c, I), delete S._51O
                }
            },
            getRotationZ: function () {
                return this._53O
            },
            setRotationZ: function (b) {
                var l = this;
                if (!l._52O) {
                    l._52O = 1;
                    var x = l._53O;
                    l._53O = b, l.fp("rotationZ", x, b), delete l._52O
                }
            },
            getPosition: function () {
                return this._position
            },
            setPosition: function (d, o) {
                var q = this;
                if (!q._50I) {
                    q._50I = 1;
                    var v;
                    if (v = 2 === arguments.length ? {x: d, y: o} : d, v.x !== q._position.x || v.y !== q._position.y) {
                        var M = q._position;
                        q._position = v, q.fp(he, M, v)
                    }
                    delete q._50I
                }
            },
            translate: function (T, K) {
                var c = this._position;
                this.p(c.x + T, c.y + K)
            },
            getWidth: function () {
                var t = this;
                if (t._width >= 0) return t._width;
                var i = t.getStyle("shape3d");
                if (i) {
                    var R = Qn(i);
                    if (R && R.rawS3) return R.rawS3[0];
                    if ("billboard" === i || "plane" === i) {
                        var I = Ui(t.getStyle("shape3d.image"));
                        return I ? Iq(I, t) : 20
                    }
                }
                var I = Ui(t._image);
                return I ? Iq(I, t) : 20
            },
            setWidth: function (h) {
                var o = this, P = o._width;
                o._width = h, o.fp(im, P, h)
            },
            getHeight: function () {
                var w = this;
                if (w._height >= 0) return w._height;
                var s = w.getStyle("shape3d");
                if (s) {
                    var Y = Qn(s);
                    if (Y && Y.rawS3) return Y.rawS3[2];
                    if ("plane" === s) {
                        var $ = Ui(w.getStyle("shape3d.image"));
                        return $ ? Ne($, w) : 20
                    }
                    if ("billboard" === s) return 2
                }
                var $ = Ui(w._image);
                return $ ? Ne($, w) : 20
            },
            setHeight: function (j) {
                var I = this, A = I._height;
                I._height = j, I.fp(ns, A, j)
            },
            getTall: function () {
                var s = this;
                if (s._tall >= 0) return s._tall;
                var E = s.getStyle("shape3d");
                if (E) {
                    var R = Qn(E);
                    if (R && R.rawS3) return R.rawS3[1];
                    if ("billboard" === E) {
                        var g = Ui(s.getStyle("shape3d.image"));
                        return g ? Ne(g, s) : 20
                    }
                    if ("plane" === E) return 2
                }
                return 20
            },
            setTall: function (Z) {
                var n = this, z = n._tall;
                n._tall = Z, n.fp("tall", z, Z)
            },
            setSize: function (m, V) {
                var H = this;
                2 === arguments.length ? (H.setWidth(m), H.setHeight(V)) : (H.setWidth(m.width), H.setHeight(m.height))
            },
            getSize: function () {
                return {width: this.getWidth(), height: this.getHeight()}
            },
            setRect: function (k, O, F, N, I) {
                var s = this, A = s.getAnchor(), E = s.getScale();
                arguments.length <= 2 && (I = O, O = k.y, F = k.width, N = k.height, k = k.x);
                var v = I && E.x < 0 ? 1 - A.x : A.x, L = I && E.y < 0 ? 1 - A.y : A.y;
                s.p(k + F * v, O + N * L), I && (F /= Math.abs(E.x), N /= Math.abs(E.y)), s.setWidth(F), s.setHeight(N)
            },
            getMatrix: function () {
                var f = this, o = f._64O, U = f._position, $ = f.getScale();
                return new Cg(o, U.x, U.y, $.x, $.y)
            },
            getAnchorRect: function () {
                var Q = this, $ = Q.getWidth(), o = Q.getHeight(), M = Q.getAnchor();
                return {x: -$ * M.x, y: -o * M.y, width: $, height: o}
            },
            toLocal: function (t) {
                return this.getMatrix().tfi(t)
            },
            toGlobal: function (a) {
                return this.getMatrix().tf(a)
            },
            getAttachPosition: function () {
                var x = new Cg;
                return function (u, o, V, X) {
                    V = V || 0, X = X || 0;
                    var F = this, m = F.getAnchor(), C = F._64O, Z = F._position, H = F.getScale();
                    return x.setFromTransform(C, Z.x, Z.y).tf({
                        x: V + H.x * F.getWidth() * (u - m.x),
                        y: X + H.y * F.getHeight() * (o - m.y)
                    })
                }
            }(),
            isInRect: function (F) {
                F = this.toLocal(F);
                var j = this.getWidth(), Q = this.getHeight();
                return F.x += j * this.getAnchorX(), F.y += Q * this.getAnchorY(), !(F.x < 0 || F.y < 0 || F.x > j || F.y > Q)
            },
            getRect: function () {
                var B = this, C = B.getWidth(), v = B.getHeight(), q = B.getAnchor(),
                    W = {x: -C * q.x, y: -v * q.y, width: C, height: v}, S = B.getMatrix();
                return W = an([S.tf(W.x, W.y), S.tf(W.x + W.width, W.y), S.tf(W.x + W.width, W.y + W.height), S.tf(W.x, W.y + W.height)])
            },
            getAnchorElevation: function () {
                return this._anchorElevation
            },
            getAnchor3d: function () {
                var _ = this, V = _.getAnchor(), g = _._anchorElevation;
                return {x: V.x, y: g, z: V.y}
            },
            setAnchorElevation: function (Y) {
                var c = this, v = c._anchorElevation;
                return v !== Y ? (c._anchorElevation = Y, c.fp("anchorElevation", v, Y), !0) : !1
            },
            setAnchor3d: function (m, w, H, f) {
                var t, I = this;
                "number" == typeof m ? t = {x: m, y: w, z: H} : (t = m.length ? {x: m[0], y: m[1], z: m[2]} : m, f = w);
                var A = I.getDataModel();
                A && A.beginTransaction();
                var o = I.getAnchor3d(), $ = I.setAnchor(t.x, t.z);
                if (I.setAnchorElevation(t.y) && ($ = !0), $ && f && !ae) {
                    I.getAnchor3d();
                    var j = Zr(I), l = Jg([t.x - o.x, t.y - o.y, t.z - o.z], j);
                    I.p3(l)
                }
                return A && A.endTransaction(), $
            },
            getAnchor: function () {
                var o = this;
                if (o.hasOwnProperty("_anchor")) return o._anchor;
                var n = Ui(o._image);
                return n && n.anchorX !== v ? {x: n.anchorX, y: n.anchorY} : o._anchor
            },
            setAnchor: function (w, s, e) {
                var h, y = this;
                "number" == typeof w ? h = {x: w, y: s} : (h = w.length ? {x: w[0], y: w[1]} : w, e = s);
                var i = y.getAnchor();
                if (i.x !== h.x || i.y !== h.y) {
                    var $ = y.getDataModel();
                    if ($ && $.beginTransaction(), y._anchor = h, y.fp("anchor", i, h), e && !ae) {
                        var M = y.getPosition(), H = y.getSize(), L = y.getRotation(), O = y.getScale(),
                            R = -H.width * (i.x - h.x) * O.x, U = -H.height * (i.y - h.y) * O.y, t = J(L), C = c(L);
                        y.setPosition(M.x + C * R - t * U, M.y + t * R + C * U)
                    }
                    return $ && $.endTransaction(), !0
                }
                return !1
            },
            getScale: function () {
                return this._scale
            },
            setScale: function (u, Y) {
                var W, F = this;
                W = 2 === arguments.length ? {x: u, y: Y} : u;
                var $ = F.getScale();
                ($.x !== W.x || $.y !== W.y) && (F._scale = W, F.fp("scale", $, W))
            },
            getScaleTall: function () {
                return this._scaleTall
            },
            getScale3d: function () {
                var g = this, H = g._scaleTall, Q = g.getScale();
                return [Q.x, H, Q.y]
            },
            getFinalScale3d: function () {
                var K = this, B = K.s3(), W = K._dynamicScale3d, c = K.getScale3d();
                return B && (c[0] *= B[0], c[1] *= B[1], c[2] *= B[2]), W && (c[0] *= W[0], c[1] *= W[1], c[2] *= W[2]), c
            },
            getFinalRotation3d: function () {
                var l = this;
                return l._dynamicRotation || l.r3()
            },
            setScaleTall: function (o) {
                var E = this, h = E._scaleTall;
                h !== o && (E._scaleTall = o, E.fp("scaleTall", h, o))
            },
            setScale3d: function (X, q, d) {
                var Y, b = this;
                Y = "number" == typeof X ? {x: X, y: q, z: d} : X.length ? {
                    x: X[0],
                    y: X[1],
                    z: X[2]
                } : X, b.setScaleTall(Y.y), b.setScale(Y.x, Y.z)
            },
            getCorners: function (y, O) {
                y == o && (y = 0), O == o && (O = y);
                var Y = this, S = Y.getAnchor(), m = Y.getWidth(), l = Y.getHeight(), J = -m * S.x - y,
                    B = -l * S.y - O, L = m + 2 * y, e = l + 2 * O, q = Y.getMatrix();
                return [q.tf(J, B), q.tf(J, B + e), q.tf(J + L, B + e), q.tf(J + L, B)]
            },
            getEditControlPoints: function (r, s, b) {
                s == o && (s = 0), b == o && (b = s);
                var $ = this, t = $.getAnchor(), j = $.getWidth(), H = $.getHeight(), U = -j * t.x - s,
                    F = -H * t.y - b, h = j + 2 * s, T = H + 2 * b;
                if (r) return [{x: U, y: F}, {x: U, y: 0}, {x: U, y: F + T}, {x: 0, y: F + T}, {
                    x: U + h,
                    y: F + T
                }, {x: U + h, y: 0}, {x: U + h, y: F}, {x: 0, y: F}];
                var y = $.getMatrix();
                return [y.tf(U, F), y.tf(U, 0), y.tf(U, F + T), y.tf(0, F + T), y.tf(U + h, F + T), y.tf(U + h, 0), y.tf(U + h, F), y.tf(0, F)]
            },
            rotateAt: function (k, a, Q) {
                var r = this, D = r._position, U = r._64O, z = new Cg(U, D.x, D.y).tf(k, a), A = e(k * k + a * a),
                    j = N(D.y - z.y, D.x - z.x) + Q;
                r.setRotation(U + Q), r.p(z.x + A * c(j), z.y + A * J(j))
            },
            onParentChanged: function () {
                ve.superClass.onParentChanged.apply(this, arguments), this._8I()
            },
            onPropertyChanged: function () {
                var U = {};
                return "width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function (X) {
                    U[X] = !0
                }), function (L) {
                    var y = this;
                    ve.superClass.onPropertyChanged.call(y, L), U[L.property] && !y._layoutUpdating && y.updateLayoutParameters(null, L.property), y._69O && y._69O.each(function (u) {
                        u.handleHostPropertyChange(L)
                    }), y._49I && y._49I.each(function (e) {
                        e.fp("agentChange", !0, !1)
                    })
                }
            }(),
            onHostChanged: function () {
                this.updateAttach()
            },
            handleHostPropertyChange: function (d) {
                this.updateAttach(d)
            },
            onStyleChanged: function (N) {
                ve.superClass.onStyleChanged.apply(this, arguments), Or[N] && this.updateAttach()
            },
            updateAttach: function (w) {
                var L = this;
                L._51I || ae || (L._51I = 1, L._71O(w), delete L._51I)
            },
            _71O: function (t) {
                var P, v, R, Z, d, e, n = this, h = n._host, u = t ? t.property : o, A = t ? t.oldValue : o,
                    c = t ? t.newValue : o;
                if (h instanceof x.Grid) {
                    if (u === dd) n.setElevation(n._54O + c - A); else if (!t || el[u]) {
                        if (P = n.s("attach.row.index"), v = n.s("attach.column.index"), R = h.getCellRect(P, v), !R) return;
                        Z = n.s("attach.row.span"), d = n.s("attach.column.span"), (1 !== Z || 1 !== d) && (R = fs(R, h.getCellRect(P + Z - 1, v + d - 1))), Bm(R, n, "attach.padding", 1), n.setRect(R)
                    }
                } else if (h instanceof rr && (e = n.s("attach.index")) >= 0 && (!t || Ti[u])) {
                    var p = n.s("attach.thickness");
                    p != o && n.setHeight(h.getThickness() * p);
                    var Y = n.s("attach.offset"), W = h.getPoints(), I = W.size();
                    if (I > e) {
                        var q = W.get(e), O = I === e + 1 ? W.get(0) : W.get(e + 1), r = [O.x - q.x, O.y - q.y],
                            C = vl(r);
                        if (C) {
                            n.s("attach.offset.relative") && (Y *= C), n.s("attach.offset.opposite") && (Y = C - Y);
                            var S = {x: q.x + r[0] / C * Y, y: q.y + r[1] / C * Y}, k = n.s("attach.gap");
                            k && (n.s("attach.gap.relative") && (k *= h.getThickness()), S = le(o, S, O, k)), n.p(S), n.setRotation(N(r[1], r[0]))
                        }
                    }
                } else t && (u === he ? n.translate(c.x - A.x, c.y - A.y) : u === dd ? n.setElevation(n._54O + c - A) : Ld[u] ? n._11Q(h, u, c - A) : ("anchor" === u || "width" === u || "height" === u || "scale" === u) && n.layout(h))
            },
            _11Q: function () {
                var Z = new x.Math.Euler, v = x.Math.Euler.ReverseOrder, P = new x.Math.Vector2, R = new x.Math.Vector2;
                return function (r, u, F) {
                    var C = this, V = r.p3(), Y = r.r3(), w = C.p3(), y = C.r3();
                    if (u === pr && (u = "rotationY", F = -F), (u === pr || "rotationY" === u) && 0 === y[0] && 0 === y[2] && 0 === Y[0] && 0 === Y[2] && 0 === w[1] && 0 === V[1]) return C.setRotation(-y[1] - F), P.set(w[0], w[2]).rotateAround(R.set(V[0], V[2]), -F), C.p(P.x, P.y), void 0;
                    var O = fb[r.getRotationMode()], $ = O[0], g = O[1], L = O[2], c = Lr[$], U = Lr[g], _ = Lr[L],
                        G = Nd();
                    u === pr + $ ? (_(G, Y[Xc[L]]), U(G, Y[Xc[g]]), c(G, F), U(G, -Y[Xc[g]]), _(G, -Y[Xc[L]])) : u === pr + g ? (_(G, Y[Xc[L]]), U(G, F), _(G, -Y[Xc[L]])) : u === pr + L && _(G, F);
                    var K = sg(w, V);
                    Jg(K, G), C.p3(V[0] + K[0], V[1] + K[1], V[2] + K[2]);
                    var Q = C.getRotationMode();
                    Sr(G, C.r3(), Q), Z.setFromRotationMatrix(G, v(Q)), C.r3([Z.x, Z.y, Z.z])
                }
            }(),
            isHostOn: function (S) {
                var M = this;
                if (M._host && S && S._69O) for (var G = {}, D = M._host; D && D !== M && !G[D._id];) {
                    if (D === S) return !0;
                    G[D._id] = D, D = D._host
                }
                return !1
            },
            isLoopedHostOn: function (y) {
                return this.isHostOn(y) && y.isHostOn(this)
            },
            getScaledSize: function () {
                var A = this.getSize(), Q = this.getScale();
                return A.width *= Math.abs(Q.x), A.height *= Math.abs(Q.y), A
            },
            layout: function (p) {
                if (p = p || this.getHost()) {
                    var L = this, J = L.s("layout.h") || "center", K = L.s("layout.v") || "center";
                    if ("center" !== J || "center" !== K) {
                        var E = new x.Math.Vector2, f = p.getPosition(), $ = p.getAnchor(), b = p.getScaledSize();
                        L.getPosition();
                        var c, Z, g, U, T, Q = 1, O = 1;
                        switch (L._layoutUpdating = !0, J) {
                            case"left":
                                E.setX(L._layoutHValue - $.x * b.width);
                                break;
                            case"right":
                                E.setX((1 - $.x) * b.width - L._layoutHValue);
                                break;
                            case"leftright":
                                c = b.width - L._layoutHValue[2], g = L.getRotation() - p.getRotation(), U = Math.abs(Math.sin(g)), T = Math.abs(Math.cos(g)), Q += T * c / L._layoutHValue[3], O += U * c / L._layoutHValue[4], E.setX(L._layoutHValue[1] + (L._layoutHValue[5] - $.x) * b.width);
                                break;
                            case"center":
                                E.setX((.5 - $.x) * b.width - L._layoutHValue);
                                break;
                            case"scale":
                                g = L.getRotation() - p.getRotation(), U = Math.abs(Math.sin(g)), T = Math.abs(Math.cos(g)), E.setX((.5 - $.x) * b.width - L._layoutHValue[1] * b.width / L._layoutHValue[0]), Z = b.width / L._layoutHValue[2] - 1, Q += T * Z, O += U * Z
                        }
                        switch (K) {
                            case"top":
                                E.setY(L._layoutVValue - $.y * b.height);
                                break;
                            case"bottom":
                                E.setY((1 - $.y) * b.height - L._layoutVValue);
                                break;
                            case"topbottom":
                                g || (g = L.getRotation() - p.getRotation(), U = Math.abs(Math.sin(g)), T = Math.abs(Math.cos(g))), c = b.height - L._layoutVValue[2], Q += U * c / L._layoutVValue[3], O += T * c / L._layoutVValue[4], E.setY(L._layoutVValue[1] + (L._layoutVValue[5] - $.y) * b.height);
                                break;
                            case"center":
                                E.setY((.5 - $.y) * b.height - L._layoutVValue);
                                break;
                            case"scale":
                                g || (g = L.getRotation() - p.getRotation(), U = Math.abs(Math.sin(g)), T = Math.abs(Math.cos(g))), E.setY((.5 - $.y) * b.height - L._layoutVValue[1] * b.height / L._layoutVValue[0]), Z = b.height / L._layoutVValue[2] - 1, Q += U * Z, O += T * Z
                        }
                        (1 !== Q || 1 !== O) && ("leftright" === J || "scale" === J ? L.setSize(L._layoutHValue[3] * Q, L._layoutHValue[4] * O) : L.setSize(L._layoutVValue[3] * Q, L._layoutVValue[4] * O)), E.rotateAround(null, p.getRotation()), this.setPosition(E.x + f.x, E.y + f.y), L._layoutUpdating = v
                    }
                }
            },
            updateLayoutParameters: function (w, y) {
                if (w = w || this.getHost()) {
                    var t = this, U = t.s("layout.h"), d = t.s("layout.v");
                    if (U || d) {
                        var V, L, W, B, e, h, l = new x.Math.Vector2, O = w.getPosition(), R = w.getAnchor(),
                            I = w.getScaledSize(), C = t.getPosition(), H = t.getSize();
                        switch (l.set(C.x - O.x, C.y - O.y), l.rotateAround(null, -w.getRotation()), U) {
                            case"left":
                                t._layoutHValue = l.x + R.x * I.width;
                                break;
                            case"right":
                                t._layoutHValue = -l.x + (1 - R.x) * I.width;
                                break;
                            case"center":
                                t._layoutHValue = -l.x + (.5 - R.x) * I.width;
                                break;
                            case"leftright":
                            case"scale":
                                "scale" === U ? V = -l.x + (.5 - R.x) * I.width : (L = t.getAnchor(), W = t.getRotation() - w.getRotation(), B = Math.cos(W), e = Math.sin(W), h = -Math.min(-L.x * B + L.y * e, -L.x * B - (1 - L.y) * e, (1 - L.x) * B + L.y * e, (1 - L.x) * B - (1 - L.y) * e), V = l.x - (h - R.x) * I.width), "position" === y && "object" == typeof t._layoutHValue ? (t._layoutHValue[0] = I.width, t._layoutHValue[1] = V) : t._layoutHValue = [I.width, V, I.width, H.width, H.height, h]
                        }
                        switch (d) {
                            case"top":
                                t._layoutVValue = l.y + R.y * I.height;
                                break;
                            case"bottom":
                                t._layoutVValue = -l.y + (1 - R.y) * I.height;
                                break;
                            case"center":
                                t._layoutVValue = -l.y + (.5 - R.y) * I.height;
                                break;
                            case"topbottom":
                            case"scale":
                                "scale" === d ? V = -l.y + (.5 - R.y) * I.height : (W || (L = t.getAnchor(), W = t.getRotation() - w.getRotation(), B = Math.cos(W), e = Math.sin(W)), h = -Math.min(-L.x * e - L.y * B, -L.x * e + (1 - L.y) * B, (1 - L.x) * e - L.y * B, (1 - L.x) * e + (1 - L.y) * B), V = l.y - (h - R.y) * I.height), "position" === y && "object" == typeof t._layoutVValue ? (t._layoutVValue[0] = I.height, t._layoutVValue[1] = V) : t._layoutVValue = [I.height, V, I.height, H.width, H.height, h]
                        }
                    }
                }
            },
            getSerializableProperties: function () {
                var y = ve.superClass.getSerializableProperties.call(this);
                return Mm(y, {
                    image: 1,
                    host: 1,
                    rotation: 1,
                    rotationX: 1,
                    rotationZ: 1,
                    rotationMode: 1,
                    position: 1,
                    anchor: 1,
                    anchorElevation: 1,
                    scale: 1,
                    scaleTall: 1,
                    _width: 1,
                    _height: 1,
                    _tall: 1,
                    elevation: 1
                }), y
            }
        });
        var sq = x.Edge = function (f, e) {
            var t = this;
            yp(sq, t), t.setSource(f), t.setTarget(e)
        };
        rb("Edge", xk, {
            ms_edge: !0, _icon: "edge_icon", getUIClass: function () {
                return Rd
            }, _22Q: function () {
                return er
            }, getSource: function () {
                return this._source
            }, getTarget: function () {
                return this._target
            }, getSourceAgent: function () {
                return this._40I
            }, getTargetAgent: function () {
                return this._41I
            }, canSetSourceTarget: function (F) {
                if (F === this) return !1;
                if (Un(F)) return !0;
                for (var E, m, Z, w, q, f = [this], j = -1, k = 0; k > j;) if (j++, E = f[j], m = E._44I) for (m = m.getArray(), w = 0, q = m.length; q > w; w++) if (Z = m[w], xf(Z) && !(f.indexOf(Z) >= 0)) {
                    if (Z === F) return !1;
                    f.push(Z), k++
                }
                return !0
            }, setSource: function (u) {
                var i = this;
                if (i._source !== u && i.canSetSourceTarget(u)) {
                    var H = i._source;
                    i._source = u, H && H._16I(i), u && u._2I(i), i._7I(), i.fp("source", H, u)
                }
            }, setTarget: function (J) {
                var $ = this;
                if ($._target !== J && $.canSetSourceTarget(J)) {
                    var L = $._target;
                    $._target = J, L && L._18I($), J && J._4I($), $._7I(), $.fp("target", L, J)
                }
            }, isLooped: function () {
                var V = this;
                return V._source === V._target && Un(V._source) && Un(V._target)
            }, onPropertyChanged: function () {
                var h = this;
                h._49I && h._49I.each(function (O) {
                    O.fp("agentChange", !0, !1)
                })
            }, _7I: function () {
                var x, X = this, e = xg(X);
                X._40I !== e && (x = this._40I, x && x._15I(X), X._40I = e, e && e._1I(X), X.fp("sourceAgent", x, e), rm(x, X._41I), rm(e, X._41I));
                var b = Gm(X);
                X._41I !== b && (x = X._41I, x && x._17I(X), X._41I = b, b && b._3I(X), X.fp("targetAgent", x, b), rm(x, X._40I), rm(b, X._40I))
            }, _22I: function (I) {
                this._52I = I, this.fp("edgeGroup", !0, !1)
            }, getEdgeGroup: function () {
                return this._52I
            }, isEdgeGroupHidden: function () {
                var G = this;
                return G._52I && G._52I.get(0) !== G && !G.getStyle(od)
            }, getEdgeGroupSize: function () {
                return this._52I ? this._52I.size() : 1
            }, getEdgeGroupIndex: function () {
                return this._52I ? this._52I.indexOf(this) : 0
            }, isEdgeGroupAgent: function () {
                var X = this, z = X._52I;
                return z && !X.getStyle(od) && z.size() > 1 && X === z.get(0)
            }, toggle: function () {
                var N = this._52I, m = !this.s(od);
                N && N.size() > 1 && (N.each(function (x) {
                    x.s(od, m)
                }), N.getSiblings().each(function (j) {
                    j !== N && j.each(function (d) {
                        d.fp("edgeGroup", o, j)
                    })
                }))
            }, setStyle: function (M, l) {
                (M === Ge || "edge.segments" === M) && (l = Jo(l)), sq.superClass.setStyle.call(this, M, l)
            }, onStyleChanged: function (B) {
                sq.superClass.onStyleChanged.apply(this, arguments), kg[B] && rm(this._41I, this._40I)
            }, getSerializableProperties: function () {
                var P = sq.superClass.getSerializableProperties.call(this);
                return Mm(P, {source: 1, target: 1}), P
            }
        });
        var qe = x.Group = function () {
            yp(qe, this)
        };
        rb("Group", ve, {
            _image: "group_image", _icon: "group_icon", _57O: !1, getUIClass: function () {
                return Sq
            }, onChildAdded: function () {
                qe.superClass.onChildAdded.apply(this, arguments), this._81I()
            }, onChildRemoved: function () {
                qe.superClass.onChildRemoved.apply(this, arguments), this._81I()
            }, _81I: function () {
                var T = this;
                if (!T._54I && !ae) {
                    var M = T.getChildrenRect();
                    M && (T._53I = 1, T.p(Sn(T.s("group.position"), M, T.getSize())), delete T._53I)
                }
            }, getChildrenRect: function () {
                var F, M = this;
                return M.eachChild(function (c) {
                    Un(c) && (F = fs(F, M.getChildRect(c)))
                }), F
            }, getChildRect: function (E) {
                var z;
                return Un(E) && E.s(fj) && (Em(E) && E.isExpanded() && E.eachChild(function ($) {
                    z = fs(z, E.getChildRect($))
                }), !z && E.getRect && (z = E.getRect())), z
            }, setPosition: function (B, Z) {
                var e = this;
                if (!e._54I) {
                    var h;
                    h = 2 === arguments.length ? {
                        x: B,
                        y: Z
                    } : B, ae || e._53I || (e._54I = 1, Xg(e._children, h.x - e._position.x, h.y - e._position.y), delete e._54I), qe.superClass.setPosition.call(this, h)
                }
            }, toggle: function () {
                this.setExpanded(!this.isExpanded())
            }, isExpanded: function () {
                return this._57O
            }, setExpanded: function (D) {
                var W = this;
                if (W._57O !== D) {
                    var Y = W._57O;
                    W._57O = D, W.fp("expanded", Y, W._57O), W._fireInvalidateDeep(), W._8I()
                }
            }, _fireInvalidateDeep: function () {
                this.eachChild(function (B) {
                    Em(B) ? B._fireInvalidateDeep() : B.iv()
                })
            }, _8I: function () {
                qe.superClass._8I.call(this), this.eachChild(function (W) {
                    Un(W) && W._8I()
                })
            }, onStyleChanged: function (a) {
                qe.superClass.onStyleChanged.apply(this, arguments), "group.position" === a && this._81I()
            }, getSerializableProperties: function () {
                var U = qe.superClass.getSerializableProperties.call(this);
                return U.expanded = 1, U
            }
        });
        var yg = x.Block = function () {
            yp(yg, this)
        };
        rb("Block", ve, {
            _icon: "block_icon",
            _clickThroughEnabled: !1,
            _syncSize: !0,
            ms_ac: ["clickThroughEnabled", "syncSize"],
            getUIClass: function () {
                return Pe
            },
            onChildAdded: function () {
                yg.superClass.onChildAdded.apply(this, arguments), this.updateFromChildren()
            },
            onChildRemoved: function () {
                yg.superClass.onChildRemoved.apply(this, arguments), this.updateFromChildren()
            },
            updateFromChildren: function () {
                var p = this;
                if (!ae && !p._updatingToChildren && p._syncSize && !p._freezeSyncFromChildren) {
                    var V, I, s, H, $, C = [], v = p.getRotation();
                    if (p.eachChild(function (e) {
                        Un(e) && C.push.apply(C, e.getCorners())
                    }), C.length) {
                        p._updatingFromChildren = 1;
                        var D = c(-v), E = J(-v), S = 1 / 0, N = -1 / 0, j = 1 / 0, u = -1 / 0;
                        for (H = 0, $ = C.length; $ > H; H++) s = C[H], V = s.x, I = s.y, s.x = D * V - E * I, s.y = E * V + D * I, S = g(S, s.x), N = n(N, s.x), j = g(j, s.y), u = n(u, s.y);
                        var l = p.getScale();
                        p.setSize(M((N - S) / l.x), M((u - j) / l.y));
                        var W;
                        l.x < 0 && (W = S, S = N, N = W), l.y < 0 && (W = j, j = u, u = W), D = c(v), E = J(v);
                        var x = p.getAnchor();
                        V = S + (N - S) * x.x, I = j + (u - j) * x.y, p.setPosition(D * V - E * I, E * V + D * I), delete p._updatingFromChildren
                    }
                }
            },
            setPosition: function (j, V) {
                var h = this;
                if (!h._updatingToChildren) {
                    var R;
                    R = 2 === arguments.length ? {
                        x: j,
                        y: V
                    } : j, ae || h._updatingFromChildren || (h._updatingToChildren = 1, Xg(h._children, R.x - h._position.x, R.y - h._position.y), delete h._updatingToChildren), yg.superClass.setPosition.call(this, R)
                }
            },
            setWidth: function (z) {
                return this.setSize(z, this.getHeight())
            },
            setHeight: function (H) {
                return this.setSize(this.getWidth(), H)
            },
            setSize: function (l, I) {
                1 > l && (l = 1), 1 > I && (I = 1);
                var C = this;
                if (!C._updatingToChildren) {
                    2 !== arguments.length && (I = l.height, l = l.width);
                    var v = C.getWidth(), S = C.getHeight();
                    if (l !== v && yg.superClass.setWidth.call(C, l), I !== S && yg.superClass.setHeight.call(C, I), !ae && !C._updatingFromChildren) {
                        C._updatingToChildren = 1;
                        var Q = l / v, y = I / S;
                        C._adjustChildScaleOrSize(Q, y, "size"), delete C._updatingToChildren, C.updateFromChildren()
                    }
                }
            },
            _adjustChildScaleOrSize: function (h, o, A) {
                var d = this;
                if (d._syncSize) {
                    var G = d.getPosition(), t = d.getRotation();
                    d.getScale(), d.eachChild(function (y) {
                        if (Un(y)) {
                            var O = y.getPosition(), C = y.getRotation(), P = y.getWidth(), V = y.getHeight(),
                                X = y.getScale(), Q = X.x * P, U = X.y * V, Y = new Cg(C, O.x, O.y, Q, U);
                            Y.translate(-G.x, -G.y), Y.rotate(-t), C = N(Y.b * Math.sign(Q), Y.a * Math.sign(Q)), Y.scale(h, o);
                            var b, M, B, d = c(C);
                            if (Math.abs(d) < .001 ? (b = J(C), M = Y.b / b, B = -Y.c / b) : (M = Y.a / d, B = Y.d / d), "scale" === A) y.setScale(M / P, B / V); else if ("size" === A) {
                                var i = M / X.x, T = B / X.y;
                                y.setScale(wn(M) * Math.abs(X.x), wn(B) * Math.abs(X.y)), y instanceof x.Shape ? (y.setWidthForce(Math.max(Math.abs(i), 1e-5)), y.setHeightForce(Math.max(Math.abs(T), 1e-5))) : y.setSize(Math.max(.01, Math.abs(i)), Math.max(.01, Math.abs(T)))
                            }
                            Y.rotate(t), Y.translate(G.x, G.y), y.setPosition(Y.tx, Y.ty)
                        }
                    })
                }
            },
            _calcChangeFactor: function (p, s, O, l) {
                var f, $, P, W;
                return f = M(p), $ = M(O), P = f > $ ? f / $ : $ / f, f = M(s), $ = M(l), W = f > $ ? f / $ : $ / f, n(P, W)
            },
            setAnchor: function () {
                var w = this;
                if (!w._updatingToChildren) {
                    var u = w.getAnchor();
                    if (yg.superClass.setAnchor.apply(w, arguments), !ae && !w._updatingFromChildren && w._syncSize) {
                        w._updatingToChildren = 1;
                        var t = w.getAnchor();
                        w.getPosition();
                        var O = w.getSize(), s = w.getScale(), D = w.getRotation(), _ = -O.width * s.x * (u.x - t.x),
                            X = -O.height * s.y * (u.y - t.y), V = J(D), b = c(D), U = b * _ - V * X, e = V * _ + b * X;
                        w.eachChild(function (W) {
                            if (Un(W)) {
                                var v = W.getPosition();
                                W.setPosition(v.x - U, v.y - e)
                            }
                        }), delete w._updatingToChildren
                    }
                }
            },
            setRotation: function (L) {
                var B = this;
                if (!B._updatingToChildren) {
                    var z = B.getRotation();
                    if (yg.superClass.setRotation.apply(B, arguments), !ae && !B._updatingFromChildren) {
                        B._updatingToChildren = 1;
                        var i = B.getPosition(), n = L - z;
                        B.eachChild(function (c) {
                            if (Un(c)) {
                                var D = c.getMatrix();
                                D.translate(-i.x, -i.y), D.rotate(n), D.translate(i.x, i.y);
                                var P = Math.sign(c.getScale().x);
                                c.setRotation(N(D.b * P, D.a * P)), c.setPosition(D.tx, D.ty)
                            }
                        }), delete B._updatingToChildren
                    }
                }
            },
            setScale: function (w, z) {
                var h = this;
                if (!h._updatingToChildren) {
                    null == z && (z = w.y, w = w.x);
                    var $ = h.getScale();
                    if (M(w) < .01 && (w = .01 * (wn(w) || wn($.x))), M(z) < .01 && (z = .01 * (wn(z) || wn($.y))), yg.superClass.setScale.call(h, w, z), !ae && !h._updatingFromChildren) {
                        h._updatingToChildren = 1;
                        var i = w / $.x, K = z / $.y;
                        h._adjustChildScaleOrSize(i, K, "size"), delete h._updatingToChildren, h.updateFromChildren()
                    }
                }
            },
            getSerializableProperties: function () {
                var j = yg.superClass.getSerializableProperties.call(this);
                return j.clickThroughEnabled = 1, j.syncSize = 1, j
            }
        });
        var Nh = x.Grid = function () {
            yp(x.Grid, this)
        };
        rb("Grid", ve, {
            IRotatable: !1, _icon: "grid_icon", _image: o, getUIClass: function () {
                return Yl
            }, setRotation: function () {
            }, getCellRect: function (g, w) {
                var D = this, K = D.s("grid.row.count"), E = D.s("grid.column.count");
                if (0 >= K || 0 >= E || 0 > g || g >= K || 0 > w || w >= E) return o;
                var v, c, Q, q = D.getRect(), A = D.s("grid.row.percents"), t = D.s("grid.column.percents");
                if (Bm(q, D, "grid.border", -1), A && A._as && (A = A._as), t && t._as && (t = t._as), A && A.length === K) {
                    for (Q = 0, v = 0; g > v; v++) Q += q.height * A[v];
                    q.y += Q, q.height = q.height * A[g]
                } else q.height = q.height / K, q.y += q.height * g;
                if (t && t.length === E) {
                    for (c = 0, v = 0; w > v; v++) c += q.width * t[v];
                    q.x += c, q.width = q.width * t[w]
                } else q.width = q.width / E, q.x += q.width * w;
                return gh(q, -D.s("grid.gap")), q
            }
        });
        var Md = x.Text = function () {
            yp(Md, this), this.setSize(100, 50), this.s("text", "TEXT")
        };
        rb("Text", ve, {
            _icon: "text_icon", _image: "__text__", getUIClass: function () {
                return wl
            }, setWidth: function (O) {
                O || (O = .001), Md.superClass.setWidth.call(this, O)
            }, setHeight: function (B) {
                B || (B = .001), Md.superClass.setHeight.call(this, B)
            }, toLabel: function () {
                return this._displayName || this._name || this.s("text")
            }
        }), Rc("__text__", {
            width: {
                value: 100, isSafeFunc: !0, func: function (P) {
                    return P._width
                }
            },
            height: {
                value: 50, isSafeFunc: !0, func: function (H) {
                    return H._height
                }
            },
            comps: [{
                type: "text",
                relative: !0,
                rect: [0, 0, 1, 1],
                text: {func: "style@text"},
                align: {func: "style@text.align"},
                vAlign: {func: "style@text.vAlign"},
                color: {func: "style@text.color"},
                font: {func: "style@text.font"},
                shadow: {func: "style@text.shadow"},
                shadowColor: {func: "style@text.shadow.color"},
                shadowBlur: {func: "style@text.shadow.blur"},
                shadowOffsetX: {func: "style@text.shadow.offset.x"},
                shadowOffsetY: {func: "style@text.shadow.offset.y"},
                scaleX: {func: "style@text.scale.x"},
                scaleY: {func: "style@text.scale.y"}
            }]
        });
        var rr = x.Shape = function () {
            yp(rr, this), this._59O = new Pf
        };
        rr.__de__ = li, rb("Shape", ve, {
            ms_ac: ["thickness", "closePath"],
            _icon: "shape_icon",
            _thickness: 10,
            _closePath: !1,
            getUIClass: function () {
                return Zf
            },
            _22Q: function () {
                return us
            },
            getLength: function (Z) {
                return tp(vi(this._59O, this._58O, Z, this._closePath))
            },
            getSegments: function () {
                return this._58O
            },
            toSegments: function () {
                var r = this._58O;
                return r ? new Pf(r._as.slice(0)) : r
            },
            setSegments: function (F) {
                var p = this._58O;
                F = F ? Ll(F) ? new Pf(F.slice(0)) : new Pf(F._as.slice(0)) : null, (p && F && p._as.join(",") !== F._as.join(",") || p !== F) && (this._58O = F, this.fp("segments", p, F))
            },
            getPoints: function () {
                return this._59O
            },
            toPoints: function () {
                var N = this._59O;
                return new Pf(N._as.slice(0))
            },
            setPoints: function (t, j) {
                var n = this, X = n._59O;
                t = t ? Ll(t) ? new Pf(t.slice(0)) : new Pf(t._as.slice(0)) : new Pf;
                var $, K, Y, w, i, O;
                j && ($ = n.getPosition(), O = new Cg(n.getRotation(), 0, 0, n.getScale().x, n.getScale().y)), (X && t && X._as.join(",") !== t._as.join(",") || X !== t) && (n._59O = t, n.fs(), n.fp("points", X, t)), j && (K = n.getPosition(), Y = K.x - $.x, w = K.y - $.y, i = O.tf(Y, w), n.setPosition(K.x - Y + i.x, K.y - w + i.y))
            },
            addPoint: function (s, P, n) {
                var t = this.toPoints();
                t.add(s, P), this.setPoints(t, n)
            },
            setPoint: function (i, f, T) {
                var _ = this.toPoints();
                _.set(i, f), this.setPoints(_, T)
            },
            removePointAt: function (B) {
                var m = this.toPoints();
                m.removeAt(B), this.setPoints(m)
            },
            setWidthForce: function (p) {
                var y = this;
                if (!y._55I && !ae && y.getWidth()) {
                    y._55I = 1;
                    var G = y._position.x, B = p / y.getWidth(), t = y.toPoints(), h = new Pf;
                    t.each(function (q) {
                        h.add({x: (q.x - G) * B + G, y: q.y, e: q.e})
                    }), y.setPoints(h), Bi(y, [B, 0, 0, 1, G * (1 - B), 0]), y.fs(), delete y._55I
                }
                rr.superClass.setWidth.call(y, p)
            },
            setWidth: function (b) {
                return this.setWidthForce(1 > b ? 1 : b)
            },
            setHeightForce: function (y) {
                var O = this;
                if (!O._55I && !ae && O.getHeight()) {
                    O._55I = 1;
                    var l = O._position.y, L = y / O.getHeight(), V = O.toPoints(), x = new Pf;
                    V.each(function (b) {
                        x.add({x: b.x, y: (b.y - l) * L + l, e: b.e})
                    }), O.setPoints(x), Bi(O, [1, 0, 0, L, 0, l * (1 - L)]), O.fs(), delete O._55I
                }
                rr.superClass.setHeight.call(O, y)
            },
            setHeight: function (K) {
                return this.setHeightForce(1 > K ? 1 : K)
            },
            setAnchorElevation: function (l) {
                var i = this;
                i._55I = !0;
                var O = i._updatingAnchor3d, o = !ae && !O;
                if (o) {
                    var F, M = l, z = i.getAnchorElevation(), D = i.getTall();
                    F = D * (z - M), i.shiftPointsElevation(F)
                }
                var v = rr.superClass.setAnchorElevation.apply(i, arguments);
                return O || delete i._55I, v
            },
            getShapeElevation: function () {
                var F = this, Y = F._54O;
                return Y - (F.getTall() || 0) * (F._anchorElevation - .5)
            },
            setAnchor3d: function (Y, b, X, p) {
                var P, M = this;
                "number" == typeof Y ? P = {x: Y, y: b, z: X} : (P = Y.length ? {
                    x: Y[0],
                    y: Y[1],
                    z: Y[2]
                } : Y, p = b), M._55I = !0, M._updatingAnchor3d = !0;
                var W = M.getDataModel();
                if (W && W.beginTransaction(), !ae) {
                    var B = M.getAnchor3d(), a = M.getSize(), x = M.getTall(), t = a.width * (B.x - P.x),
                        L = a.height * (B.z - P.z), Z = x * (B.y - P.y);
                    p || M.shiftPoints(t, L, Z);
                    var h = M.p3()
                }
                var m = rr.superClass.setAnchor3d.apply(M, arguments);
                if (!ae && p) {
                    var T = M.p3();
                    M.shiftPoints(T[0] - h[0] + t, T[2] - h[2] + L, T[1] - h[1] + Z)
                }
                return W && W.endTransaction(), delete M._updatingAnchor3d, delete M._55I, m
            },
            setAnchor: function (E, h, w) {
                var M = this;
                M._55I = !0;
                var o = M._updatingAnchor3d, J = !ae && !o;
                if (J) {
                    var S, k, f;
                    "number" == typeof E ? f = {x: E, y: h} : (f = E.length ? {x: E[0], y: E[1]} : E, w = h);
                    var C = M.getAnchor(), $ = M.getSize();
                    S = $.width * (C.x - f.x), k = $.height * (C.y - f.y), w || M.shiftPoints(S, k);
                    var T = M.getPosition()
                }
                var A = rr.superClass.setAnchor.apply(M, arguments);
                if (J) {
                    var d = M.getPosition();
                    w && M.shiftPoints(d.x - T.x + S, d.y - T.y + k)
                }
                return o || delete M._55I, A
            },
            shiftPoints: function (x, X, L) {
                var M = this, m = M.getElevation() || 0, l = M.toPoints(), Y = new Pf;
                l.each(function (W) {
                    var b = W.e;
                    L && (b = (b == o ? m : b) + L), Y.add({x: W.x + x, y: W.y + X, e: b})
                }), M.setPoints(Y), M.fs()
            },
            shiftPointsElevation: function (h) {
                return this.shiftPoints(0, 0, h)
            },
            setPosition: function (e, q) {
                var T, H = this;
                if (!H._28Q) {
                    if (H._28Q = 1, !H._55I && !ae) {
                        T = 2 === arguments.length ? {x: e, y: q} : e;
                        var k = T.x - H._position.x, O = T.y - H._position.y;
                        if (0 === k && 0 === O) return delete H._28Q, void 0;
                        H._55I = 1, H.shiftPoints(k, O), Bi(H, [1, 0, 0, 1, k, O]), delete H._55I
                    }
                    rr.superClass.setPosition.apply(H, arguments), delete H._28Q
                }
            },
            fs: function () {
                this.fireShapeChange()
            },
            _70I: function () {
                var P = this;
                if (2 !== P._59O.size()) return !1;
                var Z = P._58O;
                return Z ? 2 === Z.size() && 1 === Z.get(0) && 2 === Z.get(1) ? !0 : !1 : !0
            },
            fireShapeChange: function () {
                var H = this;
                if (!H._55I && !ae) {
                    var f = an(H._59O);
                    f && (H._55I = 1, H.setRect(f), delete H._55I)
                }
                H.fp(Up, !1, !0)
            },
            getSerializableProperties: function () {
                var X = rr.superClass.getSerializableProperties.call(this);
                return X.segments = 1, X.points = 1, X.thickness = 1, X.closePath = 1, X
            }
        });
        var Jj = x.Polyline = function () {
            yp(Jj, this), this.s({"shape.background": null, "shape.border.width": 2})
        };
        rb("Polyline", rr, {
            _icon: "polyline_icon", _22Q: function () {
                return qj
            }, getUIClass: function () {
                return hd
            }, setClosePath: function () {
            }, setTall: function (Y) {
                var d = this;
                if (!d._55I && !d._24Q && !ae && d.getTall()) {
                    d._24Q = 1;
                    var w = d._54O, H = Y / d.getTall();
                    d._59O.each(function (D) {
                        D.e = D.e == o ? w : (D.e - w) * H + w
                    }), d.fs(), delete d._24Q
                }
                Jj.superClass.setTall.call(d, Y)
            }, setElevation: function (K) {
                var c = this;
                if (!c._55I && !c._24Q && !ae) {
                    c._24Q = 1;
                    var h = K - c._54O;
                    c._59O.each(function (y) {
                        y.e == o ? y.e = K : y.e += h
                    }), c.fs(), delete c._24Q
                }
                Jj.superClass.setElevation.apply(c, arguments)
            }, fireShapeChange: function () {
                var J = this, S = J._59O;
                if (!J._55I && !J._24Q && !ae) {
                    var d = S.size();
                    if (d) {
                        var O = 1, P = S.get(0), $ = J._54O;
                        P.e == o && (P.e = $);
                        for (var M = P.e, E = 0; d > O; O++) {
                            P = S.get(O), P.e == o && (P.e = $);
                            var b = g(M, P.e), r = n(M + E, P.e);
                            M = b, E = r - b
                        }
                        J._24Q = 1, J.setTall(E), J.setElevation(M + E * J._anchorElevation), delete J._24Q
                    }
                }
                Jj.superClass.fireShapeChange.apply(J, arguments)
            }
        });
        var Yr = x.SubGraph = function () {
            yp(Yr, this)
        };
        rb("SubGraph", ve, {
            ISubGraph: 1, _image: "subGraph_image", _icon: "subGraph_icon", _8I: function () {
                Yr.superClass._8I.call(this), this.eachChild(function (s) {
                    Un(s) && s._8I()
                })
            }
        }), w.loadingRefGraph = 0;
        var Dr = x.RefGraph = function () {
            yp(Dr, this)
        };
        rb("RefGraph", yg, {
            _icon: "refGraph_icon", getRef: function () {
                return this._ref
            }, setRef: function (u) {
                var M = this._ref;
                this._ref = u, this.fp("ref", M, u), this.updateRef()
            }, _21I: function () {
                Dr.superClass._21I.apply(this, arguments), this.updateRef()
            }, updateRef: function () {
                var G = this;
                if (w.loadingRefGraph++, G.clearChildrenFromDataModel(), w.loadingRefGraph--, G._ref && G._dataModel) {
                    G._xhrLoadHandler && (G._xhrLoadHandler.cancel = !0);
                    var m = ae, B = G._xhrLoadHandler = function (p) {
                        if (p && G._dataModel) {
                            w.loadingRefGraph++;
                            var J = G._pendingUpdateInfo = {needToRestore: m};
                            m && (J.position = G.p(), J.width = G.getWidth(), J.height = G.getHeight(), J.rotation = G.getRotation(), J.anchor = G.getAnchor(), J.scale = G.getScale()), G.p(0, 0), G.setAnchor(.5, .5), G.setRotation(0), G.setScale(1, 1);
                            var u = w.parse(p), r = G._dataModel.deserialize(u, G, {justDatas: !0});
                            r.each(function (l) {
                                l._refGraph = G
                            }), G.checkPendingUpdateInfo(), w.loadingRefGraph--, w.handleRefGraphLoaded(G, r, u)
                        }
                    };
                    B.xhrLoadCalled = !1, w.load(G._ref, function (X) {
                        B.cancel || (B.xhrLoadCalled ? B(X) : Wj(function () {
                            B(X)
                        }))
                    }), B.xhrLoadCalled = !0
                }
            }, checkPendingUpdateInfo: function () {
                var h = this, z = h._pendingUpdateInfo;
                if (!z) return h.onPendingUpdated && (w.loadingRefGraph++, h.onPendingUpdated(), w.loadingRefGraph--), void 0;
                var E = !0;
                this.eachChild(function (k) {
                    (k._pendingCheckImageJSON || k._pendingUpdateInfo) && (E = !1)
                }), E && (w.loadingRefGraph++, h._pendingUpdateInfo = null, h.updateFromChildren(), z.needToRestore && (h.setSize(z.width, z.height), h.setAnchor(z.anchor), h.setRotation(z.rotation), h.setScale(z.scale), h.p(z.position)), this.getParent() instanceof Dr && this.getParent().checkPendingUpdateInfo(), h.onPendingUpdated && h.onPendingUpdated(), w.loadingRefGraph--)
            }, getSerializableProperties: function () {
                var n = Dr.superClass.getSerializableProperties.call(this);
                return n.ref = 1, n
            }
        }), x.EdgeGroup = function (D, E) {
            this._70O = D, this._siblings = E;
            for (var W, p, l = 0, u = D.size(), $ = k[od]; u > l; l++) if (W = D.get(l).getStyle(od, !1), W != o) {
                $ = W;
                break
            }
            $ == o && ($ = !0);
            var f = w.edgeGroupAgentFunc;
            for (f && (p = f(D), p && p !== D.get(0) && (D.remove(p), D.add(p, 0))), l = 0; u > l; l++) D.get(l).s(od, $)
        }, rb("EdgeGroup", H, {
            getEdges: function () {
                return this._70O
            }, size: function () {
                return this._70O.size()
            }, get: function (D) {
                return this._70O.get(D)
            }, indexOf: function ($) {
                return this._70O.indexOf($)
            }, each: function (Q, X) {
                this._70O.each(Q, X)
            }, getSiblings: function () {
                return this._siblings
            }, eachSiblingEdge: function (m, L) {
                this._siblings.each(function (u) {
                    u._70O.each(m, L)
                })
            }
        });
        var hf = function (n, J, L) {
            var $ = Tq[n] = {type: n, action: J};
            if (L) for (var v in L) $[v] = L[v]
        };
        Mm(w, {
            setConnectAction: hf, getConnectAction: function (z, w) {
                if (!w) {
                    if (!z) return null;
                    w = z.getCurrentConnectActionType()
                }
                return Tq[w]
            }, doConnectAction: function (i, t, X, _) {
                _ = _ || i.getCurrentConnectActionType();
                var N = Tq[_];
                if (!N) return !1;
                var J = N.action;
                return J ? (t instanceof _p.Group ? i.sm().getSelection().each(function (U) {
                    J.call(null, i, U, X)
                }) : J.call(null, i, t, X), !0) : !1
            }, doDeleteConnectionAction: function (X, E, M) {
                M = M || X.getCurrentConnectActionType();
                var r = Tq[M];
                if (!r || !r.delete) return !1;
                var a = r.delete.action;
                return a ? (E instanceof _p.Group ? X.sm().getSelection().each(function (Q) {
                    a.call(null, X, Q)
                }) : a.call(null, X, E), !0) : !1
            }
        });
        var lf = x.JSONSerializer = function (i, q) {
            this.dm = this._dataModel = i, this._hierarchical = w.forceHierarchicalSerialization ? !0 : q == o ? i.isHierarchicalRendering() : q
        };
        rb("JSONSerializer", H, {
            ms_ac: ["hierarchical"], serialize: function (Z) {
                return w.stringify(this.toJSON(), Z)
            }, toJSON: function () {
                var G = this, q = G.dm, W = q.getRoots(), r = G.json = {v: w.getVersion(), p: {}, a: {}, d: []},
                    x = q.getSerializableAttrs();
                q.getInit() && (r.init = q.getInit()), q.getName() && (r.p.name = q.getName()), q.getBackground() && (r.p.background = q.getBackground()), q.getLayers() && (r.p.layers = q.getLayers()), q.getEnvmap() && (r.p.envmap = q.getEnvmap()), r.p.autoAdjustIndex = q.isAutoAdjustIndex(), r.p.hierarchicalRendering = q.isHierarchicalRendering();
                for (var _ in x) {
                    var f = q.a(_);
                    f !== v && G[nj](_, f, r.a)
                }
                return Xi(r.a) && delete r.a, G._hierarchical ? W.each(G.serializeData, this) : q.each(function (V) {
                    G.serializeData(V)
                }), q.fireSerializeEvent({
                    type: "serialize",
                    json: r
                }), q.getPostProcessingData() && (r.p.postProcessingData = q.getPostProcessingData()), r
            }, isSerializable: function () {
                return !0
            }, getProperties: function (A) {
                return A.getSerializableProperties()
            }, getStyles: function (R) {
                return R.getSerializableStyles()
            }, getAttrs: function (A) {
                return A.getSerializableAttrs()
            }, serializeData: function (t) {
                var N = this;
                if (N.isSerializable(t) && !t._refGraph) {
                    var b, U, T, A, D = bd(t.getClassName()) || t.getClass(), C = new D,
                        W = {c: t.getClassName(), i: t.getId(), p: {}, s: {}, a: {}};
                    N.json.d.push(W), b = N.getProperties(t);
                    for (U in b) if (/^_/.test(U)) {
                        if (T = t[U], ("_width" === U || "_height" === U) && T === v) {
                            var S;
                            ((t.s("layout.h") || t.s("layout.v")) && t.getHost() || t instanceof x.Node && (S = t.getParent()) && S instanceof x.Block || t.s("fullscreen")) && (T = t[U] = "_width" === U ? t.getWidth() : t.getHeight())
                        }
                        T !== C[U] && N[nj](U.substr(1), T, W.p)
                    } else A = vg(U), t[A] && (T = t[A](), T !== C[A]() && N[nj](U, T, W.p));
                    b = N.getStyles(t);
                    for (U in b) T = t.s(U), T !== C.s(U) && N[nj](U, T, W.s);
                    b = N.getAttrs(t);
                    for (U in b) T = t.a(U), T !== C.a(U) && N[nj](U, T, W.a);
                    Xi(W.p) && delete W.p, Xi(W.s) && delete W.s, Xi(W.a) && delete W.a
                }
                N._hierarchical && t.getChildren().each(N.serializeData, N)
            }, serializeValue: function (n, m, t) {
                ki(m) ? m = {__a: m._as} : m instanceof xk && (m = {__i: m.getId()}), t[n] = m
            }, deserialize: function (G, D, Y) {
                var z = this;
                return uf(G) && /.json$/.test(G) ? (w.xhrLoad(G, function (v) {
                    z.deserializeImpl(v, D, Y)
                }), void 0) : z.deserializeImpl(G, D, Y)
            }, deserializeImpl: function (Z, f, V) {
                var A = this, j = A.dm;
                V = kr(V) ? {setId: V} : gp(V) ? {finishFunc: V} : V || {}, Z = A.json = uf(Z) ? w.parse(Z) : Z, Z.a && Z.a.onPreDeserialize && !V.disableOnPreDeserialize && Z.a.onPreDeserialize(Z, j, V.view), j.beginTransaction(), ae++, A._82I = {};
                var K = new Pf, D = new Pf, T = 0, t = Z.d.length;
                if (V.justDatas || (gp(Z.init) && Z.init(j), j.setInit(Z.init)), !V.justDatas) {
                    for (var l in Z.a) j.a(l, A[Sk](Z.a[l]));
                    for (var r in Z.p) j[Kf(r)](Z.p[r])
                }
                for (; t > T; T++) {
                    var E = Z.d[T], s = bd(E.c), u = new s, I = E.i;
                    V.setId && I != o && (u._id = I), A._82I[I] = u, K.add(u), D.add(E)
                }
                for (T = 0; t > T; T++) A.deserializeData(K.get(T), D.get(T));
                return K.each(function (M) {
                    f && !M.getParent() && M.setParent(f), j.add(M)
                }), j.fireSerializeEvent({
                    type: "deserialize",
                    json: Z
                }), ae--, j.endTransaction(), Z.a && Z.a.onPostDeserialize && !V.disableOnPostDeserialize && Z.a.onPostDeserialize(Z, j, V.view, K), V.finishFunc && V.finishFunc(Z, j, V.view, K), K
            }, deserializeData: function (z, b) {
                for (var s in b.p) z[Kf(s)](this[Sk](b.p[s]));
                for (s in b.s) z.s(s, this[Sk](b.s[s]));
                for (s in b.a) z.a(s, this[Sk](b.a[s]))
            }, deserializeValue: function (i) {
                if (bc(i)) {
                    var Q = i.__i;
                    if (Q != o) return this._82I[Q];
                    if (Q = i.__a, Ll(Q)) return new Pf(Q)
                }
                return i
            }
        }), Mm($r, {
            serialize: function (S, w) {
                return new lf(this, w).serialize(S)
            }, toJSON: function (K) {
                return new lf(this, K).toJSON()
            }, deserialize: function (u, o, W) {
                return new lf(this).deserialize(u, o, W)
            }
        });
        var Rp = x.OverlappingBox = function (i) {
            this.gv = i, this.boxes = {}
        };
        rb("OverlappingBox", H, {
            clear: function () {
                var S, H, F = this.boxes;
                for (S in F) H = F[S], H.length = 0
            }, isOverlapping: function (L, f) {
                var $, A, k = this, o = k.boxes, c = o[L];
                c ? ($ = c.rects, A = c.length) : c = o[L] = {rects: $ = [], length: A = 0};
                var Q, N, f;
                for (Q = 0; A > Q; Q++) if (N = $[Q], N.x < f.x + f.w && N.x + N.w > f.x && N.y < f.y + f.h && N.h + N.y > f.y) return !0;
                return $.length <= A ? ($.push(f), c.length++) : $[c.length++] = f, !1
            }
        }), Mm(w, {
            fetch: function (D, f) {
                var Y = "GET", l = !1, h = null, W = "";
                f && (Y = f.method || "GET", l = f.sync, W = f.url, h = f.data || null), D.open(Y, W, !l), f.responseType ? D.responseType = f.responseType : f.overrideMimeType && D.overrideMimeType && D.overrideMimeType(f.overrideMimeType), D.send(h)
            }, convertImageSrc: function (p, r) {
                r && "function" == typeof r || (r = function () {
                }), r(p)
            }
        });
        var Wl = x.Request = function () {
            this._xhr = new XMLHttpRequest, this._onloadFunc = function () {
            }, this._errorFunc = function () {
            }
        };
        rb("Request", H, {
            _responseType: null, _overrideMimeType: "text/plain", send: function (D) {
                var c = this._xhr, O = this.onload, B = this.onerror;
                this.getResponseType() ? D.responseType = this.getResponseType() : this.getOverrideMimeType() && (D.overrideMimeType = this.getOverrideMimeType()), c.onload = O, c.onerror = B, w.fetch(c, D)
            }, onload: function () {
            }, onerror: function () {
            }, getResponseType: function () {
                return this._responseType
            }, setResponseType: function (_) {
                this._responseType = _
            }, getOverrideMimeType: function () {
                return this._overrideMimeType
            }, setOverrideMimeType: function (v) {
                this._overrideMimeType = v
            }, getResponseText: function () {
                var b = this._xhr;
                return b.response || b.responseText
            }
        }), rc.GraphView = function (A) {
            var R = this;
            R._24I = {}, R._34I = new Pf, R._25I = {}, R._56I = {}, R._view = po(1, R), R._canvas = wg(R._view), R.dm(A ? A : new $r), this._coreInteractor = new xj(this), R.setEditable(!1), R.setScrollBarVisible(w.graphViewScrollBarVisible)
        }, rk("GraphView", H, {
            ms_v: 1,
            ms_gv: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            _52o: 1,
            _51o: 1,
            ms_ac: [ym, Wc, ne, xh, "resettable", "editInteractor", Dg, "zoomable", "pannable", "rectSelectable", "autoScrollZone", Dl, "movableFunc", "editableFunc", "pointEditableFunc", "rectEditableFunc", "rotationEditableFunc", "anchorEditableFunc", "rectSelectBackground", "rectSelectBorderColor", "editPointSize", "editPointBorderColor", "editPointBackground", "hoverDelay"],
            _zoomable: w.graphViewZoomable,
            _resettable: w.graphViewResettable,
            _pannable: w.graphViewPannable,
            _rectSelectable: w.graphViewRectSelectable,
            _autoScrollZone: w.graphViewAutoScrollZone,
            _rectSelectBackground: w.graphViewRectSelectBackground,
            _rectSelectBorderColor: w.graphViewRectSelectBorderColor,
            _editPointSize: w.graphViewEditPointSize,
            _editPointBorderColor: w.graphViewEditPointBorderColor,
            _editPointBackground: w.graphViewEditPointBackground,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoHideScrollBar: Nf,
            _autoMakeVisible: Mn,
            _currentActionType: null,
            getCoreInteractor: function () {
                return this._coreInteractor
            },
            getLayers: function () {
                return this._dataModel.getLayers()
            },
            setLayers: function (d) {
                this._dataModel.setLayers(d)
            },
            setEditable: function (h) {
                var S = this, L = S.__interactorMap__;
                if (!L) {
                    var i = rc.XEditInteractor;
                    L = S.__interactorMap__ = {
                        scrollBar: new ud(S),
                        select: new Wr(S),
                        edit: i ? new i(S) : new Cr(S),
                        text: new go(S),
                        move: new oh(S),
                        "default": new mj(S),
                        touch: new oo(S, {editable: !1})
                    }
                }
                h ? (S._uieditable = !0, S.setInteractors([L.scrollBar, L.select, L.edit, L.text, L.move, L.default, L.touch])) : (S._uieditable = !1, S.setInteractors([L.scrollBar, L.select, L.move, L.default, L.touch]))
            },
            getCanvas: function () {
                return this._canvas
            },
            _33I: function (X) {
                var e = X.getUIClass();
                return e ? new e(this, X) : o
            },
            getDataUI: function (o) {
                var W = this, s = W._25I[o._id];
                return s === v && (s = W._33I(o), W._25I[o._id] = s), s
            },
            getNodeRect: function (q) {
                return w.getNodeRect(this, q)
            },
            getFullscreenDatas: function () {
                return this._dataModel.getFullscreenDatas()
            },
            getEdgeInfo: function (W) {
                var p = this.getDataUI(W);
                return p ? (p._79o(), p._78o) : null
            },
            getEdgeSourcePosition: function (Y) {
                var I = this, g = I.getDataUI(Y), p = g.s, w = g._data._40I;
                return Zd(I, w, p("edge.source.position"), p("edge.source.offset.x"), p("edge.source.offset.y"), p("edge.source.anchor.x"), p("edge.source.anchor.y"))
            },
            getEdgeTargetPosition: function (n) {
                var q = this, M = q.getDataUI(n), K = M.s, P = M._data._41I;
                return Zd(q, P, K("edge.target.position"), K("edge.target.offset.x"), K("edge.target.offset.y"), K("edge.target.anchor.x"), K("edge.target.anchor.y"))
            },
            invalidateAll: function (K) {
                var U = this;
                if (K) {
                    for (var y in U._25I) {
                        var Z = U._25I[y];
                        Z && Z.dispose()
                    }
                    U._25I = {}, U._56I = {}, U._24I = {}, U._34I.clear(), U.redraw()
                } else U.dm().each(function (S) {
                    U.invalidateData(S)
                })
            },
            invalidateSelection: function () {
                var l = this;
                l.sm().each(function (C) {
                    l.invalidateData(C)
                })
            },
            invalidateData: function (T) {
                var V = this;
                V._24I[T._id] = T, V._21Q(T), V.iv()
            },
            _21Q: function (k) {
                var W = this, d = W._24I;
                if (xf(k) && Ul[k.s(jk)]) {
                    var $ = k.getSourceAgent();
                    $ && $.getAgentEdges().each(function (x) {
                        d[x._id] = x
                    }), $ = k.getTargetAgent(), $ && $.getAgentEdges().each(function (L) {
                        d[L._id] = L
                    }), W.iv()
                }
            },
            redraw: function (k) {
                var F = this;
                F._32I || (k ? F._34I.add(k) : (F._32I = 1, F._34I.clear()), F.iv())
            },
            each: function (t, J) {
                var G, d, x, U = 0, L = this.getLayers(), W = this._dataModel, P = W._datas._as, C = P.length;
                if (L) {
                    for (var N = L.length; N > U; U++) if (x = L[U], bc(x) && (x = x.name), W.isHierarchicalRendering()) {
                        var v = function (Q) {
                            return Q._layer === x ? J ? t.call(J, Q) : t(Q) : void 0
                        };
                        if (this._dataModel.eachByHierarchical(v) === !1) return
                    } else for (var S = 0; C > S; S++) if (G = P[S], G._layer === x && (d = J ? t.call(J, G) : t(G), d === !1)) return
                } else if (W.isHierarchicalRendering()) this._dataModel.eachByHierarchical(t, null, J); else for (; C > U; U++) if (G = P[U], d = J ? t.call(J, G) : t(G), d === !1) return
            },
            reverseEach: function (c, R) {
                var m, o, E, w, f = this._dataModel, N = f._layers, P = f._datas._as, H = P.length;
                if (N) {
                    for (m = N.length - 1; m >= 0; m--) if (w = N[m], bc(w) && (w = w.name), f.isHierarchicalRendering()) {
                        var S = function (D) {
                            return D._layer === w ? R ? c.call(R, D) : c(D) : void 0
                        };
                        if (f.reverseEachByHierarchical(S) === !1) return
                    } else for (var J = H - 1; J >= 0; J--) if (o = P[J], o._layer === w && (E = R ? c.call(R, o) : c(o), E === !1)) return
                } else if (f.isHierarchicalRendering()) f.reverseEachByHierarchical(c, null, R); else for (m = H - 1; m >= 0; m--) if (o = P[m], E = R ? c.call(R, o) : c(o), E === !1) return
            },
            getViewRect: function () {
                return this._29I
            },
            getContentRect: function () {
                var k = this, U = k._84I;
                if (!U) {
                    var C = this.dm().a("width"), t = this.dm().a("height");
                    C > 0 && t > 0 ? k._84I = {x: 0, y: 0, width: C, height: t} : (k.each(function (x) {
                        k.isVisible(x) && (U = fs(U, k.getDataUIBounds(x)))
                    }), k._84I = U ? U : wp)
                }
                return k._84I
            },
            getScrollRect: function () {
                return fs(this.getContentRect(), this._29I)
            },
            makeCenter: function (a, N, K) {
                var H = this;
                if (!H.getWidth() || !H.getHeight()) return K || Wj(H.centerData, H, [a, N, !0], 500), void 0;
                H.makeVisible(a), H.validate();
                var u = H.getDataUIBounds(a);
                if (u) {
                    var T = H.getWidth(), F = H.getHeight(), h = u.x + u.width / 2, V = u.y + u.height / 2,
                        v = -h * H._zoom + T / 2, A = -V * H._zoom + F / 2;
                    H.setTranslate(v, A, N)
                }
            },
            fitData: function (f, H, C, u, K) {
                var E = this;
                if (!E.getWidth() || !E.getHeight()) return K || Wj(E.fitData, E, [f, H, C, u, !0], 500), void 0;
                var R = function () {
                    E.makeVisible(f), E.validate();
                    var D = E.getDataUIBounds(f);
                    D && (D = Ah(D), gh(D, C == o ? 20 : C), E.fitRect(D, H, u))
                };
                H ? w.callWhenLoaded(R) : R()
            },
            fitContent: function (u, s, t, Z) {
                var y = this;
                if (!y.getWidth() || !y.getHeight()) return Z || Wj(y.fitContent, y, [u, s, t, !0], 500), void 0;
                var f = function () {
                    y.validate();
                    var M = Ah(y.getContentRect());
                    gh(M, s == o ? 20 : s), y.fitRect(M, u, t)
                };
                u ? w.callWhenLoaded(f) : f()
            },
            fitRect: function (b, F, t) {
                var m = this, J = m.getWidth(), E = m.getHeight(), A = b.x + b.width / 2, o = b.y + b.height / 2,
                    W = g(J / b.width, E / b.height), c = m._zoom, T = -A * c + J / 2, x = -o * c + E / 2;
                0 === W || isNaN(W) || (t && (W = g(1, W)), F ? (m._65I && (delete m._65I.finishFunc, m._65I.stop(!0)), m._14o && m._14o.stop(!0), m.setTranslate(T, x, {
                    finishFunc: function () {
                        m.setZoom(W, F)
                    }
                })) : (m.setTranslate(T, x), m.setZoom(W)))
            },
            toCanvas: function (U, F) {
                F = F || this._zoom, this.validateImpl();
                var V = this, J = V.getContentRect();
                J.width || (J.width = 10), J.height || (J.height = 10);
                var b = wg(), K = J.x * F, f = J.y * F, p = J.width * F, R = J.height * F;
                zm(b, p, R, 1);
                var O = Jb(b);
                return U = U || this._dataModel.getBackground(), U && Rf(O, 0, 0, p, R, U), xi(O, -K, -f), O.scale(F, F), V._42(O), O.restore(), b
            },
            toDataURL: function (t, W, n) {
                return this.toCanvas(t, n).toDataURL(W || "image/png", 1)
            },
            getClipBounds: function () {
                return this._74O
            },
            _42: function (p, i) {
                var Q = this, J = Q.dm().getBackground();
                if (J) {
                    var E = Q.dm().a("width"), W = Q.dm().a("height");
                    E > 0 && W > 0 && Rf(p, 0, 0, E, W, J)
                }
                var e = Q.__htmlOrderList, U = [];
                if (Q._93db(p, i), Q.each(function (r) {
                    var J = Q.getDataUI(r);
                    if (J) {
                        var d = Q._56I[r._id], G = J._htmlView;
                        if (d) {
                            var R = J._79o();
                            if (G = J._htmlView, x.HtmlNode && r instanceof x.HtmlNode) J._42(p); else {
                                var f = Q.getViewRect(), h = G && G.layoutHTML;
                                !i || fg(i, R) ? (h && (G.layoutHTML(), J.__outerLayout && delete J.__outerLayout), J._42(p)) : fg(f, R) || !h || J.__outerLayout || (G.layoutHTML(), J.__outerLayout = !0)
                            }
                        }
                        G && (U.push(G), G.getView && (G = G.getView()), G.style.display = d ? "block" : $f)
                    }
                }), e && U.length > 0) {
                    var z = !1;
                    if (e.length !== U.length) z = !0; else for (var w = 0; w < U.length; w++) if (U[w] !== e[w]) {
                        z = !0;
                        break
                    }
                    z && (U.forEach(function (E) {
                        Q.appendHTML(E, !0)
                    }), this.__htmlOrderList = U)
                } else this.__htmlOrderList = U;
                Q._92db(p, i)
            },
            validateImpl: function () {
                this.tryUpdateRootData();
                var k, B, R, d, U, E = this, P = E.tx(), C = E.ty(), X = E._zoom, W = E._canvas, e = this.getWidth(),
                    F = this.getHeight(), u = E._29I, h = {x: -P / X, y: -C / X, width: e / X, height: F / X}, Z = {},
                    b = E._34I, Q = E._24I, f = E._32I, v = E._23I;
                E._24I = {}, (e !== W.clientWidth || F !== W.clientHeight) && (zm(W, e, F), f = 1), f || _n(h, u) || (f = 1), E._29I = h, E.each(function (W) {
                    B = W._id;
                    var C = Z[B] = E.isVisible(W);
                    C !== E._56I[B] && (Q[B] = W, R = E.getDataUI(Q[B]), R && R._84o(C), E._84o(W, C))
                }, E);
                for (B in Q) R = E.getDataUI(Q[B]), R && (!f && E._56I[B] && (U = R._79o(), U && b.add(U)), R.invalidate()), E._83I = 1;
                if (E._56I = Z, !f) for (B in Q) Z[B] && (R = E.getDataUI(Q[B]), R && (U = R._79o(), U && b.add(U)));
                if (f ? d = h : (b.each(function (z) {
                    fg(h, z) && (d = fs(d, z))
                }), d && (gh(d, n(1, 1 / X)), d.x = V(d.x * X) / X, d.y = V(d.y * X) / X, d.width = s(d.width * X) / X, d.height = s(d.height * X) / X, d = tr(h, d))), E._74O = d, d) {
                    k = Jb(W);
                    var i = d.x, K = d.y, A = d.width, L = d.height;
                    i = Math.floor((i * X + P) * Wo), K = Math.floor((K * X + C) * Wo), A = Math.ceil(A * X * Wo) + 1, L = Math.ceil(L * X * Wo) + 1, k.beginPath(), k.rect(i, K, A, L), k.clip(), k.clearRect(i, K, A, L), Ec(k, P, C, X), E._42(k, d), k.restore(), delete E._74O
                }
                if (b.clear(), delete E._32I, v && e > 0 && F > 0) {
                    var R = E.getDataUI(v);
                    if (R) {
                        var U = R._79o(), z = E._29I, I = z.x, r = z.y, w = z.width, N = z.height, X = E._zoom;
                        U && !fg(U, z) && (U.x + U.width < I && E.tx(-U.x * X), U.x > I + w && E.tx(-(U.x + U.width - w) * X), U.y + U.height < r && E.ty(-U.y * X), U.y > r + N && E.ty(-(U.y + U.height - N) * X))
                    }
                    delete E._23I
                }
                E._83I && (delete E._83I, delete E._84I), E._98O(), E.countFrame(), Xi(E._24I) || Wj(E.iv, E)
            },
            tryUpdateRootData: function () {
                var V, A = this.getFullscreenDatas();
                for (var W in A) V = A[W], this.scaleRootData(V)
            },
            scaleRootData: function (T) {
                var Q = T.s("fullscreen");
                if ("uniform" === Q || "fill" === Q) {
                    T.setRotation(0);
                    var U, C = T.s("fullscreen.gap") || 0, _ = this.getWidth() - 2 * C, z = this.getHeight() - 2 * C,
                        q = T.getAnchor(), b = T.getScaledSize(), K = b.width, R = b.height, u = T.s("fullscreen.lock");
                    if (u) return "uniform" === Q ? _ / z > K / R ? (U = z / R, K = R * _ / z) : (U = _ / K, R = K * z / _) : "v" === u ? (U = z / R, K = _ / U, T.setWidth(K)) : (U = _ / K, R = z / U, T.setHeight(R)), this.setZoom(U), this.tx(C - (T.getX() - q.x * K) * U), this.ty(C - (T.getY() - q.y * R) * U), void 0;
                    var s = this.tx(), D = this.ty();
                    U = this._zoom;
                    var B = {x: (-s + C) / U, y: (-D + C) / U, width: _ / U, height: z / U};
                    if ("uniform" === Q) {
                        var F = K / R, g = Math.min(B.width, B.height * F), W = g / F;
                        B.x += .5 * (B.width - g), B.y += .5 * (B.height - W), B.width = g, B.height = W
                    }
                    T.setSize(B.width / T.getScaleX(), B.height / T.getScaleY()), T.setPosition(B.x + q.x * B.width, B.y + q.y * B.height)
                }
            },
            isScrollBarVisible: function () {
                return !!this._79O
            },
            setScrollBarVisible: function (C) {
                var Y = this;
                C !== Y.isScrollBarVisible() && (C ? (Ur(Y._view, Y._79O = Hm()), Ur(Y._79O, Y._27I = Hm()), Ur(Y._79O, Y._28I = Hm())) : (Lg(Y._79O), delete Y._79O, delete Y._27I, delete Y._28I), Y.fp("scrollBarVisible", !C, C))
            },
            getDebugTip: function () {
                return ""
            },
            showScrollBar: function () {
                var f = this;
                f._79O && (f._85I || (Z(function () {
                    f._86I()
                }, No), f.iv()), f._85I = new Date)
            },
            _86I: function () {
                var N = this;
                if (N._85I) {
                    var m = new Date, J = m.getTime();
                    J - N._85I.getTime() >= No ? (delete N._85I, N.iv()) : Z(function () {
                        N._86I()
                    }, No)
                }
            },
            getVScrollBar: function () {
                return this._27I
            },
            getHScrollBar: function () {
                return this._28I
            },
            _98O: function () {
                var R = this, l = this._27I, u = this._28I;
                if (R._79O) {
                    if (R._autoHideScrollBar && !R._85I) return l.style.visibility = Sm, u.style.visibility = Sm, void 0;
                    var n = R.getScrollBarColor(), q = R._zoom, v = R.getScrollBarSize(), Z = R.getViewRect(),
                        $ = R.getScrollRect(), y = Z.height * q, H = $.height * q, k = Z.width * q - v - 2,
                        w = y * ((Z.y - $.y) * q / H), K = y * (y / H), t = l.style;
                    H - .5 > y ? (_g > K && (w = w + K / 2 - _g / 2, 0 > w && (w = 0), w + _g > y && (w = y - _g), K = _g), Vq(l, k, w, v, K), t.visibility = Td, t.background = n, t.borderRadius = v / 2 + Od) : t.visibility = Sm;
                    var p = Z.width * q, S = $.width * q, w = Z.height * q - v - 2, k = p * ((Z.x - $.x) * q / S),
                        V = p * (p / S), t = u.style;
                    S - .5 > p ? (_g > V && (k = k + V / 2 - _g / 2, 0 > k && (k = 0), k + _g > p && (k = p - _g), V = _g), Vq(u, k, w, V, v), t.visibility = Td, t.background = n, t.borderRadius = v / 2 + Od) : t.visibility = Sm
                }
            },
            setDataModel: function (D) {
                var t = this, X = t._dataModel, i = t._selectionModel;
                X !== D && (X && (X.ump(t.handleDataModelPropertyChange, t), X.umm(t.handleDataModelChange, t), X.umd(t.handleDataPropertyChange, t), X.removeIndexChangeListener(t._75O, t), X.removeHierarchyChangeListener(t.handleHierarchyChange, t), i || X.sm().ums(t.handleSelectionChange, t)), t._dataModel = D, D.mp(t.handleDataModelPropertyChange, t), D.mm(t.handleDataModelChange, t), D.md(t.handleDataPropertyChange, t), D.addIndexChangeListener(t._75O, t), D.addHierarchyChangeListener(t.handleHierarchyChange, t), i ? i._21I(D) : D.sm().ms(t.handleSelectionChange, t), t.invalidateAll(!0), t.fp(Jq, X, D), t.updateBackground())
            },
            getLayersInfo: function () {
                if (this._layersInfo === v) {
                    var i = this.getLayers();
                    i ? (this._layersInfo = {}, i.forEach(function (B) {
                        var $ = bc(B) ? B.name : B;
                        this._layersInfo[$] = B
                    }, this)) : this._layersInfo = null
                }
                return this._layersInfo
            },
            calculateEdgePosition: function (T, l, r) {
                var X, G, A = this, v = A.getDataUI(T), k = rf(v), w = xc(l, function (Z) {
                    return Yp(k, 100 * Z)
                }, 100, .001), s = Yp(k, 100 * w);
                if (!r) {
                    var f = ul(v), e = new pm(s.x, s.y), Q = 49 / (A._zoom * A._zoom);
                    for (X = 0, G = f.length; G > X; X++) if (e.distanceToSquared(f[X]) < Q) return {
                        index: X,
                        point: f[X],
                        distance: Math.sqrt((f[X].x - l.x) * (f[X].x - l.x) + (f[X].y - l.y) * (f[X].y - l.y))
                    }
                }
                return {
                    percent: w,
                    point: s,
                    distance: Math.sqrt((s.x - l.x) * (s.x - l.x) + (s.y - l.y) * (s.y - l.y))
                }
            },
            calculateAttachPoint: function () {
                var A = new pm, v = new pm, O = new pm;
                return function (H, P) {
                    var k = this.getAttachPoints(H);
                    if (!k || !k.length) return null;
                    O.set(P.x, P.y);
                    for (var y, u, x, F, D = 1 / 0, X = 0, V = k.length; V > X; X++) x = k[X], v.x = x.x, v.y = x.y, A.x = x.offsetX || 0, A.y = x.offsetY || 0, F = Zd(this, H, 0, A.x, A.y, v.x, v.y), u = O.distanceToSquared(F), D > u && (y = X, D = u);
                    D = Math.sqrt(D);
                    var Y = this.getAttachStyle(H);
                    if ("close" === Y) {
                        var L = H.s("attach.close.threshold") / this._zoom;
                        if (D > L) return null
                    }
                    return {index: y, distance: D, info: k[y]}
                }
            }(),
            getAttachPoints: function (q) {
                var R = q.s("attach.points");
                if (R) return R;
                var W = Ui(q._image);
                return W ? pe(W.attachPoints, q, this) || null : void 0
            },
            getAttachStyle: function (t) {
                var H = t.s("attach.style");
                if (H) return H;
                var z = Ui(t._image);
                return z ? pe(z.attachStyle, t, this) || "close" : void 0
            },
            updateLayers: function () {
                this._layersInfo = v, this.invalidateSelection(), this.redraw()
            },
            updateBackground: function () {
                var r = this.dm().a("width"), P = this.dm().a("height");
                this._canvas.style.background = r > 0 && P > 0 ? "" : this.dm().getBackground() || ""
            },
            handleDataModelPropertyChange: function (o) {
                if ("background" === o.property) {
                    var K = this._canvas.style.background, G = o.newValue || "";
                    this.updateBackground(), this.fp("canvasBackground", K, G), this.redraw()
                } else "a:width" === o.property || "a:height" === o.property ? (this._83I = 1, this.updateBackground(), this.redraw()) : "layers" === o.property ? this.updateLayers() : "hierarchicalRendering" === o.property && this.redraw()
            },
            handleDataPropertyChange: function (c) {
                this.dm().isHierarchicalRendering() && "parent" === c.property && c.data.hasChildren() && this.redraw(), this.invalidateData(c.data)
            },
            onPropertyChanged: function (e) {
                var J = this, r = e.property;
                if (J.redraw(), "zoom" === r) {
                    var C = J.sm().getSelection();
                    C.size() && C.each(function (x) {
                        x.invalidate()
                    })
                }
                Nl[r] ? J.showScrollBar() : r === Dg && J.onCurrentSubGraphChanged(e)
            },
            onCurrentSubGraphChanged: function () {
                this.sm().cs(), this.reset()
            },
            handleDataModelChange: function (S) {
                var g = this, U = S.kind, d = S.data;
                if (g._83I = 1, "add" === U) g.invalidateData(d), xf(d) && d.getEdgeGroup() && d.getEdgeGroup().eachSiblingEdge(g.invalidateData, g); else if (U === Pl) {
                    g._21Q(d);
                    var B = d._id, x = g._25I[B];
                    if (x) {
                        if (g._56I[B]) {
                            var v = x._79o();
                            v && g.redraw(v)
                        }
                        x.dispose(), delete g._25I[B], delete g._24I[B], delete g._56I[B]
                    }
                    d === g._currentSubGraph && g.setCurrentSubGraph(o)
                } else U === Pr && (g.invalidateAll(!0), g.setCurrentSubGraph(o))
            },
            _75O: function (H) {
                this.invalidateData(H.data)
            },
            handleHierarchyChange: function (F) {
                this.dm().isHierarchicalRendering() && F.data.hasChildren() && this.redraw(), this.invalidateData(F.data)
            },
            adjustIndex: function (j) {
                var R = this;
                if (R.isVisible(j)) {
                    R.dm().beginTransaction();
                    for (var m = j; m._parent && R.isVisible(m._parent);) m = m._parent;
                    m && m !== j && R._dataModel.adjustIndex(m), R._dataModel.adjustIndex(j), R.dm().endTransaction()
                }
            },
            getImage: function (X) {
                return X.getImage ? X.getImage() : v
            },
            getSelectWidth: function (P) {
                var X = Ui(this.getImage(P));
                return X && pe(X.disableSelectedBorder, P, this) ? 0 : P.s("select.width")
            },
            getSelectColor: function (t) {
                return t.s("select.color")
            },
            isSelectable: function (X, r) {
                if (this.isSelected(X)) return !0;
                if (!r && X.getParent() instanceof yg && this.isSelectable(X.getParent(), !0) && X.getParent().isSyncSize()) return !1;
                var n = this.getLayersInfo();
                if (n) {
                    var s = n[X._layer];
                    if (s && s.selectable === !1) return !1
                }
                return X.s("2d.selectable") && this.sm().isSelectable(X)
            },
            isMovable: function (q) {
                var j = this;
                if (xf(q) && q.getStyle(jk) !== qr) return !1;
                var R = this.getLayersInfo();
                if (R) {
                    var n = R[q._layer];
                    if (n && n.movable === !1) return !1
                }
                return q.s("2d.movable") ? j._movableFunc ? j._movableFunc(q) : !0 : !1
            },
            isEditable: function (g) {
                var F = this;
                if (x._uiSerializing) return F._uieditable;
                if (!F._editInteractor || !F.isSelected(g)) return !1;
                if (Em(g)) {
                    var r = F.getDataUI(g);
                    if (!r || r._88I) return !1
                }
                if (xf(g) && g.getStyle(jk) !== qr) return !1;
                var Q = this.getLayersInfo();
                if (Q) {
                    var o = Q[g._layer];
                    if (o && o.editable === !1) return !1
                }
                return g.s("2d.editable") ? F._editableFunc ? F._editableFunc(g) : !0 : !1
            },
            handleDelete: function () {
                this._editInteractor && (this._editInteractor.handleDelete ? this._editInteractor.handleDelete() : this.removeSelection())
            },
            isPointEditable: function (u) {
                return Un(u) && 0 !== u.getRotation() ? !1 : this._pointEditableFunc ? this._pointEditableFunc(u) : !0
            },
            isRectEditable: function (O) {
                return this._rectEditableFunc ? this._rectEditableFunc(O) : !0
            },
            isAnchorEditable: function ($) {
                return this._anchorEditableFunc ? this._anchorEditableFunc($) : !0
            },
            isRotationEditable: function (M) {
                return M.setRotation && M.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(M) : !0 : !1
            },
            getRotationPoint: function (n) {
                var c = n.getAnchor(), D = n.getScale(), j = this._zoom,
                    f = kd(n.getRotation(), 0, -n.getHeight() * D.y * c.y - (D.y < 0 ? -1 : 1) * (Xp ? 32 : 16) / j),
                    r = n.p();
                return f.x += r.x, f.y += r.y, f
            },
            getLogicalPoint: function (x) {
                var m = this;
                return ln(x, m._canvas, m.tx(), m.ty(), m._zoom, m._zoom)
            },
            getScreenPoint: function (G, o) {
                var B, t = this;
                return "object" == typeof G ? G.x !== v ? (B = G.x, o = G.y) : (B = G[0], o = G[1]) : B = G, ih(B, o, t._canvas, t.tx(), t.ty(), t._zoom, t._zoom)
            },
            getSelectedDataAt: function (X) {
                var J = this;
                return this.getDataAt(X, function (j) {
                    return J.isSelected(j)
                })
            },
            getDataInfoAt: function (b, A, X) {
                var O, F = this.lp(b), I = this.getDataAt(F, A, X);
                if (I) {
                    var D = this.getDataUI(I);
                    O = {data: I, ui: D, point: F};
                    var c = D._38o;
                    if (c) {
                        var g = c.icons;
                        for (var e in g) {
                            var Q = g[e], V = c.rects[e];
                            if (V) for (var K = pe(Q.names, I, this), z = K ? K.length : 0, J = V.rotation, h = z - 1; h >= 0; h--) {
                                var E = K[h], l = V[h];
                                if (wc(l, F, J)) return O.part = "icons", O.name = e, O.icon = E, O.rect = l, O.index = h, O.rotation = J, O
                            }
                        }
                    }
                    if (this.isNoteVisible(I)) {
                        if (D.note2Info && wc(D.note2Info.clickRect, F, o, D.note2Info.scale)) return O.part = "note2", O;
                        if (D.noteInfo && wc(D.noteInfo.clickRect, F, o, D.noteInfo.scale)) return O.part = "note", O
                    }
                    if (this.isLabelVisible(I)) {
                        if (D.label2Info && wc(D.label2Info.rect, F, D.label2Info.rotation, D.label2Info.scale)) return O.part = "label2", O;
                        if (D.labelInfo && wc(D.labelInfo.rect, F, D.labelInfo.rotation, D.labelInfo.scale)) return O.part = "label", O
                    }
                    if (I.isInRect && I.isInRect(F)) return O.part = "body", O
                }
                return O
            },
            getDataAt: function (X, j, y) {
                X.target && (X = this.lp(X));
                var N, h = this._zoom;
                return this.reverseEach(function (H) {
                    return (j ? j(H) : this.isSelectable(H)) && this.rectIntersects(H, Wg(X.x, X.y, y, h)) ? (N = H, !1) : void 0
                }, this), N
            },
            getIconInfoAt: function (J, z) {
                var i = this;
                if (J.target && (J = i.lp(J)), z || (z = i.getDataAt(J)), z) {
                    var _ = i.getDataUI(z);
                    if (_ && _._38o) {
                        var r, H = _._38o, u = new Pf;
                        for (r in H.icons) u.add(r);
                        for (var c = u.size() - 1; c >= 0; c--) {
                            r = u.get(c);
                            for (var b = H.rects[r], t = b.rotation, q = b.length - 1; q >= 0; q--) {
                                var v = b[q], n = v.width, $ = v.height,
                                    L = {x: J.x - v.x - n / 2, y: J.y - v.y - $ / 2};
                                t != o && (L = kd(-t, L.x, L.y));
                                var v = {x: -n / 2, y: -$ / 2, width: n, height: $};
                                if (wc(v, L)) return {
                                    key: r,
                                    index: q,
                                    name: H.icons[r].names[q],
                                    rect: b[q],
                                    point: J,
                                    rotation: t,
                                    relativeRect: v,
                                    relativePoint: L,
                                    data: z
                                }
                            }
                        }
                    }
                }
                return o
            },
            getDatasInRect: function (N, k, f) {
                f === v && (f = 1);
                var s = this, R = new Pf;
                return s.reverseEach(function (o) {
                    f && !s.isSelectable(o) || (k ? s.rectIntersects(o, N) : s.rectContains(o, N)) && R.add(o)
                }), R
            },
            moveSelection: function (t, k) {
                var u = this;
                u.dm().beginTransaction(), Xg(u.sm().toSelection(u.isMovable, u), t, k), u.dm().endTransaction()
            },
            moveDatas: function (x, v, k) {
                var f = this;
                f.dm().beginTransaction(), x instanceof Pf || (x = new Pf(x)), Xg(x, v, k), f.dm().endTransaction()
            },
            getDataUIBounds: function (m) {
                var p = this.getDataUI(m);
                return p ? p._79o() : o
            },
            drawData: function (r, E, z) {
                var j = this.getDataUI(E);
                if (j) {
                    var F = j._79o();
                    (!z || fg(z, F)) && (j._42(r), E instanceof x.Block && E.eachChild(function (i) {
                        this.drawData(r, i, z)
                    }, this))
                }
            },
            getBoundsForGroup: function (b) {
                return b.s(fj) ? this.getDataUIBounds(b) : o
            },
            isPixelPerfect: function (Z) {
                return Z.s("pixelPerfect")
            },
            rectIntersects: function (L, N) {
                this.validate();
                var r = o;
                if (this._56I[L._id]) {
                    var K = this._25I[L._id];
                    if (K) {
                        var g = K._79o();
                        if (Ln(N, g)) r = !0; else if ((N = tr(N, g)) && (K.rectIntersects && (r = K.rectIntersects(N)), r == o)) {
                            if (!this.isPixelPerfect(L)) return !0;
                            var e = N.x, Q = N.y, b = N.width, s = N.height, C = this._zoom, y = w.hitMaxArea,
                                _ = b * s * C * C;
                            if (_ > y) {
                                var i = Math.sqrt(y / _);
                                C *= i
                            }
                            b *= C, s *= C, 2 > b && (b = 2), 2 > s && (s = 2), e *= C, Q *= C;
                            var D = El(b, s);
                            xi(D, -e, -Q), D.scale(C, C), this._drawForChecking = !0, this.drawData(D, L, N), this._drawForChecking = !1;
                            try {
                                for (var j = 0, R = D.getImageData(0, 0, b, s).data; j < R.length; j += 4) if (0 !== R[j + 3]) {
                                    r = !0;
                                    break
                                }
                                D.restore()
                            } catch (G) {
                                $n = o, r = !1
                            }
                        }
                    }
                }
                return r ? !0 : !1
            },
            rectContains: function (S, g) {
                if (this._56I[S._id]) {
                    var y = this._25I[S._id];
                    if (y) return Ln(g, y._79o())
                }
                return !1
            },
            reset: function () {
                this.setZoom(1), this.setTranslate(0, 0)
            },
            handleKeyDown: function (b) {
                if (!w.isInput(b.target)) {
                    var h = this, t = h._focusData, e = t && h._25I[t._id], J = 0, j = h._dataModel._datas;
                    if (!(t && t._enabled && t._editable && e && e.onKeyDown && e.onKeyDown(b) === !0)) if (9 === b.keyCode && (t && (J = j.indexOf(t), sf(b) ? -1 === --J && (J = 0) : ++J === j.size() && (J = 0)), h._focusData = t = j.get(J), h.sm().setSelection(t)), Hi(b) ? h.selectAll() : Hk(b) && h.isResettable() && h.reset(), h.sm().isEmpty()) {
                        if (h._editing) return;
                        var R = h.tx(), Y = h.ty(), Q = !1, V = sf() ? 100 : 10;
                        Jm(b) && (R -= V, Q = !0), pq(b) && (Y -= V, Q = !0), Ac(b) && (R += V, Q = !0), wb(b) && (Y += V, Q = !0), Q && h.setTranslate(R, Y)
                    } else {
                        jp(b) && h.handleDelete(b);
                        var L = sf() ? 10 : 1;
                        Jm(b) && (h.moveSelection(-L, 0), h.fi({kind: "moveLeft"})), pq(b) && (h.moveSelection(0, -L), h.fi({kind: "moveUp"})), Ac(b) && (h.moveSelection(L, 0), h.fi({kind: "moveRight"})), wb(b) && (h.moveSelection(0, L), h.fi({kind: "moveDown"}))
                    }
                }
            },
            handleScroll: function (n, r) {
                if (Yd(n), this.isZoomable()) {
                    if (!this.getEditInteractor()) {
                        var k = this.getDataAt(n);
                        if (k) {
                            var z = Ui(this.getImage(k));
                            if (z && pe(z.scrollable, k, this)) return
                        }
                    }
                    var g = this.lp(n);
                    r > 0 ? this.scrollZoomIn(g) : 0 > r && this.scrollZoomOut(g)
                }
            },
            handlePinch: function (S, w, c) {
                this.isZoomable() && (this._68I || (w > c ? this.pinchZoomIn(S) : this.pinchZoomOut(S)))
            },
            checkDoubleClickOnNote: function (T, E) {
                var h = this, C = h.lp(T), x = h.getDataUI(E), n = x.note2Info;
                return n && E.s("note2.toggleable") && wc(n.clickRect, C) ? (E.s(gn, !E.s(gn)), h.fi({
                    kind: "toggleNote2",
                    event: T,
                    data: E
                }), !0) : (n = x.noteInfo, n && E.s("note.toggleable") && wc(n.clickRect, C) ? (E.s(Fg, !E.s(Fg)), h.fi({
                    kind: "toggleNote",
                    event: T,
                    data: E
                }), !0) : !1)
            },
            _84o: function () {
            },
            isNoteVisible: function () {
                return this._zoom > .15
            },
            isLabelVisible: function () {
                return this._zoom > .15
            },
            isEditVisible: function () {
                return this._zoom > .15
            },
            autoScroll: function (G, B) {
                var k = this, z = k.getAutoScrollZone(), R = z / k.getZoom(), I = z / 4, J = k._29I, F = k.lp(G),
                    D = {x: k.tx(), y: k.ty()};
                return F && z > 0 && J && (F.x - J.x < R ? k.translate(I, 0) : J.x + J.width - F.x < R && k.translate(-I, 0), F.y - J.y < R ? k.translate(0, I) : J.y + J.height - F.y < R && k.translate(0, -I)), D.x = k.tx() - D.x, D.y = k.ty() - D.y, B && (B.x += D.x, B.y += D.y), D
            },
            getMoveMode: function (Q, M) {
                var V = M.s("2d.move.mode");
                return V ? V : Jh["88"] ? "x" : Jh["89"] ? "y" : "xy"
            },
            getSerializableProperties: function () {
                return {
                    scrollBarColor: 1,
                    scrollBarSize: 1,
                    autoMakeVisible: 1,
                    autoHideScrollBar: 1,
                    editable: 1,
                    resettable: 1,
                    pannable: 1,
                    rectSelectable: 1,
                    autoScrollZone: 1,
                    visibleFunc: 1,
                    movableFunc: 1,
                    editableFunc: 1,
                    pointEditableFunc: 1,
                    rectEditableFunc: 1,
                    anchorEditableFunc: 1,
                    rotationEditableFunc: 1,
                    rectSelectBackground: 1,
                    rectSelectBorderColor: 1,
                    editPointSize: 1,
                    editPointBorderColor: 1,
                    editPointBackground: 1,
                    hoverDelay: 1,
                    dataModel: 1,
                    selectionModel: 1,
                    currentSubGraph: 1,
                    zoom: 1,
                    translateX: 1,
                    translateY: 1
                }
            },
            serializeProperty: function (K, G, S) {
                var b = this;
                return "currentSubGraph" === G ? {__i: K.getId()} : S.serializeProperty(K, G, b)
            },
            deserializeProperty: function (e, B, l) {
                var d = this;
                if ("currentSubGraph" === B) {
                    var H = d.dm(), D = H.__idMap;
                    return D[e.__i]
                }
                return l.deserializeProperty(e, B, d)
            },
            setDefaultCursor: function (q, O) {
                this._defaultCursor = q, O !== !1 && this.setCursor(q)
            },
            setCursor: function (J) {
                "default" === J && (J = this._defaultCursor || J);
                var b = this.getView().style;
                b.cursor = J, b.cursor = "-webkit-" + J, b.cursor = "-moz-" + J
            },
            getCurrentConnectActionType: function () {
                return this._currentActionType
            },
            setCurrentConnectActionType: function (U) {
                return U === o || w.getConnectAction(null, U) ? (this._currentActionType = U, this.redraw(), !0) : !1
            },
            getEditStyle: function (e) {
                var q = this.getEditInteractor();
                return q ? q.getStyle(e) : v
            },
            setEditStyle: function (b, h, E) {
                var F = this.getEditInteractor();
                return F ? (F.setStyle(b, h, E), !0) : !1
            },
            isConnectActionVisible: function (C) {
                var y = w.getConnectAction(this);
                if (!y) return !1;
                var e = y.visible;
                return gp(e) && (e = e(this, C)), e
            },
            isInteractive: function (k) {
                var B = Ui(this.getImage(k));
                return B && pe(B.interactive, k, this) ? !0 : k.s("interactive")
            },
            appendHTML: function (O, j) {
                var e = this.getView();
                if (!(j || O && O.parentNode !== e)) return !1;
                var d = O.getView && O.getView();
                if (!j && d && d.parentNode === e) return !1;
                (O.getView || O.isSelfViewEvent) && (O = O.getView());
                var $ = this.getEditInteractor();
                return $ && $._canvas ? e.insertBefore(O, $._canvas) : this.isScrollBarVisible() ? e.insertBefore(O, this.getView().lastChild) : Ur(e, O), !0
            },
            _layoutHTMLImpl: function (w, j, e) {
                if (arguments.length > 1) {
                    var Q, P = this, Z = P._zoom;
                    if (j.getView && (Q = j, j = j.getView()), j.style.position = "absolute", e) {
                        var E = w.getRect();
                        Vq(Q || j, P.tx() + E.x * Z, P.ty() + E.y * Z, E.width * Z, E.height * Z)
                    } else {
                        var d = new Hf, E = w.getAnchorRect(), Y = w.getPosition(), X = w.getScale(), M = j.style;
                        Vq(Q || j, E), d.appendTranslate(P.tx(), P.ty()), d.appendScale(Z, Z), d.append(new Hf(w.getRotation(), Y.x, Y.y, X.x, X.y)), Kq(M, "transform", "matrix(" + d.a.toFixed(5) + ", " + d.b.toFixed(5) + ", " + d.c.toFixed(5) + ",\n    " + d.d.toFixed(5) + ", " + d.tx.toFixed(5) + ", " + d.ty.toFixed(5) + ")"), Kq(M, "transformOrigin", (-E.x).toFixed(5) + "px " + (-E.y).toFixed(5) + "px"), j.maxtrixAppend = d.invert().translate(-E.x, -E.y)
                    }
                } else this._layoutHTML && this._layoutHTML()
            },
            getTextEditInfo: function (R) {
                return R instanceof Md ? {name: "text", accessType: "s", isMultiline: !1} : void 0
            }
        }), H.defineProperties(rc.GraphView.prototype, {
            layoutHTML: {
                get: function () {
                    return this._layoutHTMLImplBind || (this._layoutHTMLImplBind = this._layoutHTMLImpl.bind(this)), this._layoutHTMLImplBind
                }, set: function (I) {
                    this._layoutHTML = I
                }
            }
        });
        var Lh = function (m, b) {
            var q = this;
            q.gv = m, q.s = function (u) {
                return b.getStyle(u)
            }, q._data = b, q._87I = new Pf
        };
        Jr(Lh, H, {
            _6I: o, ms_icons: 1, _84o: function () {
            }, dispose: function () {
            }, isShadowed: function () {
                return this.s("shadow") || this.gv.isSelected(this._data) && "shadow" === this.s("select.type")
            }, getSelectWidth: function () {
                var X = this, U = X.gv.isSelected(X._data);
                return !U || X.isShadowed() ? 0 : X.gv.getSelectWidth(X._data)
            }, getSelectColor: function () {
                return this.gv.getSelectColor(this._data)
            }, getBodyColor: function (d) {
                var i = this._data, Z = this.gv.getBodyColor(i);
                return Z ? Z : d ? i.getStyle(d) : o
            }, _2Q: function (p) {
                return this.s(p)
            }, _1Q: function (U, B, Q, O) {
                var D = this.s, y = D("2d.gray"), k = D(B + ".dash.color");
                if (y && (k = w.toGrayColor(k)), U.strokeStyle = k, U.lineWidth = Q, U.stroke(), D(B + ".dash.3d")) {
                    var P = D(B + ".dash.3d.color");
                    xs(U, k, y ? w.toGrayColor(P) : P, Q, this.gv._zoom, D(B + ".dash.3d.accuracy"))
                }
                ck(U, O)
            }, invalidate: function () {
                this._6I = o
            }, _79o: function () {
                var L = this;
                if (!L._6I) {
                    var p = L._data, N = L.gv;
                    L.labelInfo = L.label2Info = L.noteInfo = L.note2Info = L._38o = o, L._87I.clear(), L.interactiveInfo = N.isInteractive(p) ? {} : o, L._3O(), L._55O = N.isEditable(p) ? {
                        _42O: N.isRectEditable(p),
                        _43O: N.isPointEditable(p),
                        _56O: N.isRotationEditable(p)
                    } : o, L._6I = L._81o()
                }
                return L._6I
            }, _3O: function () {
            }, getPosition: function () {
                return wp
            }, _68o: function (V, U) {
                V && this._87I.add(ok(V, U))
            }, _81o: function () {
                var o = this, f = o.s;
                o._24O(Fj, "getLabel"), o._24O(zp, "getLabel2"), o._26O(Ro, "getNote"), o._26O(Oo, "getNote2"), o._15O(), o._55O && o._48O();
                var K;
                if (o._87I.each(function (A) {
                    K = fs(K, A)
                }), K && o.isShadowed()) {
                    var c = Ah(K);
                    c.x += f("shadow.offset.x"), c.y += f("shadow.offset.y"), gh(c, f("shadow.blur")), K = fs(K, c)
                }
                return o._87I.clear(), K
            }, _42: function (c) {
                var A = this, H = A._data, w = A.gv, R = A.s, i = R("opacity"), p = this.isShadowed();
                if (p) {
                    var r = c.shadowOffsetX, x = c.shadowOffsetY, b = c.shadowBlur, L = c.shadowColor, h = w.getZoom();
                    c.shadowOffsetX = R("shadow.offset.x") * h, c.shadowOffsetY = R("shadow.offset.y") * h, c.shadowBlur = R("shadow.blur") * h, c.shadowColor = A.getSelectColor()
                }
                if (i != o) {
                    var Z = c.globalAlpha;
                    c.globalAlpha = i
                }
                A._80o(c), w.isLabelVisible(H) && ((!w._drawForChecking || R("label.selectable")) && op(c, A.labelInfo), (!w._drawForChecking || R("label2.selectable")) && op(c, A.label2Info)), w.isNoteVisible(H) && (nd(c, A.noteInfo), nd(c, A.note2Info)), A._99O(c), i != o && (c.globalAlpha = Z), p && (c.shadowOffsetX = r, c.shadowOffsetY = x, c.shadowBlur = b, c.shadowColor = L)
            }, _80o: function () {
            }, _47O: function () {
            }, _24O: function (R, J) {
                var S = this, b = S._data, a = S.gv, y = S.s, k = a[J](b);
                if (k != o) {
                    var F = y(R + ".scale"), V = y(R + ".max"), K = y(R + ".position"), u = S[R + "Info"] = {
                        label: k,
                        scale: F,
                        color: a[J + "Color"](b),
                        font: y(R + ".font"),
                        opacity: y(R + ".opacity"),
                        align: y(R + ".align"),
                        rotation: S.getRotation(y(R + ".rotation"), !1, K),
                        background: a[J + "Background"](b)
                    }, s = jg(u, k);
                    V > 0 && V < s.width && (u.labelWidth = s.width, s.width = V), 1 !== F && (s.width *= F, s.height *= F);
                    var C = S.getPosition(K, y(R + ".offset.x"), y(R + ".offset.y"), s, y(R + ".position.fixed"));
                    if (s.x = C.x - s.width / 2, s.y = C.y - s.height / 2, S._68o(u.rect = s, u.rotation), 1 !== F) {
                        var O = s.width / F, m = s.height / F;
                        u.rect = {x: C.x - O / 2, y: C.y - m / 2, width: O, height: m}
                    }
                }
            }, _26O: function (k, f) {
                var b = this, v = b.gv, Z = b._data, r = b.s, g = v[f](Z);
                if (g != o) {
                    var J, A, P = r(k + ".scale"), d = b[k + "Info"] = {
                        note: g,
                        scale: P,
                        data: Z,
                        view: v,
                        expanded: r(k + ".expanded"),
                        font: r(k + ".font"),
                        color: r(k + ".color"),
                        opacity: r(k + ".opacity"),
                        align: r(k + ".align"),
                        icon: r(k + ".icon"),
                        backgroundImage: r(k + ".backgroundImage"),
                        borderWidth: r(k + ".border.width"),
                        borderColor: r(k + ".border.color"),
                        background: v[f + "Background"](Z)
                    }, V = b.getPosition(r(k + ".position"), r(k + ".offset.x"), r(k + ".offset.y")), j = V.x, c = V.y;
                    if (d.expanded) {
                        var T, E = r(k + ".max"), O = r(k + ".backgroundImage");
                        O ? (O = Ui(O), T = {
                            width: Iq(O, Z),
                            height: Ne(O, Z)
                        }) : T = jg(d, g), T.width += 6, T.height += 2, E > 0 && E < T.width && (d.labelWidth = T.width, T.width = E), J = T.width, A = T.height + 8, d.clickRect = {
                            x: j - J * P / 2,
                            y: c - A * P,
                            width: J * P,
                            height: A * P * T.height / A
                        }
                    } else {
                        var U = r(k + ".icon");
                        U ? (U = Ui(U), J = Iq(U, Z), A = Ne(U, Z)) : (J = 12, A = 18), d.clickRect = {
                            x: j - J * P / 2,
                            y: c - A * P,
                            width: J * P,
                            height: A * P
                        }
                    }
                    d.rect = {x: j - J / 2, y: c - A * P / 2 - A / 2, width: J, height: A};
                    var C = s(d.borderWidth / 2) * P;
                    b._68o({x: j - J * P / 2 - C, y: c - A * P - C, width: J * P + 2 * C, height: A * P + 2 * C})
                }
            }, _48O: function () {
            }, _99O: function (C) {
                var w = this, l = w._38o;
                if (l) {
                    var m = w.gv, A = w._data, c = l.icons, F = w.interactiveInfo;
                    F && (F._38o = {});
                    for (var M in c) {
                        var e = c[M], k = l.rects[M];
                        if (k) {
                            F && (F._38o[M] = []);
                            var u = pe(e.opacity, A, m), j = pe(e.names, A, m), _ = j ? j.length : 0, n = k.rotation;
                            if (u != o) {
                                var Y = C.globalAlpha;
                                C.globalAlpha *= u
                            }
                            for (var $ = 0; _ > $; $++) {
                                var R = j[$], V = Ui(R), i = k[$];
                                if (n) {
                                    var K = i.x + i.width / 2, I = i.y + i.height / 2;
                                    C.save(), xi(C, K, I), _e(C, n), xi(C, -K, -I)
                                }
                                F && F._38o[M].push(C.interactiveInfo = {
                                    compInfos: [],
                                    matrix: n ? new Hf(n, K, I).appendTranslate(-K, -I) : new Hf
                                }), Ng(C, V, pe(e.stretch, A, m), i.x, i.y, i.width, i.height, w._data, w.gv), C.interactiveInfo = o, n && C.restore()
                            }
                            u != o && (C.globalAlpha = Y)
                        }
                    }
                }
            }
        });
        var Wq = function (Y, K) {
            yp(Wq, this, [Y, K])
        };
        Jr(Wq, Lh, {
            _checkEmptyRect: !0, _40O: function ($, x) {
                var i = this, I = i.s, u = $.rect;
                ($.borderColor = i.gv.getBorderColor(i._data)) && ($.borderType = I("border.type"), $.borderWidth = I("border.width"), $.borderPadding = I("border.padding"), x = n(x, $.borderPadding + $.borderWidth / 2));
                var J = i._data.getScale(), e = n(1, n(M(J.x), M(J.y)));
                if ($.selectWidth = i.getSelectWidth()) {
                    var o = i.gv._zoom;
                    $.selectType = I("select.type"), $._97o = i.getSelectColor(), $.selectPadding = I("select.padding"), x = n(x, ($.selectPadding + $.selectWidth / 2 / o) / e)
                }
                x > 0 && (x *= e, u = Ah(u), gh(u, x)), i._68o(u)
            }, _39O: function (_, X) {
                var B, Y = this, r = X.rect;
                if (X.borderWidth > 0 && (B = X.borderPadding, _.strokeStyle = X.borderColor, _.lineWidth = X.borderWidth, vr(_, X.borderType, {
                    x: r.x - B,
                    y: r.y - B,
                    width: r.width + 2 * B,
                    height: r.height + 2 * B
                }), _.stroke()), X.selectWidth > 0) {
                    var e = Y.gv._zoom;
                    if (B = X.selectPadding, _.strokeStyle = X._97o, _.lineWidth = X.selectWidth / e, X.rotation != o) {
                        _.save(), _.translate(X.position.x, X.position.y), _.rotate(X.rotation);
                        var O = Y._data, Q = O.getWidth(), d = O.getHeight(), a = X.scale, F = X.anchor;
                        r = {x: a.x * -Q * F.x, y: a.y * -d * F.y, width: a.x * Q, height: a.y * d}
                    }
                    vr(_, X.selectType, {
                        x: r.x - B,
                        y: r.y - B,
                        width: r.width + 2 * B,
                        height: r.height + 2 * B
                    }), X.rotation != o && _.restore(), _.stroke()
                }
            }, dispose: function () {
                var B = this, g = B._htmlView;
                Wq.superClass._3O.call(B), g && (g.onHTMLRemoved && g.onHTMLRemoved(), Lg(g))
            }, _3O: function () {
                var S = this, k = S.s, x = S._data, T = S.gv, w = x.getStyle(Up), y = S.getBodyColor(),
                    D = S._83o = w ? {
                        shape: w,
                        _53o: S.getBodyColor("shape.background"),
                        _27Q: Ui(k("shape.repeat.image"), y),
                        shapeGradientPack: k("shape.gradient.pack"),
                        _54o: k("shape.border.width"),
                        _55o: k("shape.border.color"),
                        _56o: k("shape.border.3d"),
                        _57o: k("shape.border.3d.color"),
                        _58o: k("shape.border.3d.accuracy"),
                        shapeGradient: k("shape.gradient"),
                        _59o: k("shape.gradient.color"),
                        _60o: k("shape.border.pattern"),
                        _61o: k("shape.border.cap"),
                        _62o: k("shape.border.join"),
                        shapeForeground: k("shape.foreground"),
                        bodyColor: y,
                        gray: k("2d.gray")
                    } : {img: Ui(T.getImage(x), y), bodyColor: y, gray: k("2d.gray"), stretch: k("image.stretch")};
                if (A && !z) ; else {
                    var B, R = D.img;
                    R && R.renderHTML ? (S._htmlInfo && S._htmlInfo.img !== R && (S._htmlInfo = o), S._htmlInfo || (S._htmlInfo = {
                        img: R,
                        cache: {}
                    }), B = R.renderHTML(x, T, S._htmlInfo.cache)) : S._htmlInfo = o, S._htmlView && S._htmlView !== B && (S._htmlView.onHTMLRemoved && S._htmlView.onHTMLRemoved(), Lg(S._htmlView.getView ? S._htmlView.getView() : S._htmlView)), (S._htmlView = B) && T.appendHTML(B) && B.onHTMLAdded && B.onHTMLAdded(), D.rect = x.getRect(), D.position = x.p(), D.scale = x.getScale(), D.anchor = x.getAnchor(), D.rotation = x.getRotation(), w === ap && (D._63o = k("shape.depth"));
                    var G = 0;
                    if (w) G = lm(o, D._54o / 2, D._62o), S.s("shape.dash") && (G = n(G, (S.s("shape.dash.width") || D._54o) / 2)); else if (R && R.boundExtend) if (G = pe(R.boundExtend, x, T), R.boundExtendAbsolute) {
                        var F = x.getScale();
                        G /= T._zoom * n(1, n(M(F.x), M(F.y)))
                    } else if (!pe(R.fitSize, x, T)) {
                        var L = pe(R.width, x, T), h = pe(R.height, x, T);
                        G *= n(x.getWidth() / L, x.getHeight() / h)
                    }
                    S._40O(D, G);
                    var c = k("clip.percentage");
                    if (1 > c && (0 > c && (c = 0), D.clipRect = Dk(x.getAnchorRect(), k("clip.direction"), c)), w) {
                        var Z = k("shape.fill.clip.percentage");
                        1 > Z && (0 > Z && (Z = 0), D.shapeClipRect = Dk(x.getAnchorRect(), k("shape.fill.clip.direction"), Z));
                        var V = k("shape.foreground.clip.percentage");
                        1 > V && (0 > V && (V = 0), D.shapeForegroundClipRect = Dk(x.getAnchorRect(), k("shape.foreground.clip.direction"), V))
                    }
                }
            }, getPosition: function (e, P, z, b) {
                var p = Sn(e, this._83o.rect, b);
                return p.x += P, p.y += z, p
            }, _80o: function (P) {
                var O = this, z = O.s, E = O.gv, r = O._data, R = O._83o, l = R.rect, b = R.position, _ = R.rotation,
                    k = R.anchor, M = R.scale, D = R.shape, S = R.clipRect;
                if (!O._checkEmptyRect || l.width > 0 && l.height > 0) {
                    var G = r.getSize();
                    if (G.x = -G.width * k.x, G.y = -G.height * k.y, P.save(), xi(P, b.x, b.y), _e(P, _), md(P, M.x, M.y), S && (P.beginPath(), P.rect(S.x, S.y, S.width, S.height), P.clip()), E._drawForChecking && R.img && pe(R.img.pixelPerfect, r, E) === !1) Rf(P, G.x, G.y, G.width, G.height, "#888888"); else if (O.freeDraw) O.freeDraw(P, G, R); else if (D) {
                        var m, Q, e, p, s = R._60o, y = Pn(P, s), c = R._27Q, V = R._54o, X = R.shapeGradientPack,
                            H = R.gray, d = P.lineJoin, F = P.lineCap, Z = function (O) {
                                return H ? w.toGrayColor(O) : O
                            };
                        "roundRect" === D ? m = z("shape.corner.radius") : "polygon" === D ? m = z("shape.polygon.side") : "arc" === D && (m = z("shape.arc.from"), Q = z("shape.arc.to"), e = z("shape.arc.close"), p = z("shape.arc.oval")), P.lineJoin = R._62o, P.lineCap = R._61o;
                        var g = Z(R._53o);
                        if (g || c || X) {
                            var j = R.shapeClipRect;
                            j && (P.save(), P.beginPath(), P.rect(j.x, j.y, j.width, j.height), P.clip()), vr(P, D, G, m, Q, e, p), X ? br(P, X) : c ? eb(P, c, Z(R.bodyColor), null, r, E) : Om(P, g, R.shapeGradient, Z(R._59o), G), P.fill(), j && P.restore(), X && P.restore(), P !== y && vr(y, D, G, m, Q, e, p)
                        } else vr(y, D, G, m, Q, e, p);
                        var K = R.shapeForeground;
                        if (K) {
                            P.save();
                            var n = R.shapeForegroundClipRect;
                            n && (P.beginPath(), P.rect(n.x, n.y, n.width, n.height), P.clip()), vr(P, D, G, m, Q, e, p), Om(P, K, z("shape.foreground.gradient"), Z(z("shape.foreground.gradient.color")), G), P.fill(), P.restore()
                        }
                        if (V > 0) {
                            var t = z("shape.border.width.absolute");
                            t && (P.save(), P.setTransform(1, 0, 0, 1, 0, 0)), P.lineWidth = V;
                            var J = Z(R._55o);
                            P.strokeStyle = J, P.stroke(), t && P.restore(), R._56o && xs(P, J, Z(R._57o), V, E._zoom, R._58o)
                        }
                        if (ck(P, s), z("shape.dash")) {
                            var W = z("shape.dash.width") || V;
                            if (W > 0) {
                                s = z("shape.dash.pattern");
                                var y = Pn(P, s, O._2Q("shape.dash.offset"));
                                y !== P && vr(y, D, G, m, Q, e, p), O._1Q(P, "shape", W, s)
                            }
                        }
                        bf(P, g, R._63o, G), P.lineJoin = d, P.lineCap = F
                    } else {
                        var L = O.interactiveInfo;
                        L && (P.interactiveInfo = L.bodyInfo = {
                            compInfos: [],
                            matrix: new Hf(_, b.x, b.y, M.x, M.y)
                        }), R.gray && (P.compGray = !0);
                        var T = R.img;
                        T && T.cacheRule != o && (T = Nm(P, T, R.stretch, G.width, G.height, r, E, R.bodyColor)), Ng(P, T, R.stretch, G.x, G.y, G.width, G.height, r, E, R.bodyColor), P.compGray = !1, P.interactiveInfo = o
                    }
                    P.restore()
                }
                O._39O(P, R)
            }, _48O: function () {
            }, _47O: function () {
            }
        });
        var Rd = function (R, L) {
            yp(Rd, this, [R, L])
        }, gg = function (P, L, o, y) {
            var Z = vl(P, L);
            return o = y ? g(o, Z) : nb(o, Z), Z ? o /= Z : o = 0, {x: P.x + (L.x - P.x) * o, y: P.y + (L.y - P.y) * o}
        };
        Jr(Rd, Lh, {
            _3O: function () {
                var D, I = this, g = I._data, r = I.gv, x = I.s, A = x(jk), b = g.isLooped(), H = x("edge.width"),
                    Q = x("edge.center"), p = x("edge.offset"), f = r.getBorderColor(g), X = f ? x("border.width") : 0,
                    k = I.getSelectWidth(), S = g._40I, B = g._41I, T = I._78o = S && B ? {
                        looped: b,
                        type: A,
                        width: H,
                        center: Q,
                        color: I.getBodyColor("edge.color"),
                        borderColor: f,
                        borderWidth: X,
                        _97o: k ? I.getSelectColor() : o,
                        selectWidth: k,
                        pattern: x("edge.pattern"),
                        cap: x("edge.cap"),
                        join: x("edge.join"),
                        is3d: x("edge.3d"),
                        _67o: x("edge.3d.color"),
                        _66o: x("edge.3d.accuracy"),
                        gray: x("2d.gray")
                    } : o;
                if (T) {
                    var u = w.getEdgeType(A);
                    if (u) {
                        var G = u(g, Ei(I, r, g, b, A), r, I._19Q);
                        G.points && G.points.size() > 1 ? (T.edgeTypeInfo = G, D = an(T.edgeTypeInfo.points)) : G[mh] && G.rect && (T.edgeTypeInfo = G, D = G.rect)
                    } else {
                        var M = x("edge.source.anchor.x"), h = x("edge.source.anchor.y"), t = x("edge.target.anchor.x"),
                            d = x("edge.target.anchor.y"), l = jj(r, g, "source"), J = jj(r, g, "target");
                        if (A === qr) {
                            var e = T.points = x(Ge) || oi, $ = e.size();
                            T.segments = x("edge.segments");
                            var R = M !== v || h !== v || xf(S), L = t !== v || d !== v || xf(B);
                            if (!Q) if (p) R || (l = gg(l, $ ? e.get(0) : J, p, $)), L || (J = gg(J, $ ? e.get($ - 1) : l, p, $)); else {
                                var a;
                                R || (a = Qp(l, $ ? e.get(0) : J, Eq(r, S)), a && (l = {
                                    x: a[0],
                                    y: a[1]
                                })), L || (a = Qp($ ? e.get($ - 1) : l, J, Eq(r, B)), a && (J = {x: a[0], y: a[1]}))
                            }
                            D = fs(an(T.points), an(l, J))
                        } else {
                            var y = Ei(I, r, g, b, A);
                            if (I._19Q || (y = -y), b) l = Ah(l), l.x = r.getNodeRect(S).x, T.radius = y, D = {
                                x: l.x - y,
                                y: l.y - y,
                                width: 2 * y,
                                height: 2 * y
                            }; else {
                                var s = vl(l, J), O = nb(p, s), U = {x: O, y: y}, q = {x: s - O, y: y},
                                    K = N(J.y - l.y, J.x - l.x), m = T.mat = new Cg(K);
                                if (T.orienAngle = K, T.angle = J.x < l.x ? K + Y : K, T.rect = {
                                    x: U.x,
                                    y: U.y,
                                    width: q.x - U.x,
                                    height: 0
                                }, T.origin = l, U = m.tf(U), U.x += l.x, U.y += l.y, q = m.tf(q), q.x += l.x, q.y += l.y, Q) {
                                    var z = {x: s, y: 0};
                                    z = m.tf(z), z.x += l.x, z.y += l.y, D = an([l, U, q, z]), T.c1 = l, T.c2 = z
                                } else D = an(U, q);
                                l = U, J = q
                            }
                        }
                        T.sourcePoint = l, T.targetPoint = J, g._lastSourcePoint = l, g._lastTargetPoint = J
                    }
                    var C = 0;
                    x("edge.dash") && (C = x("edge.dash.width") || H);
                    var i = "square" === T.cap ? .71 : .5;
                    lm(D, n(C * i, H * i + X + k), T.join), I._68o(D)
                }
            }, getRotation: function (m, n, b) {
                m = m || 0;
                var D = this._78o;
                if (D) {
                    var J, G = D.angle, I = D.points, d = D.edgeTypeInfo;
                    if (G != o) return n ? D.orienAngle + m : G + m;
                    if (d && d[mh]) return d.getRotation ? d.getRotation(this, m, n, b) : 0;
                    if (d && d.points) {
                        var $ = d.points;
                        return J = $.size(), Yo[b] ? J && 0 === J % 2 ? ig($.get(J / 2 - 1), $.get(J / 2), n, m) : m : uc[b] ? ig($.get(0), $.get(1), n, m) : ig($.get(J - 2), $.get(J - 1), n, m)
                    }
                    if (I) return J = I.size(), Yo[b] ? J && 0 === J % 2 ? ig(I.get(J / 2 - 1), I.get(J / 2), n, m) : m : uc[b] ? ig(D.sourcePoint, J ? I.get(0) : D.targetPoint, n, m) : ig(J ? I.get(J - 1) : D.sourcePoint, D.targetPoint, n, m)
                }
                return m
            }, getPosition: function (l, b, d, z, Z) {
                var X = this._78o;
                if (X) {
                    var D, u = X.type, j = X.points, h = X.edgeTypeInfo, y = X.sourcePoint, o = X.targetPoint;
                    if (!u) return X.looped ? {
                        x: y.x - X.radius + b,
                        y: y.y + d
                    } : (Z && y && o && (y.x > o.x || y.x === o.x && y.y > o.y) && (l = Ic[l], d = -d), D = Sn(l, X.rect, z), D.x += b, D.y += d, D = X.mat.tf(D), D.x += X.origin.x, D.y += X.origin.y, D);
                    if (h && h[mh]) return h.getPosition ? h.getPosition(this, l, b, d, z, Z) : {
                        x: (y.x + o.x) / 2,
                        y: (y.y + o.y) / 2
                    };
                    if (j) {
                        var D, G = j.size();
                        if (Yo[l]) {
                            if (G) {
                                var q = G % 2;
                                if (0 === q) return Sf(j.get(G / 2 - 1), j.get(G / 2), l, b, d, z, Z);
                                D = j.get((G - q) / 2)
                            } else D = {x: (y.x + o.x) / 2, y: (y.y + o.y) / 2};
                            return D = Sn(l, {x: D.x, y: D.y, width: 0, height: 0}, z), D.x += b, D.y += d, D
                        }
                        return uc[l] ? Sf(y, G ? j.get(0) : o, l, b, d, z, Z) : Sf(G ? j.get(G - 1) : y, o, l, b, d, z, Z)
                    }
                    if (h) {
                        var a = h.points, G = a.size();
                        if (Yo[l]) {
                            var q = G % 2;
                            return 0 === q ? Sf(a.get(G / 2 - 1), a.get(G / 2), l, b, d, z, Z) : (D = a.get((G - q) / 2), D = Sn(l, {
                                x: D.x,
                                y: D.y,
                                width: 0,
                                height: 0
                            }, z), D.x += b, D.y += d, D)
                        }
                        return uc[l] ? Sf(a.get(0), a.get(1), l, b, d, z, Z) : Sf(a.get(G - 2), a.get(G - 1), l, b, d, z, Z)
                    }
                }
                return wp
            }, _42: function (o) {
                this._78o && Rd.superClass._42.call(this, o)
            }, drawPath: function (E, b) {
                E.beginPath();
                var V = b.type, e = b.points, J = b.segments, B = b.edgeTypeInfo;
                if (!V || e) {
                    var H = b.sourcePoint, O = H.x, R = H.y, o = b.targetPoint, l = o.x, Q = o.y;
                    if (V) if (J) {
                        var G = new Pf({x: O, y: R});
                        G.addAll(e), G.add({x: l, y: Q}), Vd(E, G, J)
                    } else E.moveTo(O, R), e.each(function (u) {
                        E.lineTo(u.x, u.y)
                    }), E.lineTo(l, Q); else b.looped ? E.arc(O, R, b.radius, 0, C, !0) : b.center ? (E.moveTo(b.c1.x, b.c1.y), E.lineTo(O, R), E.lineTo(l, Q), E.lineTo(b.c2.x, b.c2.y)) : (E.moveTo(O, R), E.lineTo(l, Q))
                } else B && (B.points ? Vd(E, B.points, B.segments) : B[mh] && B[mh](E, B))
            }, _80o: function (O) {
                var d = this, A = d.s, H = d._78o, b = H.width, v = H.selectWidth, W = H.borderWidth, c = O.lineJoin,
                    Z = O.lineCap, M = H.gray, U = H.pattern;
                O.lineJoin = H.join, O.lineCap = H.cap, d.drawPath(Pn(O, U), H);
                var Q = A("edge.width.absolute");
                Q && (O.save(), O.setTransform(1, 0, 0, 1, 0, 0)), v && (O.strokeStyle = H._97o, O.lineWidth = b + 2 * (W + v), O.stroke()), W && (O.strokeStyle = M ? w.toGrayColor(H.borderColor) : H.borderColor, O.lineWidth = b + 2 * W, O.stroke());
                var C = M ? w.toGrayColor(H.color) : H.color, F = M ? w.toGrayColor(H._67o) : H._67o;
                if (O.strokeStyle = C, O.lineWidth = b, O.stroke(), H.is3d && xs(O, C, F, b, d.gv._zoom, H._66o), Q && O.restore(), ck(O, U), A("edge.dash")) {
                    U = A("edge.dash.pattern");
                    var N = Pn(O, U, d._2Q("edge.dash.offset"));
                    N !== O && d.drawPath(N, H), d._1Q(O, "edge", A("edge.dash.width") || b, U)
                }
                O.lineJoin = c, O.lineCap = Z
            }, _48O: function () {
            }, _47O: function () {
            }
        });
        var Sq = function (Y, h) {
            yp(Sq, this, [Y, h])
        };
        Jr(Sq, Wq, {
            _3O: function () {
                var j, r, A = this, W = A.s, Q = A._data, C = A.gv;
                if (A._88I = o, Q.isExpanded() && Q.eachChild(function (I) {
                    if (Un(I)) {
                        var O = C.getBoundsForGroup(I);
                        O && (r || (r = []), r.push(O), j = fs(j, O))
                    }
                }), j) {
                    var O = C.getLabel(Q), v = W("group.type");
                    j = dj(v, r, j), Bm(j, Q, "group.padding", 1);
                    var e = A._88I = {type: v, rect: j, _64o: j};
                    if (!v && O != o) {
                        var c, _ = A.labelInfo = {
                                label: O,
                                color: W("group.title.color"),
                                font: W("group.title.font"),
                                align: W("group.title.align")
                            }, F = jg(_, O), J = F.width, B = F.height, H = W("group.title.align"),
                            k = W("group.title.orientation");
                        if ((k === Tp || k === Mh) && J > j.width ? j.width = J : (k === Pq || k === Kl) && J > j.height && (j.height = J), _.rect = {
                            y: j.y - B,
                            width: F.width,
                            height: B
                        }, c = H === Pq ? j.x : H === Kl ? j.x + j.width - J : j.x + j.width / 2 - J / 2, _.rect.x = c, k === Mh) e.titleRect = {
                            x: j.x,
                            y: j.y + j.height,
                            width: j.width,
                            height: B
                        }, e.rect = {x: j.x, y: j.y, width: j.width, height: j.height + B}, _.rect = {
                            x: c,
                            y: j.y + j.height,
                            width: J,
                            height: B
                        }; else if (k === Pq) {
                            var d = e.titleRect = {x: j.x - B, y: j.y, width: B, height: j.height};
                            e.rect = {
                                x: j.x - B,
                                y: j.y,
                                width: j.width + B,
                                height: j.height
                            }, _.rect = {
                                x: d.x + B / 2 - j.height / 2,
                                y: d.y + j.height / 2 - B / 2,
                                width: j.height,
                                height: B
                            }, _.rotation = -Math.PI / 2
                        } else if (k === Kl) {
                            var d = e.titleRect = {x: j.x + j.width, y: j.y, width: B, height: j.height};
                            e.rect = {
                                x: j.x,
                                y: j.y,
                                width: j.width + B,
                                height: j.height
                            }, _.rect = {
                                x: d.x + B / 2 - j.height / 2,
                                y: d.y + j.height / 2 - B / 2,
                                width: j.height,
                                height: B
                            }, _.rotation = Math.PI / 2
                        } else e.titleRect = {x: j.x, y: j.y - B, width: j.width, height: B + 1}, e.rect = {
                            x: j.x,
                            y: j.y - B,
                            width: j.width,
                            height: j.height + B
                        }
                    }
                    A._40O(e, W("group.border.width") / 2)
                } else Sq.superClass._3O.call(A)
            }, getPosition: function (w, q, X, b) {
                var Y = this._88I;
                if (Y) {
                    var R = Sn(w, Y.rect, b);
                    return R.x += q, R.y += X, R
                }
                return Sq.superClass.getPosition.apply(this, arguments)
            }, _24O: function (h, Z) {
                var e = this._88I;
                (!e || e.type || "label2" === h) && Sq.superClass._24O.call(this, h, Z)
            }, _80o: function (g) {
                var m = this, e = m._88I;
                if (e) {
                    var o = m._data, x = m.s, _ = m.gv, N = e.type, V = e.rect, R = e._64o, c = e.titleRect,
                        X = m.getBodyColor(), w = Ui(x("group.image"), X), b = x("group.image.stretch"),
                        z = m.getBodyColor("group.background"), L = Ui(x("group.repeat.image"), X),
                        a = x("group.gradient.pack"), D = x("group.gradient"), J = x("group.gradient.color"),
                        E = x("group.border.width"), n = x("group.border.color"), F = x("group.border.pattern"),
                        H = x("group.title.orientation"), y = x("group.depth");
                    if (N) {
                        var p = g.lineJoin, s = g.lineCap;
                        if (g.lineJoin = x("group.border.join"), g.lineCap = x("group.border.cap"), w) {
                            if (g.save(), vr(g, N, V), g.clip(), Ng(g, w, b, V.x, V.y, V.width, V.height, o, _, X), g.restore(), E > 0) {
                                var Z = Pn(g, F);
                                vr(Z, N, V), g.lineWidth = E, g.strokeStyle = n, g.stroke(), ck(g, F)
                            }
                        } else {
                            var Z = Pn(g, F);
                            z || L || a ? (vr(g, N, V), a ? br(g, a) : L ? eb(g, L, X, null, o, _) : Om(g, z, D, J, V), g.fill(), a && g.restore(), g !== Z && vr(Z, N, V)) : vr(Z, N, V), E > 0 && (g.lineWidth = E, g.strokeStyle = x("group.border.color"), g.stroke()), ck(g, F), N === ap && bf(g, z, y, V)
                        }
                        g.lineJoin = p, g.lineCap = s
                    } else {
                        var l = x("group.title.background"), O = x("group.border.radius");
                        if (w) Ng(g, w, b, R.x, R.y, R.width, R.height, o, _, m.getBodyColor()); else if (z || L) if (L ? eb(g, L, X, null, o, _) : Om(g, z, D, J, R), 0 === E) vr(g, ap, R), g.fill(), bf(g, z, y, R); else {
                            switch (g.beginPath(), H) {
                                case Mh:
                                    yc(g, R.x, R.y, R.width, R.height, O, O, 0, 0);
                                    break;
                                case Pq:
                                    yc(g, R.x, R.y, R.width, R.height, 0, O, 0, O);
                                    break;
                                case Kl:
                                    yc(g, R.x, R.y, R.width, R.height, O, 0, O, 0);
                                    break;
                                case Tp:
                                    yc(g, R.x, R.y, R.width, R.height, 0, 0, O, O)
                            }
                            g.fill()
                        }
                        if (c && l) if (0 === E) Rf(g, c.x, c.y, c.width, c.height, l), bf(g, l, y, c); else {
                            switch (g.beginPath(), g.fillStyle = l, H) {
                                case Mh:
                                    yc(g, c.x, c.y, c.width, c.height, 0, 0, O, O);
                                    break;
                                case Pq:
                                    yc(g, c.x, c.y, c.width, c.height, O, 0, O, 0);
                                    break;
                                case Kl:
                                    yc(g, c.x, c.y, c.width, c.height, 0, O, 0, O);
                                    break;
                                case Tp:
                                    yc(g, c.x, c.y, c.width, c.height, O, O, 0, 0)
                            }
                            g.fill()
                        }
                        if (E > 0) {
                            var Z = Pn(g, F);
                            if (vr(Z, "roundRect", V, O), g.lineWidth = E, g.strokeStyle = n, c && x("group.splitLine")) {
                                var d = c.x, C = c.y, A = c.width, T = c.height;
                                H === Mh ? (g.moveTo(d, C), g.lineTo(d + A, C)) : H === Pq ? (g.moveTo(d + A, C), g.lineTo(d + A, C + T)) : H === Kl ? (g.moveTo(d, C), g.lineTo(d, C + T)) : (g.moveTo(d, C + T), g.lineTo(d + A, C + T))
                            }
                            g.stroke(), ck(g, F)
                        }
                    }
                    m._39O(g, e)
                } else Sq.superClass._80o.call(m, g)
            }
        });
        var Pe = function (j, m) {
            yp(Pe, this, [j, m])
        };
        Jr(Pe, Wq, {
            _80o: function (m) {
                this._39O(m, this._83o)
            }
        });
        var Zf = function (H, i) {
            yp(Zf, this, [H, i])
        };
        Jr(Zf, Wq, {
            _3O: function () {
                var I = this, F = I._data, H = I.s, W = I.gv, p = F.getPoints(), d = W.getBorderColor(F),
                    J = d ? H("border.width") : 0, b = I.getSelectWidth(), $ = H("shape.border.width"), m = F.getRect(),
                    Q = W.getBodyColor(F), G = I._99o = p.isEmpty() ? o : {
                        rect: m,
                        rotation: F.getRotation(),
                        fillRule: H("shape.fill.rule"),
                        scale: F.getScale(),
                        position: F.p(),
                        points: p,
                        segments: F.getSegments(),
                        bodyColor: Q,
                        borderColor: d,
                        borderWidth: J,
                        _94o: H("shape.border.3d"),
                        _95o: H("shape.border.3d.color"),
                        _96o: H("shape.border.3d.accuracy"),
                        _97o: b ? I.getSelectColor() : o,
                        selectWidth: b,
                        _53o: H("shape.background"),
                        _27Q: Ui(H("shape.repeat.image"), Q),
                        shapeGradientPack: H("shape.gradient.pack"),
                        _54o: $,
                        _55o: H("shape.border.color"),
                        shapeGradient: H("shape.gradient"),
                        _59o: H("shape.gradient.color"),
                        _60o: H("shape.border.pattern"),
                        _61o: H("shape.border.cap"),
                        _62o: H("shape.border.join"),
                        shapeForeground: H("shape.foreground"),
                        gray: H("2d.gray")
                    };
                if (G) {
                    var c = F.getScale(), K = n(1, n(M(c.x), M(c.y)));
                    H("shape.dash") && H("shape.dash.width") > $ && ($ = H("shape.dash.width"));
                    var D = $ * ("square" === G._61o ? .71 : .5) + J + b / I.gv._zoom / K;
                    D && (D *= K, m = Ah(m), lm(m, D, G._62o)), I._68o(m);
                    var i = H("clip.percentage");
                    1 > i && (0 > i && (i = 0), G.clipRect = Dk(F.getAnchorRect(), H("clip.direction"), i));
                    var l = H("shape.fill.clip.percentage");
                    1 > l && (0 > l && (l = 0), G.shapeClipRect = Dk(F.getAnchorRect(), H("shape.fill.clip.direction"), l));
                    var V = H("shape.foreground.clip.percentage");
                    1 > V && (0 > V && (V = 0), G.shapeForegroundClipRect = Dk(F.getAnchorRect(), H("shape.foreground.clip.direction"), V))
                }
            }, getPosition: function (e, X, z, b) {
                var u = this._99o;
                if (u) {
                    var Q = Sn(e, u.rect, b);
                    return Q.x += X, Q.y += z, Q
                }
                return wp
            }, _42: function (D) {
                this._99o && Zf.superClass._42.call(this, D)
            }, _80o: function (Z) {
                var x, o = this, J = o.s, y = o._99o, u = y.position, a = y.scale, g = y.rotation, v = y.borderWidth,
                    m = y.selectWidth / o.gv._zoom, F = y._27Q, S = y.shapeGradientPack, W = y._54o, Y = y.clipRect,
                    i = y.shapeClipRect, z = y.points, d = y.segments, E = o._data.isClosePath(), T = y.fillRule,
                    $ = y.gray, s = function (Z) {
                        return $ ? w.toGrayColor(Z) : Z
                    }, K = s(y._53o), M = K || F || S;
                Z.save(), xi(Z, u.x, u.y), _e(Z, g), md(Z, a.x, a.y), Y && (Z.beginPath(), Z.rect(Y.x, Y.y, Y.width, Y.height), Z.clip()), M && i && (Z.save(), Z.beginPath(), Z.rect(i.x, i.y, i.width, i.height), Z.clip()), xi(Z, -u.x, -u.y);
                var R = y._60o, l = Pn(Z, R), N = Z.lineJoin, U = Z.lineCap;
                Z.lineJoin = y._62o, Z.lineCap = y._61o;
                var b = s(y.bodyColor);
                M ? (Vd(Z, z, d, E), S ? br(Z, S) : F ? eb(Z, F, b, null, o._data, o.gv) : (x = b ? b : K, Om(Z, x, y.shapeGradient, s(y._59o), y.rect)), Z.fill(T), i && (Z.restore(), xi(Z, -u.x, -u.y)), S && Z.restore(), l !== Z && Vd(l, z, d, E)) : Vd(l, z, d, E);
                var h = y.shapeForeground;
                if (h) {
                    Z.save();
                    var k = y.shapeForegroundClipRect;
                    k && (xi(Z, u.x, u.y), Z.beginPath(), Z.rect(k.x, k.y, k.width, k.height), Z.clip(), xi(Z, -u.x, -u.y)), Vd(Z, z, d, E), Om(Z, h, J("shape.foreground.gradient"), s(J("shape.foreground.gradient.color")), y.rect), Z.fill(T), Z.restore()
                }
                var C = J("shape.border.width.absolute");
                if (C && (Z.save(), Z.setTransform(1, 0, 0, 1, 0, 0)), m && (Z.strokeStyle = y._97o, Z.lineWidth = W + 2 * (v + m), Z.stroke()), v && (Z.strokeStyle = s(y.borderColor), Z.lineWidth = W + 2 * v, Z.stroke()), W && (x = s(y._55o), !K && b && (x = b), Z.strokeStyle = x, Z.lineWidth = W, Z.stroke(), y._94o && xs(Z, x, s(y._95o), W, o.gv._zoom, y._96o)), C && Z.restore(), ck(Z, R), J("shape.dash")) {
                    var H = J("shape.dash.width") || W;
                    if (H > 0) {
                        R = J("shape.dash.pattern");
                        var l = Pn(Z, R, o._2Q("shape.dash.offset"));
                        l !== Z && Vd(l, z, d, E), o._1Q(Z, "shape", H, R)
                    }
                }
                Z.lineJoin = N, Z.lineCap = U, Z.restore()
            }, _48O: function () {
            }, _47O: function () {
            }
        });
        var hd = function (M, r) {
            yp(hd, this, [M, r])
        };
        Jr(hd, Zf, {
            getRotation: function (h, e, m) {
                h = h || 0;
                var O = this._data.getPoints(), p = O.size();
                return p > 1 ? Yo[m] ? p && 0 === p % 2 ? ig(O.get(p / 2 - 1), O.get(p / 2), e, h) : h : uc[m] ? ig(O.get(0), O.get(1), e, h) : ig(O.get(p - 2), O.get(p - 1), e, h) : h
            }, getPosition: function (j, z, q, u, V) {
                var W = this._data.getPoints(), A = W.size();
                if (A > 1) {
                    if (Yo[j]) {
                        var N = A % 2;
                        if (0 === N) return Sf(W.get(A / 2 - 1), W.get(A / 2), j, z, q, u, V);
                        var d = W.get((A - N) / 2), n = {x: d.x, y: d.y, width: 0, height: 0};
                        return d = Sn(j, n, u), d.x += z, d.y += q, d
                    }
                    return uc[j] ? Sf(W.get(0), W.get(1), j, z, q, u, V) : Sf(W.get(A - 2), W.get(A - 1), j, z, q, u, V)
                }
                return wp
            }
        });
        var Yl = function (r, v) {
            yp(Yl, this, [r, v])
        };
        Jr(Yl, Wq, {
            _3O: function () {
                var i = this;
                Yl.superClass._3O.call(i);
                var u = i.s, I = i._83o;
                i._82o = I.img || I.shape ? o : {
                    background: i.getBodyColor("grid.background"),
                    depth: u("grid.depth"),
                    rect: I.rect,
                    _88o: u("grid.cell.depth"),
                    cellBorderColor: u("grid.cell.border.color"),
                    _89o: u("grid.row.count"),
                    _90o: u("grid.column.count"),
                    block: u("grid.block"),
                    _91o: u("grid.block.color"),
                    _92o: u("grid.block.padding"),
                    _93o: u("grid.block.width")
                }
            }, _80o: function (V) {
                var F = this, A = F._82o;
                if (!A) return Yl.superClass._80o.call(F, V), void 0;
                var M, g, k = F._data, S = A.background, m = A.rect, p = A.block, h = A._91o, N = A._92o, Y = A._93o,
                    K = A._88o, c = A.cellBorderColor, P = A._89o, q = A._90o;
                if (S) if (Rf(V, m.x, m.y, m.width, m.height, S), bf(V, S, A.depth, m), K) for (M = 0; P > M; M++) for (g = 0; q > g; g++) m = k.getCellRect(M, g), m && bf(V, S, K, m); else if (c) {
                    for (V.beginPath(), M = 0; P > M; M++) for (g = 0; q > g; g++) m = k.getCellRect(M, g), m && V.rect(m.x, m.y, m.width, m.height);
                    V.strokeStyle = c, V.lineWidth = 1, V.stroke()
                }
                if ("h" === p) for (M = 0; P > M; M++) m = fs(k.getCellRect(M, 0), k.getCellRect(M, q - 1)), gh(m, N), gd(V, h, m.x, m.y, m.width, m.height, Y); else if ("v" === p) for (g = 0; q > g; g++) m = fs(k.getCellRect(0, g), k.getCellRect(P - 1, g)), gh(m, N), gd(V, h, m.x, m.y, m.width, m.height, Y);
                F._39O(V, F._83o)
            }
        });
        var wl = function (f, s) {
            yp(wl, this, [f, s])
        };
        Jr(wl, Wq, {
            _checkEmptyRect: !1, _81o: function () {
                var K = this._data, f = wl.superClass._81o.call(this), N = K.s("text");
                if (N != o) {
                    var m, Q, F = K.s("text.font"), b = K.s("text.align"), G = K.s("text.vAlign"), $ = Dp(F, N),
                        i = $.width, D = $.height, w = K.getAnchor(), d = K.getWidth(), H = K.getHeight();
                    "left" === b ? m = -d * w.x : "center" === b ? m = -d * w.x + (d - i) / 2 : "right" === b && (m = d * (1 - w.x) - $.width), "top" === G ? Q = -H * w.y : "middle" === G ? Q = -H * w.y + (H - D) / 2 : "bottom" === G && (Q = H * (1 - w.y) - $.height);
                    var x, Z = K.getMatrix();
                    if (x = an([Z.tf(m, Q), Z.tf(m + i, Q), Z.tf(m + i, Q + D), Z.tf(m, Q + D)]), f = fs(f, x), f && K.s("text.shadow")) {
                        var z = Ah(f);
                        z.x += K.s("text.shadow.offset.x"), z.y += K.s("text.shadow.offset.y"), gh(z, K.s("text.shadow.blur")), f = fs(f, z)
                    }
                }
                return f
            }
        });
        var yk = rc.Interactor = function (p) {
            this.gv = this._graphView = p
        };
        rk("Interactor", H, {
            ms_listener: 1, getView: function () {
                return this.gv.getView()
            }, setUp: function () {
                this.addListeners()
            }, tearDown: function () {
                this.removeListeners(), this.clear()
            }, clear: function () {
            }, fi: function (C) {
                this.gv.fi(C)
            }, setCursor: function (d) {
                Xp || this.gv.setCursor(d)
            }, startDragging: function (U) {
                var T = this;
                T._lastClientPoint = Uj(U), T._lastLogicalPoint = T.gv.lp(U), ce(T, U)
            }, clearDragging: function () {
                var a = this;
                a._lastClientPoint = a._lastLogicalPoint = a._logicalPoint = o
            }, autoScroll: function (r) {
                return this.gv.autoScroll(r, this._lastClientPoint)
            }
        });
        var hn = o, ij = function (J) {
            hn.handleWindowTouchMove(J)
        }, Mb = function (U) {
            hn.handleWindowTouchEnd(U), r.removeEventListener(or, ij, O), r.removeEventListener(Kb, Mb, O), hn = o
        }, tc = function (k) {
            hn.handleWindowMouseMove(k)
        }, ps = function ($) {
            hn.handleWindowMouseUp($), r.removeEventListener(Xq, tc, O), r.removeEventListener(hc, ps, O), hn = o
        }, yf = function (K, G) {
            K !== hn && (hn ? Xp ? hn.handleWindowTouchEnd(G) : hn.handleWindowMouseUp(G) : Xp ? (r.addEventListener(or, ij, O), r.addEventListener(Kb, Mb, O)) : (r.addEventListener(Xq, tc, O), r.addEventListener(hc, ps, O)), hn = K)
        }, xj = function (j) {
            var F = this;
            F.gv = j, F._is2d = j instanceof rc.GraphView, F._is2d && (F.filter = function (E) {
                return j.isSelectable(E) && j.isInteractive(E)
            }), j.getView(), ["mousedown", "mousemove", "mouseleave", "touchstart", "touchmove", wj].forEach(function (B) {
                F.addListener(B)
            }), F.initImageResource()
        };
        Jr(xj, yk, {
            enableVR: function (t) {
                var s = this;
                if (!!s._vrEnable !== t) if (s._vrEnable = t, t) s.gv.vr.mp(s.onVRControllerChange, s); else if (s.gv.vr.ump(s.onVRControllerChange, s), s._vrRayPolyline) {
                    var X = s.gv.dm();
                    X.remove(s._vrRayPolyline), X.remove(s._vrRayHitPoint), s._vrRayPolyline = v, s._vrRayHitPoint = v
                }
            }, onVRControllerChange: function (w) {
                var t = this, T = w.property, N = w.newValue, l = t.gv.vr.getController(N.id), d = l.getRay();
                d && ("gamepad.button.trigger" === T ? "down" === N._62O ? t.handle_mousedown(d) : t.handleWindowMouseUp(d) : "gamepad.pose" === T && (t.handle_mousemove(d), t.handleWindowMouseMove(d)))
            }, drawVRRay: function (i, p, s) {
                var C, q = this, $ = q.gv, h = q._vrRayPolyline, _ = !1;
                if (h) C = q._vrRayHitPoint; else {
                    var V = $.dm();
                    q._vrRayPolyline = h = new x.Polyline, q._vrRayHitPoint = C = new x.Node, C.s({
                        shape3d: "billboard",
                        "shape3d.transparent": !0,
                        "shape3d.texture.scale": 10,
                        "shape3d.image": "coreInteractorRayHitImage"
                    }), C.setAnchor3d(.5, .5, .499);
                    var I = .2 / $.vr.measureOflength;
                    C.s3(I, I, I), h.s("intersect", !1), C.s("intersect", !1), V.add(h), V.add(C), _ = !0
                }
                if (p) {
                    var m = s.world, S = s.worldNormal, M = m.x, r = m.y, Y = m.z;
                    h.s("shape.border.color", "red"), h.setPoints([{x: i.origin.x, y: i.origin.z, e: i.origin.y}, {
                        x: M,
                        y: Y,
                        e: r
                    }]), C.s("3d.visible", !0), C.p3(M, r, Y), C.lookAtDirection([S.x, S.y, S.z], "front")
                } else {
                    h.s("shape.border.color", "blue");
                    var P = new x.Math.Vector3;
                    P.copy(i.direction).setLength(1e3 / q.gv.vr.measureOflength).add(i.origin), h.setPoints([{
                        x: i.origin.x,
                        y: i.origin.z,
                        e: i.origin.y
                    }, {x: P.x, y: P.z, e: P.y}]), C.s("3d.visible", !1)
                }
                $.fi({kind: "vrRayIntersect", ray: i, data: p, intersect: s, polyline: h, hitNode: C, begin: _})
            }, addListener: function (C) {
                var K = this;
                K.gv.getView().addEventListener(C, function (g) {
                    w.preventDefault(g), K.disabled || K["handle_" + C](g)
                }, O)
            }, handleWindowTouchMove: function (z) {
                this.handleWindowMouseMove(z)
            }, handleWindowMouseMove: function (o) {
                this.downInfo && (this.isDragging ? this.handleDownInfo("onDrag", o) : (this.handleDownInfo("onBeginDrag", o), this.isDragging = !0))
            }, handleWindowTouchEnd: function (z) {
                this.handleWindowMouseUp(z)
            }, handleWindowMouseUp: function (I) {
                if (this.isDragging && (this.handleDownInfo("onEndDrag", I), this.isDragging = !1), this.downInfo) {
                    var u = this.handle("onUp", I);
                    if (u && u.data === this.downInfo.data) {
                        this.handleMissingUp(I);
                        var g = this, b = 2 === I.button ? "onContextMenu" : "onClick";
                        if (!g._dbclickTimer) return g._dbclickTimer = Z(function () {
                            delete g._dbclickTimer, g.handleClick(I, b, u), this.downInfo = o
                        }, 300), void 0;
                        l(g._dbclickTimer), delete g._dbclickTimer, b = "onDoubleClick", g.handleClick(I, b, u)
                    } else this.handleDownInfo("onUp", I);
                    this.downInfo = o
                }
            }, handle_mouseleave: function (F) {
                var l = this, Y = l.gv, j = l.currentInfo ? l.currentInfo.data : o;
                if (j) {
                    j.s("onLeave") && j.s("onLeave")(F, j, Y), l.fire("data", "onLeave", F, j);
                    var x = l.currentInfo ? l.currentInfo.hits : o;
                    if (x) for (var S in x) l.handleLeave(F, S);
                    l.currentInfo = o
                }
            }, handle_mousewheel: function (N) {
                N.scrollDelta = N.wheelDelta / 40, this.handle("onScroll", N)
            }, handle_DOMMouseScroll: function (C) {
                C.scrollDelta = 2 === C.axis ? -C.detail : 0, this.handle("onScroll", C)
            }, handle_touchstart: function (o) {
                this.handle_mousedown(o)
            }, handle_touchmove: function (t) {
                this.handle("onMove", t)
            }, handle_mousedown: function (a) {
                this.isDragging && (this.handleDownInfo("onEndDrag", a), this.isDragging = !1), this.downInfo = this.handle("onDown", a), this.downInfo && yf(this, a)
            }, handle_mousemove: function (q) {
                var u = this, X = u.gv;
                u._hoverTimer && (l(u._hoverTimer), delete u._hoverTimer);
                var T, S, M, m = u.handle("onMove", q), h = this.currentInfo ? this.currentInfo.data : o,
                    b = this.currentInfo ? this.currentInfo.hits : o;
                if (m && (S = m.data, M = m.hits, u._hoverTimer = Z(function () {
                    l(u._hoverTimer), delete u._hoverTimer, u.handle("onHover", q, m)
                }, X.getHoverDelay() || w.hoverDelay)), S !== h) {
                    if (h && (h.s("onLeave") && h.s("onLeave")(q, h, X), this.fire("data", "onLeave", q, h)), S && (S.s("onEnter") && S.s("onEnter")(q, S, X), this.fire("data", "onEnter", q, S)), b) for (T in b) this.handleLeave(q, T);
                    if (M) for (T in M) {
                        var J = M[T];
                        J.target.onEnter && J.target.onEnter(q, S, X, J.point, J.width, J.height), this.fire(J.type, "onEnter", J.event, J.data, J.image, J.comp, J.point, J)
                    }
                } else {
                    if (b) for (T in b) M && M[T] || this.handleLeave(q, T);
                    if (M) for (T in M) if (!b || !b[T]) {
                        var J = M[T];
                        J.target.onEnter && J.target.onEnter(q, S, X, J.point, J.width, J.height), this.fire(J.type, "onEnter", J.event, J.data, J.image, J.comp, J.point, J)
                    }
                }
                this.currentInfo = m
            }, handle: function (d, y, _) {
                var Q, m = this, I = m.gv;
                if (m._is2d) {
                    if (_ = _ || I.getDataInfoAt(y, this.filter), !_) return;
                    if (Q = _.ui.interactiveInfo) {
                        var c, i = _.data;
                        if (i.s(d) && i.s(d)(y, i, I), this.fire("data", d, y, i), "body" === _.part && Q.bodyInfo) c = "body", _.hits = this.handleImage(c, I.getImage(i), d, y, i, _.point, Q.bodyInfo); else if ("icons" === _.part && Q._38o) {
                            var R = Q._38o[_.name];
                            R && R[_.index] && (c = "icons|" + _.name + "|" + _.index, _.hits = this.handleImage(c, _.icon, d, y, i, _.point, R[_.index]))
                        }
                    }
                    return _
                }
                var i, S;
                if (!_) if (y && y instanceof x.Math.Ray) {
                    var L = I.vr.intersectWorld(y);
                    if (i = L.data, S = L.intersect, m.drawVRRay(y, i, S), !i) return;
                    var C = I.getData3dUI(i);
                    if (Q = C.interactiveInfo, !Q) return;
                    _ = {data: i, part: S.part, ui: C}
                } else {
                    if (_ = I.getDataInfoAt(y), !_) return;
                    _ && (_ = {data: _.data, part: _.part})
                }
                if (!S) {
                    i = _.data;
                    var C = I.getData3dUI(i);
                    if (_.ui = C, Q = C.interactiveInfo, !Q) return _;
                    if (S = I.intersectObject(y, i), !S) return
                }
                i.s(d) && i.s(d)(y, i, I), this.fire("data", d, y, i);
                var G, a = S.part;
                return "body" !== a && (G = i.s(a + ".image") || i.s("shape3d." + a + ".image")), G || (G = i.s("all.image") || i.s("shape3d.image")), Q = "object" == typeof G ? Q[G.uuid] : Q[G], Q && Q.bodyInfo ? (_.part = "body", _.interactiveInfo = Q, _.point = S.uv.multiply({
                    x: Q.bodyInfo.rect.width,
                    y: Q.bodyInfo.rect.height
                }), _.image = G, _.hits = this.handleImage("body", G, d, y, i, _.point, Q.bodyInfo), _) : _
            }, _handleLeaveOrMissing: function (n, D, p) {
                var i = "leave" === n ? this.currentInfo : this.downInfo;
                if (i) {
                    var y = i.interactiveInfo || i.ui.interactiveInfo;
                    if (y) {
                        var s, V, k = i.data;
                        if (this._is2d) {
                            if (V = this.gv.lp(D), "body" === i.part && y.bodyInfo) s = "body", "leave" === n ? this.handleLeaveImage(p, s, this.gv.getImage(k), D, k, V, y.bodyInfo) : this.handleMissingUpImage(s, this.gv.getImage(k), D, k, V, y.bodyInfo); else if ("icons" === i.part && y._38o) {
                                var S = y._38o[i.name];
                                S && S[i.index] && (s = "icons|" + i.name + "|" + i.index, "leave" === n ? this.handleLeaveImage(p, s, i.icon, D, k, V, S[i.index]) : this.handleMissingUpImage(s, i.icon, D, k, V, S[i.index]))
                            }
                        } else {
                            if (!y.bodyInfo) return;
                            var R = this.gv.intersectObject(D, k);
                            V = R ? R.uv.multiply({x: y.bodyInfo.rect.width, y: y.bodyInfo.rect.height}) : {
                                x: 1 / 0,
                                y: 1 / 0
                            }, "leave" === n ? this.handleLeaveImage(p, "body", i.image, D, k, V, y.bodyInfo) : this.handleMissingUpImage("body", i.image, D, k, V, y.bodyInfo)
                        }
                    }
                }
            }, handleClick: function (O, N, L) {
                var b = this, t = this.downInfo;
                if (t && L) {
                    var U, X = L.interactiveInfo || L.ui.interactiveInfo, B = L.data, M = this.gv;
                    if (B.s(N) && B.s(N)(O, B, M), b.fire("data", N, O, B), X) if (this._is2d) {
                        if (t.part === L.part) {
                            var I = M.lp(O);
                            "body" === L.part && X.bodyInfo && (U = "body", this.handleClickImage(U, M.getImage(B), N, O, B, I, X.bodyInfo, L))
                        }
                    } else {
                        if (!X.bodyInfo) return;
                        var z = M.intersectObject(O, B);
                        if (!z) return;
                        I = z.uv.multiply({
                            x: X.bodyInfo.rect.width,
                            y: X.bodyInfo.rect.height
                        }), this.handleClickImage("body", t.image, N, O, B, I, X.bodyInfo, L)
                    }
                }
            }, handleDownInfo: function (q, s) {
                if (this.downInfo) {
                    var i = this.downInfo, K = this.gv, X = i.interactiveInfo || i.ui.interactiveInfo;
                    if (X) {
                        var O, U = i.data;
                        if (U.s(q) && U.s(q)(s, U, K), this.fire("data", q, s, U), this._is2d) {
                            var W = K.lp(s);
                            if ("body" === i.part && X.bodyInfo) O = "body", this.handleDownInfoImage(O, K.getImage(U), q, s, U, W, X.bodyInfo); else if ("icons" === i.part && X._38o) {
                                var Y = X._38o[i.name];
                                Y && Y[i.index] && (O = "icons|" + i.name + "|" + i.index, this.handleDownInfoImage(O, i.icon, q, s, U, W, Y[i.index]))
                            }
                        } else {
                            if (!X.bodyInfo) return;
                            var z = K.intersectObject(s, U);
                            if (!z) return;
                            W = z.uv.multiply({
                                x: X.bodyInfo.rect.width,
                                y: X.bodyInfo.rect.height
                            }), this.handleDownInfoImage("body", i.image, q, s, U, W, X.bodyInfo)
                        }
                    }
                }
            }, fire: function (B, b, q, z, N, S, n, f) {
                this.gv.fi({
                    kind: b,
                    type: B,
                    event: q,
                    data: z,
                    image: N,
                    comp: S,
                    view: this.gv,
                    point: n,
                    width: f ? f.width : v,
                    height: f ? f.height : v
                })
            }, handleImage: function (D, h, I, n, W, Y, k) {
                var d = {};
                if (h && (h = Ui(h))) {
                    var G = this.gv, t = k.rect, M = this.convertPoint(Y, k);
                    M.inRect && (h[I] && h[I](n, W, G, M, t.width, t.height), this.fire("image", I, n, W, h, v, M, t), d[D + "|image"] = {
                        target: h,
                        type: "image",
                        image: h,
                        data: W,
                        event: n,
                        point: M,
                        width: t.width,
                        height: t.height
                    });
                    for (var K = k.compInfos, s = h, w = K.length - 1; w >= 0; w--) {
                        var N = K[w], Q = N.comp;
                        M = this.convertPoint(Y, N, s, Q, G, W), M.inRect && (t = N.rect, Q[I] && Q[I](n, W, G, M, t.width, t.height), this.fire("comp", I, n, W, h, Q, M, t), (h = t.image) && (h[I] && h[I](n, W, G, M, t.width, t.height), this.fire("image", I, n, W, h, v, M, t)), d[D + "|" + w] = {
                            target: Q,
                            type: "comp",
                            comp: Q,
                            image: h,
                            data: W,
                            event: n,
                            point: M,
                            width: t.width,
                            height: t.height
                        }, h && (d[D + "|" + w + "|image"] = {
                            target: h,
                            type: "image",
                            image: h,
                            data: W,
                            event: n,
                            point: M,
                            width: t.width,
                            height: t.height
                        }))
                    }
                }
                return d
            }, handleLeave: function (l, h) {
                return this._handleLeaveOrMissing("leave", l, h)
            }, handleMissingUp: function (B) {
                return this._handleLeaveOrMissing("missing", B)
            }, handleLeaveImage: function (w, M, A, m, T, C, D) {
                if (A && (A = Ui(A))) {
                    var c = this.gv, X = D.rect, I = this.convertPoint(C, D);
                    w === M + "|image" && (A.onLeave && A.onLeave(m, T, c, I, X.width, X.height), this.fire("image", "onLeave", m, T, A, v, I, X));
                    for (var x = D.compInfos, K = A, $ = x.length - 1; $ >= 0; $--) {
                        var r = x[$], q = r.comp;
                        I = this.convertPoint(C, r, K, q, c, T), X = r.rect, w === M + "|" + $ && (q.onLeave && q.onLeave(m, T, c, I, X.width, X.height), this.fire("comp", "onLeave", m, T, A, q, I, X)), (A = X.image) && w === M + "|" + $ + "|image" && (A.onLeave && A.onLeave(m, T, c, I, X.width, X.height), this.fire("image", "onLeave", m, T, A, v, I, X))
                    }
                }
            }, handleMissingUpImage: function (K, u, X, x, Y, J) {
                var p = "onUp", d = this.downInfo.hits;
                if (d && u && (u = Ui(u))) {
                    var O = this.gv, P = J.rect, V = this.convertPoint(Y, J);
                    !V.inRect && d[K + "|image"] && (u[p] && u[p](X, x, O, V, P.width, P.height), this.fire("image", p, X, x, u, v, V, P));
                    for (var S = J.compInfos, w = u, W = S.length - 1; W >= 0; W--) {
                        var Q = S[W], $ = Q.comp;
                        V = this.convertPoint(Y, Q, w, $, O, x), V.inRect || (P = Q.rect, d[K + "|" + W] && ($[p] && $[p](X, x, O, V, P.width, P.height), this.fire("comp", p, X, x, u, $, V, P)), (u = P.image) && d[K + "|" + W + "|image"] && (u[p] && u[p](X, x, O, V, P.width, P.height), this.fire("image", p, X, x, u, v, V, P)))
                    }
                }
            }, handleDownInfoImage: function (Y, z, m, x, N, X, O) {
                var T = this.downInfo.hits;
                if (T && z && (z = Ui(z))) {
                    var G = this.gv, b = O.rect, Q = this.convertPoint(X, O);
                    T[Y + "|image"] && (z[m] && z[m](x, N, G, Q, b.width, b.height), this.fire("image", m, x, N, z, v, Q, b));
                    for (var S = O.compInfos, _ = z, J = S.length - 1; J >= 0; J--) {
                        var H = S[J], W = H.comp;
                        Q = this.convertPoint(X, H, _, W, G, N), b = H.rect, T[Y + "|" + J] && (W[m] && W[m](x, N, G, Q, b.width, b.height), this.fire("comp", m, x, N, z, W, Q, b)), (z = b.image) && T[Y + "|" + J + "|image"] && (z[m] && z[m](x, N, G, Q, b.width, b.height), this.fire("image", m, x, N, z, v, Q, b))
                    }
                }
            }, handleClickImage: function (U, O, a, e, T, _, j, s) {
                var x = this.downInfo.hits, z = s.hits;
                if (x && O && (O = Ui(O))) {
                    var f = this.gv, g = j.rect, J = this.convertPoint(_, j);
                    x[U + "|image"] && (O[a] && O[a](e, T, f, J, g.width, g.height), this.fire("image", a, e, T, O, v, J, g));
                    for (var H = j.compInfos, d = O, w = H.length - 1; w >= 0; w--) {
                        var k = H[w], y = k.comp;
                        J = this.convertPoint(_, k, d, y, f, T), g = k.rect, x[U + "|" + w] && z[U + "|" + w] && (y[a] && y[a](e, T, f, J, g.width, g.height), this.fire("comp", a, e, T, O, y, J, g)), (O = g.image) && x[U + "|" + w + "|image"] && (O[a] && O[a](e, T, f, J, g.width, g.height), this.fire("image", a, e, T, O, v, J, g))
                    }
                }
            }, initImageResource: function () {
                w.setImage("coreInteractorRayHitImage", {
                    width: 16,
                    height: 16,
                    comps: [{
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        opacity: .3,
                        rotation: -1.593,
                        rect: [.73315, .6933, 14.5337, 14.61341]
                    }, {
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        rotation: -1.593,
                        rect: [3.56695, 3.75073, 8.8661, 8.49856]
                    }]
                })
            }, convertPoint: function (c, h, I, x, k, m) {
                var H = h.rect, B = h.matrix.applyInverse(c).sub(H),
                    j = B.x >= 0 && B.y >= 0 && B.x <= H.width && B.y <= H.height;
                if (!j) return B;
                if (x && pe(x.pixelPerfect, m, k)) {
                    var H, u = 1;
                    this._is2d ? (u = k.getZoom(), H = Wg(c.x, c.y, v, u)) : H = Wg(c.x, c.y);
                    var Y = !1, r = H.x, M = H.y, q = H.width, l = H.height, V = w.hitMaxArea, g = q * l * u * u;
                    if (g > V) {
                        var X = Math.sqrt(V / g);
                        u *= X
                    }
                    q *= u, l *= u, 2 > q && (q = 2), 2 > l && (l = 2), r *= u, M *= u;
                    var Z = El(q, l), y = new Hf(0, -r, -M, u, u);
                    y.append(h.matrix), k._drawForChecking = !0, x.transform = y;
                    var F = I.comps;
                    I.comps = [x], Co(Z, I, 0, 0, q, l, m, self), I.comps = F, delete x.transform, k._drawForChecking = !1;
                    try {
                        for (var S = 0, G = Z.getImageData(0, 0, q, l).data; S < G.length; S += 4) if (0 !== G[S + 3]) {
                            Y = !0;
                            break
                        }
                        Z.restore()
                    } catch (Q) {
                        $n = o, Y = !1
                    }
                    B.inRect = Y
                } else B.inRect = !0;
                return B
            }
        });
        var mj = rc.DefaultInteractor = function (T) {
            yp(mj, this, [T])
        };
        rk("DefaultInteractor", yk, {
            handle_mousedown: function (r) {
                Yd(r);
                var n = this, X = n.gv, V = X.getDataAt(r);
                !X.setFocus(r) || X._editing || X._scrolling || (qs(r) ? X.handleDoubleClick(r, V) : X.handleClick(r, V), !Hk() && V && (X.isMovable(V) || X.isInteractive(V)) || !X.isPannable() || !Di(r) || Kg(r) || (n._tx = X.tx(), n._ty = X.ty(), n.startDragging(r)))
            }, handleWindowMouseUp: function (_) {
                var i = this, X = i.gv;
                X._panning && (delete X._panning, X.onPanEnded(), i.fi({
                    kind: "endPan",
                    event: _
                })), delete i._tx, delete i._ty, i.clearDragging()
            }, handle_mousemove: function (q) {
                var $ = this, d = $.gv;
                $._hoverTimer && (l($._hoverTimer), delete $._hoverTimer), $._hoverTimer = Z(function () {
                    $.fi({kind: "hover", event: q}), l($._hoverTimer), delete $._hoverTimer
                }, d.getHoverDelay() || w.hoverDelay)
            }, handle_touchmove: function (R) {
                this.handle_mousemove(R)
            }, handleWindowMouseMove: function (O) {
                var Q = this, M = Q.gv, K = Q._lastClientPoint;
                Q.fi({
                    kind: M._panning ? "betweenPan" : "beginPan",
                    event: O
                }), M._panning = 1, M.setTranslate(Q._tx + O.clientX - K.x, Q._ty + O.clientY - K.y)
            }, handle_mousewheel: function (z) {
                this.gv.handleScroll(z, z.wheelDelta)
            }, handle_DOMMouseScroll: function (b) {
                2 === b.axis && this.gv.handleScroll(b, -b.detail)
            }, handle_keydown: function (g) {
                this.gv.handleKeyDown(g)
            }
        });
        var Wr = rc.SelectInteractor = function (S) {
            yp(Wr, this, [S])
        };
        rk("SelectInteractor", yk, {
            _42: function () {
                var h = this, u = h.gv, I = u.getZoom(), Z = h.mark, g = h.div;
                g || (g = h.div = Hm(), Ur(h.getView(), g));
                var K = {};
                K.x = Z.x * I + u.tx(), K.y = Z.y * I + u.ty(), K.width = Z.width * I, K.height = Z.height * I, Vq(g, K), this.intersects() ? (g.style.border = "", g.style.background = u.getRectSelectBackground()) : (g.style.background = "", g.style.border = "1px solid " + u.getRectSelectBorderColor())
            }, handle_mousedown: function (g) {
                var U = this, X = U.gv;
                if (U._57I = o, U.pendingClickThrough = o, !(X._editing || X._scrolling || Hk())) {
                    var z = X.getDataAt(g), E = X.sm();
                    z ? Kg(g) ? E.co(z) ? E.rs(z) : E.as(z) : E.co(z) ? z instanceof yg && z.isClickThroughEnabled() && Di(g) && (U.pendingClickThrough = Uj(g)) : E.ss(z) : Kg(g) || !X.isPannable() ? Di(g) && (Kg(g) || E.cs(), X.isRectSelectable() && (U.startDragging(g), X._77O = 1)) : Di(g) && (U._57I = Uj(g))
                }
            }, handle_mouseup: function (Z) {
                var s = this, h = s.gv, v = s._57I;
                if (v && (vl(v, Uj(Z)) <= 1 && h.sm().cs(), s._57I = o), s.pendingClickThrough) {
                    if (vl(s.pendingClickThrough, Uj(Z)) <= 1) {
                        var I = h.getDataAt(Z);
                        if (I instanceof yg && I.isClickThroughEnabled()) {
                            var _ = h.getDataAt(Z, function (i) {
                                var O = i.getParent() === I && h.isSelectable(i, !0);
                                return O
                            });
                            _ && (Z.clickThrough = !0, h.sm().ss(_))
                        }
                    }
                    s.pendingClickThrough = o
                }
            }, handleWindowMouseUp: function (k) {
                this.clear(k)
            }, handleWindowMouseMove: function (A) {
                var G = this, R = G.gv;
                G._logicalPoint = R.lp(A), G.mark ? (G.fi({
                    kind: "betweenRectSelect",
                    event: A
                }), R.isPannable() && G.autoScroll(A), G.redraw()) : G.fi({
                    kind: "beginRectSelect",
                    event: A
                }), G.mark = an(G._lastLogicalPoint, G._logicalPoint), G.redraw()
            }, intersects: function () {
                var N = this, d = N._lastLogicalPoint, M = N._logicalPoint;
                return d.x > M.x || d.y > M.y
            }, clear: function (b) {
                var J = this, c = J.gv, I = J.mark;
                if (J._57I = o, J.pendingClickThrough = o, J._lastLogicalPoint) {
                    if (I) {
                        if (0 !== I.width && 0 !== I.height) {
                            var s = c.getDatasInRect(I, J.intersects());
                            if (!s.isEmpty()) {
                                var t = c.sm(), n = t.toSelection();
                                s.each(function (c) {
                                    t.co(c) ? n.remove(c) : n.add(c)
                                }), t.ss(n)
                            }
                        }
                        Lg(J.div), delete J.div, delete J.mark, J.redraw(), J.fi({
                            kind: "endRectSelect",
                            event: b
                        }), c.onRectSelectEnded()
                    }
                    J.clearDragging(), delete c._77O
                }
            }, redraw: function () {
                var i = this;
                i._draw || (i._draw = 1, Z(function () {
                    i.mark && i._42(), delete i._draw
                }, 16))
            }
        });
        var oh = rc.MoveInteractor = function (i) {
            yp(oh, this, [i])
        };
        rk("MoveInteractor", yk, {
            handle_mousedown: function (K) {
                var U = this, q = U.gv;
                if (Di(K) && !q._editing && !q._scrolling && !Hk()) {
                    var z = q.getSelectedDataAt(K);
                    !z || q.isInteractive(z) && !q.isMovable(z) ? q._focusData = o : (U._data = z, q.handleMouseDown && q.handleMouseDown(K, z), U.startDragging(K), q.isMovable(z) && (q._moving = 1))
                }
            }, handleWindowMouseUp: function (R) {
                var r = this, U = r.gv;
                U.handleMouseUp && U.handleMouseUp(R, r._data), r.clear(R)
            }, handleWindowMouseMove: function (D) {
                var A = this, k = A._data, j = A.gv;
                if ((!j._93O || !j._93O(D, k)) && j._moving) {
                    A._logicalPoint || A.fi({kind: "prepareMove", event: D});
                    var Z = A._logicalPoint ? "betweenMove" : "beginMove", O = {kind: Z, event: D},
                        W = A._logicalPoint = j.lp(D);
                    "beginMove" !== Z || A._alreadyBeginTransaction || (A._alreadyBeginTransaction = !0, j.getDataModel().beginTransaction());
                    var x = A._calcShift(Z, D), m = x.x, s = x.y, q = A.gv.getMoveMode(D, k);
                    q && ("x" === q ? s = 0 : "y" === q ? m = 0 : "xy" !== q && (m = s = 0)), j.moveSelection(m, s), A._lastLogicalPoint = W, A.autoScroll(D), A.fi(O)
                }
            }, _calcShift: function () {
                var k = this, E = k._logicalPoint, Y = k._lastLogicalPoint, w = E.x - Y.x, t = E.y - Y.y;
                return {x: w, y: t}
            }, clear: function (X) {
                var U = this, b = U.gv;
                U._lastLogicalPoint && (U._lastLogicalPoint = U._data = b._moving = o, U._logicalPoint && (U.fi({
                    kind: "endMove",
                    event: X
                }), b.onMoveEnded()), U.clearDragging()), U._alreadyBeginTransaction && (U._alreadyBeginTransaction = !1, b.getDataModel().endTransaction())
            }
        });
        var go = rc.TextEditInteractor = function (F) {
            yp(go, this, [F]), this.init()
        };
        rk("TextEditInteractor", yk, {
            init: function () {
                var K = this, k = this.input = G.createElement("input"), m = k.style;
                k.text = "text", m.border = "1px solid #d8d8d8", m.position = "absolute", m.padding = "2px 3px", m.outline = "none", m.marginLeft = "-90px", m.marginTop = "-16px", m.backgroundColor = "rgba(255,255,255, 0.9)", m.fontSize = "14px", m.width = "180px", m.height = "32px", m.boxShadow = "0 0 13px rgba(16,142,233, 0.5)", m.textAlign = "center", m.boxSizing = "border-box", k.addEventListener("keyup", function (q) {
                    ml(q) && K.endTextEdit()
                });
                var J = this.textarea = G.createElement("textarea"), V = this.wrap = G.createElement("div");
                V.appendChild(J), m = J.style, m.margin = 0, m.padding = "4px", m.overflow = "hidden", m.boxSizing = "border-box", m.position = "absolute", m.outline = "none", m.backgroundColor = "transparent", m.resize = "none", m.textAlign = "center", m.fontSize = "14px", m.border = "none", m.borderWidth = 0, m.width = "100%", m.top = "50%", m = V.style, m.boxSizing = "border-box", m.margin = 0, m.padding = 0, m.position = "absolute", m.boxShadow = "0 0 13px rgba(16,142,233, 0.5)", m.border = "1px solid #d8d8d8", m.backgroundColor = "rgba(255,255,255, 0.9)", m.width = "180px", m.marginLeft = "-90px", J.addEventListener("keydown", function (n) {
                    return (sf() || Kg()) && ml(n) ? (K.endTextEdit(), void 0) : (K.calculateTextareaHeight(String.fromCharCode(n.keyCode)), void 0)
                });
                var u = function (D) {
                    D.stopPropagation()
                };
                k.addEventListener("mousedown", u), k.addEventListener("touchstart", u), J.addEventListener("mousedown", u), J.addEventListener("touchstart", u), K.SIZING_STYLE = ["letter-spacing", "line-height", "padding-top", "padding-bottom", "font-family", "font-weight", "font-size", "text-rendering", "text-transform", "width", "text-indent", "padding-left", "padding-right", "border-width", "box-sizing"], K.HIDDEN_TEXTAREA_STYLE = "visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important", K.handleWindowClick = function (e) {
                    var b = K._editingDOM, s = b.getBoundingClientRect(), u = Uj(e);
                    wc(s, u) || K.endTextEdit()
                }
            }, handle_mousedown: function (d) {
                var q = this, K = q.gv;
                if (qs(d) && !K._editing) {
                    var F = K.getDataAt(d);
                    if (F) {
                        var O = K.getTextEditInfo(F);
                        O && (this._editInfo = O, this._editTarget = F, K._editing = !0, O.isMultiline ? this.handleMultilineEdit() : this.handleTextEdit())
                    }
                }
            }, handleMultilineEdit: function () {
                var z = this, l = z.gv, a = z._editTarget, P = z.getTargetValue(), y = z.textarea, j = z.wrap;
                this.hiddenTextarea || this.createHiddenTextarea(), (null === P || P === v) && (P = ""), y.value = P, z._editingDOM = y, l.getView().appendChild(j), this.layoutHTML(j, a), this.calculateTextareaHeight(), Z(function () {
                    y.focus(), r.addEventListener("mousedown", z.handleWindowClick), r.addEventListener("touchstart", z.handleWindowClick)
                }, 10)
            }, handleTextEdit: function () {
                var Q = this, E = Q.gv, w = Q._editTarget, L = Q.getTargetValue(), V = Q.input;
                (null === L || L === v) && (L = ""), V.value = L, Q._editingDOM = V, E.getView().appendChild(V), this.layoutHTML(V, w), Z(function () {
                    V.focus(), r.addEventListener("mousedown", Q.handleWindowClick), r.addEventListener("touchstart", Q.handleWindowClick)
                }, 10)
            }, layoutHTML: function (F, C) {
                var o = this.gv, E = o.getZoom();
                if (C instanceof x.Node) {
                    var I = C.getRect();
                    F.style.left = (I.x + I.width / 2) * E + o.tx() + "px", F.style.top = (I.y + I.height / 2) * E + o.ty() + "px"
                } else if (C instanceof x.Edge) {
                    var l = o.getDataUI(C), I = l._6I;
                    F.style.left = (I.x + I.width / 2) * E + o.tx() + "px", F.style.top = (I.y + I.height / 2) * E + o.ty() + "px"
                }
            }, endTextEdit: function () {
                var G = this, n = G._editInfo.isMultiline ? G.wrap : G.input,
                    Z = G._editInfo.isMultiline ? G.textarea : G.input;
                G.setTargetValue(Z.value), G.gv.getView().removeChild(n), G.gv._editing = !1, delete G._editingDOM, r.removeEventListener("mousedown", G.handleWindowClick), r.removeEventListener("touchstart", G.handleWindowClick)
            }, setTargetValue: function (M) {
                var h = this, W = h._editTarget, w = h._editInfo, V = w.accessType, A = w.name;
                if (A && V || (V = "p", A = "name"), "p" === V) {
                    var Z = x.Default.setter(A);
                    W[Z](M)
                } else "a" === V ? W.a(A, M) : W.s(A, M)
            }, getTargetValue: function () {
                var T = this, J = T._editTarget, c = T._editInfo, n = c.accessType, F = c.name;
                if (F && n || (n = "p", F = "name"), "p" === n) {
                    var i = x.Default.getter(F);
                    return J[i]()
                }
                return "a" === n ? J.a(F) : J.s(F)
            }, createHiddenTextarea: function () {
                this.hiddenTextarea = G.createElement("textarea"), this.hiddenTextarea.setAttribute("style", "margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;"), this.hiddenTextarea.setAttribute("rows", "1"), this.gv.getView().appendChild(this.hiddenTextarea)
            }, calculateHTMLStyle: function (Q, c) {
                if (c && this.computedStyleCache) return this.computedStyleCache;
                var N = this, h = r.getComputedStyle(Q),
                    w = h.getPropertyValue("box-sizing") || h.getPropertyValue("-moz-box-sizing") || h.getPropertyValue("-webkit-box-sizing"),
                    $ = parseFloat(h.getPropertyValue("padding-bottom")) + parseFloat(h.getPropertyValue("padding-top")),
                    u = parseFloat(h.getPropertyValue("border-bottom-width")) + parseFloat(h.getPropertyValue("border-top-width")),
                    p = N.SIZING_STYLE.map(function (P) {
                        return P + ":" + h.getPropertyValue(P)
                    }).join(";"), V = {sizingStyle: p, paddingSize: $, borderSize: u, boxSizing: w};
                return c && (this.computedStyleCache = V), V
            }, calculateTextareaHeight: function (f) {
                f = f || "";
                var B = this, C = B.textarea, S = B.hiddenTextarea, z = B.wrap, r = 32, e = B.calculateHTMLStyle(C, !1),
                    v = e.paddingSize, i = e.borderSize, w = e.boxSizing, Y = e.sizingStyle;
                S.setAttribute("style", Y + ";" + B.HIDDEN_TEXTAREA_STYLE), S.value = C.value + f;
                var c = S.scrollHeight;
                "border-box" === w ? c += i : "content-box" === w && (c -= v), C.style.height = c + "px", C.style.marginTop = 0 - .5 * c + "px", z.style.height = Math.max(c, r) + "px", z.style.marginTop = c * -.5 + "px"
            }
        });
        var ud = rc.ScrollBarInteractor = function (J) {
            yp(ud, this, [J])
        };
        rk("ScrollBarInteractor", yk, {
            _41o: function () {
                return this.gv.getViewRect().height < this.gv.getScrollRect().height
            }, _40o: function () {
                return this.gv.getViewRect().width < this.gv.getScrollRect().width
            }, isV: function (m) {
                var b = this.gv.getViewRect();
                return this._41o() && (b.x + b.width - this.gv.lp(m).x) * this.gv.getZoom() < Oi
            }, isH: function (W) {
                var t = this.gv.getViewRect();
                return this._40o() && (t.y + t.height - this.gv.lp(W).y) * this.gv.getZoom() < Oi
            }, handle_mousemove: function (m) {
                this.handle_touchmove(m)
            }, handle_touchmove: function (A) {
                if (!fq && Di(A) && this.gv.isScrollBarVisible()) {
                    var T = this, V = T.isV(A), f = T.isH(A);
                    (V || f) && T.gv.showScrollBar(), T.gv._scrolling = V || f
                }
            }, handleWindowMouseUp: function (I) {
                this.handleWindowTouchEnd(I)
            }, handleWindowTouchEnd: function (i) {
                this._state = this._cp = this._tx = this._ty = this.gv._scrolling = o, this.fi({
                    kind: "endScroll",
                    event: i
                })
            }, handle_mousedown: function (n) {
                this.handle_touchstart(n)
            }, handle_touchstart: function (s) {
                var w = this;
                if (w.gv.setFocus(s), Yd(s), w.handle_touchmove(s), !($h(s) > 1) && w.gv._scrolling && w.gv.isScrollBarVisible()) {
                    w._cp = Uj(s), w._tx = w.gv.tx(), w._ty = w.gv.ty();
                    var o = w.isV(s);
                    w._state = o ? "vScroll" : "hScroll", ce(w, s), w.fi({kind: "beginScroll", event: s})
                }
            }, handleWindowMouseMove: function (H) {
                this.handleWindowTouchMove(H)
            }, handleWindowTouchMove: function (T) {
                var D = Uj(T), u = this.gv.getViewRect(), x = this.gv.getScrollRect();
                "vScroll" === this._state ? this.gv.ty(this._ty + (this._cp.y - D.y) * x.height / u.height) : "hScroll" === this._state && this.gv.tx(this._tx + (this._cp.x - D.x) * x.width / u.width), this.fi({
                    kind: "betweenScroll",
                    event: T
                })
            }
        });
        var oo = rc.TouchInteractor = function (g, N) {
            N = N || {}, N.selectable === v && (N.selectable = !0), N.movable === v && (N.movable = !0), N.pannable === v && (N.pannable = !0), N.pinchable === v && (N.pinchable = !0), N.editable === v && (N.editable = !0), this.params = N, yp(oo, this, [g])
        };
        rk("TouchInteractor", yk, {
            ms_edit: 1, setUp: function () {
                var L = this;
                oo.superClass.setUp.call(L), Xp && L.params.editable && L.gv.setEditInteractor(L)
            }, tearDown: function () {
                var Z = this;
                oo.superClass.tearDown.call(Z), Xp && Z.params.editable && Z.gv.setEditInteractor(o)
            }, clear: function (Q) {
                var s = this, m = s.gv;
                m._moving && (s.fi({
                    kind: "endMove",
                    event: Q
                }), delete m._moving, m.onMoveEnded(), m.dm().endTransaction()), m._panning && (s.fi({
                    kind: "endPan",
                    event: Q
                }), delete m._panning, m.onPanEnded()), m._pinching && (s.fi({
                    kind: "endPinch",
                    event: Q
                }), delete m._pinching, m.onPinchEnded()), m._editing && (s._46O(Q), s._77I = s._node = s._edge = s._shape = s._rect = s._89I = s._index = m._editing = o), s._moving = s._panning = s._pinching = s._editing = s._57I = s._data = s._beginHistory = o, s.clearDragging()
            }, handle_touchstart: function (q) {
                var l = this;
                if (!l.gv._editing) {
                    Yd(q), l._57I = o;
                    var A = l.params, v = l.gv, F = v.sm(), G = v.getDataAt(q), J = $h(q);
                    if (1 === J) {
                        if (qs(q)) return v.handleDoubleClick(q, G), void 0;
                        v.handleClick(q, G), G && (v.handleMouseDown && v.handleMouseDown(q, G), l._data = G), A.selectable || (G = o), G ? (F.co(G) || F.ss(G), A.editable && v.isEditable(G) && l._79I(q, G, !0) ? (l._editing = 1, l.startDragging(q)) : A.movable && v.isMovable(G) && (l._moving = 1, l.startDragging(q))) : (l._57I = Uj(q), A.pannable && v.isPannable() && (l._panning = 1, l.startDragging(q), l._translate = {
                            x: v.tx(),
                            y: v.ty()
                        }))
                    } else if (A.pinchable && 2 === J) {
                        l._pinching = 1, l.startDragging(q);
                        var B = v.getView(), H = v.getZoom(), R = B.getBoundingClientRect(), f = q.touches[0],
                            e = q.touches[1],
                            C = {x: (f.clientX + e.clientX) / 2 - R.left, y: (f.clientY + e.clientY) / 2 - R.top};
                        C.x -= v.tx(), C.y -= v.ty(), C.x /= H, C.y /= H, l._p = C, l._d = vj(q)
                    }
                }
            }, handle_touchend: function (s) {
                var N = this, h = N.gv, M = N._57I, x = N._data;
                M && (vl(M, Uj(s)) <= 1 && h.sm().cs(), N._57I = o), x && h.handleMouseUp && h.handleMouseUp(s, x)
            }, handleWindowTouchEnd: function (F) {
                this.clear(F)
            }, handleWindowTouchMove: function (d) {
                var b = this, x = b.gv, N = $h(d);
                if (1 === N) {
                    if (b._editing && (b._beginHistory || (b._beginHistory = 1, x.dm().beginTransaction()), x._editing = 1, b._78I(d)), b._moving) b._beginHistory || (b._beginHistory = 1, x.dm().beginTransaction()), b.handleMove(d); else if (b._panning) {
                        var p = Uj(d);
                        x.setTranslate(b._translate.x + p.x - b._lastClientPoint.x, b._translate.y + p.y - b._lastClientPoint.y), b.fi({
                            kind: x._panning ? "betweenPan" : "beginPan",
                            event: d
                        }), x._panning = 1
                    }
                } else if (2 === N && b._pinching) {
                    var z = vj(d);
                    x.handlePinch(b._p, z, b._d), b._d = z, b.fi({
                        kind: x._pinching ? "betweenPinch" : "beginPinch",
                        event: d
                    }), x._pinching = 1
                }
            }, handleMove: function (h) {
                var o = this, B = o.gv, l = B.lp(h);
                B._93O && B._93O(h, o._data) || (B.moveSelection(l.x - o._lastLogicalPoint.x, l.y - o._lastLogicalPoint.y), o._lastLogicalPoint = l, o.autoScroll(h), o.fi({
                    kind: B._moving ? "betweenMove" : "beginMove",
                    event: h
                }), B._moving = 1)
            }
        });
        var x = r.ht, _p = x.graph._editor = {Math: x.Math, Guide: {}};
        _p.getStyle = function (l) {
            var G, d = _p.StyleMap;
            return d && (G = d[l], G !== v) ? G : _p.DefaultStyleMap[l]
        }, _p.setStyle = function (g, J) {
            var o = _p.StyleMap;
            o || (o = _p.StyleMap = {}), o[g] = J
        }, _p.inEdit = function (C) {
            return C._inXEdit === !0
        }, _p.startEdit = function (w) {
            w._inXEdit = !0, _p.Inject.doInject(w)
        }, _p._46O = function (T) {
            T._inXEdit = !1, _p.Inject.undoInject(T)
        }, _p.toScreenPosition = function (D, b) {
            var J = D.tx(), l = D.ty(), I = D._zoom;
            return new _p.Math.Vector2(b.x * I + J, b.y * I + l)
        }, _p.checkHit = function (L, P, u) {
            return L.distanceTo(P) < u ? !0 : !1
        }, _p.toWorldPosition = function (T, B) {
            var l = T.tx(), _ = T.ty(), D = T._zoom;
            return {x: (B.x - l) / D, y: (B.y - _) / D}
        }, _p.setAntialias = function (I, Z) {
            for (var W, M = ["imageSmoothingEnabled", "webkitImageSmoothingEnabled", "mozImageSmoothingEnabled", "oImageSmoothingEnabled", "msImageSmoothingEnabled"], b = 0, H = M.length; H > b && (W = M[b], !(W in I)); b++) ;
            I[W], I[W] = Z
        }, _p.getTargetCornersOnScreen = function (M, d) {
            if (!d) return null;
            var w, W = [];
            if (Tn(d, M)) {
                var q = Eq(M, d);
                w = [{x: q.x, y: q.y}, {x: q.x + q.width, y: q.y}, {x: q.x + q.width, y: q.y + q.height}, {
                    x: q.x,
                    y: q.y + q.height
                }]
            } else {
                if (!d.getCorners) return null;
                w = d.getCorners()
            }
            return w.forEach(function (R) {
                var Y = _p.toScreenPosition(M, R);
                W.push(Y.x, Y.y)
            }), W
        }, _p.log = function () {
        };
        var Wm = _p.Inject = {_modules: []};
        Wm.registAsModule = function (n, t) {
            var y = {}, x = {};
            for (var K in n) {
                var M = t.prototype[K];
                y[K] = M
            }
            n.getBackup = function (M) {
                return y[M]
            }, n.getBackups = function () {
                return y
            }, x.doInject = function () {
                for (var F in n) "getBackup" !== F && (t.prototype[F] = n[F])
            }, x.undoInject = function () {
                for (var W in n) "getBackup" !== W && (t.prototype[W] = y[W])
            }, Wm._modules.push(x)
        }, Wm.doInject = function (f) {
            for (var Y, G = Wm._modules, X = 0, h = G.length; h > X; X++) Y = G[X], Y.doInject(f)
        }, Wm.undoInject = function (o) {
            for (var j, h = Wm._modules, d = 0, b = h.length; b > d; d++) j = h[d], j.undoInject(o)
        };
        var yk = x.graph.EditInteractor = function (n) {
            var A = this, _ = G.createElement("canvas");
            _.className = "editCanvas", _.style.position = "absolute", A._styleMap = {}, A._canvas = _, A._context = _.getContext("2d"), yk.superClass.constructor.call(A, n), _p.setAntialias(A._context, !1), A._subModules = [new _p.Anchor(A), new _p.RotateX(A), new _p.Rect(A), new _p.Curve(A), new _p.MoveHelper(A)], A._gridGuide = new _p.Guide.Grid(A), A._rectGuide = new _p.Guide.Rect(A), A._hoverGuide = new _p.Guide.Hover(A)
        }, Cr = yk;
        x.Default.def(yk, x.graph.Interactor, {ms_edit: 1, ms_fire: 1}), H.defineProperties(yk.prototype, {
            editDetail: {
                get: function () {
                    var o = !!this._editDetail;
                    return o
                }, set: function (X) {
                    var S = this, b = S._editDetail;
                    b !== X && (S._editDetail = X, S.gv._editing = X, S.fp("editDetail", b, X), S.fp("pointsEditingMode", b, X), S.fi({kind: X ? "beginEditPoints" : "endEditPoints"}))
                }
            }, gvEditing: {
                get: function () {
                    return this.gv._editing
                }, set: function (H) {
                    (!this._editDetail || H) && (this.gv._editing = H, H || (this.editDetail = !1))
                }
            }, editing: {
                get: function () {
                    return this._editing
                }, set: function (Q) {
                    this._editing = Q, this.gvEditing = Q
                }
            }, pointsEditingMode: {
                get: function () {
                    return this.editDetail
                }, set: function (T) {
                    var Y = this;
                    Y.editDetail !== T && (T ? Y._tryEnterEditDetailMode() : Y._tryQuitEditDetailMode())
                }
            }, gridEnabled: {
                get: function () {
                    var p = this._gridEnabled;
                    if (!p) return !1;
                    var V = this.gv;
                    return V ? !0 : !0
                }, set: function (r) {
                    r !== this._gridEnabled && (this._gridEnabled = r, this._42())
                }
            }, alignmentGuideEnabled: {
                get: function () {
                    return this._agEnabled
                }, set: function (j) {
                    j !== this._agEnabled && (this._agEnabled = j, this._42())
                }
            }, gridGuide: {
                get: function () {
                    return this._gridGuide
                }
            }, rectGuide: {
                get: function () {
                    return this._rectGuide
                }
            }, hoverGuide: {
                get: function () {
                    return this._hoverGuide
                }
            }
        }), yk.prototype.getSubModule = function (u) {
            var s, k, R, O = this._subModules;
            for (k = 0, R = O.length; R > k; k++) if (s = O[k], s.catalog === u) return s
        }, yk.prototype.invokeSubModule = function (y, S) {
            var I = this, L = I._subModules;
            if (L) for (var m, O, T, r = Array.prototype.slice.call(arguments, 2), C = 0, $ = L.length; $ > C; C++) if (m = L[C], O = m[y], O && (T = O.apply(m, r), T != v && S)) return m
        }, yk.prototype.invokeSubModuleInverse = function (r, g) {
            var y = this, B = y._subModules;
            if (B) for (var J, Q, z, G = Array.prototype.slice.call(arguments, 2), U = B.length - 1; U >= 0; U--) if (J = B[U], Q = J[r], Q && (z = Q.apply(J, G), z != v && g)) return J
        }, yk.prototype.setUp = function () {
            _p.log("setUp");
            var f = this, i = f.gv, n = i.getView(), k = f._canvas;
            yk.superClass.setUp.call(f), i.setEditInteractor(f), i._79O ? n.insertBefore(k, i._79O) : n.appendChild(k), _p.startEdit(i), f.invokeSubModule("setUp"), i.dm().mm(f._onDataModelChanged, f), i.dm().md(f._onDataPropertyChanged, f)
        }, yk.prototype.tearDown = function () {
            _p.log("tearDown");
            var A = this, b = A.gv, e = b.getView();
            A._resetCustomCursorStyle(), yk.superClass.tearDown.call(A), b.dm().umm(A._onDataModelChanged, A), b.dm().umd(A._onDataPropertyChanged, A), b.setEditInteractor(null), e.removeChild(A._canvas), A._drawTimer && (l(A._drawTimer), A._drawTimer = null), _p._46O(b), A.invokeSubModule("tearDown")
        }, yk.prototype._onDataModelChanged = function (P) {
            var D = this;
            ("clear" === P.kind || "remove" === P.kind && D.editDetail && P.data === D.getSubModule("Curve").target) && (D.editDetail = !1, D._42())
        }, yk.prototype._onDataPropertyChanged = function (r) {
            var p = this;
            if (p.editDetail) {
                var B = p.getSubModule("Curve"), D = r.data;
                D === B.target && (D._writing || B._handleDataChanged(r))
            }
        }, yk.prototype.clear = function () {
            _p.log("clear")
        }, yk.prototype.redraw = function () {
            this._42()
        }, yk.prototype._42 = function () {
            var y = this;
            y._drawTimer || (y._drawTimer = Z(function () {
                y._drawTimer = null, y.drawImpl()
            }, 0))
        }, yk.prototype.drawImpl = function () {
            var s;
            for (s in{_42: !0}) break;
            return function () {
                var W = this, _ = W._canvas, m = W.gv, e = m.getWidth(), f = m.getHeight(), j = W._context,
                    Q = x.Default.getInternal();
                (_.width !== e || _.height !== f) && Q.setCanvas(_, e, f), j.clearRect(0, 0, _.width, _.height);
                var p = W._getValidSelection();
                j.save();
                var F = x.Default.devicePixelRatio;
                j.scale(F, F), W._gridGuide._42(), W.invokeSubModuleInverse(s, !1, j, m, p), W._rectGuide._42(), W._hoverGuide._42(), j.restore()
            }
        }(), yk.prototype._getValidSelection = function () {
            var B = this, $ = B.gv, Y = $.sm().getSelection(), E = [];
            return Y.each(function (l) {
                $.isVisible(l) && $.isEditable(l) && E.push(l)
            }), E
        }, yk.prototype.handle_touchmove = function (c) {
            return this.handle_mousemove(c)
        }, yk.prototype.handle_mousemove = function (W) {
            if (!x.Default.isDragging()) {
                var q = this;
                if (q.editDetail || !Hk()) if (q.gvEditing = !1, q._checkEdit(W)) q.gvEditing = !0; else {
                    if (!q.getStyle("hoverGuideEnabled")) return;
                    q.hoverData = q.gv.getDataAt(W), q._42()
                }
            }
        }, yk.prototype.handle_touchstart = function (q) {
            return this.handle_mousedown(q)
        }, yk.prototype.handle_mousedown = function (d) {
            Yd(d);
            var O = this;
            if (O.editDetail || !Hk()) {
                if (qs(d) && !d.clickThrough) {
                    if (O.editDetail) {
                        if (O._tryQuitEditDetailMode(d)) return
                    } else if (O._tryEnterEditDetailMode()) return;
                    O.gv.dm().beginTransaction();
                    var X = O.invokeSubModule("handleDoubleClick", !0, d);
                    if (O.gv.dm().endTransaction(), X) return
                }
                var l = O._checkEdit(d);
                l && (O._downPosition = O._getLogicalPoint(d), O.gv.dm().beginTransaction(), l.startEdit(O, d), O.editing = !0)
            }
        }, yk.prototype._checkEdit = function (n) {
            var I = this, L = I.gv, W = I._getLogicalPoint(n), Y = I.invokeSubModule("check", !0, L, n, W) || null;
            return I._editMod = Y, Y
        }, yk.prototype.handleWindowTouchMove = function (E) {
            return this.handleWindowMouseMove(E)
        }, yk.prototype.handleWindowMouseMove = function (F) {
            var t = this, J = t._downPosition;
            if (J) {
                var m = t._getLogicalPoint(F);
                if (m.distanceTo(J) < t.getStyle("moveSensitivity")) return;
                delete t._downPosition
            }
            var Z = t._editMod;
            Z && Z.handleEdit(t.gv, F)
        }, yk.prototype._getLogicalPoint = function (h) {
            var s = this, b = x.Default.getLogicalPoint(h, s._canvas);
            return new _p.Math.Vector2(b)
        }, yk.prototype.handleWindowTouchEnd = function (u) {
            return this.handleWindowMouseUp(u)
        }, yk.prototype.handleWindowMouseUp = function () {
            var g;
            for (g in{_46O: !0}) break;
            return function (C) {
                var t = this;
                t.editing = !1, t.setCursor("default"), t.invokeSubModule(g, !1, C), t._42(), t.gv.dm().endTransaction()
            }
        }(), yk.prototype.handle_mousewheel = function (k) {
            var v = this;
            Yd(k), v.invokeSubModule("preHandleScroll", !0) || v.gv.handleScroll(k, k.wheelDelta)
        }, yk.prototype.handleDelete = function () {
            var G = this;
            if (!G.editDetail) {
                G.gv.dm().beginTransaction();
                var E = G.invokeSubModule("handleNormalStateDelete", !0);
                return G.gv.dm().endTransaction(), E || G.gv.removeSelection(), void 0
            }
            G.gv.dm().beginTransaction(), G.invokeSubModule("handleDelete", !0), G.gv.dm().endTransaction(), G._42()
        }, yk.prototype.handle_keydown = function (B) {
            var p = this;
            if ((B.metaKey || B.ctrlKey) && p._42(), Hk(B) && !p.editing) return p.gvEditing = !1, p.setCursor("default"), p._42(), void 0;
            var F = ml(B);
            return p.editDetail ? ((F || pi(B)) && (p.editDetail = !1, p._42()), p.gv.dm().beginTransaction(), p.invokeSubModule("handle_keydown", !0, B), p.gv.dm().endTransaction(), void 0) : (p.gv.dm().beginTransaction(), p.invokeSubModule("handleNormalStateKeyDown", !0, B), p.gv.dm().endTransaction(), F && p._tryEnterEditDetailMode(), void 0)
        }, yk.prototype.handle_keyup = function (y) {
            this.gv.dm().beginTransaction(), this.invokeSubModule("handle_keyup", !0, y), this.gv.dm().endTransaction()
        }, yk.prototype._tryEnterEditDetailMode = function () {
            var W = this;
            return !W.editDetail && W.invokeSubModule("canEnterEditDetailMode", !0) && 1 === W._getValidSelection().length ? (W.editDetail = !0, W._42(), !0) : void 0
        }, yk.prototype._tryQuitEditDetailMode = function (w) {
            var o = this;
            return o.editDetail ? !w || o.invokeSubModule("canQuitEditDetailMode", !0, w) ? (o.editDetail = !1, o._42(), !0) : !1 : !1
        }, yk.prototype.setStyle = function (S, O, q) {
            var w = this;
            q ? _p.setStyle(S, O) : w._styleMap[S] = O, "baseColor" === S && (em = O), w.fp("styleChanged", null, {
                key: S,
                value: O,
                base: q
            }), w._42()
        }, yk.prototype.getStyle = function (e) {
            var g = this, u = g._styleMap[e];
            return u !== v ? u : _p.getStyle(e)
        }, yk.prototype.setCursor = function (M) {
            this._resetCustomCursorStyle(), x.graph.EditInteractor.superClass.setCursor.call(this, M)
        }, yk.prototype._resetCustomCursorStyle = function () {
            var h = this;
            if (h._customStyle) {
                var G = this.gv.getView();
                G.classList && G.classList.remove && G.classList.remove(h._customStyle), h._customStyle = null
            }
        }, yk.prototype._setRotateCursor = function (c) {
            var _ = this, I = _._cursorFactory;
            I || (I = _._cursorFactory = new _p.CursorFactory(_));
            var m = I.getRotateCursor(c), a = _.gv.getView();
            _._resetCustomCursorStyle(), _._customStyle = m, a.classList && a.classList.add && a.classList.add(m)
        };
        var Kn = _p.Group = function ($) {
            var n = this;
            n._entities = $, n._64O = 0, n._position = {x: 0, y: 0}, n._scale = {x: 1, y: 1}, n._anchor = {
                x: .5,
                y: .5
            }, n._anchor2 = {x: .5, y: .5}
        };
        Kn.prototype = {}, Kn.prototype.constructor = Kn;
        var Pk = null;
        Kn.findOrCreateGroup = function (A) {
            if (Pk && Pk.checkIsMe(A)) return Pk;
            var r = new _p.Group(A);
            return r.getKeyOb() ? (Pk = r, r) : void 0
        }, Kn.prototype.checkIsMe = function (q) {
            var d = this._entities;
            if (d.length !== q.length) return !1;
            var g, k = {}, M = q.length;
            for (g = 0; M > g; g++) k[q[g]._id] = !0;
            for (g = 0; M > g; g++) if (!k[d[g]._id]) return !1;
            return !0
        }, Kn.prototype.getRotation = function () {
            return this._64O
        }, Kn.prototype.getPosition = function () {
            return this._position
        }, Kn.prototype.getAnchor = function () {
            return this._anchor
        }, Kn.prototype.getWidth = function () {
            return this._width
        }, Kn.prototype.getScale = function () {
            return this._scale
        }, Kn.prototype.getSize = function () {
            return {width: this._width, height: this._height}
        }, Kn.prototype.getHeight = function () {
            return this._height
        }, Kn.prototype.getKeyOb = function () {
            for (var g = this._entities, C = g.length - 1; C >= 0; C--) {
                var d = g[C];
                if (this.isNode(d)) return d
            }
        }, Kn.prototype.getAnchor2 = function () {
            var i = this, b = i.rotateCenter;
            if (b) return b;
            var S = i.getKeyOb();
            if (!S) return i._anchor;
            var d = i._anchor2, C = S.getMatrix();
            return C.tf({x: S.getWidth() * (d.x - S.getAnchor().x), y: S.getHeight() * (d.y - S.getAnchor().y)})
        }, Kn.prototype.setAnchor2 = function (H, A) {
            var o = this, Q = o.getKeyOb();
            if (Q) {
                var e, L = Q.getMatrix();
                e = "number" == typeof H ? {x: H, y: A} : H;
                var $ = L.tfi(e);
                o._anchor2 = {x: Q.getAnchor().x + $.x / Q.getWidth(), y: Q.getAnchor().y + $.y / Q.getHeight()}
            }
        }, Kn.prototype.setRotation = function () {
        }, Kn.prototype.beginRotate = function (s) {
            this.rotateCenter = s.pos, this.rotateMode = s.groupRotateMode
        }, Kn.prototype.endRotate = function () {
            delete this.rotateCenter, delete this.rotateMode
        }, Kn.prototype.addRotation = function (c, Y) {
            return "batch" === Y ? this._addRotationInBatchMode(c) : "block" === Y ? this._addRotationInBlockMode(c) : void 0
        }, Kn.prototype._addRotationInBlockMode = function (o) {
            var C = this, T = C.rotateCenter || C.getPosition();
            C._entities.forEach(function (e) {
                if (C.isNode(e)) {
                    var l = e.getMatrix();
                    l.translate(-T.x, -T.y), l.rotate(o), l.translate(T.x, T.y);
                    var z = Math.sign(e.getScale().x);
                    e.setRotation(N(l.b * z, l.a * z)), e.setPosition(l.tx, l.ty)
                }
            })
        }, Kn.prototype._addRotationInBatchMode = function (i) {
            var g = this, m = g._anchor2;
            g._entities.forEach(function (Z) {
                if (g.isNode(Z)) {
                    var a = Z.getAnchor(), X = Z.getMatrix(),
                        s = X.tf({x: Z.getWidth() * (m.x - a.x), y: Z.getHeight() * (m.y - a.y)}),
                        O = new _p.Math.Matrix2d;
                    O.set(X.a, X.b, X.c, X.d, X.tx, X.ty), O.translate(-s.x, -s.y), O.rotate(i), O.translate(s.x, s.y);
                    var u = Math.sign(Z.getScale().x);
                    Z.setRotation(N(O.b * u, O.a * u)), Z.setPosition(O.tx, O.ty)
                }
            })
        }, Kn.prototype.setPosition = function (N) {
            var m, f, D, L, x = this, S = x._position, p = N.x - S.x, M = N.y - S.y, O = x._entities;
            for (f = 0, D = O.length; D > f; f++) m = O[f], Un(m) && (L = m.getPosition(), m.setPosition(L.x + p, L.y + M));
            x._position = N
        }, Kn.prototype.setScale = function (X, S) {
            var u = this, f = X / u._scale.x, V = S / u._scale.y;
            u._adjustChildScaleOrSize(f, V, "size"), u._scale = {x: X, y: S}
        }, Kn.prototype.getRect = function () {
            var e = this, j = e._position, g = e._width, W = e._height;
            return {x: j.x - g / 2, y: j.y - W / 2, width: g, height: W}
        }, Kn.prototype.setSize = function (n, M) {
            var D = this, n = Math.max(1, n), M = Math.max(1, M), c = n / D._width, X = M / D._height;
            D._adjustChildScaleOrSize(c, X, "size"), D._width = n, D._height = M
        }, Kn.prototype._adjustChildScaleOrSize = function (k, B, Y) {
            var t, P, b, $, c, m, R, g, z, J, r, i, o, X, S = this, l = S._position, f = S._entities,
                a = new _p.Math.Matrix2d;
            for (P = 0, b = f.length; b > P; P++) if (t = f[P], S.isNode(t)) {
                if ($ = t.getPosition(), c = t.getRotation(), m = t.getWidth(), R = t.getHeight(), g = t.getScale(), r = g.x * m, i = g.y * R, a.identity().scale(r, i).rotate(c).translate($.x, $.y).translate(-l.x, -l.y).rotate(-S._64O), c = N(a.b * Math.sign(r), a.a * Math.sign(r)), a.scale(k, B), z = Math.cos(c), J = Math.sin(c), Math.abs(z) < .001 ? (o = a.b / J, X = -a.c / J) : (o = a.a / z, X = a.d / z), "scale" === Y) t.setScale(o / m, X / R); else if ("size" === Y) {
                    var K = o / g.x, j = X / g.y;
                    t.setScale(wn(o) * Math.abs(g.x), wn(X) * Math.abs(g.y)), t.setSize(Math.max(.1, Math.abs(K)), Math.max(.1, Math.abs(j)))
                }
                a.rotate(S._64O).translate(l.x, l.y), t.setPosition(a.tx, a.ty)
            }
        }, Kn.prototype.getMatrix = function () {
            var S = this, q = S._position, R = x.Default.getInternal(), F = S._scale;
            return new R.Mat(S._64O, q.x, q.y, F.x, F.y)
        }, Kn.prototype.toGlobal = function (Z) {
            return this.getMatrix().tf(Z)
        }, Kn.prototype.getCorners = function () {
            var C = this, o = C._width, v = C._height, M = C._anchor, G = -o * M.x, A = -v * M.y, z = C.getMatrix();
            return [z.tf(G, A), z.tf(G, A + v), z.tf(G + o, A + v), z.tf(G + o, A)]
        }, Kn.prototype.calcInfo = function () {
            var X, U, n, i, B, _, q = this, L = [], D = q._entities, W = q._64O;
            for (i = 0, B = D.length; B > i; i++) _ = D[i], q.isNode(_) && _.getCorners && L.push.apply(L, _.getCorners());
            if (L.length) {
                var a = Math.cos(-W), N = Math.sin(-W), E = 1 / 0, G = -1 / 0, $ = 1 / 0, x = -1 / 0;
                for (i = 0, B = L.length; B > i; i++) n = L[i], X = n.x, U = n.y, n.x = a * X - N * U, n.y = N * X + a * U, E = Math.min(E, n.x), G = Math.max(G, n.x), $ = Math.min($, n.y), x = Math.max(x, n.y);
                q._width = (G - E) / q._scale.x, q._height = (x - $) / q._scale.y, a = Math.cos(W), N = Math.sin(W);
                var O = q._anchor;
                X = E + (G - E) * O.x, U = $ + (x - $) * O.y, q._position = {x: a * X - N * U, y: N * X + a * U}
            }
        }, Kn.prototype.isNode = function (F) {
            return Un(F) ? Tn(F) ? !1 : !0 : !1
        }, Kn.prototype._42 = function (L, b, j) {
            var p, i, t, y, F, f, M, K, $ = this, h = $._entities, E = $.rotateMode;
            for ("batch" === E && (K = $.getKeyOb()), p = 0, i = h.length; i > p; p++) t = h[p], $.isNode(t) && (f = t.getRect(), y = _p.toScreenPosition(j, {
                x: f.x,
                y: f.y
            }), F = _p.toScreenPosition(j, {x: f.x + f.width, y: f.y + f.height}), M = {
                min: y,
                max: F
            }, t === K && (M.isKeyOb = !0), _p.Icons.DrawIcon(L, b, _p.Icons.GroupSubEntityRect, M))
        };
        var ff = _p.CurveActiving = function (Q, y) {
            this._curve = Q, this._interactor = Q._interactor;
            for (var C in y) this[C] = y[C]
        };
        ff.prototype = {}, ff.prototype.constructor = ff, H.defineProperties(ff.prototype, {
            point: {
                get: function () {
                    return this._point
                }, set: function (m) {
                    var T = this;
                    T._point = m, T.editingCtrl || T._firePointChange()
                }
            }, pairs: {
                get: function () {
                    return this._pairs
                }, set: function (k) {
                    var K = this;
                    K._pairs = k, K.editingCtrl && K._firePointChange()
                }
            }
        }), ff.prototype._firePointChange = function () {
            var g = this, M = g.getCurrentEditingPoint();
            if (!M) return y.fi({kind: "selectPoint"}), void 0;
            var y = g._interactor, d = this._curve.target;
            if (d) {
                var Q = _p.getDataMatrix(d).invert(), A = M.e;
                M = Q.apply(_p.toWorldPosition(y.gv, M)), M.e = A;
                var E = g._lastFirePoint;
                E && Math.abs(M.x - E.x) < 1e-5 && Math.abs(M.y - E.y) < 1e-5 && (M.e == v && E.e == v || Math.abs(M.e - E.e) < 1e-5) || (g._lastFirePoint = M, y.fi({
                    kind: "selectPoint",
                    x: M.x,
                    y: M.y,
                    e: M.e
                }))
            }
        }, ff.prototype.dispose = function () {
            this._interactor.fi({kind: "selectPoint"})
        }, ff.prototype.getCurrentEditingPoint = function () {
            var $ = this, u = $.editingCtrl;
            if (u) {
                var Y = $.pairs;
                if (Y) {
                    var F = Y[u.pairId], h = F[u.type];
                    if (h) return h
                }
            }
            return $._point
        };
        var pj = _p.CursorFactory = function (R) {
            var F = this;
            F._interactor = R, F._rotateCursorStyles = {}
        };
        pj.prototype = {}, pj.prototype.constructor = pj, pj.prototype.getRotateCursor = function (D) {
            var J = this;
            0 > D && (D += 2 * Math.PI);
            var C = J._interactor, S = C.getStyle("rotateCursorSize"), F = C.getStyle("rotateCursorRound"),
                N = Math.round(180 * (D / Math.PI) / F);
            N * F >= 360 && (N = 0);
            var c = J._rotateCursorStyles, j = "htCustomRotateStyle_" + S + "_" + F + "_" + N;
            return c[j] || (J._produceRotateCursor(j, S, F, N), c[j] = !0), j
        }, pj.prototype._produceRotateCursor = function (w, $, S, t) {
            var b = this;
            b._interactor;
            var J = b._canvas;
            J || (J = b._canvas = G.createElement("canvas")), J.width = J.height = $ * devicePixelRatio, J.style.width = J.style.height = $ + " px";
            var Q = J.getContext("2d");
            _p.setAntialias(Q, !1), Q.scale(devicePixelRatio, devicePixelRatio);
            var X, Z, U, N, a, D = Math.round($ / 2), W = "" + D + " " + D + ",auto !important;";
            X = Math.PI / 180 * t * S, Q.clearRect(0, 0, $, $), Q.save(), Q.scale($ / 32, $ / 32), Q.translate(16, 16), Q.rotate(X + Math.PI / 2), Q.beginPath(), Q.moveTo(-8, 0), Q.lineTo(-8, 3), Q.lineTo(-5, 3), Q.moveTo(8, 0), Q.lineTo(8, 3), Q.lineTo(5, 3), Q.moveTo(-8, 3), Q.quadraticCurveTo(0, -6, 8, 3), Q.restore(), Q.strokeStyle = "white", Q.lineWidth = 4, Q.stroke(), Q.strokeStyle = "black", Q.lineWidth = 2, Q.stroke(), Z = JSON.stringify(J.toDataURL()), N = "cursor:url(" + Z + ")" + W, 1 !== devicePixelRatio && (U = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + $ + 'px" height="' + $ + 'px"><image xlink:href=' + Z + ' width="' + $ + '" height="' + $ + '"/></svg>', N += "cursor:url(data:image/svg+xml;base64," + btoa(U) + ")" + W, N += "cursor:-webkit-image-set(url(" + Z + ")" + devicePixelRatio + "x,url(" + Z + ")1x)" + W), a = G.createElement("style"), a.textContent = "body." + w + " *, ." + w + "{" + N + "}", G.head.appendChild(a)
        };
        var Nh = _p.Guide.Grid = function (a) {
            var K = this;
            K._interactor = a, K._alignmentGuideId = 0, K._xAlignmentGuide = [], K._yAlignmentGuide = []
        };
        Nh.prototype = {}, Nh.prototype.constructor = Nh, H.defineProperties(Nh.prototype, {
            gridBlockSize: {
                get: function () {
                    var H = this;
                    return H._gridBlockSize || H._interactor.getStyle("gridBlockSize")
                }, set: function (k) {
                    this._gridBlockSize = k, this._interactor._42()
                }
            }, gridThickLinesEvery: {
                get: function () {
                    var M = this;
                    return M._gridThickLinesEvery || M._interactor.getStyle("gridThickLinesEvery")
                }, set: function (O) {
                    this._gridThickLinesEvery = O, this._interactor._42()
                }
            }, gridEnabled: {
                get: function () {
                    var $ = this, n = $._interactor;
                    return n.gridEnabled && $.isValidGrid()
                }
            }
        }), Nh.prototype._42 = function () {
            var q = this, Y = q._interactor;
            q.gridEnabled && q.drawGrid(), Y.alignmentGuideEnabled && q.drawAlignmentGuide()
        }, Nh.prototype.makeMatrix = function () {
            var x = this, C = x._interactor.getStyle("gridAngle"), l = x._interactor.getStyle("gridRotation"),
                f = new _p.Math.Matrix2d, p = Math.sin(C), J = Math.cos(C);
            return f.set(1, 0, J, p, 0, 0), f.rotate(l), f
        }, Nh.prototype.isValidGrid = function () {
            var S = this, A = Math.PI, P = S._interactor, O = P.gv;
            if (O._zoom < P.getStyle("gridZoomThreshold")) return !1;
            var s = P.getStyle("gridAngle"), n = Math.abs(180 * (s % A / A)), l = 1 - 1e-8;
            return l > n || n > 180 - l ? !1 : !0
        }, Nh.prototype.drawAlignmentGuide = function () {
            var J = this, E = J._interactor, f = E.gv, l = E._canvas, S = E._context, C = l.width, n = l.height,
                B = f.tx(), a = f.ty(), q = f._zoom;
            S.beginPath(), S.strokeStyle = E.getStyle("gridAlignmentGuideColor"), S.lineWidth = 1, J._xAlignmentGuide.forEach(function (E) {
                var X = E.p * q + B;
                S.moveTo(X, 0), S.lineTo(X, n)
            }), J._yAlignmentGuide.forEach(function (D) {
                var b = D.p * q + a;
                S.moveTo(0, b), S.lineTo(C, b)
            }), S.stroke()
        }, Nh.prototype.drawGrid = function () {
            function x(Q, K, d, x) {
                var m = _p.toScreenPosition(F, q.apply({x: Q, y: K})),
                    w = _p.toScreenPosition(F, q.apply({x: d, y: x}));
                Z.moveTo(m.x, m.y), Z.lineTo(w.x, w.y)
            }

            var Y = this, I = Y._interactor, Q = Y.gridBlockSize, o = Y.gridThickLinesEvery,
                R = I.getStyle("gridThickColor"), U = I.getStyle("gridLightColor"), F = I.gv, k = I._canvas,
                Z = I._context, b = k.width, w = k.height, q = Y.makeMatrix(),
                L = q.applyInverse(_p.toWorldPosition(F, {x: 0, y: 0})),
                P = q.applyInverse(_p.toWorldPosition(F, {x: b, y: 0})),
                A = q.applyInverse(_p.toWorldPosition(F, {x: 0, y: w})),
                g = q.applyInverse(_p.toWorldPosition(F, {x: b, y: w})), B = Math.min(L.x, P.x, A.x, g.x),
                C = Math.max(L.x, P.x, A.x, g.x), H = Math.min(L.y, P.y, A.y, g.y), $ = Math.max(L.y, P.y, A.y, g.y);
            b = C - B, w = $ - H;
            var i = Math.ceil(B / Q), E = Math.floor(C / Q), S = Math.ceil(H / Q), c = Math.floor($ / Q);
            F.tx(), F.ty(), F._zoom;
            var m, M, D;
            for (Z.save(), Z.lineWidth = 1, Z.beginPath(), Z.strokeStyle = R, D = Math.ceil(i / o) * o; E >= D; D += o) m = D * Q, x(m, H, m, $);
            for (D = Math.ceil(S / o) * o; c >= D; D += o) M = D * Q, x(B, M, C, M);
            for (Z.stroke(), Z.beginPath(), Z.strokeStyle = U, D = i; E >= D; D++) 0 !== D % o && (m = D * Q, x(m, H, m, $));
            for (D = S; c >= D; D++) 0 !== D % o && (M = D * Q, x(B, M, C, M));
            Z.stroke(), Z.restore()
        }, Nh.prototype.getAlignmentGuides = function () {
            var S = this;
            return {x: S._xAlignmentGuide, y: S._yAlignmentGuide}
        }, Nh.prototype.addAlignmentGuide = function (H, U, I) {
            var s = this, j = "x" === H ? s._xAlignmentGuide : s._yAlignmentGuide, I = I ? I : ++s._alignmentGuideId,
                o = {p: U, id: I};
            if (j.length) {
                var w = s._findClosestAlignmentGuide(o.p, j);
                w.dis < 0 ? j.splice(w.index + 1, 0, o) : j.splice(w.index, 0, o)
            } else j.push(o);
            return s._interactor._42(), I
        }, Nh.prototype.findClosest = function (T, w, b) {
            var i = this, h = i._interactor, k = h.gv;
            b && (T = _p.toWorldPosition(k, T));
            var m, A, X, K = 1 / 0, f = 1 / 0, C = T.x, s = T.y;
            if (i.gridEnabled) {
                var G = i.gridBlockSize, W = i.makeMatrix(), o = W.applyInverse(T);
                o = W.apply({x: Math.round(o.x / G) * G, y: Math.round(o.y / G) * G}), K = o.x - C, f = o.y - s, X = !0
            }
            if (h.alignmentGuideEnabled && (m = i._findClosestAlignmentGuide(C, i._xAlignmentGuide).dis, A = i._findClosestAlignmentGuide(s, i._yAlignmentGuide).dis, Math.abs(m) < Math.abs(K) && (K = m, X = !0), Math.abs(A) < Math.abs(f) && (f = A, X = !0)), X) {
                X = !1;
                var c = k._zoom, B = h.getStyle("smartGuideSensitivity") / c, l = {};
                if (Math.abs(K) < B && "y" !== w && (l.x = b ? K * c : K, X = !0), Math.abs(f) < B && "x" !== w && (l.y = b ? f * c : f, X = !0), X) return l
            }
        }, Nh.prototype._findClosestAlignmentGuide = function (N, S) {
            if (!S.length) return {dis: 1 / 0};
            for (var w, m = 0, z = S.length - 1; z - m > 1;) w = Math.floor((m + z) / 2), S[w].p < N ? m = w : z = w;
            var j = S[m].p - N, r = S[z].p - N;
            return Math.abs(j) <= Math.abs(r) ? {line: S[m], dis: j, index: m} : {line: S[z], dis: r, index: z}
        }, Nh.prototype.removeAllAlignmentGuide = function (P) {
            var x = this;
            "y" !== P && (x._xAlignmentGuide = []), "x" !== P && (x._yAlignmentGuide = []), x._interactor._42()
        }, Nh.prototype.removeAlignmentGuide = function (T) {
            for (var p, O, o, x = this, d = x._xAlignmentGuide, r = 0; 2 > r; r++) for (d = 0 === r ? x._xAlignmentGuide : x._yAlignmentGuide, p = 0, O = d.length; O > p; p++) if (o = d[p], o.id === T) return d.splice(p, 1), x._interactor._42(), {
                axis: 0 === r ? "x" : "y",
                position: o.p
            };
            return !1
        }, Nh.prototype.adjustAlignmentGuide = function (P, X) {
            var E = this, y = E.removeAlignmentGuide(P);
            return y ? (E.addAlignmentGuide(y.axis, X, P), !0) : !1
        };
        var Bn = _p.Guide.Rect = function (L) {
            var G = this;
            G._interactor = L
        };
        Bn.prototype = {}, Bn.prototype.constructor = Bn, Bn.prototype.gatherRects = function () {
            var D, q, e, J, U = this, P = U._interactor.gv, c = [], I = [], M = {x: c, y: I}, y = {},
                z = P.getDataModel(), h = z.a("width"), m = z.a("height");
            h && m && (D = 0, q = 0, e = h, J = m, c.push({node: z, type: 0, p: D}, {
                node: z,
                type: 1,
                p: D + e / 2
            }, {node: z, type: 2, p: D + e}), I.push({node: z, type: 0, p: q}, {
                node: z,
                type: 1,
                p: q + J / 2
            }, {node: z, type: 2, p: q + J}), y[z._id || 0] = {x: D, y: q, width: e, height: J}), z.each(function (z) {
                if (Un(z) && !P.isSelected(z) && P.isVisible(z)) {
                    var R = !1;
                    if (P.sm().getSelection().each(function (b) {
                        R || (z.isHostOn(b) ? R = !0 : z.isDescendantOf(b) && (R = !0))
                    }), !R) {
                        var u = z.getRect();
                        D = u.x, q = u.y, e = u.width, J = u.height, c.push({node: z, type: 0, p: D}, {
                            node: z,
                            type: 1,
                            p: D + e / 2
                        }, {node: z, type: 2, p: D + e}), I.push({node: z, type: 0, p: q}, {
                            node: z,
                            type: 1,
                            p: q + J / 2
                        }, {node: z, type: 2, p: q + J}), y[z._id] = u
                    }
                }
            }), c.sort(function (O, u) {
                return O.p - u.p
            }), I.sort(function (H, R) {
                return H.p - R.p
            }), U._grid = M, U._87I = y
        }, Bn.prototype.gatherLines = function (P, v, o) {
            var G, J, x, d, j, H, b, V, W, h, E, l, f = this, Y = [f.findClosest({x: P.x, y: P.y}, v), f.findClosest({
                x: P.x + P.w / 2,
                y: P.y + P.h / 2
            }, v), f.findClosest({x: P.x + P.w, y: P.y + P.h}, v)], S = {}, F = f._87I;
            o = o || 255;
            var U, O;
            for (f._guideLine = [], G = 0; 2 > G; G++) for (S = {}, 0 === G ? (d = "y", V = P.x, W = V + P.w) : (d = "x", V = P.y, W = V + P.h), J = 0; 3 > J; J++) j = Y[J], j && isFinite(j[d]) && (U = 1 << 3 * G + J, o & U && (H = j[d + "Line"], b = H.node, O = b._id || 0, S[O] || (S[O] = !0, l = F[O], "y" === d ? (h = l.x, E = l.x + l.width) : (h = l.y, E = l.y + l.height), x = H.p, f._guideLine.push({
                type: d,
                a: V,
                b: W,
                c: h,
                d: E,
                p: x,
                center: 1 === H.type
            }))))
        }, Bn.prototype._binarySearchClosest = function (I, b) {
            if (!b.length) return {dis: 1 / 0};
            for (var N, o = 0, u = b.length - 1; u - o > 1;) N = Math.floor((o + u) / 2), b[N].p < I ? o = N : u = N;
            var q = b[o].p - I, i = b[u].p - I;
            return Math.abs(q) <= Math.abs(i) ? {line: b[o], dis: q} : {line: b[u], dis: i}
        }, Bn.prototype.findClosest = function (t, j, v) {
            var d = this, f = d._interactor, e = f.gv, V = d._grid;
            v && (t = _p.toWorldPosition(e, t));
            var o, i = d._binarySearchClosest(t.x, V.x), y = d._binarySearchClosest(t.y, V.y), O = i.dis, m = y.dis,
                J = e._zoom, P = f.getStyle("smartGuideSensitivity") / J, N = {};
            return Math.abs(O) < P && "y" !== j && (N.x = v ? O * J : O, N.xLine = i.line, o = !0), Math.abs(m) < P && "x" !== j && (N.y = v ? m * J : m, N.yLine = y.line, o = !0), o ? N : void 0
        }, Bn.prototype._42 = function () {
            var J = this, c = J._guideLine;
            if (c && !x.Default.isCtrlDown()) {
                var h, n, Q, k, N, s, V, A, U, i, K, r, w, $, B, R, I, M = J._interactor, D = M.gv, b = M._context,
                    P = D.tx(), l = D.ty(), Z = D._zoom, p = M.getStyle("guideLineTextSpacing");
                for (h = 0, n = c.length; n > h; h++) Q = c[h], A = Q.type, U = Q.p, i = Q.a, K = Q.b, r = Q.c, w = Q.d, $ = Math.min(i, r), B = Math.max(K, w), "x" === A ? (k = U * Z + P, N = $ * Z + l, s = k, V = B * Z + l) : (k = $ * Z + P, N = U * Z + l, s = B * Z + P, V = N), _p.Icons.DrawIcon(M, b, _p.Icons.MoveLineGuide, {
                    rect: [k, N, s, V],
                    center: Q.center
                }), w >= i && K >= r || ($ = i > w ? w : K, B = i > w ? i : r, I = B - $, "x" === A ? (Q.center2center || (k -= p, s = k), N = $ * Z + l, V = B * Z + l, R = _p.Icons.MoveLineGuideDistanceV) : "y" === A && (Q.center2center || (N -= p, V = N), k = $ * Z + P, s = B * Z + P, R = _p.Icons.MoveLineGuideDistanceH), _p.Icons.DrawIcon(M, b, R, {
                    x0: k,
                    y0: N,
                    x1: s,
                    y1: V,
                    dis: I
                }))
            }
        }, Bn.prototype.clear = function () {
            this._guideLine = null
        };
        var hb = _p.Guide.Hover = function (I) {
            var p = this;
            p._interactor = I
        };
        hb.prototype = {}, hb.prototype.constructor = hb, H.defineProperties(hb.prototype, {}), hb.prototype._42 = function () {
            var Z = this._interactor;
            if (Z.getStyle("hoverGuideEnabled") && !Z.gvEditing) {
                var H = Z.hoverData, Y = Z.gv;
                if (Un(H) && !Y.isSelected(H)) {
                    var O = H.getRect(), r = _p.toScreenPosition(Y, {x: O.x, y: O.y}),
                        E = _p.toScreenPosition(Y, {x: O.x + O.width, y: O.y + O.height});
                    _p.Icons.DrawIcon(Z, Z._context, _p.Icons.HoverDataRect, {min: r, max: E})
                }
            }
        }, _p.DefaultStyleMap = {
            baseColor: "rgb(51,153,255)",
            pointSize: [24, 9],
            checkSize: 7,
            rotateCheckSize: 10,
            moveSensitivity: 10,
            keepAspectRatio: !1,
            rotateRound: Math.PI / 2,
            shiftRotateRound: Math.PI / 12,
            rotateSensitivity: Math.PI / 60,
            rotateAsClock: !1,
            shiftLineRotateRound: Math.PI / 4,
            anchorMovable: !0,
            anchorVisible: !0,
            anchorHideThreshold: 25,
            anchorOutsideVisibleThreshold: .25,
            anchorRound: .25,
            anchorSensitivity: .02,
            smartGuideSensitivity: 8,
            curveIntersectSize: 5,
            curvePointIntersectSize: 8,
            edgeHostDetectPerFrame: !0,
            edgeHostEdgeMaxDistance: 12,
            edgeHostEdgeHighlighColor: "#5d5d5d",
            edgeHostPointHighlighColor: "red",
            edgeHostHighlighPeriod: 1500,
            guideLineTextSpacing: 0,
            hoverGuideEnabled: !1,
            gridBlockSize: 40,
            gridThickLinesEvery: 10,
            gridThickColor: "#5d5d5d",
            gridLightColor: "#d0d0d0",
            gridZoomThreshold: .25,
            gridAlignmentGuideColor: "#ff0000",
            gridAngle: Math.PI / 2,
            gridRotation: 0,
            groupRotateModeDefault: "block",
            groupRotateModeKey: ["ctrlKey", "metaKey"],
            rotateCursorSize: 32,
            rotateCursorRound: 45,
            tipTextColor: "#ffffff",
            tipBackground: "#333333",
            curveHighlightColor: "#30599e",
            rectPointBackground: "white",
            rectPointBorderColor: "#666666",
            rectPointShadowColor: "rgba(0,0,0,0.35)",
            shapeCtrlPointBackground: "white",
            shapeCtrlPointBorderColor: null,
            shapeCtrlPointHighlightBorder: null,
            shapeHighlighPointBackground: "#30599e",
            curveElevationVisible: !0,
            curveElevationIntersectSize: 8,
            curveElevationGuideShift: [20, 0],
            connectGuideVisible: !0,
            connectGuideShift: [1, .25, 8, 0],
            connectGuideIntersectSize: 8,
            connectGuideGarbageIntersectsize: 25,
            connectGuideGarbageShift: [1, 1, -48, -48]
        };
        var ss = _p.Icons = {}, Bb = 1e4, fc = null, em = _p.DefaultStyleMap.baseColor, tg = "rgb(183,232,135)",
            yq = "rgb(255,204,153)", ar = 6;
        x.Default.setImage("Icons.RectPoint", {
            width: ar,
            height: ar,
            comps: [{
                type: "rect", background: "rgb(247,247,247)", borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }, rect: [0, 0, ar, ar]
            }]
        }), ss.GroupSubEntityRect = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var w = ss.GroupSubEntityRect.data;
                        if (!w) return [];
                        var p = w.min, S = w.max;
                        return [p.x, p.y, p.x, S.y, S.x, S.y, S.x, p.y]
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return ss.GroupSubEntityRect.data.isKeyOb ? em : em
                    }
                }
            }]
        };
        var Hr = 4;
        ss.HoverDataRect = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var r = ss.HoverDataRect.data;
                        if (!r) return [];
                        var G = r.min, K = r.max, s = Hr;
                        return G.x -= s, G.y -= s, K.x += s, K.y += s, [G.x, G.y, G.x, K.y, K.x, K.y, K.x, G.y]
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }, borderCap: "round", borderPattern: [1, 4]
            }]
        }, ss.Line = {
            comps: [{
                type: "image", name: "Icons.RectPoint", rect: {
                    func: function () {
                        return [[ss.Line.data.P1.x, ss.Line.data.P1.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rect: {
                    func: function () {
                        return [[ss.Line.data.P2.x, ss.Line.data.P2.y], ar, ar]
                    }
                }
            }]
        }, ss.NodeHoverGuide = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return ss.NodeHoverGuide.data
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: "#3399FF"
            }]
        }, ss.Rect = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var B = ss.Rect.data;
                        if (!B) return [];
                        var F = B.LT, y = B.LB, l = B.RB, G = B.RT;
                        return [F.x, F.y, y.x, y.y, l.x, l.y, G.x, G.y]
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.LT.x, ss.Rect.data.LT.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.LB.x, ss.Rect.data.LB.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.RB.x, ss.Rect.data.RB.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.RT.x, ss.Rect.data.RT.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return ss.Rect.data.L ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.L.x, ss.Rect.data.L.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return ss.Rect.data.R ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.R.x, ss.Rect.data.R.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return ss.Rect.data.T ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.T.x, ss.Rect.data.T.y], ar, ar]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return ss.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return ss.Rect.data.B ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[ss.Rect.data.B.x, ss.Rect.data.B.y], ar, ar]
                    }
                }
            }]
        };
        var Ij = 16;
        x.Default.setImage("Icons.Anchor", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                borderWidth: 1,
                borderColor: {
                    func: function () {
                        return em
                    }
                },
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [.50928, 6, 11.49072, 6, 6, 6, 6, .50928, 6, 11.49072]
            }, {
                type: "circle", borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }, shadowColor: "#1ABC9C", rect: [2.84391, 2.84391, 6.53697, 6.53697]
            }]
        }), ss.Anchor = {
            comps: [{
                type: "image", name: "Icons.Anchor", rect: {
                    func: function () {
                        return [[ss.Anchor.data.POS.x, ss.Anchor.data.POS.y], Ij, Ij]
                    }
                }
            }]
        }, ss.TipShiftX = 12, ss.TipShiftY = 12;
        var Xh = [8, 28];
        ss.TipHelper = {
            comps: [{
                type: "roundRect", rect: {
                    func: function () {
                        return [ss.TipHelper.data.helperPos.x, ss.TipHelper.data.helperPos.y, Xh[0] * ss.TipHelper.data.size, Xh[1]]
                    }
                }, background: {
                    func: function () {
                        return fc.getStyle("tipBackground")
                    }
                }, opacity: .6
            }, {
                type: "text", text: {
                    func: function () {
                        return ss.TipHelper.data.text
                    }
                }, rect: {
                    func: function () {
                        return [ss.TipHelper.data.helperPos.x, ss.TipHelper.data.helperPos.y, Xh[0] * ss.TipHelper.data.size, Xh[1]]
                    }
                }, color: {
                    func: function () {
                        return fc.getStyle("tipTextColor")
                    }
                }, font: "bold 12px Arial", align: "center"
            }]
        };
        var Ik = 7;
        ss.ShapePoint = {
            comps: [{
                type: "circle", visible: {
                    func: function () {
                        return !!ss.ShapePoint.data.dynamicVisible
                    }
                }, rect: {
                    func: function () {
                        var z = ss.ShapePoint.data.point, m = ss.ShapePoint.data.size || Ik;
                        return [z, m + 10, m + 10]
                    }
                }, background: {
                    func: function () {
                        var Z = Date.now(), f = ss.ShapePoint.data.dynamicPeriod || 1500,
                            z = Math.sin(Z % f / f * Math.PI);
                        return "rgba(27,124,22," + .5 * z + ")"
                    }
                }, borderWidth: 0
            }, {
                type: "circle", rect: {
                    func: function () {
                        var I = ss.ShapePoint.data.point, E = ss.ShapePoint.data.size || Ik;
                        return [I, E, E]
                    }
                }, background: {
                    func: function () {
                        var R = ss.ShapePoint.data.isEnd;
                        return R ? "rgba(27,124,222,0.7)" : "#ffffff"
                    }
                }, borderWidth: 1, borderColor: {
                    func: function () {
                        return ss.ShapePoint.data.color || em
                    }
                }
            }, {
                type: "rect", visible: {
                    func: function () {
                        return !!ss.ShapePoint.data.dynamicVisible
                    }
                }, background: "red", borderWidth: 0, rotation: Math.PI / 4, borderColor: {
                    func: function () {
                        return em
                    }
                }, rect: {
                    func: function () {
                        var j = 5;
                        return [ss.ShapePoint.data.point, j, j]
                    }
                }
            }]
        }, ss.ShapeBgCurve = {
            comps: [{
                type: "shape", visible: {
                    func: function () {
                        return !!ss.ShapeBgCurve.data.dynamicVisible
                    }
                }, points: {
                    func: function () {
                        return ss.ShapeBgCurve.data.P
                    }
                }, segments: {
                    func: function () {
                        return ss.ShapeBgCurve.data.S
                    }
                }, background: null, borderWidth: 6, borderColor: {
                    func: function () {
                        var a = Date.now(), P = ss.ShapeBgCurve.data.dynamicPeriod || 1500,
                            S = Math.sin(a % P / P * Math.PI);
                        return "rgba(27,124,22," + .3 * S + ")"
                    }
                }
            }, {
                type: "shape", points: {
                    func: function () {
                        return ss.ShapeBgCurve.data.P
                    }
                }, segments: {
                    func: function () {
                        return ss.ShapeBgCurve.data.S
                    }
                }, background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return ss.ShapeBgCurve.data.color || em
                    }
                }
            }]
        };
        var Uf = 8;
        ss.ShapeHighlighPoint = {
            comps: [{
                type: "circle", rect: {
                    func: function () {
                        var I = ss.ShapeHighlighPoint.data;
                        return [[I.x, I.y], Uf, Uf]
                    }
                }, background: {
                    func: function () {
                        return fc.getStyle("shapeHighlighPointBackground")
                    }
                }, borderWidth: 0
            }]
        };
        var dm = 10;
        ss.ShapeHighlighRealPoint = {
            comps: [{
                type: "circle", rect: {
                    func: function () {
                        var L = ss.ShapeHighlighRealPoint.data;
                        return [[L.x, L.y], dm, dm]
                    }
                }, background: "#ffffff", borderWidth: 2, borderColor: {
                    func: function () {
                        return em
                    }
                }
            }]
        };
        var Sd = 8;
        ss.ShapeHighlighCtrlPoint = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var H = ss.ShapeHighlighCtrlPoint.data, k = H.x, U = H.y, x = Sd / 2;
                        return [k - x, U - x, k - x, U + x, k + x, U + x, k + x, U - x]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return fc.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return fc.getStyle("shapeCtrlPointBorderColor") || em
                    }
                }
            }]
        };
        var Kr = 3;
        ss.ShapeHighlightCurve = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return ss.ShapeHighlightCurve.data
                    }
                }, segments: [1, 4], background: null, borderWidth: Kr, borderColor: {
                    func: function () {
                        return fc.getStyle("curveHighlightColor")
                    }
                }
            }]
        }, ss.ShapeGuideLine = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return ss.ShapeGuideLine.data
                    }
                }, background: null, borderWidth: 1, borderColor: "rgb(255,204,153)"
            }]
        }, ss.MoveLineGuide = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return ss.MoveLineGuide.data.rect
                    }
                }, background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return ss.MoveLineGuide.data.center ? tg : yq
                    }
                }
            }]
        };
        var Pp = 5;
        ss.MoveLineGuideDistanceH = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var g = ss.MoveLineGuideDistanceH.data, y = g.x0, Y = g.y0;
                        return [y, Y - Pp, y, Y + Pp]
                    }
                }, rotation: -Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: yq
            }, {
                type: "shape", points: {
                    func: function () {
                        var m = ss.MoveLineGuideDistanceH.data, T = m.x1, U = m.y1;
                        return [T, U - Pp, T, U + Pp]
                    }
                }, rotation: -Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: yq
            }, {
                type: "text", text: {
                    func: function () {
                        return Math.round(ss.MoveLineGuideDistanceH.data.dis)
                    }
                }, rect: {
                    func: function () {
                        var l = ss.MoveLineGuideDistanceH.data;
                        return [[(l.x0 + l.x1) / 2, l.y0 - 10], 20, 20]
                    }
                }, color: yq, font: "12px Arial", align: "center"
            }]
        }, ss.MoveLineGuideDistanceV = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var p = ss.MoveLineGuideDistanceV.data, w = p.x0, u = p.y0;
                        return [w - Pp, u, w + Pp, u]
                    }
                }, rotation: Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: yq
            }, {
                type: "shape", points: {
                    func: function () {
                        var o = ss.MoveLineGuideDistanceV.data, Z = o.x1, V = o.y1;
                        return [Z - Pp, V, Z + Pp, V]
                    }
                }, rotation: Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: yq
            }, {
                type: "text", text: {
                    func: function () {
                        return Math.round(ss.MoveLineGuideDistanceV.data.dis)
                    }
                }, rect: {
                    func: function () {
                        var w = ss.MoveLineGuideDistanceV.data;
                        return [[w.x0 - 10, (w.y0 + w.y1) / 2], 20, 20]
                    }
                }, color: yq, font: "12px Arial", align: "center"
            }]
        }, x.Default.setImage("Icons.EdgeElevationGuideImage", {
            width: 16,
            height: 16,
            comps: [{
                type: "oval",
                background: "rgb(255,255,255)",
                borderWidth: 1,
                borderColor: "rgb(138,138,138)",
                rect: [.5, .5, 15, 15]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(44,44,44)",
                borderCap: "round",
                points: [4, 8, 8, 4, 12, 8, 8, 4, 8, 13],
                segments: [1, 2, 2, 1, 2]
            }]
        }), ss.EdgeElevationGuide = {
            comps: [{
                type: "image",
                name: "Icons.EdgeElevationGuideImage",
                rect: {
                    func: function () {
                        var L = ss.EdgeElevationGuide.data, H = L.x, f = L.y,
                            s = fc.getStyle("curveElevationIntersectSize"), S = fc.getStyle("curveElevationGuideShift");
                        return H += S[0], f += S[1], [H - s, f - s, 2 * s, 2 * s]
                    }
                }
            }]
        }, x.Default.setImage("Icons.ConnectGuideBgImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                background: "#3399ff",
                fillRule: "evenodd",
                shadowColor: "#1ABC9C",
                rotation: 3.14159,
                points: [6.00001, 11.99999, 6.00001, 11.99999, 2.6863, 11.99999, 1e-5, 9.30695, 1e-5, 5.99999, 1e-5, 5.99999, 1e-5, 2.68628, 2.69305, -1e-5, 6.00001, -1e-5, 12.00001, -1e-5, 11.99998, 12.00001, 6.00001, 11.99999],
                segments: [1, 2, 4, 2, 4, 2, 2, 2]
            }]
        }), x.Default.setImage("Icons.ConnectGuideHeaderImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "oval",
                background: "#3399FF",
                borderColor: "#3399FF",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 12, 12]
            }, {
                type: "shape",
                borderWidth: 1,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [4.76, 2.56, 8.2, 5.98, 4.76, 9.44]
            }]
        }), ss.ConnectGuide = {
            comps: [{
                type: "image", name: "Icons.ConnectGuideBgImage", rotation: {
                    func: function () {
                        return ss.ConnectGuide.data.rotation
                    }
                }, rect: {
                    func: function () {
                        var W = ss.ConnectGuide.data.connect;
                        W.x, W.y;
                        var C = fc.getStyle("connectGuideIntersectSize");
                        return [[W.x, W.y], 2 * C, 2 * C]
                    }
                }
            }, {
                type: "image", name: "Icons.ConnectGuideHeaderImage", rect: {
                    func: function () {
                        var C = ss.ConnectGuide.data.cursorPos || ss.ConnectGuide.data.connect,
                            Q = fc.getStyle("connectGuideIntersectSize");
                        return [[C.x, C.y], 2 * Q - 2, 2 * Q - 2]
                    }
                }
            }, {
                type: "shape",
                background: null,
                borderColor: "#3399ff",
                borderWidth: 2,
                segments: [1, 4],
                points: {
                    func: function () {
                        var W = ss.ConnectGuide.data.connect, $ = ss.ConnectGuide.data.cursorPos || W;
                        return [W.x, W.y, W.x + .5 * ($.x - W.x), W.y, $.x + .5 * (W.x - $.x), $.y, $.x, $.y]
                    }
                }
            }]
        }, x.Default.setImage("Icons.ConnectGuideGarbageImage", {
            width: 48,
            height: 48,
            comps: [{
                type: "oval",
                background: "rgba(0,0,0,0.1)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 48, 48]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [19.84721, 19.69091, 19.84721, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [24.10371, 19.69091, 24.10371, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [28.15279, 19.69091, 28.15279, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [11.23055, 15.22377, 36.76945, 15.189, 19.12302, 15.17121, 20.94722, 11.5228, 26.41985, 11.5228, 28.24406, 15.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [15.48702, 15.22377, 17.02595, 21.25344]
            }]
        }), x.Default.setImage("Icons.ConnectGuideDeletingImage", {
            width: 56,
            height: 56,
            comps: [{
                type: "oval",
                background: "rgba(232,0,0,0.75)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 56, 56]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [22.67939, 27.69091, 22.67939, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [26.93588, 27.69091, 26.93588, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [30.98497, 27.69091, 30.98497, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                anchorX: 0,
                anchorY: 1,
                rotation: 5.65062,
                points: [14.06272, 23.22377, 39.60163, 23.189, 21.9552, 23.17121, 23.7794, 19.5228, 29.25203, 19.5228, 31.07623, 23.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [18.3192, 23.22377, 17.02595, 21.25344]
            }]
        }), ss.ConnectGuideGarbage = {
            comps: [{
                type: "image", name: {
                    func: function () {
                        var I = ss.ConnectGuideGarbage.data.hover;
                        return I ? "Icons.ConnectGuideDeletingImage" : "Icons.ConnectGuideGarbageImage"
                    }
                }, rect: {
                    func: function () {
                        var I = ss.ConnectGuideGarbage.data, j = fc.getStyle("connectGuideGarbageIntersectsize");
                        return I.hover && (j += 5), [[I.x, I.y], 2 * j, 2 * j]
                    }
                }
            }]
        };
        var Io = 6;
        ss.ShapeActivingCtrl = {
            comps: [{
                type: "shape", visible: {
                    func: function () {
                        return ss.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var g = ss.ShapeActivingCtrl.data;
                        return [g.point.x, g.point.y, g.c1.x, g.c1.y]
                    }
                }, segments: [1, 2], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }
            }, {
                type: "shape", visible: {
                    func: function () {
                        return ss.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var s = ss.ShapeActivingCtrl.data;
                        return [s.point.x, s.point.y, s.c2.x, s.c2.y]
                    }
                }, segments: [1, 2], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return em
                    }
                }
            }, {
                type: "shape", visible: {
                    func: function () {
                        return ss.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var I = ss.ShapeActivingCtrl.data.c1, r = I.x, G = I.y, R = Io / 2;
                        return "c1" === ss.ShapeActivingCtrl.data.hl && (R += .5), [r - R, G - R, r - R, G + R, r + R, G + R, r + R, G - R]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return fc.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return "c1" === ss.ShapeActivingCtrl.data.hl ? fc.getStyle("shapeCtrlPointHighlightBorder") || em : fc.getStyle("shapeCtrlPointBorderColor") || em
                    }
                }
            }, {
                type: "shape", visible: {
                    func: function () {
                        return ss.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var q = ss.ShapeActivingCtrl.data.c2, z = q.x, L = q.y, A = Io / 2;
                        return "c2" === ss.ShapeActivingCtrl.data.hl && (A += .5), [z - A, L - A, z - A, L + A, z + A, L + A, z + A, L - A]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return fc.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return "c2" === ss.ShapeActivingCtrl.data.hl ? fc.getStyle("shapeCtrlPointHighlightBorder") || em : fc.getStyle("shapeCtrlPointBorderColor") || em
                    }
                }
            }]
        }, ss.RoundPoint = {
            comps: [{
                type: "circle",
                background: "rgb(247,247,247)",
                borderWidth: 1,
                borderColor: {
                    func: function () {
                        return em
                    }
                },
                rect: {
                    func: function () {
                        return [[ss.RoundPoint.data.x, ss.RoundPoint.data.y], ar, ar]
                    }
                }
            }]
        }, ss.AttachPoint = {
            comps: [{
                type: "rect", background: {
                    func: function () {
                        return ss.AttachPoint.data.isAttach ? "rgb(51,153,255)" : "rgb(247,247,247)"
                    }
                }, borderWidth: 1, rotation: Math.PI / 4, borderColor: {
                    func: function () {
                        return em
                    }
                }, rect: {
                    func: function () {
                        var C = ss.AttachPoint.data.isAttach ? ar + 4 : ar;
                        return [[ss.AttachPoint.data.x, ss.AttachPoint.data.y], C, C]
                    }
                }
            }]
        }, _p.Icons.DrawIcon = function ($, e, S, M) {
            S.width = S.height = Bb, S.data = M, fc = $, x.Default.drawImage(e, S, 0, 0, Bb, Bb)
        }, _p.Icons.MapPoints = function (Z, v) {
            for (var e = 0, s = Z.length; s > e; e++) Z[e] /= v
        }, _p.roundTo = function (D, M, n) {
            var q = Math.abs(D % M);
            return n > q || n > M - q ? M * Math.round(D / M) : D
        }, _p.toFixed = function (H) {
            return Math.round(100 * H) / 100
        }, _p.getDataMatrix = function (i) {
            if (i instanceof x.Shape) {
                var W = new x.Math.Matrix2d, q = i.getPosition();
                return W.translate(-q.x, -q.y).scale(i.getScale().x, i.getScale().y).rotate(i.getRotation()).translate(q.x, q.y), W
            }
            return i.getMatrix ? i.getMatrix() : new x.Math.Matrix2d
        };
        var Xj = _p.Math.Curve = function () {
            this._curves = []
        };
        Xj.prototype = {}, Xj.prototype.constructor = Xj, Xj.prototype.createFromHtShape = function (s, H, f) {
            H instanceof x.List && (H = H.toArray());
            var $, P, Q, Y, T, V, A, W = this, G = null, D = null, E = 0, J = _p.Math.Vector2, C = _p.Math.CubicBezier,
                c = function (o) {
                    return new J(s[o], s[o + 1], f ? f[o / 2] : v)
                };
            for (P = 0, Q = H.length; Q > P; P++) {
                switch (Y = H[P], T = null, Y) {
                    case 1:
                        D = c(E), G = D, E += 2;
                        break;
                    case 2:
                        $ = c(E), E += 2, T = new C(D, D.clone(), $.clone(), $), D = $;
                        break;
                    case 3:
                        V = c(E), $ = c(E + 2), E += 4, T = new C(D, V.clone().sub(D).multiplyScalar(2 / 3).add(D), V.clone().sub($).multiplyScalar(2 / 3).add($), $), D = $;
                        break;
                    case 4:
                        V = c(E), A = c(E + 2), $ = c(E + 4), E += 6, T = new C(D, V, A, $), D = $;
                        break;
                    case 5:
                        if (!G) break;
                        T = new C(D, D.clone(), G.clone(), G), D = null, G = null
                }
                T && (T._index = W._curves.length, W._curves.push(T))
            }
        }, Xj.prototype.checkPoint = function (U, J) {
            var p, s, L, c, v, g = this, G = g._curves;
            for (p = 0, s = G.length; s > p; p++) if (c = G[p], v = c.intersectRect(U, J, J), v.length) return L = 0, v.forEach(function (v) {
                L += v.t
            }), L /= v.length, U = c.getPointAt(L), U.t = L, {bezier: c, intersection: U}
        }, Xj.prototype.insertKnot = function (S, _) {
            var U = S.insertKnot(_), D = this, P = D._curves;
            P.splice(S._index, 1, U[0], U[1])
        }, Xj.prototype._isCloseEnough = function (u, N) {
            return Math.abs(u.x - N.x) < 1e-6 && Math.abs(u.y - N.y) < 1e-6
        }, Xj.prototype._isSamePoint = function (j, M) {
            return j === M
        }, Xj.prototype.moveRealPoint = function (m, L) {
            var k = this, X = k._curves, h = L.clone().sub(m);
            X.forEach(function (Y) {
                var r = Y._p1;
                Y._p2, Y._p3;
                var c = Y._p4;
                k._isSamePoint(r, m) && (Y._p2.add(h), Y._p1 = L), k._isSamePoint(c, m) && (Y._p3.add(h), Y._p4 = L)
            })
        }, Xj.prototype.moveCtrlDueToRealPointMovement = function (D, J) {
            var x = this, L = x._curves, y = function (G) {
                G.add(J), G.e && J.e && (G.e += J.e)
            };
            L.forEach(function (c) {
                var d = c._p1;
                c._p2, c._p3;
                var i = c._p4;
                x._isSamePoint(d, D) && y(c._p2), x._isSamePoint(i, D) && y(c._p3)
            })
        }, Xj.prototype.moveCtrlPoint = function (D, Q, Z) {
            var B = D[Z];
            if (B) {
                B.e !== v && (Q.e = B.e);
                var i = this, P = i._curves;
                Q.clone().sub(B), P.forEach(function (K) {
                    var R;
                    "c2" === Z ? R = "_p2" : "c1" === Z && (R = "_p3"), i._isSamePoint(K[R], B) && (K[R] = Q)
                }), D[Z] = Q
            }
        }, Xj.prototype.deleteRealPoint = function (h, R) {
            var l, n, B, z, s, x, E, D = this, F = D._curves, e = {}, i = [], k = _p.Math.CubicBezier;
            for (n = 0, B = F.length; B > n; n++) l = F[n], z = l._p1, s = l._p2, x = l._p3, E = l._p4, (e[n] || !D._isSamePoint(z, h)) && (D._isSamePoint(E, h) ? B > n + 1 && D._isSamePoint(F[n + 1]._p1, h) && (R || i.push(new k(z, s, F[n + 1]._p3, F[n + 1]._p4))) : i.push(l));
            D._curves = i
        }, Xj.prototype.findPairs = function ($, S) {
            var y, i, M, o, w, D, G, x, F = this, t = F._curves, A = {}, g = [];
            for (i = 0, M = t.length; M > i; i++) y = t[i], o = y._p1, w = y._p2, D = y._p3, G = y._p4, !A[i] && F._isSamePoint(o, $) && (S ? g.push({
                point: o,
                r2: G
            }) : g.push({point: o, c2: w})), F._isSamePoint(G, $) && (x = S ? {point: G, r1: o} : {
                point: G,
                c1: D
            }, M > i + 1 && F._isSamePoint(t[i + 1]._p1, $) && (S ? x.r2 = t[i + 1]._p4 : x.c2 = t[i + 1]._p2, A[i + 1] = !0), g.push(x));
            return g
        }, Xj.prototype.toHtShape = function () {
            var t = this, p = t._curves, X = [], P = [], l = {x: 1 / 0, y: 1 / 0};
            return p.forEach(function (Y) {
                var f = Y._p1, h = Y._p2, N = Y._p3, w = Y._p4;
                return t._isCloseEnough(f, l) || (X.push(1), P.push(f.clone())), l = w, t._isCloseEnough(f, h) && t._isCloseEnough(N, w) ? (X.push(2), P.push(w.clone()), void 0) : (X.push(4), P.push(h.clone(), N.clone(), w.clone()), void 0)
            }), {segments: X, points: P}
        };
        var Zi = _p.Math.CubicBezier = function (g, i, I, Z) {
            var z = this;
            z._id = _p.Math.CubicBezier._globalId++, z._p1 = g, z._p2 = i, z._p3 = I, z._p4 = Z
        };
        Zi._globalId = 1, Zi.prototype = {}, Zi.prototype.constructor = Zi, Zi.prototype.toString = function () {
            return this._id
        }, Zi.prototype.intersectRect = function (k, I, A) {
            var T = I / 2, O = A / 2, b = k.x, z = k.y, U = _p.Math.Vector2, u = new U(-T + b, -O + z),
                R = new U(T + b, O + z), Z = new U(R.x, u.y), K = new U(u.x, R.y), l = this, Q = l.intersectLine(u, Z),
                p = l.intersectLine(Z, R), t = l.intersectLine(R, K), D = l.intersectLine(K, u),
                L = Q.concat(p).concat(t).concat(D);
            return L
        }, Zi.prototype.intersectLine = function (E, g) {
            var d, t, I, e, U, v, u, N, M, S, f, k, r, a = this, h = E.clone().min(g), A = E.clone().max(g);
            e = a._p1, U = a._p2, v = a._p3, u = a._p4, d = e.clone().multiplyScalar(-1), t = U.clone().multiplyScalar(3), I = v.clone().multiplyScalar(-3), f = d.add(t).add(I).add(u), d = e.clone().multiplyScalar(3), t = U.clone().multiplyScalar(-6), I = v.clone().multiplyScalar(3), S = d.add(t).add(I), d = e.clone().multiplyScalar(-3), t = U.clone().multiplyScalar(3), M = d.add(t), N = e.clone(), r = new _p.Math.Vector2(E.y - g.y, g.x - E.x), k = E.x * g.y - g.x * E.y;
            for (var V = a.getRoots(r.dot(f), r.dot(S), r.dot(M), r.dot(N) + k), Z = new Array, C = 0, n = V.length; n > C; C++) {
                var H = V[C];
                if (!(0 > H || H > 1)) {
                    var T = e.clone().lerp(U, H), $ = U.clone().lerp(v, H), D = v.clone().lerp(u, H), _ = T.lerp($, H),
                        P = $.lerp(D, H), l = _.lerp(P, H);
                    l.t = H, E.x == g.x ? h.y <= l.y && l.y <= A.y && Z.push(l) : E.y == g.y ? h.x <= l.x && l.x <= A.x && Z.push(l) : l.x >= h.x && l.y >= h.y && l.x <= A.x && l.y <= A.y && Z.push(l)
                }
            }
            return Z
        }, Zi.prototype.solveTForPoint = function (d) {
            var R, F, K, Z, h = this;
            R = h._p1.x - d.x, F = h._p2.x - d.x, K = h._p3.x - d.x, Z = h._p4.x - d.x;
            for (var t = h.getRoots(Z - 3 * K + 3 * F - R, 3 * K - 6 * F + 3 * R, 3 * F - 3 * R, R), I = v, T = 1 / 0, N = 0, O = t.length; O > N; N++) {
                var Q = t[N];
                if (!(0 > Q || Q > 1)) {
                    var x = h._p1.clone().lerp(h._p2, Q), U = h._p2.clone().lerp(h._p3, Q),
                        E = h._p3.clone().lerp(h._p4, Q), i = x.lerp(U, Q), o = U.lerp(E, Q), M = i.lerp(o, Q);
                    M.t = Q;
                    var W = Math.abs(M.y - d.y);
                    T > W && (T = W, I = M)
                }
            }
            return I
        }, Zi.prototype.getPointAt = function (M) {
            var N = this, F = N._p1, G = N._p2, b = N._p3, i = N._p4, o = F.clone().lerp(G, M),
                D = G.clone().lerp(b, M), t = b.clone().lerp(i, M), e = o.lerp(D, M), v = D.lerp(t, M);
            return e.lerp(v, M)
        }, Zi.prototype.getRoots = function (N, e, U, I) {
            var c, B, E, s, g, v = new Array;
            if (Math.abs(N) < 1e-6) {
                var c = e, B = U / c, E = I / c, s = B * B - 4 * E;
                if (s > 0) {
                    var g = Math.sqrt(s);
                    v.push(.5 * (-B + g)), v.push(.5 * (-B - g))
                } else 0 == s && v.push(.5 * -B)
            }
            e /= N, U /= N, I /= N, c = (3 * U - e * e) / 3, B = (2 * e * e * e - 9 * U * e + 27 * I) / 27;
            var q = e / 3, y = B * B / 4 + c * c * c / 27, Z = B / 2;
            if (Math.abs(y) <= 1e-6 && (y = 0), y > 0) {
                var R, b, g = Math.sqrt(y);
                R = -Z + g, b = R >= 0 ? Math.pow(R, 1 / 3) : -Math.pow(-R, 1 / 3), R = -Z - g, R >= 0 ? b += Math.pow(R, 1 / 3) : b -= Math.pow(-R, 1 / 3), v.push(b - q)
            } else if (0 > y) {
                var i = Math.sqrt(-c / 3), r = Math.atan2(Math.sqrt(-y), -Z) / 3, F = Math.cos(r), $ = Math.sin(r),
                    z = Math.sqrt(3);
                v.push(2 * i * F - q), v.push(-i * (F + z * $) - q), v.push(-i * (F - z * $) - q)
            } else {
                var R;
                R = Z >= 0 ? -Math.pow(Z, 1 / 3) : Math.pow(-Z, 1 / 3), v.push(2 * R - q), v.push(-R - q)
            }
            return v
        }, Zi.prototype._70I = function () {
            var X = this;
            return X._p1.distanceToSquared(X._p2) < 1e-10 && X._p3.distanceToSquared(X._p4) < 1e-10
        }, Zi.prototype.insertKnot = function (W) {
            var k = this, d = k._p1, p = k._p2, z = k._p3, X = k._p4, _ = d.clone().lerp(p, W),
                G = p.clone().lerp(z, W), s = z.clone().lerp(X, W), v = _.clone().lerp(G, W), J = G.clone().lerp(s, W),
                A = v.clone().lerp(J, W);
            return k._70I() ? (d.clone().lerp(X, W), [new _p.Math.CubicBezier(d, d.clone(), A.clone(), A), new _p.Math.CubicBezier(A, A.clone(), X.clone(), X)]) : [new _p.Math.CubicBezier(d, _, v, A), new _p.Math.CubicBezier(A, J, s, X)]
        };
        var Rd = x.Default.getInternal().ui().EdgeUI, $i = {
            _47O: function (A) {
                var d = this, w = $i.getBackups()._47O;
                _p.inEdit(d.gv) || w.call(d, A)
            }
        };
        _p.Inject.registAsModule($i, Rd);
        var Wq = x.Default.getInternal().ui().NodeUI, Ad = {
            _47O: function (V) {
                var j = this, x = Ad.getBackups()._47O;
                _p.inEdit(j.gv) || x.call(j, V)
            }, getSelectWidth: function () {
                var S = this, q = S.gv, O = S._data;
                if (q.isEditable(O) && _p.inEdit(q)) return 0;
                var R = Ad.getBackup("getSelectWidth");
                return R.call(S)
            }
        };
        _p.Inject.registAsModule(Ad, Wq);
        var $o = x.graph.GraphView, jf = {
            _editPointSize: function () {
                var a = x.Default.isTouchable, _ = _p.getStyle("pointSize");
                return _[a ? 0 : 1]
            }(), isPointEditable: function (M) {
                var h = this;
                if (_p.inEdit(h)) return h._pointEditableFunc ? h._pointEditableFunc(M) : !0;
                var O = jf.getBackup("isPointEditable");
                O.call(h, M)
            }, isEditable: function (G) {
                var N, e = this, g = jf.getBackup("isEditable");
                if (N = G instanceof _p.Group ? !0 : g.call(e, G), !_p.inEdit(e)) return N;
                if (!(G instanceof x.Edge)) return N;
                if (!G.s("2d.editable")) return !1;
                var a = e.getEditableFunc();
                return a ? a(G) : !0
            }, _42: function (d, D) {
                var J = this, S = jf.getBackups()._42;
                if (S.call(J, d, D), _p.inEdit(J)) {
                    var c = J.getEditInteractor();
                    c.drawImpl()
                }
            }
        };
        _p.Inject.registAsModule(jf, $o);
        var Zf = x.Default.getInternal().ui().ShapeUI, zd = {
            _47O: function (D) {
                var B = this, L = zd.getBackups()._47O;
                _p.inEdit(B.gv) || L.call(B, D)
            }
        };
        _p.Inject.registAsModule(zd, Zf);
        var mj = x.graph.DefaultInteractor, Qg = {
            handle_mousewheel: function (W) {
                var e = this, d = Qg.getBackup("handle_mousewheel");
                _p.inEdit(e.gv) || d.call(e, W)
            }
        };
        _p.Inject.registAsModule(Qg, mj);
        var oh = x.graph.MoveInteractor, je = {
            _calcShift: function (L, c) {
                var K = this, X = je.getBackup("_calcShift"), j = K.gv;
                if (!_p.inEdit(j)) return X.call(K, L, c);
                var v = j.getEditInteractor(), p = v.getSubModule("Move").calcShift(L, c, K);
                return p || X.call(K, L, c)
            }, clear: function (i) {
                var _ = this, W = je.getBackup("clear");
                W.call(_, i);
                var J = _.gv;
                if (_p.inEdit(J)) {
                    var k = J.getEditInteractor();
                    k.getSubModule("Move").clear(i)
                }
            }
        };
        _p.Inject.registAsModule(je, oh);
        var Bn = _p.Rect = function (Y) {
            this.catalog = "Rect", this._interactor = Y
        };
        Bn.prototype = {}, Bn.prototype.constructor = Bn, Bn.prototype.gatherInfo = function (G, $) {
            var J = this;
            if (1 === $.length) {
                var o = $[0];
                return o instanceof x.Shape && o._70I() ? J.gatherLine(G, o) : Tn(o, G) ? !1 : J.gatherSingleTarget(G, o)
            }
            return $.length > 1 ? J.gatherMultiTargets(G, $) : !1
        }, Bn.prototype.gatherSingleTarget = function (W, z) {
            if (z.getCorners) {
                var _, d = this, t = d.info;
                d.target = z, _ = d.screenInfo = {};
                var Z = z.getCorners();
                t.LT = new _p.Math.Vector2(Z[0]), t.LB = new _p.Math.Vector2(Z[1]), t.RB = new _p.Math.Vector2(Z[2]), t.RT = new _p.Math.Vector2(Z[3]), t.T = t.LT.clone().add(t.RT).divideScalar(2), t.B = t.LB.clone().add(t.RB).divideScalar(2), t.L = t.LT.clone().add(t.LB).divideScalar(2), t.R = t.RT.clone().add(t.RB).divideScalar(2);
                for (var s in t) _[s] = _p.toScreenPosition(W, t[s]);
                var Q = d._interactor, g = Q.getStyle("checkSize"), H = function (V, x, B) {
                    var G = x.clone().sub(V).setLength(-g), u = B.clone().sub(V).setLength(-g), z = G.add(u).add(V);
                    return z
                };
                return _.rotLT = H(_.LT, _.RT, _.LB), _.rotLB = H(_.LB, _.LT, _.RB), _.rotRB = H(_.RB, _.LB, _.RT), _.rotRT = H(_.RT, _.LT, _.RB), _.rotT = _.rotLT.clone().add(_.rotRT).divideScalar(2), _.rotB = _.rotLB.clone().add(_.rotRB).divideScalar(2), _.rotL = _.rotLT.clone().add(_.rotLB).divideScalar(2), _.rotR = _.rotRT.clone().add(_.rotRB).divideScalar(2), _.rotation = z.getRotation(), d.gatherConnectInfo(), !0
            }
        }, Bn.prototype.gatherConnectInfo = function () {
            var I = this, T = I.target, Z = I._interactor, d = I.screenInfo, S = Z.gv;
            if (S.isConnectActionVisible(T) && Z.getStyle("connectGuideVisible")) {
                var n;
                T.s && (n = T.s("connectGuideShift")), n || (n = Z.getStyle("connectGuideShift"));
                var L = T.getAnchor(), e = T.getSize(),
                    u = T.toGlobal({x: e.width * (n[0] - L.x), y: e.height * (n[1] - L.y)});
                u = _p.toScreenPosition(S, u), d.P1 ? u.add(d.P2.clone().sub(d.P1).setLength(n[2])) : (u.add(d.RT.clone().sub(d.LT).setLength(n[2])), u.add(d.LB.clone().sub(d.LT).setLength(n[3]))), d.connect = u
            }
        }, Bn.prototype.gatherMultiTargets = function (E, I) {
            var P = _p.Group.findOrCreateGroup(I);
            if (!P) return !1;
            var H = this;
            return H.editing && "rotate" !== H.editing.mode || P.calcInfo(), H.gatherSingleTarget(E, P)
        }, Bn.prototype.gatherLine = function (f, K) {
            this.target = K;
            var O = this.screenInfo = {}, h = K.getPoints(), _ = _p.getDataMatrix(K);
            return O.P1 = _p.toScreenPosition(f, _.apply(h.get(0))), O.P2 = _p.toScreenPosition(f, _.apply(h.get(1))), this.gatherConnectInfo(), !0
        }, Bn.ResizeKeys = ["LT", "RB", "LB", "RT", "L", "R", "B", "T"], Bn.ResizeDirection = [{x: -1, y: -1}, {
            x: 1,
            y: 1
        }, {x: -1, y: 1}, {x: 1, y: -1}, {x: -1, y: 0}, {x: 1, y: 0}, {x: 0, y: 1}, {
            x: 0,
            y: -1
        }], Bn.RotateKeys = ["rotLT", "rotRB", "rotLB", "rotRT", "rotL", "rotR", "rotB", "rotT"], Bn.prototype.check = function (C, _, k) {
            if (x.Default.isLeftButton(_)) {
                var f = this;
                if (f.editing = null, f.tipInfo = null, f.screenInfo) {
                    var N = f.target, i = C.isEditable(N), a = f.screenInfo;
                    if (i && a.connect) {
                        var T = f._checkConnect(k);
                        if (T) return T
                    }
                    if (a.P1) return f._checkLine(k);
                    var H, l, d, X = null, u = f._interactor, U = u.getStyle("checkSize");
                    if (i && C.isRectEditable(N)) for (l = 0; l < _p.Rect.ResizeKeys.length; l++) if (d = _p.Rect.ResizeKeys[l], _p.checkHit(k, a[d], U)) {
                        X = d, H = "resize";
                        break
                    }
                    if (!X && i && C.isRotationEditable(N) && !u.getStyle("rotateAsClock")) {
                        var Q = u.getStyle("rotateCheckSize");
                        for (l = 0; l < _p.Rect.RotateKeys.length; l++) if (d = _p.Rect.RotateKeys[l], _p.checkHit(k, a[d], Q)) {
                            X = d, H = "rotate";
                            break
                        }
                    }
                    if (!X) return u.setCursor("default"), void 0;
                    if ("rotate" === H) {
                        var p, s = C.lp(_);
                        if (N instanceof _p.Group) {
                            var A = u.getStyle("groupRotateModeKey");
                            "string" == typeof A && (A = [A]);
                            for (var B = !1, r = 0, o = A.length; o > r; r++) if (_[A[r]]) {
                                B = !0;
                                break
                            }
                            var F = u.getStyle("groupRotateModeDefault");
                            p = B ? "batch" === F ? "block" : "batch" : F
                        }
                        var Z = "batch" === p ? N.getAnchor2() : N.getPosition(), w = Math.atan2(s.y - Z.y, s.x - Z.x);
                        u._setRotateCursor(w), f.editing = {
                            mode: H,
                            key: X,
                            pos: Z,
                            flipY: N.getScale().y < 0,
                            rotation: N.getRotation(),
                            hitRot: w
                        }, p && (f.editing.groupRotateMode = p)
                    } else {
                        var L = _p.Rect.ResizeKeys.indexOf(X), I = _p.Rect.ResizeDirection[L],
                            h = Math.cos(N.getRotation()), t = Math.sin(N.getRotation()),
                            m = I.x * Math.sign(N.getScale().x), c = I.y * Math.sign(N.getScale().y),
                            K = Math.atan2(-t * m - h * c, h * m - t * c), q = (Math.round(K / (Math.PI / 4)) + 8) % 8,
                            O = ["ew-resize", "nesw-resize", "ns-resize", "nwse-resize", "ew-resize", "nesw-resize", "ns-resize", "nwse-resize"][q];
                        this._interactor.setCursor(O);
                        var z = N.getWidth(), Y = N.getHeight(), $ = N.getAnchor();
                        f.editing = {
                            mode: H,
                            key: X,
                            rect: {x: -z * $.x, y: -Y * $.y, width: z, height: Y},
                            anchor: $,
                            matrix: N.getMatrix()
                        }
                    }
                    return X
                }
            }
        }, Bn.prototype._checkLine = function ($) {
            var a = this;
            a.screenInfo;
            var q, s = a._interactor.getStyle("checkSize");
            if (_p.checkHit($, a.screenInfo.P1, s)) q = "P1"; else {
                if (!_p.checkHit($, a.screenInfo.P2, s)) return this._interactor.setCursor("default"), void 0;
                q = "P2"
            }
            return a.editing = {mode: "line", key: q}, q
        }, Bn.prototype._checkConnect = function (W) {
            var $ = this, m = $.screenInfo, k = $._interactor, Z = k.getStyle("connectGuideIntersectSize"),
                d = m.connect, g = W.x, P = d.x;
            if (P > g && Z > P - g && Math.abs(d.y - W.y) < Z || g >= P && _p.checkHit(W, d, Z)) {
                var z = "connect", G = w.getConnectAction(k.gv);
                if ($.editing = {mode: z}, G && G.delete) if ($.target instanceof _p.Group) {
                    var t = !0;
                    k.gv.sm().getSelection().each(function (S) {
                        G.delete.visible.call(null, k.gv, S) || (t = !1)
                    }), $.editing.hasDeleteAction = t
                } else G.delete.visible.call(null, k.gv, $.target) && ($.editing.hasDeleteAction = !0);
                return k.setCursor("default"), z
            }
        }, Bn.prototype._fireEditEvent = function (n, H) {
            var t = this._interactor, O = this.editing;
            if (O) {
                var m = O.mode;
                m = "rotate" === m ? "Rotation" : "connect" === m ? "Connection" : m[0].toUpperCase() + m.slice(1), t.fi({
                    kind: n + "Edit" + m,
                    event: H
                })
            }
        }, Bn.prototype.startEdit = function (B, X) {
            B.startDragging(X);
            var u = this;
            u._interactor.fi({kind: "prepareEdit", event: X});
            var t = u.editing, b = u.target;
            if (t) {
                if (u._fireEditEvent("begin", X), "rotate" === t.mode) return t.groupRotateMode && b.beginRotate(t), void 0;
                if ("connect" !== t.mode) ("line" === t.mode || b && 0 === b.getRotation()) && (u._inSmartGuide = !0, u._interactor.rectGuide.gatherRects()); else if (t.hasDeleteAction) {
                    var o = B.gv, c = u._interactor.getStyle("connectGuideGarbageShift");
                    t.garbageInfo = {
                        x: o.getWidth() * c[0] + c[2],
                        y: o.getHeight() * c[1] + c[3],
                        size: u._interactor.getStyle("connectGuideGarbageIntersectsize")
                    }, B._42()
                }
            }
        }, Bn.prototype._46O = function (Y) {
            var P, F, y = this, K = y.editing, l = y.target;
            if (K) {
                if ("connect" === K.mode && !K.canceled && !K.deleted) try {
                    K.garbageInfo && K.garbageInfo.hover ? w.doDeleteConnectionAction(y._interactor.gv, l) : w.doConnectAction(y._interactor.gv, l, K.target)
                } catch (V) {
                    console.error(V)
                }
                F = K.freezeFlag, P = y.editing.groupRotateMode, y._fireEditEvent("end", Y), y.editing = null
            }
            y.tipInfo = null, y._inSmartGuide && (y._interactor.rectGuide.clear(), y._inSmartGuide = !1), P && l && l.endRotate(), l instanceof x.Block && (F === v ? delete l._freezeSyncFromChildren : l._freezeSyncFromChildren = F, l.updateFromChildren())
        }, Bn.prototype.handleNormalStateDelete = function () {
            var M = this, K = M.editing;
            if (K && "connect" === K.mode && !K.canceled && !K.deleted) {
                if (K.garbageInfo) {
                    try {
                        w.doDeleteConnectionAction(M._interactor.gv, M.target)
                    } catch (v) {
                        console.error(v)
                    }
                    K.garbageInfo = null
                }
                return K.cursorPos = null, K.targetCorners = null, K.deleted = !0, M._interactor._42(), !0
            }
        }, Bn.prototype.handleNormalStateKeyDown = function (w) {
            var m = this, R = m.editing;
            return !R || "connect" !== R.mode || R.canceled || R.deleted ? void 0 : x.Default.isEsc(w) ? (R.cursorPos = null, R.targetCorners = null, R.canceled = !0, m._interactor._42(), !0) : void 0
        }, Bn.prototype.handleEdit = function (g, X) {
            var y = this, q = y.editing;
            if (q) {
                var T, k, C, u, L, v = y.target, A = q.key, W = q.mode, K = g.lp(X), Y = y._interactor;
                if ("connect" === W) {
                    if (q.canceled) return;
                    if (q.deleted) return;
                    q.cursorPos = Y._getLogicalPoint(X);
                    var o = q.garbageInfo;
                    return o && _p.checkHit(q.cursorPos, o, o.size) ? (o.hover = !0, q.target = null, q.targetCorners = null) : (o && (o.hover = !1), q.target = g.getDataAt(K, function ($) {
                        return g.isSelectable($) ? Un($) ? !0 : !1 : !1
                    }) || null, q.targetCorners = _p.getTargetCornersOnScreen(g, q.target)), Y._42(), void 0
                }
                if ("rotate" === W) {
                    var s, B, z = q.pos, t = Math.atan2(K.y - z.y, K.x - z.x);
                    if (q.groupRotateMode ? B = t - q.hitRot : (s = t - q.hitRot, B = q.rotation + s), B %= 2 * Math.PI, 0 > B && (B += 2 * Math.PI), !x.Default.isCtrlDown(X)) {
                        var p, E;
                        sf(X) ? (p = Y.getStyle("shiftRotateRound"), E = p / 2) : (p = Y.getStyle("rotateRound"), E = Y.getStyle("rotateSensitivity")), B = _p.roundTo(B, p, E)
                    }
                    q.groupRotateMode ? (s = B - (q.lastRotation || 0), 0 !== s && (v.addRotation(s, q.groupRotateMode), q.lastRotation = B)) : v.setRotation(B), Y._setRotateCursor(t), B > Math.PI && (B -= 2 * Math.PI);
                    var w = 180 * (B / Math.PI);
                    w = w.toFixed(2), T = "" + w + "°"
                } else if ("resize" === W) {
                    var f = q.rect;
                    C = f.x, u = f.y;
                    var M, r = f.width, i = f.height, b = q.anchor, l = q.matrix,
                        G = v.s && v.s("keepAspectRatio") || Y.getStyle("keepAspectRatio");
                    sf(X) && (G = !G);
                    var Q = y._unionPointMode1, Z = y._unionPointMode2;
                    if (y._inSmartGuide && !x.Default.isCtrlDown(X) && !G) {
                        var O;
                        "L" === A || "R" === A ? O = "x" : ("T" === A || "B" === A) && (O = "y"), y._adsorbedToClosest(K, O), L = !0
                    }
                    M = l.tfi(K);
                    var N;
                    "LT" === A ? (f = Q(M, {x: C + r, y: u + i}, r, i, G), N = 9) : "T" === A ? (f = Z({
                        x: C,
                        y: M.y
                    }, {x: C + r, y: u + i}, r, i, G, "v"), N = 1) : "RT" === A ? (f = Q(M, {
                        x: C,
                        y: u + i
                    }, r, i, G), N = 33) : "L" === A ? (f = Z({x: M.x, y: u}, {
                        x: C + r,
                        y: u + i
                    }, r, i, G, "h"), N = 8) : "R" === A ? (f = Z({x: C, y: u}, {
                        x: M.x,
                        y: u + i
                    }, r, i, G, "h"), N = 32) : "LB" === A ? (f = Q(M, {
                        x: C + r,
                        y: u
                    }, r, i, G), N = 12) : "B" === A ? (f = Z({x: C, y: u}, {
                        x: C + r,
                        y: M.y
                    }, r, i, G, "v"), N = 4) : "RB" === A && (f = Q(M, {x: C, y: u}, r, i, G), N = 36);
                    var D = l.tf(f.x + f.width * b.x, f.y + f.height * b.y);
                    v instanceof x.Block && (q.hasOwnProperty("freezeFlag") || (q.freezeFlag = v._freezeSyncFromChildren, v._freezeSyncFromChildren = !0)), v.setPosition(D), v.setSize(f.width, f.height), L && (k = v.getRect(), Y.rectGuide.gatherLines({
                        node: v,
                        x: k.x,
                        y: k.y,
                        w: k.width,
                        h: k.height
                    }, O, N)), T = "" + Math.round(f.width) + " * " + Math.round(f.height)
                } else if ("line" === W) {
                    if (sf(X)) {
                        var d = v.getPoints(), S = "P1" === A ? d.get(1) : d.get(0), V = {x: K.x - S.x, y: K.y - S.y},
                            F = Y.getStyle("shiftLineRotateRound"), P = y._shiftDirList;
                        if (!P || y._shiftRotateRound !== F) {
                            y._shiftRotateRound = F, y._shiftDirList = P = [];
                            for (var $ = 0; $ < Math.PI; $ += F) P.push({x: J($), y: c($)})
                        }
                        for (var e, R = 0, I = 0, j = P.length; j > I; I++) {
                            var H = P[I], a = H.x * V.x + H.y * V.y;
                            Math.abs(a) > Math.abs(R) && (R = a, e = H)
                        }
                        K = {x: S.x + e.x * R, y: S.y + e.y * R}, Y.rectGuide.clear()
                    } else y._inSmartGuide && !x.Default.isCtrlDown(X) && (y._adsorbedToClosest(K), L = !0);
                    var n = _p.getDataMatrix(v).applyInverse(K);
                    v.setPoint("P1" === A ? 0 : 1, n, !0);
                    var m = v.getPoints(), U = m.get(0), _ = m.get(1);
                    C = U.x - _.x, u = U.y - _.y, T = " " + Math.round(Math.sqrt(C * C + u * u)) + " ", L && (k = v.getRect(), Y.rectGuide.gatherLines({
                        node: v,
                        x: k.x,
                        y: k.y,
                        w: k.width,
                        h: k.height
                    }))
                }
                if (T) {
                    var h = x.Default.getLogicalPoint(X, Y._canvas);
                    h.x += _p.Icons.TipShiftX, h.y += _p.Icons.TipShiftY, y.tipInfo = {
                        helperPos: h,
                        text: T,
                        size: T.length
                    }
                }
                y._fireEditEvent("between", X)
            }
        }, Bn.prototype._unionPointMode1 = function (I, Y, e, S, Q) {
            if (Q && e && S) {
                var H = I.x - Y.x, n = I.y - Y.y;
                Math.abs(H * S) < Math.abs(n * e) ? (n = Math.sign(n) * Math.abs(H * S / e), I.y = Y.y + n) : (H = Math.sign(H) * Math.abs(n * e / S), I.x = Y.x + H)
            }
            return x.Default.unionPoint(I, Y)
        }, Bn.prototype._unionPointMode2 = function (b, u, S, n, y, W) {
            var A = x.Default.unionPoint(b, u);
            if (y && S && n) {
                var s;
                "v" === W ? (s = A.x + A.width / 2, A.width = S * A.height / n, A.x = s - A.width / 2) : (s = A.y + A.height / 2, A.height = n * A.width / S, A.y = s - A.height / 2)
            }
            return A
        }, Bn.prototype._adsorbedToClosest = function (B, A) {
            var d = this, N = d._interactor, j = N.rectGuide.findClosest(B, A), G = N.gridGuide.findClosest(B, A),
                F = 1 / 0, h = 1 / 0;
            j && (isFinite(j.x) && (F = j.x), isFinite(j.y) && (h = j.y)), G && (isFinite(G.x) && Math.abs(G.x) < Math.abs(F) && (F = G.x), isFinite(G.y) && Math.abs(G.y) < Math.abs(h) && (h = G.y)), isFinite(F) && (B.x += F), isFinite(h) && (B.y += h)
        }, Bn.prototype._42 = function (D, I, r) {
            var Q = this;
            Q.info = {}, Q.screenInfo = null;
            var y = Q._interactor;
            if (!y.editDetail && Q.gatherInfo(I, r)) {
                var P = Q.editing, T = P ? P.groupRotateMode : null, M = Q.screenInfo;
                "block" !== T && (M.P1 ? _p.Icons.DrawIcon(y, D, _p.Icons.Line, M) : _p.Icons.DrawIcon(y, D, _p.Icons.Rect, M), M.connect && (_p.Icons.DrawIcon(y, D, _p.Icons.ConnectGuide, {
                    rotation: M.rotation,
                    connect: M.connect,
                    cursorPos: P ? P.cursorPos : null
                }), P && (P.targetCorners && _p.Icons.DrawIcon(y, D, _p.Icons.NodeHoverGuide, P.targetCorners), P.garbageInfo && _p.Icons.DrawIcon(y, D, _p.Icons.ConnectGuideGarbage, P.garbageInfo))), Q.tipInfo && _p.Icons.DrawIcon(y, D, _p.Icons.TipHelper, Q.tipInfo)), Q.target instanceof _p.Group && Q.target._42(y, D, I)
            }
        };
        var Lc = _p.Anchor = function (N) {
            this.catalog = "Anchor", this._interactor = N
        };
        Lc.prototype = {}, Lc.prototype.constructor = Lc, Lc.prototype.gatherInfo = function (l, t) {
            var r = this;
            if (1 === t.length) {
                var G = t[0];
                if (!G.getAnchor) return;
                if (G instanceof x.Shape && G._70I()) return;
                if (Tn(G, l)) return;
                return r.gatherSingleTarget(l, t[0])
            }
            return t.length > 1 ? r.gatherMultiTargets(l, t) : !1
        }, Lc.prototype.gatherSingleTarget = function (g, o) {
            var n = this;
            return n.info.POS = o.getPosition(), n.screenInfo.POS = _p.toScreenPosition(g, n.info.POS), n.target = o, !0
        }, Lc.prototype.gatherMultiTargets = function (T, N) {
            var K = this, Q = _p.Group.findOrCreateGroup(N);
            return Q ? (K.screenInfo.POS = _p.toScreenPosition(T, Q.getAnchor2()), K.target = Q, !0) : !1
        }, Lc.prototype.isVisible = function () {
            var r = this, c = r._interactor;
            if (c.getStyle("anchorVisible") === !1) return !1;
            var v = r.target;
            if (v) {
                if (this.editing) return !0;
                var b = v.getAnchor(), O = c.getStyle("anchorOutsideVisibleThreshold");
                if (b.x < -O || b.x > 1 + O || b.y < -O || b.y > 1 + O) return !0;
                var f = v.getSize(), A = v.getScale(), I = Math.min(Math.abs(f.width * A.x), Math.abs(f.height * A.y));
                if (I * c.gv._zoom < c.getStyle("anchorHideThreshold")) return !1
            }
            return !0
        }, Lc.prototype.check = function ($, E, K) {
            if (x.Default.isLeftButton(E)) {
                var X = this, U = X._interactor;
                if (X.isVisible() && U.getStyle("anchorMovable") !== !1) {
                    X.editing = null, X.tipInfo = null;
                    var L = X.target;
                    if (L && $.isAnchorEditable(L) && $.isEditable(L)) {
                        var j;
                        if (X.screenInfo && (j = X.screenInfo.POS) && _p.checkHit(K, new _p.Math.Vector2(j), U.getStyle("checkSize"))) {
                            if (L instanceof _p.Group) return X.editing = {}, !0;
                            var W = L.getWidth(), q = L.getHeight(), l = L.getAnchor();
                            return X.editing = {
                                rect: {x: -W * l.x, y: -q * l.y, width: W, height: q},
                                anchor: l,
                                matrix: L.getMatrix()
                            }, !0
                        }
                    }
                }
            }
        }, Lc.prototype.startEdit = function (Y, m) {
            Y.startDragging(m), Y.fi({kind: "beginEditAnchor", event: m})
        }, Lc.prototype._46O = function (G) {
            var A = this;
            A.editing && (A.editing = null, A._interactor.fi({kind: "endEditAnchor", event: G})), A.tipInfo = null
        }, Lc.prototype.handleEdit = function (f, C) {
            var S = this, c = S.target;
            if (c) {
                var K = S.editing;
                if (K) {
                    var Q = f.lp(C), D = S._interactor;
                    if (c instanceof _p.Group) return c.setAnchor2(Q), D._42(), void 0;
                    var M = K.matrix, V = M.tfi(Q), H = K.rect, W = (V.x - H.x) / H.width, i = (V.y - H.y) / H.height;
                    if (!x.Default.isCtrlDown(C)) {
                        var t = D.getStyle("anchorRound"), O = D.getStyle("anchorSensitivity");
                        W = _p.roundTo(W, t, O), i = _p.roundTo(i, t, O)
                    }
                    c.setAnchor(W, i, !0);
                    var _ = x.Default.getLogicalPoint(C, D._canvas);
                    _.x += _p.Icons.TipShiftX, _.y += _p.Icons.TipShiftY;
                    var w = "" + W.toFixed(2) + ", " + i.toFixed(2);
                    S.tipInfo = {helperPos: _, text: w, size: w.length}, D.fi({kind: "betweenEditAnchor", event: C})
                }
            }
        }, Lc.prototype._42 = function (i, E, Z) {
            var p = this;
            p.info = {}, p.screenInfo = {};
            var $ = p._interactor;
            $.editDetail || p.gatherInfo(E, Z) && p.isVisible() && (_p.Icons.DrawIcon($, i, _p.Icons.Anchor, p.screenInfo), p.tipInfo && _p.Icons.DrawIcon($, i, _p.Icons.TipHelper, p.tipInfo))
        };
        var gs = _p.RotateX = function (v) {
            this.catalog = "RotateX", this._interactor = v
        };
        gs.prototype = {}, gs.prototype.constructor = gs, gs.prototype.gatherInfo = function (r, i) {
            var e = this;
            if (1 === i.length) {
                var d = i[0];
                return d instanceof x.Shape && d._70I() || Tn(d, r) ? !1 : e.gatherSingleTarget(r, d)
            }
            return i.length > 1 ? e.gatherMultiTargets(r, i) : !1
        }, gs.prototype.gatherSingleTarget = function () {
            var M = new x.Math.Vector2, J = new x.Math.Vector2, U = new x.Math.Vector2, G = new x.Math.Vector2,
                P = function (Y, B) {
                    var k = Y.x - B.x, v = Y.y - B.y;
                    return k * k + v * v
                };
            return function (C, v) {
                if (v.getCorners) {
                    var t = this, Q = v.getCorners(), j = 15, X = v.getPosition();
                    M.copy(Q[0]), U.copy(Q[1]), G.copy(Q[3]), J.copy(M).add(G).divideScalar(2).add(M.sub(U).setLength(j / C.getZoom()));
                    var e = Math.max(P(X, Q[0]), P(X, Q[1]), P(X, Q[2]), P(X, Q[3]));
                    return t.info.POS = J.clone(), t.screenInfo.POS = _p.toScreenPosition(C, t.info.POS), t.screenInfo.LEN = Math.sqrt(e) * C.getZoom() + j, t.screenInfo.CENTER = _p.toScreenPosition(C, X), t.target = v, !0
                }
            }
        }(), gs.prototype.gatherMultiTargets = function (Y, u) {
            var L = this, E = _p.Group.findOrCreateGroup(u);
            if (!E) return !1;
            var L = this;
            return L.gatherSingleTarget(Y, E)
        }, gs.prototype.isVisible = function () {
            var f = this._interactor;
            if (!f.getStyle("rotateAsClock")) return !1;
            var h = this.target;
            if (!h) return !0;
            var k = f.gv;
            return k.isEditable(h) && k.isRotationEditable(h) ? !0 : !1
        }, gs.prototype.check = function (h, W, C) {
            var u = this, w = u._checkImpl(h, W, C);
            return (w || u._clockPainted) && u._interactor._42(), w
        }, gs.prototype._checkImpl = function (n, c, M) {
            if (x.Default.isLeftButton(c)) {
                var E = this;
                E.editing = null, E.tipInfo = null;
                var I;
                if (E.screenInfo && (I = E.screenInfo.POS) && E.isVisible()) {
                    var C = E._interactor;
                    if (_p.checkHit(M, I, C.getStyle("checkSize"))) {
                        var r = E.target, h = n.lp(c), T = r.getPosition(), i = Math.atan2(h.y - T.y, h.x - T.x);
                        return C._setRotateCursor(i), E.editing = {
                            pos: T,
                            rotation: r.getRotation(),
                            hitRot: i,
                            groupRotateMode: "block",
                            screenInfo: {CENTER: E.screenInfo.CENTER, LEN: E.screenInfo.LEN}
                        }, !0
                    }
                }
            }
        }, gs.prototype.startEdit = function (D, g) {
            D.startDragging(g), D.fi({
                kind: "beginEditRotation",
                event: g
            }), this.target instanceof _p.Group && this.target.beginRotate(this.editing)
        }, gs.prototype._46O = function (J) {
            var K = this;
            K.editing && (K.editing = null, K._interactor.fi({
                kind: "endEditRotation",
                event: J
            })), K.target instanceof _p.Group && K.target.endRotate(), K.tipInfo = null
        }, gs.prototype.handleEdit = function (D, F) {
            var w = this, k = w.editing;
            if (k) {
                var V, n, e = w.target, o = D.lp(F), N = w._interactor, E = k.pos, X = Math.atan2(o.y - E.y, o.x - E.x),
                    p = e instanceof _p.Group;
                if (p ? n = X - k.hitRot : (V = X - k.hitRot, n = k.rotation + V), n %= 2 * Math.PI, 0 > n && (n += 2 * Math.PI), !x.Default.isCtrlDown(F)) {
                    var v, u;
                    sf(F) ? (v = N.getStyle("shiftRotateRound"), u = v / 2) : (v = N.getStyle("rotateRound"), u = N.getStyle("rotateSensitivity")), n = _p.roundTo(n, v, u)
                }
                p ? (V = n - (k.lastRotation || 0), 0 !== V && (e.addRotation(V, k.groupRotateMode), k.lastRotation = n)) : e.setRotation(n), N._setRotateCursor(X), n > Math.PI && (n -= 2 * Math.PI);
                var z = 180 * (n / Math.PI), d = "" + z.toFixed(2) + "°", M = x.Default.getLogicalPoint(F, N._canvas);
                M.x += _p.Icons.TipShiftX, M.y += _p.Icons.TipShiftY, w.tipInfo = {
                    helperPos: M,
                    text: d,
                    size: d.length
                }, N.fi({kind: "betweenEditRotation", event: F})
            }
        }, gs.prototype._42 = function (o, w, Y) {
            var _ = this;
            _._clockPainted = !1, _.info = {}, _.screenInfo = {};
            var K = _._interactor;
            K.editDetail || _.gatherInfo(w, Y) && _.isVisible() && (_p.Icons.DrawIcon(K, o, _p.Icons.RoundPoint, _.screenInfo.POS), _.tipInfo && _p.Icons.DrawIcon(K, o, _p.Icons.TipHelper, _.tipInfo), _.editing && _.drawClock(o))
        }, gs.prototype.drawClock = function (D) {
            D.save();
            var W = this;
            W._clockPainted = !0;
            var k = W.editing || {}, C = k.screenInfo || W.screenInfo, V = C.LEN, f = V + 8, y = V + 18;
            D.save(), D.translate(C.CENTER.x, C.CENTER.y), D.beginPath(), D.strokeStyle = "rgb(150, 150, 150)";
            for (var K, Z, n, Y, s, F = 0; 360 > F; F++) K = F * Math.PI / 180, 0 === F % 5 && (Z = c(K) * V, n = J(K) * V, Y = c(K) * f, s = J(K) * f, D.moveTo(Z, n), D.lineTo(Y, s)), 0 === F % 45 && (Z = c(K) * V, n = J(K) * V, Y = c(K) * y, s = J(K) * y, D.moveTo(Z, n), D.lineTo(Y, s));
            D.stroke(), D.rotate(-h);
            var A = k.lastRotation || W.target.getRotation();
            D.beginPath(), D.fillStyle = "rgba(255, 0, 0, 0.1)", D.strokeStyle = "rgb(157, 157, 157)", D.moveTo(0, 0), D.arc(0, 0, y, 0, A, !1), D.fill(), D.beginPath(), D.moveTo(0 + y, 0), D.arc(0, 0, y, 0, A, !1), D.stroke(), D.restore()
        };
        var Xj = _p.Curve = function (f) {
            this.catalog = "Curve", this._interactor = f
        };
        Xj.prototype = {}, Xj.prototype.constructor = Xj, H.defineProperties(Xj.prototype, {
            activing: {
                get: function () {
                    return this._activing
                }, set: function (L) {
                    var u = this;
                    if (L) u._activing = new _p.CurveActiving(this, L); else {
                        var T = u._activing;
                        T && T.dispose(), u._activing = null
                    }
                }
            }
        }), Xj.PointType = {
            Mirrored: 0,
            Straight: 1,
            Disconnected: 2,
            Asymmetric: 3
        }, Xj.prototype.setUp = function () {
            var M = this, $ = M._interactor;
            $ && $.gv.mp(M._onGraphviewPropertyChanged, M)
        }, Xj.prototype._onGraphviewPropertyChanged = function (E) {
            ("zoom" === E.property || "translateX" === E.property || "translateY" === E.property) && this._handleDataChanged()
        }, Xj.prototype.tearDown = function () {
            var t = this, w = t._interactor;
            w && w.gv.ump(t._onGraphviewPropertyChanged, t)
        }, Xj.prototype.canEnterEditDetailMode = function () {
            var R = this, Z = R._interactor, z = Z._getValidSelection();
            if (1 === z.length) {
                var Y = z[0], X = Y instanceof x.Edge;
                if (Y instanceof x.Shape || X) {
                    if (X) {
                        var n = Y.s("edge.type");
                        if (n && "points" !== n) return
                    }
                    var j = Z.gv;
                    if (j.isPointEditable(Y) && j.isEditable(Y)) return R.target = Y, !0
                }
            }
        }, Xj.prototype.canQuitEditDetailMode = function (n) {
            var N = this, C = N._interactor._getLogicalPoint(n);
            return N._checkEditRealPoint(C) ? void 0 : N._interactor.gv.getDataAt(n) !== N.target ? !0 : void 0
        }, Xj.prototype.preHandleScroll = function () {
            var Q = this.editing;
            return Q && Q.inEdit ? !0 : void 0
        }, Xj.prototype.getCurrentSelectintStatus = function () {
            var d = this;
            if (d.activing && !d.activing.selections) {
                if (d.activing.status != v) return d.activing.status;
                var y = function (u) {
                    var H = d.activing.status;
                    d.activing.status = u, d._interactor.fp("shapePointStatus", H, u)
                }, U = _p.Curve.PointType, V = d.activing.point, O = d.activing.pairs;
                if (!O || 1 !== O.length) return y(U.Mirrored);
                var S = O[0], b = S.c1 && S.c1.isNearEnough(V), p = S.c2 && S.c2.isNearEnough(V);
                if (!S.c1 || !S.c2) return b || p ? y(U.Straight) : y(U.Disconnected);
                if (b && p) return y(U.Straight);
                if (b || p) return y(U.Asymmetric);
                var x = S.c1.clone().sub(V), J = S.c2.clone().sub(V);
                return Math.abs(x.x * J.y - x.y * J.x) > 1e-5 || x.x * J.x > 0 ? y(U.Disconnected) : Math.abs(x.length() - J.length()) > 1e-5 ? y(U.Asymmetric) : y(U.Mirrored)
            }
        }, Xj.prototype.handle_keydown = function (Y) {
            var Q = this;
            if (Q._interactor.editDetail) {
                var r = _p.Curve.PointType;
                "1" === Y.key ? Q._setCurrentSelectionStatus(r.Straight) : "2" === Y.key ? Q._setCurrentSelectionStatus(r.Mirrored) : "3" === Y.key ? Q._setCurrentSelectionStatus(r.Disconnected) : "4" === Y.key && Q._setCurrentSelectionStatus(r.Asymmetric)
            }
        }, Xj.prototype.setCurrentSelectionStatus = function (D) {
            var o = this, G = o._interactor;
            if (G) {
                var J = G.gv;
                J.dm().beginTransaction(), this._setCurrentSelectionStatus(D), J.dm().endTransaction()
            }
        }, Xj.prototype._setCurrentSelectionStatus = function (W) {
            var J = this, z = J.activing;
            if (z) {
                var c = J.getCurrentSelectintStatus();
                if (null !== c && c !== W) {
                    z.status = W;
                    var r = J.activing.point, $ = J.activing.pairs;
                    if ($ && 1 === $.length) {
                        var b = $[0], G = J.screenInfo.curve, m = _p.Curve.PointType, L = function () {
                            J._writeToHt(), J._interactor.fp("shapePointStatus", c, W)
                        };
                        if (W === m.Straight) return G.moveCtrlPoint(b, r, "c1"), G.moveCtrlPoint(b, r, "c2"), L(), void 0;
                        if (c === m.Straight) {
                            var x = G.findPairs(r, !0), K = x[0], M = K.r1 || r, h = K.r2 || r,
                                q = h.clone().sub(M).multiplyScalar(.25);
                            return G.moveCtrlPoint(b, r.clone().sub(q), "c1"), G.moveCtrlPoint(b, r.clone().add(q), "c2"), L(), void 0
                        }
                        var O = b.c1, R = b.c2;
                        if (O && R) {
                            if (W === m.Mirrored) return G.moveCtrlPoint(b, r.clone().multiplyScalar(2).sub(R), "c1"), L(), void 0;
                            if (W === m.Asymmetric && c === m.Disconnected) {
                                var N = O.clone().sub(r).length(), q = r.clone().sub(R).setLength(N).add(r);
                                return G.moveCtrlPoint(b, q, "c1"), L(), void 0
                            }
                        }
                        z._firePointChange(), J._interactor.fp("shapePointStatus", c, W)
                    }
                }
            }
        }, Xj.prototype._handleDataChanged = function () {
            var Z = "points,segments,shape,position,rotation,scale".split(",");
            return function (q) {
                var K = this;
                if (K.screenInfo && K.target) {
                    if (q && Z.indexOf(q.property) < 0) return;
                    var j = K._interactor;
                    K.gatherSingleTarget(j.gv, K.target, !0), K.check(j.gv, null, new _p.Math.Vector2(j._lastClientPoint)), j._42()
                }
            }
        }(), Xj.prototype.gatherSingleTarget = function (D, t, c) {
            var u, B, z = this;
            z.screenInfo && z.screenInfo.curve && (B = z.screenInfo.curve._curves);
            var e = z.editing;
            u = e ? z.screenInfo : z.screenInfo = {};
            var X, M, h = t instanceof x.Edge;
            h ? (X = t.s("edge.segments"), M = t.s("edge.points") || new x.List) : (X = t._58O, M = t._59O), u.S = X;
            var H, y = u.P = [], r = _p.getDataMatrix(t);
            if (t instanceof x.Polyline && (H = t.getElevation() || 0, u.E = []), M.each(function (n) {
                u.E && u.E.push(n.e || H), n = r.apply(n);
                var F = _p.toScreenPosition(D, n);
                y.push(F.x, F.y)
            }), h) {
                var f = _p.toScreenPosition(D, t._lastSourcePoint), Q = _p.toScreenPosition(D, t._lastTargetPoint);
                y.splice(0, 0, f.x, f.y), y.push(Q.x, Q.y)
            }
            if (!u.S || !u.S.size()) {
                u.S = new x.List, u.S.add(1);
                for (var F = 0; F < y.length / 2 - 1; F++) u.S.add(2)
            }
            if ((!e || c) && z.convertToCubicBezier(B), z.activing && (c || !z.editing || "realPoint" === z.editing.type)) {
                var w = u.curve.findPairs(z.activing.point);
                z.activing.pairs = w
            }
            h && "points" !== t.s("edge.type") && z._writeToHt()
        }, Xj.prototype._convertToNewPoint = function (V, F, U) {
            var g, b, l;
            for (g = 0, b = F.length; b > g; g++) {
                if (l = F[g], l._p1.isNearEnough(V)) return l._p1;
                if (l._p4.isNearEnough(V)) return l._p4
            }
            if (U) for (g = 0, b = Math.min(U.length, b); b > g; g++) {
                if (l = U[g], l._p1 === V) return F[g]._p1;
                if (l._p4 === V) return F[g]._p4
            }
        }, Xj.prototype.convertToCubicBezier = function (k) {
            var a, l, o = this, $ = new _p.Math.Curve, D = o.screenInfo;
            if ($.createFromHtShape(D.P, D.S, D.E), D.curve = $, o.activing) {
                var t = $._curves;
                if (a = o.activing.point, l = o._convertToNewPoint(a, t, k), l && (o.activing.point = l), o.activing.selections) {
                    var z = -1, T = o.activing.selections;
                    T.forEach(function (Y) {
                        z++, l = o._convertToNewPoint(Y, t, k), l && (T[z] = l)
                    })
                }
            }
        }, Xj.prototype.check = function (f, _, M) {
            if (!_ || x.Default.isLeftButton(_)) {
                var I = this;
                if (I._interactor.setCursor("default"), I.editing = null, I.highlight = null, I.tipInfo = null, I.edgeEditResult = null, I.screenInfo) {
                    if (Hk()) return I._interactor._42(), !0;
                    if (I._checkEditCtrlPoint(M)) return I._interactor._42(), !0;
                    if (I._checkEditRealPoint(M)) return I._interactor._42(), !0;
                    if (I._checkEditElevation(M)) return I._interactor._42(), !0;
                    var N = I.screenInfo.curve, t = N.checkPoint(M, I._interactor.getStyle("curveIntersectSize"));
                    if (t) {
                        var U = I.highlight = {};
                        U.type = "insertKnot", U.bezier = t.bezier, U.point = t.intersection
                    }
                    return I._interactor._42(), !0
                }
            }
        }, Xj.prototype._checkEditRealPoint = function (B) {
            var U, H, i, d, m, S, R = this, A = R.screenInfo.curve._curves,
                q = R._interactor.getStyle("curvePointIntersectSize"), u = 1 / 0;
            for (q *= q, i = 0, d = A.length; d > i; i++) U = A[i], m = U._p1, S = B.distanceToSquared(m), u > S && (u = S, H = m), m = U._p4, S = B.distanceToSquared(m), u > S && (u = S, H = m);
            if (u > q) return !1;
            var b = R.highlight = {};
            return b.type = "changeRealPoint", b.point = H, R.editing = {
                type: "realPoint",
                point: H,
                shiftGuide: {point: H.clone(), dir: "x", limit: 0}
            }, R._interactor.setCursor("crosshair"), !0
        }, Xj.prototype._checkEditElevation = function (l) {
            var n = this;
            if (!n._interactor.getStyle("curveElevationVisible")) return !1;
            var i = n.activing;
            if (!i) return !1;
            var R = i.getCurrentEditingPoint();
            if (!R) return !1;
            var s = n._interactor, J = s.getStyle("curveElevationGuideShift"),
                K = s.getStyle("curveElevationIntersectSize"), P = l.distanceToSquared({x: R.x + J[0], y: R.y + J[1]});
            if (!(P > K * K)) {
                var j = n.highlight = {};
                j.type = "elevation";
                var C = new _p.Math.Vector2(l.x, l.y, R.e);
                return n.editing = {type: "elevation", startPoint: C}, n._interactor.setCursor("crosshair"), !0
            }
        }, Xj.prototype._checkEditCtrlPoint = function (Z) {
            var X = this;
            if (X.activing && !X.activing.selections) {
                var r = X.getCurrentSelectintStatus();
                if (r !== _p.Curve.PointType.Straight) {
                    var _ = X.activing.pairs;
                    if (_) {
                        var p = X._interactor.getStyle("curvePointIntersectSize");
                        p *= p;
                        var h, R, b, J, U, T, i, E, d, I = 1 / 0;
                        for (i = 0, d = _.length; d > i; i++) for (J = _[i], E = 0; 2 > E; E++) U = 0 === E ? "c1" : "c2", J[U] && (T = Z.distanceToSquared(J[U]), I > T && (I = T, h = J, R = i, b = U));
                        if (I > p) return !1;
                        X.activing.hlpair = h, X.activing.hltype = b;
                        var v = X.highlight = {};
                        return v.type = "changeCtrlPoint", v.point = h[b], X.editing = {
                            type: "ctrlPoint",
                            pair: h,
                            pairId: R,
                            ctrlType: b,
                            direction: h[b].clone().sub(X.activing.point).normalize()
                        }, X._interactor.setCursor("crosshair"), !0
                    }
                }
            }
        }, Xj.prototype.startEdit = function (n, Q) {
            n.startDragging(Q);
            var g = this;
            g.highlight && "insertKnot" === g.highlight.type && (g.insertKnot(), g.gatherSingleTarget(g._interactor.gv, g.target), g.activing = null, g._checkEditRealPoint(g._interactor._getLogicalPoint(Q)));
            var o = g._activing;
            if (o) {
                var m = g.editing ? g.editing.type : null;
                "ctrlPoint" === m ? o.editingCtrl = {
                    pairId: g.editing.pairId,
                    type: o.hltype
                } : "realPoint" === m && (o.editingCtrl = !1)
            }
            var N = g.highlight, w = x.Default.isCtrlDown(Q);
            if (!N || Hk()) {
                var q = g._interactor.gv;
                if (!q.setFocus(Q) || q._scrolling) return;
                return q.isPannable() && Di(Q) && !w && (g._pan = {tx: q.tx(), ty: q.ty()}, n.fi({
                    kind: "beginPan",
                    event: Q
                })), void 0
            }
            if ("changeRealPoint" === N.type) {
                var K, f = g.activing ? g.activing.point : null, O = g.activing ? g.activing.selections : null;
                if (w && g.activing) f === N.point ? (O ? (g.activing = {point: O[0]}, O.length > 1 && (O.splice(0, 1), g.activing.selections = O)) : g.activing = null, g.editing = null) : O && (K = O.indexOf(N.point)) >= 0 ? (O.length > 1 ? O.splice(K, 1) : delete g.activing.selections, g.editing = null) : O ? (O.push(f), g.activing = {
                    point: N.point,
                    selections: O
                }) : g.activing = {
                    point: N.point,
                    selections: [f]
                }; else if (O) f === N.point || ((K = O.indexOf(N.point)) >= 0 ? (O.splice(K, 1, f), g.activing = {
                    point: N.point,
                    selections: O
                }) : g.activing = {point: N.point}); else {
                    var v;
                    f === N.point && (v = g.activing.status), g.activing = {point: N.point}, v && (g.activing.status = v)
                }
                n.fi({kind: "beginEditPoint", event: Q})
            }
        }, Xj.prototype.insertKnot = function () {
            var i = this, g = i.highlight, Z = i.screenInfo.curve;
            Z.insertKnot(g.bezier, g.point.t), i._writeToHt()
        }, Xj.prototype._writeToHt = function () {
            var K, s, d, m, q = this, X = q.screenInfo.curve, P = X.toHtShape(), $ = P.points, D = [], M = P.segments,
                H = q._interactor.gv, g = q.target, L = g instanceof x.Edge, h = _p.getDataMatrix(g).invert();
            m = g instanceof x.Polyline, m && (d = g.getElevation());
            for (var V = 0, U = $.length; U > V; V++) K = $[V], s = _p.toWorldPosition(H, K), s = h.apply(s), K.e != v && K.e !== d && (s.e = K.e), D.push(s);
            if (g._writing = !0, L) {
                g.s("edge.type", "points"), g.setStyle("edge.segments", M), g.setStyle("edge.points", D.slice(1, D.length - 1)), g.setStyle("edge.source.offset.x", 0), g.setStyle("edge.source.offset.y", 0), g.setStyle("edge.target.offset.x", 0), g.setStyle("edge.target.offset.y", 0);
                var t = q._nextChangeEdgeHost;
                delete q._nextChangeEdgeHost, t && ("source" === t.type ? g.setSource(t.host) : g.setTarget(t.host)), q._writeEdgeHostAnchor("source", D[0]), q._writeEdgeHostAnchor("target", D[D.length - 1])
            } else D.length ? (g.setSegments(M), g.setPoints(D, !0)) : g.removeFromDataModel();
            delete g._writing
        }, Xj.prototype._writeEdgeHostAnchor = function (d, L) {
            var A = this, g = A.target, i = A._calcHostAnchor(g, d, L);
            i.index !== v ? (g.setStyle("edge." + d + ".index", i.index), g.setStyle("edge." + d + ".percent", v), g.setStyle("edge." + d + ".anchor.x", v), g.setStyle("edge." + d + ".anchor.y", v)) : i.percent !== v ? (g.setStyle("edge." + d + ".percent", i.percent), g.setStyle("edge." + d + ".index", v), g.setStyle("edge." + d + ".anchor.x", v), g.setStyle("edge." + d + ".anchor.y", v)) : (g.s("edge." + d + ".anchor.x", i.x), g.s("edge." + d + ".anchor.y", i.y), i.offsetX || i.offsetY ? (g.s("edge." + d + ".offset.x", i.offsetX), g.s("edge." + d + ".offset.y", i.offsetY)) : (g.s("edge." + d + ".offset.x", 0), g.s("edge." + d + ".offset.y", 0)))
        }, Xj.prototype._calcHostAnchor = function (S, e, P, q) {
            q || (q = "source" === e ? S.getSource() : S.getTarget());
            var o = this._interactor.gv, u = o.calculateAttachPoint(q, P);
            if (u) return u.info;
            if (xf(q)) {
                var K = o.calculateEdgePosition(q, P);
                return K
            }
            var t = q.getRotation(), p = q.getAnchor();
            if (Tn(q, o) && (t = 0), t) {
                var $ = q.getMatrix(), g = $.tfi(P), O = q.getSize();
                return {x: g.x / O.width + p.x, y: g.y / O.height + p.y}
            }
            var d = Eq(o, q), Q = {x: (P.x - d.x) / d.width, y: (P.y - d.y) / d.height};
            return Q
        }, Xj.prototype._handlePanning = function (G) {
            var v = this, z = v._pan;
            if (z) {
                z.started = !0;
                var y = v._interactor, L = y.gv, J = y._lastClientPoint, q = Uj(G);
                L.setTranslate(z.tx + q.x - J.x, z.ty + q.y - J.y), v.gatherSingleTarget(y.gv, v.target), y._42(), y.fi({
                    kind: "betweenPan",
                    event: G
                })
            }
        }, Xj.prototype.handleEdit = function (t, d) {
            var Z = this, j = Z.editing;
            if (Z._pan) return Z._handlePanning(d), void 0;
            if (j) {
                j.inEdit = !0;
                var D, _, e, n = Z._interactor._getLogicalPoint(d), i = x.Default.isCtrlDown(d),
                    J = x.Default.isShiftDown(d), X = j.type, W = Z.activing;
                if (Z._guideInfo = null, "ctrlPoint" === X && J) {
                    var G = Z.editing.direction.clone();
                    D = W.point;
                    var y = G.dot(n.clone().sub(D));
                    n = G.setLength(y).add(D)
                } else if ("ctrlPoint" === X || "realPoint" === X) {
                    var G;
                    if ("realPoint" === X && J) {
                        var f = Z.editing.shiftGuide;
                        _ = f.point;
                        var P = Math.abs(n.x - _.x), V = Math.abs(n.y - _.y);
                        P > V && P > f.limit && "y" === f.dir && (f.dir = "x"), V > P && V > f.limit && "x" === f.dir && (f.dir = "y"), G = f.dir, "x" === G ? (n.y = _.y, f.limit = Math.max(f.limit, P)) : "y" === G && (n.x = _.x, f.limit = Math.max(f.limit, V))
                    }
                    var S = Z._isEditEdgeSourceTarget();
                    if (S) {
                        var c = Z._editEdgeSourceTarget(S, n, i);
                        c && (Z.edgeEditResult = c, e = c.tipText)
                    } else if (!i) {
                        var Y = Z._guidingToEdit(n, G),
                            I = "realPoint" === X ? Z._interactor.gridGuide.findClosest(n, G, !0) : null, w = 1 / 0,
                            l = 1 / 0;
                        I && (I.x && (w = I.x), I.y && (l = I.y));
                        var L = !1;
                        Y && (Y.xList && (Math.abs(Y.x) <= Math.abs(w) ? (L = !0, w = Y.x) : delete Y.xList), Y.yList && (Math.abs(Y.y) <= Math.abs(l) ? (L = !0, l = Y.y) : delete Y.yList), L && (Z._guideInfo = Y)), isFinite(w) && (n.x += w), isFinite(l) && (n.y += l), L && (Y.v = n)
                    }
                }
                var b = Z.screenInfo.curve;
                if ("realPoint" === j.type) {
                    D = j.point, D.e !== v && (n.e = D.e), b.moveRealPoint(D, n), j.point = n, Z.highlight.point = n;
                    var M = W.status, u = W.selections;
                    if (Z.activing = {point: n, status: M}, u) {
                        var k = n.clone().sub(D), O = 0;
                        u.forEach(function (F) {
                            var n = F.clone().add(k);
                            b.moveRealPoint(F, n), u[O++] = n
                        }), Z.activing.selections = u
                    }
                } else if ("ctrlPoint" === j.type) {
                    var Q = W.pairs, K = Q[j.pairId];
                    b.moveCtrlPoint(K, n, j.ctrlType);
                    var r = W.status, B = _p.Curve.PointType;
                    if ((r === B.Mirrored || r === B.Asymmetric) && K.c1 && K.c2) {
                        var D = new _p.Math.Vector2(W.point), a = "c1" === j.ctrlType ? "c2" : "c1";
                        if (r === _p.Curve.PointType.Mirrored) b.moveCtrlPoint(K, D.clone().multiplyScalar(2).sub(n), a); else if (r === B.Asymmetric) {
                            var y = K[a].clone().sub(D).length(), T = D.clone().sub(K[j.ctrlType]).setLength(y).add(D);
                            isNaN(T.x) || b.moveCtrlPoint(K, T, a)
                        }
                    }
                    W._firePointChange()
                } else if ("elevation" === j.type) {
                    _ = j.startPoint;
                    var g = _.e + (_.y - n.y) / t._zoom;
                    Z._setCurrentPointImpl("e", g), W._firePointChange(), e = "E: " + _p.toFixed(g)
                }
                var H = x.Default.getLogicalPoint(d, Z._interactor._canvas);
                if (H.x += _p.Icons.TipShiftX, H.y += _p.Icons.TipShiftY, !e) {
                    var C = _p.toWorldPosition(t, n);
                    e = "" + _p.toFixed(C.x) + ", " + _p.toFixed(C.y)
                }
                Z.tipInfo = {
                    helperPos: H,
                    text: e,
                    size: e.length
                }, Z._writeToHt(), Z._interactor.fi({kind: "betweenEditPoint", event: d})
            }
        }, Xj.prototype._setCurrentPointImpl = function (k, p) {
            var m = this, x = m._activing;
            if (!x) return !1;
            var e = m.target;
            if (!e) return !1;
            var I = x.getCurrentEditingPoint();
            if (!I) return !1;
            var $ = x.editingCtrl;
            if (!$) var Z = I.clone();
            if ("e" === k) I.e = p; else {
                var X;
                if ("x" === k || "y" === k) {
                    var L = x._lastFirePoint;
                    X = "x" === k ? {x: p, y: L ? L.y : 0} : {x: L ? L.x : 0, y: p}
                } else "object" == typeof k ? (X = k, k.e !== v && (I.e = k.e)) : (X = {
                    x: arguments[0],
                    y: arguments[1]
                }, arguments[2] !== v && (I.e = arguments[2]));
                var C = _p.getDataMatrix(e);
                X = _p.toScreenPosition(m._interactor.gv, C.apply(X)), I.x = X.x, I.y = X.y
            }
            if (!$) {
                var J = Z.multiplyScalar(-1).add(I);
                I.e && Z.e && (J.e = I.e - Z.e), m.screenInfo.curve.moveCtrlDueToRealPointMovement(I, J)
            }
            return !0
        }, Xj.prototype.setCurrentPoint = function (X, u) {
            return this._setCurrentPointImpl(X, u) ? (this._writeToHt(), !0) : !1
        }, Xj.prototype._isEditEdgeSourceTarget = function () {
            var W = this, F = W.target;
            if (!(F instanceof x.Edge)) return !1;
            var T = W.editing.point, c = W.screenInfo.curve._curves;
            return T === c[0]._p1 ? "source" : T === c[c.length - 1]._p4 ? "target" : !1
        }, Xj.prototype._editEdgeSourceTarget = function (f, a, i) {
            var y, x = this, q = x.target;
            if (y = "source" === f ? q.getSource() : q.getTarget()) {
                var U, r = x._interactor.gv, p = _p.toWorldPosition(r, a), G = x._calcHostAnchor(q, f, p, y);
                if (U = G.index !== v || G.percent !== v ? G.distance * r.getZoom() > x._interactor.getStyle("edgeHostEdgeMaxDistance") : x._interactor.getStyle("edgeHostDetectPerFrame") ? !0 : G.x < 0 || G.x > 1 || G.y < 0 || G.y > 1 ? !0 : !1) {
                    var Z = r.getDataAt(p, function (l) {
                        return r.isSelectable(l) ? l === y ? !1 : q.canSetSourceTarget(l, f) ? !0 : !1 : !1
                    });
                    if (Z) {
                        var V = x._calcHostAnchor(q, f, p, Z);
                        y = Z, x._nextChangeEdgeHost = {type: f, host: Z}, G = V
                    }
                }
                var c, o, j;
                if (i || G.x === v) (G.percent !== v || G.index !== v) && (o = G.point); else {
                    var S = x._interactor.getStyle("anchorRound"), I = x._interactor.getStyle("anchorSensitivity");
                    c = r.calculateAttachPoint(y, p), c ? G = c.info : (G.x = _p.roundTo(G.x, S, I), G.y = _p.roundTo(G.y, S, I)), o = y.getAttachPosition(G.x, G.y, G.offsetX, G.offsetY)
                }
                o && (j = _p.toScreenPosition(r, o), a.x = j.x, a.y = j.y), x._edgeHostGuideInfo = {
                    corners: _p.getTargetCornersOnScreen(r, y),
                    attach: c ? c.index : -1,
                    host: y
                };
                var d;
                return G.percent !== v ? d = "percent: " + G.percent.toFixed(2) : G.index !== v ? d = "index: " + G.index : (d = "" + G.x.toFixed(2) + ", " + G.y.toFixed(2), (G.offsetX || G.offsetY) && (d += " offset: " + G.offsetX.toFixed(2) + ", " + G.offsetY.toFixed(2))), {
                    host: y,
                    anchor: G,
                    tipText: d
                }
            }
        }, Xj.prototype._guidingToEdit = function (u, W) {
            var Z, b, z = this;
            if (Z = z.screenInfo.curve) {
                b = Z._curves;
                var R, C, p, L, h, A, f, X, r = 1 / 0, O = 1 / 0, D = [];
                for (z.editing && "realPoint" === z.editing.type && (X = z.editing.point), h = 0, A = 2 * b.length; A > h; h++) f = b[Math.floor(h / 2)][h % 2 ? "_p4" : "_p1"], D.indexOf(f) >= 0 || (D.push(f), X && X === f || (p = f.x - u.x, L = f.y - u.y, Math.abs(p) < Math.abs(r) ? (r = p, R = [f]) : p === r && R.push(f), Math.abs(L) < Math.abs(O) ? (O = L, C = [f]) : L === O && C.push(f)));
                var E = z._interactor.getStyle("smartGuideSensitivity");
                if ((Math.abs(r) > E || "y" === W) && (R = null), (Math.abs(O) > E || "x" === W) && (C = null), R || C) {
                    var n = !1, v = {};
                    if (R && (n = !0, v.xList = R, v.x = r), C && (n = !0, v.yList = C, v.y = O), n) return v
                }
            }
        }, Xj.prototype._46O = function (L) {
            var e = this;
            e.editing && (e.editing = null, e._interactor.fi({
                kind: "endEditPoint",
                event: L
            })), e._guideInfo = null, e._edgeHostGuideInfo = null, e._pan && (e._pan = null, e._interactor.fi({
                kind: "endPan",
                event: L
            })), e.tipInfo = null, e.edgeEditResult = null
        }, Xj.prototype._canDeletePoint = function (n, L) {
            var Y = this.target;
            if (!(Y instanceof x.Edge)) return !0;
            var O = n._curves[0], T = n._curves[n._curves.length - 1];
            return O._p1 === L || T._p4 === L ? !1 : !0
        }, Xj.prototype.handleDelete = function () {
            var F = this;
            if (F.activing && F.screenInfo) {
                var n = x.Default.isShiftDown(), N = F.screenInfo.curve;
                F._canDeletePoint(N, F.activing.point) && N.deleteRealPoint(F.activing.point, n), F.activing.selections && F.activing.selections.forEach(function (d) {
                    F._canDeletePoint(N, d) && N.deleteRealPoint(d, n)
                }), F.activing = null, delete F.editing, delete F.tipInfo, delete F.edgeEditResult, delete F._pan, F._writeToHt(), F._interactor.fp("deleteShapePoint", !1, !0)
            }
        }, Xj.prototype.handleDoubleClick = function (T) {
            var v = this, x = v._interactor._getLogicalPoint(T);
            if (v.screenInfo && v._checkEditRealPoint(x)) {
                var A = v.getCurrentSelectintStatus(), V = _p.Curve.PointType;
                return A = A === V.Mirrored ? V.Straight : V.Mirrored, v._setCurrentSelectionStatus(A), v._interactor._42(), !0
            }
        }, Xj.prototype._drawHighlight = function (j) {
            var E = this, F = E.highlight;
            if (F) {
                var $ = F.bezier, r = E._interactor;
                $ && _p.Icons.DrawIcon(r, j, _p.Icons.ShapeHighlightCurve, [$._p1.x, $._p1.y, $._p2.x, $._p2.y, $._p3.x, $._p3.y, $._p4.x, $._p4.y]);
                var q = F.point;
                q && "insertKnot" === F.type && _p.Icons.DrawIcon(r, j, _p.Icons.ShapeHighlighPoint, q)
            }
        }, Xj.prototype._drawGuide = function (c) {
            var j = this, F = j._guideInfo;
            if (F) {
                var N, J, B, h, y = F.v;
                for (N = 0; 2 > N; N++) if (h = 0 === N ? F.xList : F.yList) for (J = 0, B = h.length; B > J; J++) _p.Icons.DrawIcon(j._interactor, c, _p.Icons.ShapeGuideLine, [y.x, y.y, h[J].x, h[J].y])
            }
        }, Xj.prototype._drawCurrentPoint = function (o) {
            var N = this;
            if (N.activing) {
                var e = N.activing, I = N.getCurrentSelectintStatus(), T = N._interactor;
                if (I !== _p.Curve.PointType.Straight) {
                    var K = e.pairs;
                    e.hlpair, e.hltype;
                    var J = e.selections, c = e.editingCtrl;
                    if (K && !J) {
                        var Z, Q, m;
                        for (Q = 0, m = K.length; m > Q; Q++) Z = K[Q], c && Q === c.pairId && Z[c.type] ? _p.Icons.DrawIcon(T, o, _p.Icons.ShapeActivingCtrl, {
                            point: Z.point,
                            c1: Z.c1,
                            c2: Z.c2,
                            hl: c.type
                        }) : _p.Icons.DrawIcon(T, o, _p.Icons.ShapeActivingCtrl, Z)
                    }
                }
                _p.Icons.DrawIcon(T, o, _p.Icons.ShapeHighlighRealPoint, N.activing.point), J && J.forEach(function (q) {
                    _p.Icons.DrawIcon(T, o, _p.Icons.ShapeHighlighRealPoint, q)
                })
            }
        }, Xj.prototype.clear = function () {
            var b = this;
            b.editing = null, b._guideInfo = null, b.activing = null, b.highlight = null
        }, Xj.prototype._42 = function (p) {
            var G = this;
            G.info = {}, G.editing || (G.screenInfo = null);
            var t = G._interactor;
            if (!t.editDetail) return G.clear(), void 0;
            var O = t.gv;
            if (!G.target || !O.isSelected(G.target) || !O.isVisible(G.target)) return t.editDetail = !1, G.clear(), void 0;
            if (G.gatherSingleTarget(O, G.target), _p.Icons.DrawIcon(t, p, _p.Icons.ShapeBgCurve, G.screenInfo), G._drawHighlight(p), G._drawCurrentPoint(p), G._getRealPoint().forEach(function (I) {
                _p.Icons.DrawIcon(t, p, _p.Icons.ShapePoint, I)
            }), G._drawGuide(p), G.tipInfo && _p.Icons.DrawIcon(t, p, _p.Icons.TipHelper, G.tipInfo), G._edgeHostGuideInfo) {
                _p.Icons.DrawIcon(t, p, _p.Icons.NodeHoverGuide, G._edgeHostGuideInfo.corners);
                var s = G._edgeHostGuideInfo.host;
                if (s) {
                    var v = O.getAttachPoints(s);
                    if (v && v.length) for (var n = 0, V = v.length; V > n; n++) {
                        var o = v[n], J = s.getAttachPosition(o.x, o.y, o.offsetX, o.offsetY);
                        J = _p.toScreenPosition(O, J), J.isAttach = G._edgeHostGuideInfo.attach === n, _p.Icons.DrawIcon(t, p, _p.Icons.AttachPoint, J)
                    }
                }
            }
            if (G._interactor.getStyle("curveElevationVisible") && G.target instanceof x.Polyline && G.activing) {
                var K = G.activing.getCurrentEditingPoint();
                K && _p.Icons.DrawIcon(t, p, _p.Icons.EdgeElevationGuide, K)
            }
            G.edgeEditResult && G._drawEdgeHostHighlight(p, G.edgeEditResult.host, G.edgeEditResult.anchor)
        }, Xj.prototype._drawEdgeHostHighlight = function (I, w, v) {
            this.drawEdgeHostHighlight(I, w, v), this._interactor.redraw()
        }, Xj.prototype.drawEdgeHostHighlight = function (Z, b, k) {
            if (xf(b)) {
                var s, R, H, I, P = this, n = P._interactor, C = n.gv, o = C.getDataUI(b), J = Zj(o), e = [];
                for (H = 0, I = J.points.length; I > H; H++) R = _p.toScreenPosition(C, J.points.get(H)), e.push(R.x, R.y);
                J.segments && (s = J.segments.toArray());
                var c = n.getStyle("edgeHostHighlighPeriod"), z = n.getStyle("edgeHostEdgeHighlighColor");
                _p.Icons.DrawIcon(n, Z, _p.Icons.ShapeBgCurve, {
                    P: e,
                    S: s,
                    color: z,
                    dynamicVisible: k.index === v,
                    dynamicPeriod: c
                }), z = n.getStyle("edgeHostPointHighlighColor");
                var l = ul(o);
                for (H = 0, I = l.length; I > H; H++) {
                    var u = l[H], Q = _p.toScreenPosition(C, u);
                    _p.Icons.DrawIcon(n, Z, _p.Icons.ShapePoint, {
                        point: {x: Q.x, y: Q.y},
                        color: z,
                        size: 12,
                        dynamicVisible: H === k.index,
                        dynamicPeriod: c
                    })
                }
            }
        }, Xj.prototype._getRealPoint = function () {
            var j, B = this.screenInfo, w = B.P, A = B.S, F = -1, P = [], u = -1, d = A.length;
            return A.each(function (C) {
                u++;
                var q = 1;
                if (3 === C) q = 2; else if (4 === C) q = 3; else if (5 === C) return;
                F += q, j = u + 1 >= d ? !0 : 1 === A.get(u + 1) ? !0 : !1, P.push({
                    point: {
                        x: w[2 * F],
                        y: w[2 * F + 1]
                    }, segmentIndex: u, pointIndex: F, isEnd: j
                })
            }), P
        }, Xj.prototype.getEditingPointsInfo = function (d) {
            var e = this, K = e.activing;
            if (!K) return !1;
            var M = K.point;
            if (!M) return !1;
            var T = this._getRealPoint(), E = [{screen: M}];
            K.selections && K.selections.forEach(function ($) {
                E.push({screen: $})
            });
            var p, j, B = T.length;
            return E.forEach(function (A) {
                for (p = 0; B > p; p++) if (j = T[p], A.screen.isNearEnough(j.point)) {
                    A.segmentIndex = j.segmentIndex, A.pointIndex = j.pointIndex, A.point = e.target.getPoints().get(j.pointIndex);
                    break
                }
            }), d && E.sort(function (I, H) {
                return I.segmentIndex - H.segmentIndex
            }), E
        };
        var Gf = _p.MoveHelper = function (C) {
            var y = this;
            y.catalog = "Move", y._interactor = C
        };
        Gf.prototype = {}, Gf.prototype.constructor = Gf, Gf.prototype.calcShift = function (a, B, M) {
            var g, K, l = this, T = l._interactor.gv, z = T.lp(B);
            if ("beginMove" === a && l._gatherGridInfo(M._lastLogicalPoint || z), g = l._target) {
                var f = g.downPosition;
                if (f) {
                    var $ = l._interactor.getStyle("moveSensitivity") / T._zoom;
                    if (f.distanceTo(z) < $) return {x: 0, y: 0};
                    delete g.downPosition
                }
                var v;
                K = x.Default.isShiftDown(B), K && (z = l._dealShiftDown(z), v = g.shiftGuide.dir);
                var O, j = g.rawPos = {x: g.pos.x + z.x - g.lp.x, y: g.pos.y + z.y - g.lp.y};
                if (x.Default.isCtrlDown(B)) {
                    if (O = l._calcShiftByAddon(), l._target.node instanceof _p.Group) {
                        var X = l._target.node;
                        X._position.x += O.x, X._position.y += O.y
                    }
                    return O
                }
                for (var t, D = g.x + j.x, p = g.y + j.y, Q = {x: D, y: p}, E = {
                    x: D + g.w / 2,
                    y: p + g.h / 2
                }, Y = {
                    x: D + g.w,
                    y: p + g.h
                }, y = l._interactor.rectGuide, G = l._interactor.gridGuide, h = [y.findClosest(Q, v), y.findClosest(E, v), y.findClosest(Y, v), G.findClosest(Q, v), G.findClosest(E, v), G.findClosest(Y, v)], m = 1 / 0, F = 1 / 0, J = 0, R = h.length; R > J; J++) t = h[J], t && (D = t.x, p = t.y, isFinite(D) && Math.abs(D) < Math.abs(m) && (m = D), isFinite(p) && Math.abs(p) < Math.abs(F) && (F = p));
                if (isFinite(m) || (m = 0), isFinite(F) || (F = 0), O = l._calcShiftByAddon(m, F), l._target.node instanceof _p.Group) {
                    var X = l._target.node;
                    X._position.x += O.x, X._position.y += O.y
                }
                var C = g.node;
                if (!Tn(C, T)) {
                    var I = j.x + m, e = j.y + F;
                    l._interactor.rectGuide.gatherLines({node: C, x: g.x + I, y: g.y + e, w: g.w, h: g.h}, v)
                }
                return O
            }
        }, Gf.prototype._calcShiftByAddon = function (K, n) {
            var B = this._target, C = B.rawPos, h = B.node.getPosition();
            return K = K || 0, n = n || 0, {x: C.x - h.x + K, y: C.y - h.y + n}
        }, Gf.prototype._dealShiftDown = function (W) {
            var N = this, A = N._target.shiftGuide, C = N._target.lp, Z = Math.abs(W.x - C.x), L = Math.abs(W.y - C.y);
            Z > L && Z > A.limit && "y" === A.dir && (A.dir = "x"), L > Z && L > A.limit && "x" === A.dir && (A.dir = "y");
            var y = A.dir;
            return "x" === y ? (W.y = C.y, A.limit = Math.max(A.limit, Z)) : "y" === y && (W.x = C.x, A.limit = Math.max(A.limit, L)), W
        }, Gf.prototype._gatherGridInfo = function (b) {
            var s, e = this, G = e._interactor, C = G._getValidSelection();
            if (C.length) {
                if (1 === C.length) {
                    if (s = C[0], !s.getRect) return e._target = null, void 0
                } else if (s = _p.Group.findOrCreateGroup(C), !s) return e._target = null, void 0
            } else {
                var C = G.gv.sm().getSelection();
                if (C.length && (s = C.get(0), !s.getRect)) return e._target = null, void 0
            }
            var Q = s.getPosition(), F = s.getRect();
            e._target = {
                node: s,
                x: F.x - Q.x,
                y: F.y - Q.y,
                w: F.width,
                h: F.height,
                lp: {x: b.x, y: b.y},
                pos: {x: Q.x, y: Q.y},
                shiftGuide: {dir: "x", limit: 0},
                downPosition: new _p.Math.Vector2(b)
            }, G.rectGuide.gatherRects()
        }, Gf.prototype.clear = function () {
            var u = this;
            u._interactor.rectGuide.clear(), u._interactor._42()
        };
        var rh = "directional", lc = "point", ri = "spot", qf = "light.color", um = function (T, c) {
            uf(c) && Gh.test(c) ? mm(T, c) : bc(c) && c.modelType ? ab(T, c) : bh[T] = c
        }, Qn = function (g) {
            if (bc(g)) return g.modelType ? g.uuid ? bh[g.uuid] : (g.uuid = x.Math.generateUUID(), ab(g.uuid, g), v) : g;
            var r = bh[g];
            return g && r === v && Gh.test(g) && (Oq && Oq[g] || mm(g, g)), r
        }, Ue = function (X, R) {
            X.frameStack ? X.frameStack.push(R) : X.frameStack = [R], X.bindFramebuffer(X.FRAMEBUFFER, R)
        }, Bk = function (n) {
            var N = n.frameStack;
            if (N) {
                if (N.pop(), N.length) return n.bindFramebuffer(n.FRAMEBUFFER, N[N.length - 1]), void 0;
                n.frameStack = null
            }
            n.bindFramebuffer(n.FRAMEBUFFER, null)
        };
        Mm(w, {
            graph3dViewAttributes: o,
            graph3dViewFirstPersonMode: !1,
            graph3dViewMouseRoamable: !0,
            graph3dViewMoveStep: 15,
            graph3dViewRotateStep: Y / 60,
            graph3dViewEditHelperDisabled: !1,
            graph3dViewPannable: !0,
            graph3dViewRotatable: !0,
            graph3dViewWalkable: !0,
            graph3dViewResettable: !0,
            graph3dViewZoomable: !0,
            graph3dViewRectSelectable: !0,
            graph3dViewRectSelectBackground: Sc,
            graph3dViewGridVisible: !1,
            graph3dViewGridSize: 50,
            graph3dViewGridGap: 50,
            graph3dViewGridColor: [.4, .75, .85, 1],
            graph3dViewOriginAxisVisible: !1,
            graph3dViewCenterAxisVisible: !1,
            graph3dViewAxisXColor: [1, 0, 0, 1],
            graph3dViewAxisYColor: [0, 1, 0, 1],
            graph3dViewAxisZColor: [0, 0, 1, 1],
            graph3dViewEditSizeColor: [1, 1, 0, 1],
            graph3dViewOrtho: !1,
            graph3dViewOrthoWidth: 2e3,
            graph3dViewFovy: Y / 4,
            graph3dViewNear: 10,
            graph3dViewFar: 1e4,
            graph3dViewEye: [0, 300, 1e3],
            graph3dViewCenter: [0, 0, 0],
            graph3dViewUp: [0, 1, -1e-7],
            graph3dViewHeadlightRange: 0,
            graph3dViewHeadlightColor: [1, 1, 1, 1],
            graph3dViewHeadlightIntensity: 1,
            graph3dViewHeadlightDisabled: !1,
            graph3dViewFogDisabled: !0,
            graph3dViewFogColor: "white",
            graph3dViewFogNear: 1,
            graph3dViewFogFar: 2e3,
            graph3dViewDashDisabled: !0,
            graph3dViewBatchBlendDisabled: !0,
            graph3dViewBatchBrightnessDisabled: !0,
            graph3dViewBatchColorDisabled: !1,
            graph3dMaxVectorCacheTime: 50,
            setShape3dModel: um,
            getShape3dModel: Qn,
            createMatrix: function (X, q) {
                Ll(X) || (X = [X]);
                for (var f = X.length - 1; f >= 0; f--) {
                    var z = X[f];
                    q = Hg(z.mat, z.s3, z.r3, z.rotationMode, z.t3, q)
                }
                return q
            },
            transformVec: function (Z, w) {
                return Jg(Z, w)
            },
            glBindFrame: Ue,
            glUnbindFrame: Bk,
            createBoxModel: function () {
                return {vs: we, ns: lg, uv: _d, is: Eo}
            },
            createRoundRectModel: function (t, j) {
                return Tg.roundRect(t, j)
            },
            createStarModel: function (Z, B) {
                return Tg.star(Z, B)
            },
            createRectModel: function (k, p) {
                return Tg.rect(k, p)
            },
            createTriangleModel: function (o, i) {
                return Tg.triangle(o, i)
            },
            createRightTriangleModel: function (i, M) {
                return Tg.rightTriangle(i, M)
            },
            createParallelogramModel: function (Y, $) {
                return Tg.parallelogram(Y, $)
            },
            createTrapezoidModel: function (e, b) {
                return Tg.trapezoid(e, b)
            },
            createSmoothSphereModel: function (N, v, a, x, g, c, O) {
                return $c(new Xn(N, v, a, x, g, c, O))
            },
            createSphereModel: function (O, T, X, V, B, Z) {
                return O ? Zg(O, T, X, V, B, Z) : w.createSmoothSphereModel()
            },
            createSmoothConeModel: function ($, S, t, P, e) {
                return Fm($, S, t, P, e)
            },
            createConeModel: function ($, F, B, O, m, u) {
                return $ ? Ak($, F, B, O, m, u) : Fm(u)
            },
            createSmoothCylinderModel: function (q, a, X, d, k, s, o, t) {
                return $c(new eh(q, a, X, d, k, s, o, t))
            },
            createCylinderModel: function (A, W, C, V, i, r, B) {
                return A ? Re(A, W, C, V, i, r, B) : to(r, B)
            },
            createSmoothTorusModel: function (E, j, h, w, B, K) {
                return $c(new kq(E, j, h, w, B, K))
            },
            createTorusModel: function (N, j, M, F, W, u, T) {
                return N ? dc(N, j, M, F, W, u, T) : $j(u, T)
            },
            createExtrusionModel: function (q, _, k, U, g, y, I, i) {
                return _h(q, _, k, U, g, y, I, i)
            },
            createSmoothRingModel: function (m, p, T, r, Q, k) {
                for (var z = [], d = 0; d < m.length - 1; d += 2) z.push({x: m[d], y: m[d + 1]});
                for (m = vi(z, p, T)[0], z = [], d = 0; d < m.length; d++) {
                    var c = m[d];
                    z.push(new Gd(c.x, 0, c.y))
                }
                return $c(new Oc(z, k, r, Q))
            },
            createTextGeometry: function (r, q) {
                return $c(new Fp(r, q))
            },
            loadFontFace: function (l, D) {
                w.xhrLoad(l, function (t) {
                    if (!t) return D();
                    var A;
                    try {
                        A = JSON.parse(t)
                    } catch (u) {
                        A = JSON.parse(t.substring(65, t.length - 2))
                    }
                    Cj.loadFace(A), D && D(A.familyName.toLowerCase())
                }, D ? null : {sync: !0})
            },
            createRingModel: function (C, A, s, y, b, f, t, q, D, d) {
                for (var k = [], $ = 0; $ < C.length - 1; $ += 2) k.push({x: C[$], y: C[$ + 1]});
                f = f || w.shapeSide, t = t || 0, q = q || f;
                var x, R, n, P, z, i, L, Q, j, S, $, u, g, F, l, X, G, e, V = [], U = [], r = D ? [] : o,
                    K = D ? [] : o, p = d ? [] : o, M = d ? [] : o, N = y ? [] : o, H = y ? [] : o, Z = b ? [] : o,
                    O = b ? [] : o, C = vi(k, A, s), h = tp(C), E = 0, B = 2 * Math.PI / f;
                return C.forEach(function (Y) {
                    if (n = Y.length, n > 1) {
                        if (P = Y[0], y) for (i = P.x, Q = P.y, $ = t; q > $; $++) u = $ + 1, g = $ * B, F = u * B, l = c(g), X = J(g), G = c(F), e = J(F), N.push(l * i, Q, -X * i, G * i, Q, -e * i, 0, Q, 0), H.push(.5 - .5 * l, .5 - .5 * X, .5 - .5 * G, .5 - .5 * e, .5, .5);
                        for (S = 0; n > S; S++) {
                            for (z = Y[S], i = P.x, L = z.x, Q = P.y, j = z.y, x = E / h, E += vl(P, z), R = E / h, $ = t; q > $; $++) u = $ + 1, g = $ * B, F = u * B, l = c(g), X = J(g), G = c(F), e = J(F), V.push(l * L, j, -X * L, G * L, j, -e * L, l * i, Q, -X * i, G * L, j, -e * L, G * i, Q, -e * i, l * i, Q, -X * i), U.push($ / f, R, u / f, R, $ / f, x, u / f, R, u / f, x, $ / f, x), D && $ === t && (r.push(0, Q, 0, 0, j, 0, l * L, j, -X * L, l * L, j, -X * L, l * i, Q, -X * i, 0, Q, 0), K.push(0, .5 - Q, 0, .5 - j, 2 * L, .5 - j, 2 * L, .5 - j, 2 * i, .5 - Q, 0, .5 - Q)), d && u === q && (p.push(0, Q, 0, G * L, j, -e * L, 0, j, 0, G * L, j, -e * L, 0, Q, 0, G * i, Q, -e * i), M.push(1, .5 - Q, 1 - 2 * L, .5 - j, 1, .5 - j, 1 - 2 * L, .5 - j, 1, .5 - Q, 1 - 2 * i, .5 - Q));
                            P = z
                        }
                        if (b) for (i = P.x, Q = P.y, $ = t; q > $; $++) u = $ + 1, g = $ * B, F = u * B, l = c(g), X = J(g), G = c(F), e = J(F), Z.push(G * i, Q, -e * i, l * i, Q, -X * i, 0, Q, 0), O.push(.5 - .5 * G, .5 + .5 * e, .5 - .5 * l, .5 + .5 * X, .5, .5)
                    }
                }), {
                    vs: V,
                    uv: U,
                    bottom_vs: Z,
                    bottom_uv: O,
                    top_vs: N,
                    top_uv: H,
                    from_vs: r,
                    from_uv: K,
                    to_vs: p,
                    to_uv: M
                }
            }
        }, !0), Mm(k, {
            "3d.move.mode": v,
            "3d.selectable": !0,
            "3d.visible": !0,
            "3d.movable": !0,
            "3d.editable": !0,
            "shape.border.gradient.color": v,
            "edge.gradient.color": v,
            "edge.source.t3": v,
            "edge.target.t3": v,
            "light.type": lc,
            "light.center": [0, 0, 0],
            "light.color": [1, 1, 1, 1],
            "light.disabled": !1,
            "light.angle": Y / 4,
            "light.range": 0,
            "light.exponent": 1,
            "light.intensity": 1,
            "wf.visible": !1,
            "wf.width": 1,
            "wf.color": mn,
            "wf.short": !1,
            "wf.mat": v,
            "wf.geometry": !1,
            batch: v,
            "transparent.mask": !1,
            brightness: v,
            "select.brightness": .7,
            "repeat.uv.length": v,
            alphaTest: .4,
            "highlight.visible": !0,
            "highlight.width": .8,
            "highlight.color": "rgba(190, 210, 250, 1)",
            "color.empty": [0, 0, 0, 0],
            "shape3d.vector.dynamic.maxsize": 2048,
            "label.face": es,
            "label.t3": v,
            "label.r3": v,
            "label.texture.scale": 2,
            "label.rotationMode": lj,
            "label.light": !1,
            "label.blend": v,
            "label.reverse.flip": !1,
            "label.reverse.color": Wb,
            "label.reverse.cull": !1,
            "label.transparent": !1,
            "label.autorotate": !1,
            "label2.face": es,
            "label2.t3": v,
            "label2.r3": v,
            "label2.texture.scale": 2,
            "label2.rotationMode": lj,
            "label2.light": !1,
            "label2.blend": v,
            "label2.reverse.flip": !1,
            "label2.reverse.color": Wb,
            "label2.reverse.cull": !1,
            "label2.transparent": !1,
            "label2.autorotate": !1,
            "note.face": es,
            "note.t3": v,
            "note.r3": v,
            "note.texture.scale": 2,
            "note.rotationMode": lj,
            "note.light": !1,
            "note.blend": v,
            "note.reverse.flip": !1,
            "note.reverse.color": Wb,
            "note.reverse.cull": !1,
            "note.transparent": !1,
            "note.autorotate": !1,
            "note2.face": es,
            "note2.t3": v,
            "note2.r3": v,
            "note2.texture.scale": 2,
            "note2.rotationMode": lj,
            "note2.light": !1,
            "note2.blend": v,
            "note2.reverse.flip": !1,
            "note2.reverse.color": Wb,
            "note2.reverse.cull": !1,
            "note2.transparent": !1,
            "note2.autorotate": !1,
            shape3d: v,
            "shape3d.color": Aq,
            "shape3d.top.color": v,
            "shape3d.bottom.color": v,
            "shape3d.from.color": v,
            "shape3d.to.color": v,
            "shape3d.image": v,
            "shape3d.top.image": v,
            "shape3d.bottom.image": v,
            "shape3d.from.image": v,
            "shape3d.to.image": v,
            "shape3d.light": !0,
            "shape3d.side": 0,
            "shape3d.side.from": v,
            "shape3d.side.to": v,
            "shape3d.visible": !0,
            "shape3d.from.visible": !0,
            "shape3d.to.visible": !0,
            "shape3d.top.visible": !0,
            "shape3d.bottom.visible": !0,
            "shape3d.torus.radius": .17,
            "shape3d.resolution": 0,
            "shape3d.blend": v,
            "shape3d.opacity": v,
            "shape3d.reverse.flip": !1,
            "shape3d.reverse.color": Wb,
            "shape3d.reverse.cull": !1,
            "shape3d.transparent": !1,
            "shape3d.uv.offset": v,
            "shape3d.uv.scale": v,
            "shape3d.top.uv.offset": v,
            "shape3d.top.uv.scale": v,
            "shape3d.bottom.uv.offset": v,
            "shape3d.bottom.uv.scale": v,
            "shape3d.from.uv.offset": v,
            "shape3d.from.uv.scale": v,
            "shape3d.to.uv.offset": v,
            "shape3d.to.uv.scale": v,
            "shape3d.top.cap": v,
            "shape3d.bottom.cap": v,
            "shape3d.start.angle": 0,
            "shape3d.sweep.angle": C,
            "shape3d.discard.selectable": !0,
            "shape3d.top.discard.selectable": !0,
            "shape3d.bottom.discard.selectable": !0,
            "shape3d.from.discard.selectable": !0,
            "shape3d.to.discard.selectable": !0,
            "shape3d.scaleable": !0,
            "shape3d.autorotate": !1,
            "shape3d.fixSizeOnScreen": v,
            "shape3d.image.cache": !1,
            "shape3d.alwaysOnTop": !1,
            "all.light": !0,
            "all.visible": !0,
            "all.color": Aq,
            "all.image": v,
            "all.blend": v,
            "all.opacity": v,
            "all.reverse.flip": !1,
            "all.reverse.color": Wb,
            "all.reverse.cull": !1,
            "all.transparent": !1,
            "all.uv": v,
            "all.uv.offset": v,
            "all.uv.scale": v,
            "all.discard.selectable": !0,
            mat: v,
            "left.mat": v,
            "right.mat": v,
            "top.mat": v,
            "bottom.mat": v,
            "front.mat": v,
            "back.mat": v
        }, !0);
        var cm, gq = !1, kb = [0, 0, 0, 0], Ol = {
                left: [1 / 255, 0, 0, 1],
                right: [2 / 255, 0, 0, 1],
                top: [3 / 255, 0, 0, 1],
                bottom: [4 / 255, 0, 0, 1],
                front: [5 / 255, 0, 0, 1],
                back: [6 / 255, 0, 0, 1],
                m: {1: Pq, 2: Kl, 3: Tp, 4: Mh, 5: es, 6: Ym}
            }, km = function (o, O, B, m) {
                if (O.getFaceVisible(o, B)) {
                    Ci(O, Zr(o, O.getFaceMat(o, B) || O.getMat(o)));
                    var d = O._26I;
                    O.getFaceReverseCull(o, B) ? d.enable(d.CULL_FACE) : d.disable(d.CULL_FACE), Po(d, O._prg.uFixPickReverseColor, Ol[B]), gl(d), Ck(d, m, 6), Se(d), Zo(O)
                }
            }, kf = function (H) {
                return H instanceof bj
            }, qi = function (R) {
                return [R.x, R.e || 0, R.y]
            }, nf = function (e, m, B) {
                for (var m = as(m), I = m[0], r = m[1], H = m[2]; B--;) e.push(I, r, H)
            }, os = function (N, $, G) {
                for (var $ = as($), c = $[0], q = $[1], w = $[2], B = $[3]; G--;) N.push(c, q, w, B)
            }, gb = function (h, s, f) {
                if (s) for (var L, P, g, d = s[0], V = s[1], k = s[2], Y = s[4], J = s[5], A = s[6], n = s[8], W = s[9], b = s[10], w = s[12], D = s[13], U = s[14], E = f.length, j = 0, j = 0; E > j; j += 3) L = f[j], P = f[j + 1], g = f[j + 2], h.push(d * L + Y * P + n * g + w, V * L + J * P + W * g + D, k * L + A * P + b * g + U); else ll(h, f)
            }, dp = function (C, W) {
                var O = W.s("light.intensity"), A = as(W.s(qf)), S = A[0], a = A[1], o = A[2];
                1 !== O && (S *= O, a *= O, o *= O), C.push(S, a, o, W.s("light.disabled") ? 1 : 0)
            }, _b = function (g, j, U) {
                Po(j, U.uHeadlightRange, g._headlightRange);
                var O = g._headlightIntensity, T = as(g._headlightColor);
                1 !== O && (T = [T[0] * O, T[1] * O, T[2] * O]), Po(j, U.uHeadlightColor, [T[0], T[1], T[2], g._headlightDisabled ? 1 : 0]);
                var o = g._59O, J = g._spots, i = g._dirs;
                if (o.length) {
                    var S = [], e = [], X = [];
                    o.forEach(function (U) {
                        dp(S, U), ll(e, g._transformPointToViewSpace(U.p3())), X.push(U.s("light.range"))
                    }), j.uniform4fv(U.uPointColor, S), j.uniform1fv(U.uPointRange, X), j.uniform3fv(U.uPointPosition, e)
                }
                if (J.length) {
                    var P = [], V = [], R = [], b = [], N = [], z = [];
                    J.forEach(function (q) {
                        dp(P, q), ll(V, g._transformPointToViewSpace(q.p3())), ll(N, g._transformDirectionToViewSpace(q.p3(), q.s("light.center"))), R.push(q.s("light.range")), b.push(c(q.s("light.angle") / 2)), z.push(q.s("light.exponent"))
                    }), j.uniform4fv(U.uSpotColor, P), j.uniform1fv(U.uSpotRange, R), j.uniform1fv(U.uSpotAngle, b), j.uniform1fv(U.uSpotExponent, z), j.uniform3fv(U.uSpotPosition, V), j.uniform3fv(U.uSpotDirection, N)
                }
                if (i.length) {
                    var _ = [], s = [];
                    i.forEach(function (Y) {
                        dp(_, Y), ll(s, g._transformDirectionToViewSpace(Y.p3()))
                    }), j.uniform4fv(U.uDirColor, _), j.uniform3fv(U.uDirDirection, s)
                }
            }, Ig = function (f) {
                return f > 0 && 0 === (f - 1 & f)
            }, ms = function (C) {
                return C = n(0, g(Y, C)), C = n(Zn, g(Y - Zn, C))
            }, tn = function () {
                return .05 + K() / 2
            }, Fe = function (G, a, T, $) {
                var I, R = G.getEye();
                return G.isOrtho() ? (I = sg(G.getCenter(), R), I[0] += $[0], I[1] += $[1], I[2] += $[2]) : I = R, eo(a, T, $, I)
            }, eo = function (l, P, i, U) {
                var X = Hj(l, P), g = sg(U, i, !0), V = Hj(g, P);
                if (M(V) < Zn) return o;
                var A = (X - Hj(i, P)) / V;
                return [i[0] + g[0] * A, i[1] + g[1] * A, i[2] + g[2] * A]
            }, Bf = function (F, C) {
                return {x: 2 * F.x - C.x, y: 2 * F.y - C.y}
            }, le = function (Z, Q, i, t) {
                var w, A;
                if (!Z) return w = N(Q.y - i.y, i.x - Q.x), {x: Q.x + t * J(w), y: Q.y + t * c(w)};
                if (!i) return w = N(Z.y - Q.y, Q.x - Z.x), {x: Q.x + t * J(w), y: Q.y + t * c(w)};
                var W = sg([Z.x, Z.y, 0], [Q.x, Q.y, 0], !0), G = sg([i.x, i.y, 0], [Q.x, Q.y, 0], !0),
                    F = -(W[0] + G[0]) / 2, f = -(W[1] + G[1]) / 2, R = e(F * F + f * f);
                if (Zn > R) return w = N(Z.y - Q.y, Q.x - Z.x), {x: Q.x + t * J(w), y: Q.y + t * c(w)};
                var L = Z.x - Q.x, M = Z.y - Q.y, S = i.x - Q.x, P = i.y - Q.y, j = e(L * L + M * M), I = e(S * S + P * P);
                w = a(Hj(W, G)) / 2, A = W[1] * G[0] - W[0] * G[1] > 0 ? -1 : 1, F /= R, f /= R;
                var g = t / J(w), D = n(j, I) / c(w);
                R = Math.min(g, D);
                var b = {x: Q.x + A * R * F, y: Q.y + A * R * f};
                return i.b && g > I / c(w) && (b.adjust = !0), b
            }, Cd = function (N) {
                var W = N[1], m = N[2], r = N[3], b = N[6], B = N[7], o = N[11];
                N[1] = N[4], N[2] = N[8], N[3] = N[12], N[4] = W, N[6] = N[9], N[7] = N[13], N[8] = m, N[9] = b, N[11] = N[14], N[12] = r, N[13] = B, N[14] = o
            }, Ee = function (d) {
                var M = d[0], t = d[1], g = d[2], B = d[3], k = d[4], X = d[5], v = d[6], K = d[7], R = d[8], w = d[9],
                    y = d[10], C = d[11], J = d[12], _ = d[13], D = d[14], T = d[15], E = M * X - t * k, j = M * v - g * k,
                    F = M * K - B * k, a = t * v - g * X, S = t * K - B * X, Z = g * K - B * v, L = R * _ - w * J,
                    h = R * D - y * J, N = R * T - C * J, Y = w * D - y * _, x = w * T - C * _, b = y * T - C * D,
                    i = E * b - j * x + F * Y + a * N - S * h + Z * L;
                return i ? (i = 1 / i, d[0] = (X * b - v * x + K * Y) * i, d[1] = (g * x - t * b - B * Y) * i, d[2] = (_ * Z - D * S + T * a) * i, d[3] = (y * S - w * Z - C * a) * i, d[4] = (v * N - k * b - K * h) * i, d[5] = (M * b - g * N + B * h) * i, d[6] = (D * F - J * Z - T * j) * i, d[7] = (R * Z - y * F + C * j) * i, d[8] = (k * x - X * N + K * L) * i, d[9] = (t * N - M * x - B * L) * i, d[10] = (J * S - _ * F + T * E) * i, d[11] = (w * F - R * S - C * E) * i, d[12] = (X * h - k * Y - v * L) * i, d[13] = (M * Y - t * h + g * L) * i, d[14] = (_ * j - J * a - D * E) * i, d[15] = (R * a - w * j + y * E) * i, void 0) : o
            }, uj = function (W, Q) {
                if (Q) {
                    var S = Q[0], c = Q[1], z = Q[2];
                    W[12] = W[0] * S + W[4] * c + W[8] * z + W[12], W[13] = W[1] * S + W[5] * c + W[9] * z + W[13], W[14] = W[2] * S + W[6] * c + W[10] * z + W[14], W[15] = W[3] * S + W[7] * c + W[11] * z + W[15]
                }
            }, Zb = function (Y, X) {
                if (X) {
                    var Z = X[0], p = X[1], O = X[2];
                    Y[0] = Y[0] * Z, Y[1] = Y[1] * Z, Y[2] = Y[2] * Z, Y[3] = Y[3] * Z, Y[4] = Y[4] * p, Y[5] = Y[5] * p, Y[6] = Y[6] * p, Y[7] = Y[7] * p, Y[8] = Y[8] * O, Y[9] = Y[9] * O, Y[10] = Y[10] * O, Y[11] = Y[11] * O
                }
            }, Fr = function (X, M, V) {
                var n = M[0], w = M[1], I = M[2], H = M[3], b = M[4], y = M[5], P = M[6], v = M[7], z = M[8], R = M[9],
                    o = M[10], L = M[11], r = M[12], k = M[13], S = M[14], C = M[15], J = V[0], g = V[1], Y = V[2],
                    G = V[3];
                return X[0] = J * n + g * b + Y * z + G * r, X[1] = J * w + g * y + Y * R + G * k, X[2] = J * I + g * P + Y * o + G * S, X[3] = J * H + g * v + Y * L + G * C, J = V[4], g = V[5], Y = V[6], G = V[7], X[4] = J * n + g * b + Y * z + G * r, X[5] = J * w + g * y + Y * R + G * k, X[6] = J * I + g * P + Y * o + G * S, X[7] = J * H + g * v + Y * L + G * C, J = V[8], g = V[9], Y = V[10], G = V[11], X[8] = J * n + g * b + Y * z + G * r, X[9] = J * w + g * y + Y * R + G * k, X[10] = J * I + g * P + Y * o + G * S, X[11] = J * H + g * v + Y * L + G * C, J = V[12], g = V[13], Y = V[14], G = V[15], X[12] = J * n + g * b + Y * z + G * r, X[13] = J * w + g * y + Y * R + G * k, X[14] = J * I + g * P + Y * o + G * S, X[15] = J * H + g * v + Y * L + G * C, X
            }, Ek = function (T, u, $, c) {
                var L, i, j, z, R, F, E, y, H, W, o = u[0], J = u[1], m = u[2], S = c[0], B = c[1], K = c[2], X = $[0],
                    N = $[1], h = $[2];
                return M(o - X) < Zn && M(J - N) < Zn && M(m - h) < Zn ? vn(T) : (E = o - X, y = J - N, H = m - h, W = 1 / e(E * E + y * y + H * H), E *= W, y *= W, H *= W, L = B * H - K * y, i = K * E - S * H, j = S * y - B * E, W = e(L * L + i * i + j * j), W ? (W = 1 / W, L *= W, i *= W, j *= W) : (L = 0, i = 0, j = 0), z = y * j - H * i, R = H * L - E * j, F = E * i - y * L, W = e(z * z + R * R + F * F), W ? (W = 1 / W, z *= W, R *= W, F *= W) : (z = 0, R = 0, F = 0), T[0] = L, T[1] = z, T[2] = E, T[3] = 0, T[4] = i, T[5] = R, T[6] = y, T[7] = 0, T[8] = j, T[9] = F, T[10] = H, T[11] = 0, T[12] = -(L * o + i * J + j * m), T[13] = -(z * o + R * J + F * m), T[14] = -(E * o + y * J + H * m), T[15] = 1, T)
            }, Xd = function (x, U, J, D, N) {
                var w = 1 / u(U / 2), f = 1 / (D - N);
                return x[0] = w / J, x[1] = 0, x[2] = 0, x[3] = 0, x[4] = 0, x[5] = w, x[6] = 0, x[7] = 0, x[8] = 0, x[9] = 0, x[10] = (N + D) * f, x[11] = -1, x[12] = 0, x[13] = 0, x[14] = 2 * N * D * f, x[15] = 0, x
            }, Oe = function (s, U, c, k, P, d, O) {
                var G = 1 / (U - c), K = 1 / (k - P), B = 1 / (d - O);
                return s[0] = -2 * G, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = -2 * K, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 2 * B, s[11] = 0, s[12] = (U + c) * G, s[13] = (P + k) * K, s[14] = (O + d) * B, s[15] = 1, s
            }, wk = function (I, g) {
                var k = g[0], A = g[1], T = g[2], V = g[3], u = k * k + A * A + T * T + V * V, F = u ? 1 / u : 0;
                return I[0] = -k * F, I[1] = -A * F, I[2] = -T * F, I[3] = V * F, I
            }, Tb = function (R, z) {
                var l = z[0] + z[5] + z[10], w = 0;
                return l > 0 ? (w = 2 * Math.sqrt(l + 1), R[3] = .25 * w, R[0] = (z[6] - z[9]) / w, R[1] = (z[8] - z[2]) / w, R[2] = (z[1] - z[4]) / w) : z[0] > z[5] & z[0] > z[10] ? (w = 2 * Math.sqrt(1 + z[0] - z[5] - z[10]), R[3] = (z[6] - z[9]) / w, R[0] = .25 * w, R[1] = (z[1] + z[4]) / w, R[2] = (z[8] + z[2]) / w) : z[5] > z[10] ? (w = 2 * Math.sqrt(1 + z[5] - z[0] - z[10]), R[3] = (z[8] - z[2]) / w, R[0] = (z[1] + z[4]) / w, R[1] = .25 * w, R[2] = (z[6] + z[9]) / w) : (w = 2 * Math.sqrt(1 + z[10] - z[0] - z[5]), R[3] = (z[1] - z[4]) / w, R[0] = (z[8] + z[2]) / w, R[1] = (z[6] + z[9]) / w, R[2] = .25 * w), R
            }, $b = function (Q, y, J) {
                var F = y[0], m = y[1], I = y[2], W = y[3], $ = F + F, w = m + m, M = I + I, C = F * $, N = F * w,
                    g = F * M, G = m * w, E = m * M, p = I * M, t = W * $, Z = W * w, O = W * M;
                return Q[0] = 1 - (G + p), Q[1] = N + O, Q[2] = g - Z, Q[3] = 0, Q[4] = N - O, Q[5] = 1 - (C + p), Q[6] = E + t, Q[7] = 0, Q[8] = g + Z, Q[9] = E - t, Q[10] = 1 - (C + G), Q[11] = 0, Q[12] = J[0], Q[13] = J[1], Q[14] = J[2], Q[15] = 1, Q
            }, yn = function () {
                var $ = [0, 0, 0], D = [0, 0, 0], C = [0, 0, 0], G = function (h, D, X) {
                    h[0] = D[1] * X[2] - D[2] * X[1], h[1] = D[2] * X[0] - D[0] * X[2], h[2] = D[0] * X[1] - D[1] * X[0]
                }, Q = function (S) {
                    return S[0] * S[0] + S[1] * S[1] + S[2] * S[2]
                }, u = function (P) {
                    var v = Math.sqrt(Q(P));
                    P[0] /= v, P[1] /= v, P[2] /= v
                }, d = function (j, y, Z) {
                    j[0] = y[0] - Z[0], j[1] = y[1] - Z[1], j[2] = y[2] - Z[2]
                };
                return function (L, b, p) {
                    var X = Nd();
                    return d(C, L, b), 0 === Q(C) && (C[2] = 1), u(C), G($, p, C), 0 === Q($) && (1 === Math.abs(p[2]) ? C[0] += 1e-4 : C[2] += 1e-4, u(C), G($, p, C)), u($), G(D, C, $), X[0] = $[0], X[4] = D[0], X[8] = C[0], X[1] = $[1], X[5] = D[1], X[9] = C[1], X[2] = $[2], X[6] = D[2], X[10] = C[2], X
                }
            }(), yo = function (D, o) {
                if (D.vr.enable) {
                    var Q = D.vr.getViewMatrix(o);
                    if (Q) return Q
                }
                return Ek(o ? o : Nd(), D._eye, D._center, D._up)
            }, zr = function (e) {
                if (e.vr.enable) {
                    var L = e.vr.getProjectMatrix();
                    if (L) return L
                }
                var U = e.getAspect(), s = e._near, t = e._far, q = Nd();
                if (e._ortho) {
                    var O = e._orthoWidth / 2, $ = O / U;
                    Oe(q, -O, O, -$, $, s, t)
                } else Xd(q, e._fovy, U, s, t);
                return q
            }, nq = function (j, b) {
                if (!j) return o;
                var B = 0, n = 1, f = 2, a = [], t = 0, V = j.length, y = V / 3;
                if (b) {
                    for (; V > t; t++) a[t] = 0;
                    for (t = 0; t < b.length; t += 3) {
                        var D = [], A = [], W = [];
                        D[B] = j[3 * b[t + 1] + B] - j[3 * b[t] + B], D[n] = j[3 * b[t + 1] + n] - j[3 * b[t] + n], D[f] = j[3 * b[t + 1] + f] - j[3 * b[t] + f], A[B] = j[3 * b[t + 2] + B] - j[3 * b[t + 1] + B], A[n] = j[3 * b[t + 2] + n] - j[3 * b[t + 1] + n], A[f] = j[3 * b[t + 2] + f] - j[3 * b[t + 1] + f], W[B] = D[n] * A[f] - D[f] * A[n], W[n] = D[f] * A[B] - D[B] * A[f], W[f] = D[B] * A[n] - D[n] * A[B];
                        for (var H = 0; 3 > H; H++) a[3 * b[t + H] + B] += W[B], a[3 * b[t + H] + n] += W[n], a[3 * b[t + H] + f] += W[f]
                    }
                } else for (t = 0; y > t; t += 3) {
                    var D = [], A = [], W = [];
                    D[B] = j[3 * (t + 1) + B] - j[3 * t + B], D[n] = j[3 * (t + 1) + n] - j[3 * t + n], D[f] = j[3 * (t + 1) + f] - j[3 * t + f], A[B] = j[3 * (t + 2) + B] - j[3 * (t + 1) + B], A[n] = j[3 * (t + 2) + n] - j[3 * (t + 1) + n], A[f] = j[3 * (t + 2) + f] - j[3 * (t + 1) + f], W[B] = D[n] * A[f] - D[f] * A[n], W[n] = D[f] * A[B] - D[B] * A[f], W[f] = D[B] * A[n] - D[n] * A[B];
                    for (var H = 0; 3 > H; H++) a[3 * (t + H) + B] = W[B], a[3 * (t + H) + n] = W[n], a[3 * (t + H) + f] = W[f]
                }
                for (t = 0; V > t; t += 3) {
                    var s = [];
                    s[B] = a[t + B], s[n] = a[t + n], s[f] = a[t + f];
                    var R = e(s[B] * s[B] + s[n] * s[n] + s[f] * s[f]);
                    0 === R && (R = Zn), s[B] = s[B] / R, s[n] = s[n] / R, s[f] = s[f] / R, a[t + B] = s[B], a[t + n] = s[n], a[t + f] = s[f]
                }
                return new zk(a)
            }, Tr = function (F, B, R, S) {
                if (R || (R = F.createTexture()), B) {
                    var f = F.TEXTURE_2D, k = F.REPEAT, N = F.CLAMP_TO_EDGE, t = F.TEXTURE_MIN_FILTER;
                    S !== F.NEAREST && (S = F.LINEAR), Hl(F, R), F.texImage2D(f, 0, F.RGBA, F.RGBA, F.UNSIGNED_BYTE, B), Rh(F, F.TEXTURE_MAG_FILTER, S);
                    var n = B.naturalWidth || B.width, e = B.naturalHeight || B.height;
                    Ig(n) && Ig(e) && !B.clampToEdge ? (Rh(F, F.TEXTURE_WRAP_S, k), Rh(F, F.TEXTURE_WRAP_T, k), Rh(F, t, F.LINEAR_MIPMAP_LINEAR), F.generateMipmap(f)) : (Rh(F, F.TEXTURE_WRAP_S, N), Rh(F, F.TEXTURE_WRAP_T, N), Rh(F, t, S)), Hl(F, o)
                }
                return R
            }, Ib = function (S, X) {
                var W = new Uint8Array(4);
                return X = X || S.createTexture(), Hl(S, X), Rh(S, S.TEXTURE_MIN_FILTER, S.LINEAR), S.texImage2D(S.TEXTURE_2D, 0, S.RGBA, 1, 1, 0, S.RGBA, S.UNSIGNED_BYTE, W), X
            }, vk = function (I) {
                I._26I && I._prg && (I._26I.deleteProgram(I._prg), I._prg = o)
            }, Lm = function (T, P, m, W) {
                var t = T.createShader(m);
                return T.shaderSource(t, W), T.compileShader(t), T.attachShader(P, t), t
            }, dk = function (G) {
                return G.createBuffer()
            }, Hl = function (W, r) {
                W.bindTexture(W.TEXTURE_2D, r)
            }, Rh = function (E, R, t) {
                E.texParameteri(E.TEXTURE_2D, R, t)
            }, un = function (V, Z) {
                V.enable(V.POLYGON_OFFSET_FILL), V.polygonOffset(Z[0], Z[1])
            }, zc = function (B) {
                B.disable(B.POLYGON_OFFSET_FILL)
            }, xr = function (H, G) {
                if (G) {
                    var G = as(G);
                    H.clearColor(G[0], G[1], G[2], G[3])
                }
            }, ib = function (O, g) {
                Po(O, g.uFix, !0), kn(O, g.aNormal)
            }, jd = function (S, G) {
                Po(S, G.uFix, !1), Af(S, G.aNormal)
            }, xm = function (W, H, E, w, k, N, M, I) {
                W._picking || (E ? (Po(W, H.uBlend, !0), Po(W, H.uBlendColor, E)) : Po(W, H.uBlend, !1), Po(W, H.uLight, w == o ? !0 : w), In(k) && 1 !== k && Po(W, H.uPartOpacity, k), Po(W, H.uReverseFlip, N == o ? !1 : N), Po(W, H.uFixPickReverseColor, M || Wb)), I ? W.enable(W.CULL_FACE) : W.disable(W.CULL_FACE)
            }, wi = function (M, Z) {
                M._picking || Po(M, Z.uPartOpacity, 1)
            }, gl = function () {
                var d = [0, 0, 1, 1];
                return function (x, D, z, y, N, k, U, b, X) {
                    return z ? (Po(x, D.uTexture, !0), Po(x, D.uDiscardSelectable, kr(y) ? y : !0), Af(x, D.aUv), th(x, N, k, D.aUv, 2), X ? (Po(x, D.uBlendTexture, !0), x.activeTexture(x.TEXTURE1), Hl(x, X), x.uniform1i(D.uBlendSampler, 1)) : (Po(x, D.uBlendTexture, !1), x.activeTexture(x.TEXTURE1), Hl(x, x._emptyBlendTexture)), x.activeTexture(x.TEXTURE0), Hl(x, z), x.uniform1i(D.uSampler, 0), U ? (d[0] = U[0], d[1] = U[1]) : (d[0] = 0, d[1] = 0), b ? (d[2] = b[0], d[3] = b[1]) : (d[2] = 1, d[3] = 1), Po(x, D.uOffsetScale, d), void 0) : (x.activeTexture(x.TEXTURE0), Hl(x, x._emptyTexture), x.activeTexture(x.TEXTURE1), Hl(x, x._emptyBlendTexture), void 0)
                }
            }(), Se = function (g, Q, q) {
                g.activeTexture(g.TEXTURE0), Hl(g, o), g.activeTexture(g.TEXTURE1), Hl(g, o), q && (kn(g, Q.aUv), Po(g, Q.uTexture, !1), Po(g, Q.uBlendTexture, !1))
            }, Ql = function (a, x, V, k, i, Q) {
                !V || P || ak || a.lineWidth(V), k && !a._picking && Po(a, x.uFixPickReverseColor, k), i && th(a, i, Q, x.aPosition)
            }, lo = function (H, D, w, q) {
                cm && (q = H[cm]), H.drawArrays(q == o ? H.TRIANGLES : q, D, w);
                var i = H._renderInfo;
                i && (i.calls++, i.vertices += w, (q == o || q === H.TRIANGLES) && (i.faces += w / 3), q === H.LINES && (i.lines += w / 2))
            }, Ck = function (P, H, g, V) {
                cm && (V = P[cm]), P.drawElements(V == o ? P.TRIANGLES : V, g, P.UNSIGNED_SHORT, H == o ? 0 : 2 * H);
                var s = P._renderInfo;
                s && (s.calls++, s.vertices += g, (V == o || V === P.TRIANGLES) && (s.faces += g / 3), V === P.LINES && (s.lines += g / 2))
            }, zf = function (U, s, i, $, v) {
                var b = U.ARRAY_BUFFER;
                U.bindBuffer(b, s), i && U.bufferData(b, i, U.STATIC_DRAW), $ != o && U.vertexAttribPointer($, v ? v : 3, U.FLOAT, !1, 0, 0)
            }, th = function (f, Z, V, q, K) {
                return V ? (Sb(f, f.ARRAY_BUFFER, Z, V), q != o && f.vertexAttribPointer(q, K ? K : 3, f.FLOAT, !1, 0, 0), void 0) : zf(f, Z, V, q, K)
            }, Tj = function (W, r, f) {
                var y = W.ELEMENT_ARRAY_BUFFER;
                W.bindBuffer(y, r), f && W.bufferData(y, f, W.STATIC_DRAW)
            }, Bq = function (q, c, l) {
                Sb(q, q.ELEMENT_ARRAY_BUFFER, c, l)
            }, Sb = function (m, D, f, F) {
                var Q = F._bufId;
                Q || (Q = F._bufId = x.Math.generateIncreasingID());
                var f, i = m._bufPool;
                (f = i[Q]) && f._buf ? m.bindBuffer(D, f._buf) : (f = i[Q] = {_buf: dk(m)}, m.bindBuffer(D, f._buf), m.bufferData(D, F, m.STATIC_DRAW)), f._fid = m._renderInfo.frame
            }, Po = function (q, D, b) {
                if (b != o && D != o) {
                    b = as(b);
                    var v = b.length;
                    3 === v ? q.uniform3fv(D, b) : 4 === v ? q.uniform4fv(D, b) : 16 === v ? q.uniformMatrix4fv(D, !1, b) : kr(b) ? q.uniform1i(D, b ? 1 : 0) : 2 === v ? q.uniform2fv(D, b) : q.uniform1f(D, b)
                }
            }, Af = function (a, _) {
                _ != o && _ >= 0 && a.enableVertexAttribArray(_)
            }, kn = function (p, i) {
                i != o && i >= 0 && p.disableVertexAttribArray(i)
            }, Zo = function (l, o) {
                var Y = l.getGL(), e = l._prg;
                l._7O = l._8O.pop(), o && (Po(Y, e.uMVMatrix, l._7O), l._6O = o, Po(Y, e.uNMatrix, o))
            }, Og = function (_, q) {
                return q || (q = Nd()), lh(q, _), Ee(q), Cd(q), q
            }, Ci = function (Y, u) {
                var z = Y.getGL(), I = Y._prg, c = Y._7O;
                u && (Y._8O.push(ah(c)), Po(z, I.uMMatrix, u), Fr(c, c, u), Y._7O = c), Po(z, I.uMVMatrix, c), Po(z, I.uNMatrix, Og(c, Y._6O))
            }, Ni = function (p, B, r, q, G, f) {
                if (r) {
                    if (q) {
                        var L = r.value++, _ = 2147483648 | L,
                            Q = [(255 & _ >> 16) / 255, (255 & _ >> 8) / 255, (255 & _) / 255, (255 & _ >> 24) / 255];
                        r[L] = {data: G, part: f}
                    } else Q = kb;
                    return Po(p, B.uFixPickReverseColor, Q), Q
                }
            }, Pm = function () {
                var I = {
                    center: function (T, w, O, V, X) {
                        var C = -w[1] / 2, $ = {x: -w[0] / 2, y: C, width: w[0], height: w[1]}, g = Sn(T, $, O);
                        return [g.x + V, -g.y - X, tn()]
                    }, front: function (R, U, Q, l, c) {
                        var G = -U[1] / 2, q = {x: -U[0] / 2, y: G, width: U[0], height: U[1]}, K = Sn(R, q, Q);
                        return [K.x + l, -K.y - c, U[2] / 2 + tn()]
                    }, back: function (d, f, x, L, W) {
                        var t = -f[0] / 2, w = -f[1] / 2, j = {x: t, y: w, width: f[0], height: f[1]}, h = Sn(d, j, x);
                        return [-h.x - L, -h.y - W, -f[2] / 2 - tn()]
                    }, left: function (W, m, V, o, T) {
                        var D = -m[1] / 2, p = {x: -m[2] / 2, y: D, width: m[2], height: m[1]}, Q = Sn(W, p, V);
                        return [-m[0] / 2 - tn(), -Q.y - T, Q.x + o]
                    }, right: function (J, t, B, m, K) {
                        var U = -t[2] / 2, A = -t[1] / 2, b = {x: U, y: A, width: t[2], height: t[1]}, I = Sn(J, b, B);
                        return [t[0] / 2 + tn(), -I.y - K, -I.x - m]
                    }, top: function (i, T, d, u, G) {
                        var w = {x: -T[0] / 2, y: -T[2] / 2, width: T[0], height: T[2]}, W = Sn(i, w, d);
                        return [W.x + u, T[1] / 2 + tn(), W.y + G]
                    }, bottom: function (C, Z, I, G, S) {
                        var D = -Z[2] / 2, n = {x: -Z[0] / 2, y: D, width: Z[0], height: Z[2]}, d = Sn(C, n, I);
                        return [d.x + G, -Z[1] / 2 - tn(), -d.y - S]
                    }
                };
                return function (e, x, r, l, o, J) {
                    return I[l](e, x, r, o || 0, J || 0)
                }
            }(), tj = function (m, V, E, L, C, c, T, i, y, w) {
                if (C && (V[0] += C[0], V[1] += C[1], V[2] += C[2]), uj(m, E), i) {
                    var P = Nd();
                    if (Sr(P, y, w), Jg(V, P), uj(m, V), m.auto = i, m.pos = Jg([0, 0, 0], m), c) {
                        var e = m.mat2 = Nd();
                        Sr(e, c, T)
                    }
                } else Sr(m, y, w), uj(m, V), L === Pq ? ts(m, -h) : L === Kl ? ts(m, h) : L === Tp ? ni(m, -h) : L === Mh ? ni(m, h) : L === Ym && ts(m, Y), Sr(m, c, T);
                return m
            }, Rj = function (K, l) {
                var z = l.auto, t = l.mat2, H = K.gv;
                if (z) {
                    var Y, F = Nd(), D = [0, 0, 0, 0];
                    Y = "string" == typeof z ? [z.indexOf("x") < 0 ? H._eye[0] : H._center[0], z.indexOf("y") < 0 ? H._eye[1] : H._center[1], z.indexOf("z") < 0 ? H._eye[2] : H._center[2]] : H._eye, Tb(D, Ek(Nd(), Y, H._center, H._up)), $b(F, wk(D, D), l.pos), t && Fr(F, F, t), Ci(H, F)
                } else Ci(H, l)
            }, So = function (p, l, g, f, W) {
                var Q = p.s, v = p.gv, F = v.getGL(), _ = v._prg, y = v._buffer, u = v._1O;
                Tr(F, $n, u), Rj(p, g), xm(F, _, Q(l + ".blend"), Q(l + ".light"), Q(l + ".opacity"), Q(l + ".reverse.flip"), Q(l + ".reverse.color"), Q(l + ".reverse.cull")), gl(F, _, u, W, y.uv, ze), th(F, y.vs, f, _.aPosition), th(F, y.ns, Bo, _.aNormal), Bq(F, y.is, fl), Ck(F, 0, fl.length), Se(F, _, u), wi(F, _), Zo(v)
            }, db = function (M, N, s) {
                var $ = M.gv, b = M.data, h = M[N] = {
                    blend: $.getBodyColor(b) || $.getFaceBlend(b, N),
                    light: $.getFaceLight(b, N),
                    color: $.getFaceColor(b, N),
                    opacity: $.getFaceOpacity(b, N),
                    transparent: $.getFaceTransparent(b, N),
                    reverseFlip: $.getFaceReverseFlip(b, N),
                    reverseColor: $.getFaceReverseColor(b, N),
                    reverseCull: $.getFaceReverseCull(b, N),
                    texture: $.getFaceImage(b, N),
                    blendTexture: $.getFaceBlendImage(b, N),
                    discardSelectable: $.getFaceDiscardSelectable(b, N)
                };
                if ("csg" !== N) {
                    h.uv = $.getFaceUv(b, N) || s && s[N + "Uv"], h.uvScale = $.getFaceUvScale(b, N) || s && s[N + "UvScale"], h.uvOffset = $.getFaceUvOffset(b, N) || s && s[N + "UvOffset"];
                    var H = $.getFaceMat(b, N);
                    H && (h.mat = Zr(b, H))
                }
                return h
            }, $k = function (A, u, F, q, O) {
                if (q) {
                    if (!O(q.transparent)) return;
                    var W = A.data, p = A.gv, l = p._buffer, t = p.getTexture(q.texture, W),
                        L = p.getTexture(q.blendTexture, W);
                    gl(u, F, t, q.discardSelectable, l.uv, q.tuv, q.uvOffset, q.uvScale, L), xm(u, F, q.blend, q.light, q.opacity, q.reverseFlip, q.reverseColor, q.reverseCull), Po(u, F.uDiffuse, q.color || k["color.empty"]), th(u, l.vs, q.vs, F.aPosition), th(u, l.ns, q.ns, F.aNormal), lo(u, 0, q.vs.length / 3), wi(u, F), Se(u, F, t)
                }
            }, fo = function (J, t, i, v, T, F) {
                var a, G, Q, C, q, R, L, s, f, c, S, p = [v - t, T - i], u = J ? J.length : 0;
                for (Q = 0; u > Q; Q++) {
                    for (C = 2, a = J[Q], q = a[0], R = a[1]; C + 1 < a.length;) {
                        if (L = a[C], s = a[C + 1], G = Ji(t, i, v, T, q, R, L, s, !0)) {
                            f = [L - q, s - R], c = vl(f), f[0] /= c, f[1] /= c, c = Hj(p, f), c = c > 0 ? F : -F, S = [f[0] * c, f[1] * c];
                            break
                        }
                        q = L, R = s, C += 2
                    }
                    if (S) break
                }
                if (S) for (v = t + S[0], T = i + S[1], Q = 0; u > Q; Q++) for (C = 2, a = J[Q], q = a[0], R = a[1]; C + 1 < a.length;) {
                    if (L = a[C], s = a[C + 1], G = Ji(t, i, v, T, q, R, L, s, !0)) return [0, 0];
                    q = L, R = s, C += 2
                }
                return S ? S : [v - t, T - i]
            }, zq = x.graph3d = {}, Uc = function (F, X, e) {
                Jr(W + ".graph3d." + F, X, e)
            },
            Xo = "~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<**1/2!-opjujtpQb)5dfw!+!yjsubNNv)4dfw!>!emspXw<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<emspXw!4dfw!hojzsbw<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNNv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",
            ee = "~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!~<zujwjudfmgfSv!+!{zy/spmpDwof!>,!chs/eJ<*!spmpDwof!)sbfojMpUmfyfUqbNwof!>!spmpDwof<*!*!{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv!)fcvDfsvuyfu!>!spmpDwof!5dfw<*!mbnspOemspx!-yfusfWpUbsfnbd!)udfmgfs!>!dfWudfmgfs!4dfw<*!yjsubNxfjWv!-O!)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw<*!opjujtpQbsfnbDv!.!emspXw!)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw|*qbNwoFftVv)!gj!QBNWOF`FTV!gfegj$!!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~~<esbdtje|*1/1!>>!x/eJ)gj!gjeof$!<ftvggjEv!>!eJ!ftmf$!~<ftvggjEv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw~<*!{zy/*!yjsubn!+!*!1/1!-sje!)5dfw!)!)f{jmbnspo!osvufs|!*!yjsubn!5ubn!oj!-sje!4dfw!oj!)opjudfsjEnspgtobsUftsfwoj!4dfw~!<*!*!SPUDBG`BNNBH!)ubpmg!-fvmbw!)sbfojMpUbnnbH!osvufs!|!*!fvmbw!5dfw!)sbfojMpUmfyfUqbNwof!5dfw~<*!x/fvmbw!-*!*!spudbGbnnbh!)4dfw!-{zy/fvmbw!)xpq!)5dfw!osvufs|!*!spudbGbnnbh!ubpmg!oj!-fvmbw!5dfw!oj!)sbfojMpUbnnbH!5dfw<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<emspXw!4dfw!hojzsbw<opjujtpQbsfnbDv!4dfw!nspgjov<yjsubNxfjWv!5ubn!nspgjov!gjeof$!<zujwjudfmgfSv!ubpmg!nspgjov<qbNwoFv!fcvDsfmqnbt!nspgjov<qbNwoFftVv!mppc!nspgjov!QBNWOF`FTV!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";
        Mm(w, {
            setBatchInfo: function (F, _) {
                fe[F] = _
            }, getBatchInfo: function (w) {
                return fe[w]
            }
        }, !0);
        var ag = [1, 1, 1], Ph = [1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0],
            uh = [-.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5],
            vf = [.5, .5, -.5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5],
            hm = [.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5],
            Le = [.5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5],
            qh = [.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5],
            Lp = [-.5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5],
            uq = function (X, V) {
                xn(X, V, "_batchModelMap", "_batchIndexMap"), Vj(X, V, "_wireframeModelMap", "_wireframeIndexMap"), Vj(X, V, "_polylineModelMap", "_polylineIndexMap"), Vj(X, V, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"), Vj(X, V, "_polylineModelMapSwap", "_polylineIndexMapSwap")
            }, xn = function (q, Q, p, g) {
                if (!Q) return q[p] = {}, q[g] = {}, void 0;
                var y = Q._id, b = q[g], o = b[y];
                if (o) {
                    var V = q[p], v = o.batch, P = V[v], M = P.ds, n = o.index;
                    if (P.invalidate = !0, delete b[y], M.splice(n, 1), Al(M)) return delete V[v], void 0;
                    for (var O = o.begin, F = o.size, x = 3 * O, s = 3 * F, h = 4 * O, $ = 4 * F, H = P.vs, u = P.ps, d = P.uv, A = P.cs, T = P.bs, k = P.rs, Y = P.ns, J = P.ls; n < M.length; n++) o = b[M[n]._id], o.index--, o.begin -= F;
                    H.splice(x, s), u.splice(h, $), d && d.splice(2 * O, 2 * F), A && A.splice(h, $), T && T.splice(x, s), k && k.splice(O, F), Y && Y.splice(x, s), J && J.splice(O, F)
                }
            }, Vj = xn, kh = function (b, y, i, O) {
                if (!O) return o;
                var e = y[O];
                if (!e) {
                    var _ = fe[O] || Cq, c = _.image ? [] : o;
                    e = y[O] = {
                        vs: [],
                        ns: [],
                        uv: c,
                        cs: c ? o : _.color ? o : [],
                        bs: _.blend ? [] : o,
                        ps: [],
                        rs: _.brightness ? [] : o,
                        ds: []
                    }
                }
                return e.invalidate = !0, b[i._id] = {index: e.ds.length, begin: e.vs.length / 3, batch: O}, e.ds.push(i), e
            }, Go = function (g, X) {
                return X != o && 1 !== X ? [g[0] * X, g[1] * X, g[2] * X, g[3]] : g
            }, Kk = function (m, D, N) {
                var g = m.getBrightness(D), L = as(N.color || "white"), K = L[3] < 1, d = Math.ceil(N.width) || 1,
                    Q = (K ? "T" : "O") + d, s = m._wireframeIndexMap, q = m._wireframeModelMap, U = q[Q];
                U || (U = q[Q] = {vs: [], cs: [], ps: [], ds: [], T: K, W: d});
                var o, _ = m.getData3dUI(D), P = bi(_);
                if (N.geometry) {
                    if (!P) return;
                    if (o = ej(P), !o) return
                } else o = N.short ? qb : Yf;
                U.invalidate = !0;
                var t = U.vs, S = U.cs, y = U.ds, H = s[D._id] = {index: y.length, begin: t.length / 3, batch: Q};
                y.push(D);
                var w = Zr(D, N.mat), c = _._calcAnchorMat(D);
                c && Fr(w, w, c), gb(t, w, o);
                var C = H.size = t.length / 3 - H.begin;
                os(S, Go(L, g), C)
            }, jh = function (E, H, V, t, J, l, w, r, u) {
                var i = E.getBrightness(H);
                i == o && (i = 1);
                var T = Go(as(t), i), X = T[3] < 1;
                l = Math.ceil(l) || 1;
                var $ = (X ? "T" : "O") + l;
                if (w) {
                    var p = w[0], z = (w[1] || p) + p;
                    $ += "-" + p + "-" + z, u && ($ += "-" + te(u) + "-" + i, u = Go(as(u), i))
                }
                var G = E._polylineIndexMap, I = E._polylineModelMap, q = I[$];
                q || (q = I[$] = {
                    vs: [],
                    cs: [],
                    ps: [],
                    ds: [],
                    ls: w ? [] : o,
                    T: X,
                    W: l
                }, w && (q.D = p, q.G = z, q.A = u)), q.invalidate = !0;
                var K, Z = q.vs, c = q.cs, b = q.ds, j = q.ls,
                    N = G[H._id] = {index: b.length, begin: Z.length / 3, batch: $};
                b.push(H), ll(Z, V);
                var x, _ = N.size = Z.length / 3 - N.begin, n = V.length, S = 0, L = [];
                if (w || J) for (K = 0; n > K; K += 6) x = vl([V[K], V[K + 1], V[K + 2]], [V[K + 3], V[K + 4], V[K + 5]]), L.push(x), S += x;
                if (S && J) {
                    var v, e = Go(as(J), i), s = [e[0] - T[0], e[1] - T[1], e[2] - T[2], e[3] - T[3]], Y = 0;
                    for (K = 0; n > K; K += 6) v = Y / S, os(c, [T[0] + s[0] * v, T[1] + s[1] * v, T[2] + s[2] * v, T[3] + s[3] * v], 1), Y += L[K / 6], v = Y / S, os(c, [T[0] + s[0] * v, T[1] + s[1] * v, T[2] + s[2] * v, T[3] + s[3] * v], 1)
                } else os(c, T, _);
                if (w) for (Y = r || 0, K = 0; n > K; K += 6) j.push(Y), Y += L[K / 6], j.push(Y)
            }, Gb = function (x, r, E) {
                if (r) for (var s = 4 * r.begin, W = E[r.batch].ps, Q = 0; Q < r.size; Q++) W[s++] = x[0], W[s++] = x[1], W[s++] = x[2], W[s++] = x[3]
            }, Ef = function (B, m) {
                var z = m + ["32"], Y = B[m], E = B[z];
                Y ? E && E.length === Y.length ? (E.set(Y), E._bufId = null) : B[z] = new zk(Y) : delete B[z]
            }, Gl = function (q, d, G, x, m, P, K, R, D) {
                if (Ll(G)) G.forEach(function (o) {
                    Gl(q, d, o, x, m, P, K, R, D)
                }); else if (uf(G)) Gl(q, d, bi(x, G), x, m, P, K, R, D); else if (bc(G)) {
                    var J, F = pe(G.mat, d, q), u = pe(G.s3, d, q), X = pe(G.t3, d, q), _ = pe(G.r3, d, q);
                    if ((u || _ || X || F) && (J = Hg(F, u, _, pe(G.rotationMode, d, q), X), P.push(J)), G.shape3d) Gl(q, d, G.shape3d, x, m, P, K, R, G); else {
                        var h = x.s;
                        D = D || Cq;
                        var C = P[0], t = P.length, V = h("shape3d.color", G.color, D.color);
                        if (m || (m = h("shape3d.blend", G.blend, D.blend)), t > 1) {
                            C = ah(C);
                            for (var Q = 1; t > Q; Q++) Fr(C, C, P[Q])
                        }
                        G.vs && h(sj, G.visible, D.visible) && kk(C, K, R, G.vs, G.uv, G.is, m, V), G.top_vs && h(ji, G.topVisible, D.topVisible) && kk(C, K, R, G.top_vs, G.top_uv, G.top_is, m, h("shape3d.top.color", G.topColor, D.topColor) || V), G.bottom_vs && h(Am, G.bottomVisible, D.bottomVisible) && kk(C, K, R, G.bottom_vs, G.bottom_uv, G.bottom_is, m, h("shape3d.bottom.color", G.bottomColor, D.bottomColor) || V), G.from_vs && h(dg, G.fromVisible, D.fromVisible) && kk(C, K, R, G.from_vs, G.from_uv, G.from_is, m, h("shape3d.from.color", G.fromColor, D.fromColor) || V), G.to_vs && h(gm, G.toVisible, D.toVisible) && kk(C, K, R, G.to_vs, G.to_uv, G.to_is, m, h("shape3d.to.color", G.toColor, D.toColor) || V)
                    }
                    J && P.pop()
                }
            }, kk = function (k, j, N, v, o, z, e, G) {
                var M, $ = j.cs, K = j.uv, i = j.bs;
                if (z) {
                    M = z.length;
                    for (var w = 0; M > w; w++) {
                        var B = z[w];
                        gb(N, k, [v[3 * B], v[3 * B + 1], v[3 * B + 2]]), K && ll(K, [o[2 * B], o[2 * B + 1]])
                    }
                } else M = v.length / 3, gb(N, k, v), K && ll(K, o);
                $ && os($, G, M), i && (e ? nf(i, e, M) : ll(i, ag, M))
            }, kc = function (b, G, M, E) {
                var z = [];
                E ? Gl(b.gv, b.data, E, b, b.getBodyColor(), [G], M, z) : (Cc(b, Pq, G, M, z), Cc(b, Kl, G, M, z), Cc(b, es, G, M, z), Cc(b, Ym, G, M, z), Cc(b, Tp, G, M, z), Cc(b, Mh, G, M, z), Cc(b, "csg", G, M, z)), z.length && (ll(M.vs, z), ll(M.ns, nq(z)))
            }, Cc = function (g, K, $, x, t) {
                var W = g[K];
                if (W) {
                    var p = W.tuv;
                    if (p) {
                        var L, i, A, e, j = W.uvScale, l = W.uvOffset;
                        if (j) for (L = p.length, i = j[0], A = j[1], e = 0; L > e; e += 2) p[e] *= i, p[e + 1] *= A;
                        if (l) for (L = p.length, i = l[0], A = l[1], e = 0; L > e; e += 2) p[e] += i, p[e + 1] += A
                    }
                    kk($, x, t, W.vs, p, o, W.blend, W.color)
                }
            }, Pc = function (Q, M, H, t, x, U, u, z) {
                var R, A = H.cs, y = H.uv, W = H.bs;
                if (Q.getFaceVisible(M, U)) {
                    var V = Q.getFaceMat(M, U);
                    if (V && (x = Zr(M, V)), gb(u, x, z), A && os(A, Q.getFaceColor(M, U), 6), y) {
                        var l = Q.getFaceUv(M, U) || t[U + "Uv"], g = Q.getFaceUvScale(M, U) || t[U + "UvScale"],
                            D = Q.getFaceUvOffset(M, U) || t[U + "UvOffset"];
                        l = l ? [l[6], l[7], l[0], l[1], l[2], l[3], l[2], l[3], l[4], l[5], l[6], l[7]] : Ph;
                        var P = l[0], X = l[1], q = l[2], Y = l[3], T = l[4], Z = l[5], S = l[6], a = l[7], o = l[8],
                            h = l[9], v = l[10], N = l[11];
                        if (g) {
                            var f = g[0], E = g[1];
                            P *= f, X *= E, q *= f, Y *= E, T *= f, Z *= E, S *= f, a *= E, o *= f, h *= E, v *= f, N *= E
                        }
                        if (D) {
                            var J = D[0], c = D[1];
                            P += J, X += c, q += J, Y += c, T += J, Z += c, S += J, a += c, o += J, h += c, v += J, N += c
                        }
                        y.push(P, X, q, Y, T, Z, S, a, o, h, v, N)
                    }
                    W && (R = Q.getBodyColor(M) || Q.getFaceBlend(M, U), R ? nf(W, R, 6) : ll(W, ag, 6))
                }
            }, zh = function (F, v, B, s) {
                var t = F.getGL(), C = F._prg, Y = F._buffer;
                if (!F.drawFilter && !Xi(v)) {
                    Ci(F), ib(t, C);
                    for (var p in v) {
                        var P = v[p];
                        if (!(s && !P.T || !s && P.T)) {
                            P.invalidate ? (P.invalidate = !1, Ef(P, "vs"), Ef(P, "cs"), Ef(P, "ls"), Ef(P, "ps")) : B && Ef(P, "ps");
                            var X = P.vs32, S = B ? P.ps32 : P.cs32;
                            Ql(t, C, P.W, o, Y.vs, X);
                            var _ = P.D, d = !F._dashDisabled && _;
                            Po(t, C.uAlphaTest, k.alphaTest), d && (Po(t, C.uDash, !0), Po(t, C.uDashDistance, _), Po(t, C.uDashGapDistance, P.G), Af(t, C.aLineDistance), th(t, Y.lineDistance, P.ls32, C.aLineDistance, 1), Po(t, C.uDiffuse, P.A || k["color.empty"]));
                            var D = !F._batchColorDisabled;
                            D && (Po(t, C.uBatchColor, !0), Af(t, C.aBatchColor), th(t, Y.batchColor, S, C.aBatchColor, 4)), gl(t), lo(t, 0, X.length / 3, t.LINES), Se(t), D && (Po(t, C.uBatchColor, !1), kn(t, C.aBatchColor)), d && (Po(t, C.uDash, !1), kn(t, C.aLineDistance))
                        }
                    }
                    jd(t, C)
                }
            }, hk = function (H, J, u) {
                var w, E, r, X, e, B, Q, c, W, D, i, h = H.getGL(), C = H._prg, z = H._buffer, V = H._batchModelMap;
                if (!Xi(V)) {
                    Ci(H);
                    for (w in V) if (E = fe[w] || Cq, !(u && !E.transparent || !u && E.transparent) && (r = V[w], J || !E.transparentMask)) {
                        var I = u && E.autoSort !== !1 && (H._33Q || r.invalidate);
                        if (r.invalidate ? (r.invalidate = !1, Ef(r, "vs"), Ef(r, "ns"), Ef(r, "cs"), Ef(r, "rs"), Ef(r, "ps"), Ef(r, "bs"), Ef(r, "uv")) : J && Ef(r, "ps"), e = r.vs32, B = J ? r.ps32 : r.cs32, W = r.uv32, Q = r.bs32, c = r.rs32, i = e.length / 3, I && (r.is = fm(e, H.getEye())), i) {
                            X = E.light, D = H.getTexture(E.image), xm(h, C, o, E.light, E.opacity, E.reverseFlip, E.reverseColor, E.reverseCull), B ? H._batchColorDisabled || (Po(h, C.uBatchColor, !0), Af(h, C.aBatchColor), th(h, z.batchColor, B, C.aBatchColor, 4)) : Po(h, C.uDiffuse, E.color || k["color.empty"]);
                            var m = E.alphaTest;
                            Po(h, C.uAlphaTest, m === v ? k.alphaTest : m);
                            var n = Q && !H._batchBlendDisabled;
                            n && (Po(h, C.uBatchBlend, !0), Af(h, C.aBatchBlend), th(h, z.batchBlend, Q, C.aBatchBlend));
                            var Z = c && !H._batchBrightnessDisabled;
                            Z && (Po(h, C.uBatchBrightness, !0), Af(h, C.aBatchBrightness), th(h, z.batchBrightness, c, C.aBatchBrightness, 1)), W ? gl(h, C, D, E.discardSelectable, z.uv, W, E.uvOffset, E.uvScale) : gl(h), th(h, z.vs, e, C.aPosition), th(h, z.ns, r.ns32, C.aNormal), r.is ? (Tj(h, z.is, r.is), Ck(h, 0, i)) : lo(h, 0, i), W ? Se(h, C, D) : Se(h), B && !H._batchColorDisabled && (Po(h, C.uBatchColor, !1), kn(h, C.aBatchColor)), n && (Po(h, C.uBatchBlend, !1), kn(h, C.aBatchBlend)), Z && (Po(h, C.uBatchBrightness, !1), kn(h, C.aBatchBrightness)), wi(h, C)
                        }
                    }
                }
            }, fm = function (g, x) {
                for (var h = g.length / 3, _ = new Array(h), J = h / 3, I = new Array(J), H = 0; J > H; H++) I[H] = H;
                I.sort(function (t, U) {
                    var j = 9 * t,
                        Y = [(g[j] + g[j + 3] + 2 * g[j + 6]) / 4, (g[j + 1] + g[j + 4] + 2 * g[j + 7]) / 4, (g[j + 2] + g[j + 5] + 2 * g[j + 8]) / 4];
                    j = 9 * U;
                    var H = [(g[j] + g[j + 3] + 2 * g[j + 6]) / 4, (g[j + 1] + g[j + 4] + 2 * g[j + 7]) / 4, (g[j + 2] + g[j + 5] + 2 * g[j + 8]) / 4],
                        P = vl(x, Y) - vl(x, H);
                    return P > 0 ? -1 : 0 > P ? 1 : 0
                });
                for (var H = 0; J > H; H++) {
                    var C = 3 * H, B = 3 * I[H];
                    _[C] = B, _[C + 1] = B + 1, _[C + 2] = B + 2
                }
                return new Aj(_)
            }, vm = {
                obj: function (j, T) {
                    var B = {
                        mat: j.mat,
                        s3: j.s3,
                        r3: j.r3,
                        rotationMode: j.rotationMode,
                        t3: j.t3,
                        cube: j.cube == o ? !0 : j.cube,
                        center: j.center == o ? !0 : j.center,
                        ignoreMtls: j.ignoreMtls,
                        ignoreTransparent: j.ignoreTransparent,
                        ignoreColor: j.ignoreColor,
                        ignoreImage: j.ignoreImage,
                        ignoreNormal: j.ignoreNormal,
                        prefix: j.prefix,
                        flipY: j.flipY,
                        flipFace: j.flipFace,
                        reverseFlipMtls: j.reverseFlipMtls,
                        finishFunc: function (q, L) {
                            if (q) {
                                var L = [];
                                for (var o in q) {
                                    var r = q[o];
                                    L.rawS3 = r.rawS3, L.push(r), j.eachModel && j.eachModel(o, r)
                                }
                                L.json = j, T(L)
                            } else T()
                        }
                    };
                    w.loadObj(j.obj, j.mtl, B)
                }
            };
        w.getModelTypeHandlers = function () {
            return vm
        }, w.setModelTypeHandler = function (X, R) {
            vm[X] = R
        }, w.getModelTypeHandler = function (J) {
            return vm[J]
        }, w.handleModelLoaded = function () {
        }, w.handleUnfoundModel = function () {
        };
        var Oq = o, se = o, Eh = function (G) {
                Oq && !G._loadingModelView_ && (se || (se = {}), se[G._loadingModelView_ = Fb()] = G)
            }, mm = function (n, s) {
                Oq || (Oq = {});
                var z = Oq[n];
                if (z) {
                    if (z.url === s) return;
                    z.request.onload = zo, z.request.onerror = zo
                }
                var G = new Wl;
                if (Oq[n] = {request: G, url: s}, s = w.beforeLoadURL(s), s.data) {
                    var H = w.parse(s.data);
                    ab(n, H, s)
                } else {
                    G.onload = function (q) {
                        if (200 === this.status || 0 === this.status) {
                            delete Oq[n];
                            var c = w.parse(q.target.response || q.target.responseText);
                            ab(n, c, s)
                        } else bs(n, w.handleUnfoundModel(n, s) || o)
                    }, G.onerror = function () {
                        bs(n, w.handleUnfoundModel(n, s) || o)
                    };
                    var S = {};
                    S.url = encodeURI(s), S.sync = !1, G.send(S)
                }
            }, ab = function (R, v, z) {
                var T = v.modelType;
                if (!T) return bs(R, v), w.handleModelLoaded(R, v), void 0;
                var i = w.getModelTypeHandler(T);
                if (i) {
                    if (Oq || (Oq = {}), Oq[R]) return;
                    Oq[R] = !0;
                    var c = function (p) {
                        p ? (bs(R, p), w.handleModelLoaded(R, p)) : bs(R, w.handleUnfoundModel(R, z) || o)
                    };
                    i(v, c)
                } else bs(R, w.handleUnfoundModel(R, z) || o)
            }, bs = function (E, W) {
                if (bh[E] = W, delete Oq[E], Xi(Oq) && (Oq = o, se)) {
                    for (var b in se) {
                        var $ = se[b];
                        $.invalidateAll && $.invalidateAll(v, "modelLoaded", E), $.redraw && $.redraw(), $.iv(), delete $._loadingModelView_
                    }
                    se = o
                }
                if (W && se) for (var b in se) {
                    var $ = se[b];
                    $.invalidateAll && $.invalidateAll(v, "modelLoading", E), $.redraw && $.redraw(), $.iv()
                }
            }, ze = new zk([0, 0, 0, 1, 1, 1, 1, 0]), Bo = new zk([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),
            fl = new Aj([0, 1, 2, 2, 3, 0]),
            we = new zk([-.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5]),
            Eo = new Aj([0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23]),
            _d = new zk([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]),
            lg = nq(we, Eo),
            Ko = (new zk([-.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, -.5, -.5, .5, .5, -.5, -.5, -.5, -.5, -.5, .5, -.5]), new Aj([0, 1, 2, 3, 0, 7, 5, 4, 6, 7, 5, 3, 2, 4, 6, 1]), [Pq, es, Kl, Ym, Tp, Mh]),
            Yf = [-.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, .5, .5, .5, .5, .5, -.5, .5, -.5, .5, .5, -.5, -.5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5],
            qb = [-.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4],
            Zg = function (z, H, A, u, O, d) {
                d = d || 16, z = z || 16, H = H || 0, A = A || z;
                var U, h, E, l, t, F, K, $, M = .5, _ = [], k = [], Q = C / z, S = Y / d;
                for (U = 0; d > U; U++) for (t = U + 1, l = U * S, $ = t * S, h = H; A > h; h++) F = h + 1, E = h * Q, K = F * Q, _.push(M * J(l) * c(E), M * c(l), -M * J(l) * J(E), M * J($) * c(K), M * c($), -M * J($) * J(K), M * J(l) * c(K), M * c(l), -M * J(l) * J(K), M * J(l) * c(E), M * c(l), -M * J(l) * J(E), M * J($) * c(E), M * c($), -M * J($) * J(E), M * J($) * c(K), M * c($), -M * J($) * J(K)), k.push(h / z, U / d, F / z, t / d, F / z, U / d, h / z, U / d, h / z, t / d, F / z, t / d);
                if (u) {
                    var W = [], g = [];
                    for (E = H * Q, U = 0; d > U; U++) t = U + 1, l = U * S, $ = t * S, W.push(0, 0, 0, M * J($) * c(E), M * c($), -M * J($) * J(E), M * J(l) * c(E), M * c(l), -M * J(l) * J(E)), g.push(0, .5, H / z, t / d, H / z, U / d)
                }
                if (O) {
                    var e = [], v = [];
                    for (E = A * Q, U = 0; d > U; U++) t = U + 1, l = U * S, $ = t * S, e.push(0, 0, 0, M * J(l) * c(E), M * c(l), -M * J(l) * J(E), M * J($) * c(E), M * c($), -M * J($) * J(E)), v.push(1, .5, A / z, U / d, A / z, t / d)
                }
                return {vs: _, uv: k, from_vs: W, from_uv: g, to_vs: e, to_uv: v}
            }, $j = function (n, g, A) {
                n = n || .17, g = g || 12, A = A || 18, 0 > n ? n = 0 : n > .25 && (n = .25);
                var d, T, x, a, K, z, U, b = .5, F = [], Z = [], o = [], S = C / A, f = C / g, I = b - n;
                for (T = 0; g >= T; T++) for (a = -Y + T * f, z = c(a), K = J(a), d = 0; A >= d; d++) x = d * S, U = I + n * z, F.push(c(x) * U, K * n, -J(x) * U), Z.push(d / A, 1 - T / g);
                for (T = 0; g > T; T++) {
                    var y = T * (A + 1), D = (T + 1) * (A + 1);
                    for (d = 0; A > d; d++) o.push(y + d, D + d + 1, D + d, y + d, y + d + 1, D + d + 1)
                }
                return {vs: F, uv: Z, is: o}
            }, dc = function (r, g, x, K, j, W, Q) {
                Q = Q || 12, r = r || 18, g = g || 0, x = x || r, W = W || .17, 0 > W ? W = 0 : W > .25 && (W = .25);
                var q, L, M, p, f, z, $, Z, o, B, O = .5, e = [], P = [], T = C / r, y = C / Q, i = O - W;
                for (M = 0; Q > M; M++) for (p = M + 1, $ = -Y + M * y, Z = -Y + p * y, q = g; x > q; q++) L = q + 1, f = q * T, z = L * T, o = i + W * c($), B = i + W * c(Z), e.push(c(f) * o, J($) * W, -J(f) * o, c(z) * o, J($) * W, -J(z) * o, c(z) * B, J(Z) * W, -J(z) * B, c(f) * o, J($) * W, -J(f) * o, c(z) * B, J(Z) * W, -J(z) * B, c(f) * B, J(Z) * W, -J(f) * B), P.push(q / r, 1 - M / Q, L / r, 1 - M / Q, L / r, 1 - p / Q, q / r, 1 - M / Q, L / r, 1 - p / Q, q / r, 1 - p / Q);
                if (K) {
                    var U = [], D = [];
                    for (M = 0; Q > M; M++) p = M + 1, $ = -Y + M * y, Z = -Y + p * y, f = g * T, o = i + W * c($), B = i + W * c(Z), U.push(c(f) * o, J($) * W, -J(f) * o, c(f) * B, J(Z) * W, -J(f) * B, c(f) * i, 0, -J(f) * i), D.push(.5 + .5 * c($), .5 - .5 * J($), .5 + .5 * c(Z), .5 - .5 * J(Z), .5, .5)
                }
                if (j) {
                    var V = [], A = [];
                    for (M = 0; Q > M; M++) p = M + 1, $ = -Y + M * y, Z = -Y + p * y, f = x * T, o = i + W * c($), B = i + W * c(Z), V.push(c(f) * o, J($) * W, -J(f) * o, c(f) * i, 0, -J(f) * i, c(f) * B, J(Z) * W, -J(f) * B), A.push(.5 - .5 * c($), .5 - .5 * J($), .5, .5, .5 - .5 * c(Z), .5 - .5 * J(Z))
                }
                return {vs: e, uv: P, from_vs: U, from_uv: D, to_vs: V, to_uv: A}
            }, to = function (v, A) {
                for (var t, s, u, R = .5, G = 16, j = [], x = [], F = [], H = C / G, Y = 0; G >= Y; Y++) t = Y * H, s = c(t) * R, u = J(t) * R, j.push(s, -R, u, s, R, u), x.push(1 - Y / G, 1, 1 - Y / G, 0);
                for (Y = 0; G > Y; Y++) F.push(2 * Y, 2 * Y + 1, 2 * Y + 3, 2 * Y, 2 * Y + 3, 2 * Y + 2);
                if (A) {
                    var o = [], g = [], E = [];
                    for (o.push(0, -R, 0), g.push(.5, .5), Y = 0; G >= Y; Y++) t = Y * H, s = c(t), u = J(t), o.push(s * R, -R, -u * R), g.push(.5 + .5 * s, .5 + .5 * u);
                    for (Y = 0; G > Y; Y++) E.push(0, Y + 2, Y + 1)
                }
                if (v) {
                    var L = [], I = [], m = [];
                    for (L.push(0, R, 0), I.push(.5, .5), Y = 0; G >= Y; Y++) t = Y * H, s = c(t), u = J(t), L.push(s * R, R, -u * R), I.push(.5 + .5 * s, .5 - .5 * u);
                    for (Y = 0; G > Y; Y++) m.push(0, Y + 1, Y + 2)
                }
                return {vs: j, uv: x, is: F, bottom_vs: o, bottom_uv: g, bottom_is: E, top_vs: L, top_uv: I, top_is: m}
            }, Re = function (I, A, w, d, K, $, v) {
                I = I || 12, A = A || 0, w = w || I;
                for (var B, _, x, G, n, F, m, Y, X = .5, l = [], b = [], Q = C / I, e = A; w > e; e++) B = e + 1, _ = e * Q, x = B * Q, G = c(_) * X, n = J(_) * X, F = c(x) * X, m = J(x) * X, l.push(G, -X, -n, F, -X, -m, G, X, -n, F, -X, -m, F, X, -m, G, X, -n), b.push(e / I, 1, B / I, 1, e / I, 0, B / I, 1, B / I, 0, e / I, 0);
                if (v) {
                    var M = [], t = [];
                    for (e = A; w > e; e++) _ = Q * e, x = Q * (e + 1), G = c(_), n = J(_), F = c(x), m = J(x), M.push(G * X, -X, -n * X, 0, -X, 0, F * X, -X, -m * X), t.push(.5 + .5 * G, .5 + .5 * n, .5, .5, .5 + .5 * F, .5 + .5 * m)
                }
                if ($) {
                    var D = [], h = [];
                    for (e = A; w > e; e++) _ = Q * e, x = Q * (e + 1), G = c(_), n = J(_), F = c(x), m = J(x), D.push(G * X, X, -n * X, F * X, X, -m * X, 0, X, 0), h.push(.5 + .5 * G, .5 - .5 * n, .5 + .5 * F, .5 - .5 * m, .5, .5)
                }
                if (d) {
                    var p = [], i = [];
                    _ = Q * A, G = c(_) * X, n = J(_) * X, Y = A / I, p.push(0, X, 0, 0, -X, 0, G, -X, -n, G, -X, -n, G, X, -n, 0, X, 0), i.push(0, 0, 0, 1, Y, 1, Y, 1, Y, 0, 0, 0)
                }
                if (K) {
                    var O = [], j = [];
                    _ = Q * w, G = c(_) * X, n = J(_) * X, Y = w / I, O.push(0, -X, 0, 0, X, 0, G, X, -n, G, X, -n, G, -X, -n, 0, -X, 0), j.push(1, 1, 1, 0, Y, 0, Y, 0, Y, 1, 1, 1)
                }
                return {
                    vs: l,
                    uv: b,
                    bottom_vs: M,
                    bottom_uv: t,
                    top_vs: D,
                    top_uv: h,
                    from_vs: p,
                    from_uv: i,
                    to_vs: O,
                    to_uv: j
                }
            }, Fm = function (H, K, w, k, G) {
                K = K || 18, w = w || 0, k = k == o ? C : k, G = G == o ? .5 : G;
                for (var U, i, L, S, m, N, V = [0, .5, .75, .875, .9375], B = [], z = [], T = [], q = k / K, D = 0; D < V.length; D++) {
                    var s = 0 === D % 2 ? 0 : .5;
                    for (U = 0; K >= U; U++) i = (U + s) * q + w, L = 1 - V[D], B.push(c(i) * G * L, -G + 2 * V[D] * G, -J(i) * G * L), z.push((U + s) / K, L)
                }
                for (D = 0; D < V.length - 1; D++) {
                    var M = D * (K + 1), r = (D + 1) * (K + 1);
                    for (U = 0; K > U; U++) T.push(M + U, r + U + 1, r + U, M + U, M + U + 1, r + U + 1)
                }
                for (N = B.length / 3 - (K + 1), U = 0; K > U; U++) B.push(0, G, 0), z.push((U + .5) / K, 0);
                for (U = 0; K > U; U++) T.push(N + U, N + U + 1, N + (K + 1) + U);
                if (H) {
                    var O = [], y = [], j = [];
                    for (O.push(0, -G, 0), y.push(.5, .5), U = 0; K >= U; U++) i = U * q + w, S = c(i), m = J(i), O.push(S * G, -G, -m * G), y.push(.5 + .5 * S, .5 + .5 * m);
                    for (U = 0; K > U; U++) j.push(0, U + 2, U + 1)
                }
                return {vs: B, uv: z, is: T, bottom_vs: O, bottom_uv: y, bottom_is: j}
            }, Ak = function (o, t, z, u, X, D) {
                o = o || 16, t = t || 0, z = z || o;
                for (var S = .5, I = [], R = [], r = C / o, K = t; z > K; K++) {
                    var n = K + 1, Z = r * K, w = r * n;
                    I.push(c(Z) * S, -S, -J(Z) * S, c(w) * S, -S, -J(w) * S, 0, S, 0), R.push(K / o, 1, n / o, 1, (K + n) / 2 / o, 0)
                }
                if (D) {
                    var Q = [], _ = [];
                    for (K = t; z > K; K++) {
                        Z = r * K, w = r * (K + 1);
                        var e = c(Z), y = J(Z), s = c(w), O = J(w);
                        Q.push(e * S, -S, -y * S, 0, -S, 0, s * S, -S, -O * S), _.push(.5 + .5 * e, .5 + .5 * y, .5, .5, .5 + .5 * s, .5 + .5 * O)
                    }
                }
                if (u) {
                    var v = [], E = [];
                    Z = r * t, v.push(0, S, 0, 0, -S, 0, c(Z) * S, -S, -J(Z) * S), E.push(0, 0, 0, 1, t / o, 1)
                }
                if (X) {
                    var Y = [], q = [];
                    Z = r * z, Y.push(0, -S, 0, 0, S, 0, c(Z) * S, -S, -J(Z) * S), q.push(1, 1, 1, 0, z / o, 1)
                }
                return {vs: I, uv: R, bottom_vs: Q, bottom_uv: _, from_vs: v, from_uv: E, to_vs: Y, to_uv: q}
            }, _h = function (t, g, P, X, B, i, A, n) {
                for (var Z = [], h = 0; h < t.length - 1; h += 2) Z.push({x: t[h], y: t[h + 1]});
                return Hb(Z, g, P, X, B, i, A, n, !1)
            }, Tg = {
                roundRect: function (L, g) {
                    return _h([.5, .4, .5, .442, .471, .471, .442, .5, .4, .5, -.4, .5, -.442, .5, -.471, .471, -.5, .442, -.5, .4, -.5, -.4, -.5, -.442, -.471, -.471, -.442, -.5, -.4, -.5, .4, -.5, .442, -.5, .471, -.471, .5, -.442, .5, -.4, .5, .4], [1, 3, 3, 2, 3, 3, 2, 3, 3, 2, 3, 3, 2], L, g, 3)
                }, star: function (u, Y) {
                    return _h([.193, .079, .333, .5, 0, .233, -.333, .5, -.194, .079, -.5, -.167, -.112, -.167, 0, -.5, .111, -.167, .5, -.167], [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5], u, Y)
                }, rect: function (_, B) {
                    return _h([.5, -.5, .5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 2, 5], _, B)
                }, billboard: function () {
                    return {
                        vs: [-.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, -.5, 0],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]
                    }
                }, plane: function () {
                    return {
                        vs: [-.5, 0, -.5, -.5, 0, .5, .5, 0, -.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0]
                    }
                }, triangle: function (O, B) {
                    return _h([0, -.5, .5, .5, -.5, .5], [1, 2, 2, 5], O, B)
                }, rightTriangle: function (s, R) {
                    return _h([.5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 5], s, R)
                }, parallelogram: function (F, j) {
                    return _h([.5, -.5, .25, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], F, j)
                }, trapezoid: function (K, G) {
                    return _h([.25, -.5, .5, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], K, G)
                }
            }, aq = {sphere: 1, cylinder: 1, cone: 1, torus: 1}, Mo = {torus: 1, sphere: 1}, Cf = Mm(Ah(Tg), {cylinder: 1}),
            Vf = Mm(Ah(Tg), {cylinder: 1, cone: 1}), Qd = function (b, l, D) {
                var o, Q = pe(b.anchor3d, D, l), C = pe(b.mat, D, l), F = pe(b.s3, D, l), x = pe(b.t3, D, l),
                    W = pe(b.r3, D, l), O = F || W || x || C;
                if (Q || O) {
                    o = ah(l._6O);
                    var f = O ? Hg(C, F, W, pe(b.rotationMode, D, l), x) : Nd();
                    Q && uj(f, [.5 - Q[0], .5 - Q[1], .5 - Q[2]]), Ci(l, f)
                }
                return o
            }, xo = function (T, S, v, u, n, f, A) {
                if (Ll(v)) v.forEach(function (d) {
                    xo(T, S, d, u, n, f, A)
                }); else if (uf(v)) xo(T, S, bi(u, v), u, n, f, A); else if (bc(v)) if (v.shape3d) {
                    var Q = Qd(v, T, S);
                    xo(T, S, v.shape3d, u, n, f, v), Q && Zo(T, Q)
                } else Df(T, S, v, u.s, n, f, A)
            }, Df = function (R, e, Z, $, V, r, j) {
                if (j = j || Cq, !r || r($("shape3d.transparent", Z.transparent, j.transparent))) {
                    var D = Qd(Z, R, e);
                    tk(Z);
                    var A = R._26I, M = R._prg, z = R._buffer, f = $("shape3d.color", Z.color, j.color);
                    V || (V = $("shape3d.blend", Z.blend, j.blend));
                    var d, P = Z.opacity == o ? j.opacity : Z.opacity, F = $("shape3d.opacity");
                    d = F != o && P != o ? P * F : P != o ? P : F, xm(A, M, V, $("shape3d.light", Z.light, j.light), d, $("shape3d.reverse.flip", Z.reverseFlip, j.reverseFlip), $("shape3d.reverse.color", Z.reverseColor, j.reverseColor), $("shape3d.reverse.cull", Z.reverseCull, j.reverseCull));
                    var c = $("polygonOffset", Z.polygonOffset, j.polygonOffset);
                    Z.vs && $(sj, Z.visible, j.visible) && zs(A, M, z, f, R.getTexture($("shape3d.image", Z.image, j.image), e), $("shape3d.discard.selectable", Z.discardSelectable, j.discardSelectable), Z.vs, Z.uv, Z.ns, Z.is, $("shape3d.uv.offset", Z.uvOffset, j.uvOffset), $("shape3d.uv.scale", Z.uvScale, j.uvScale), c), Z.top_vs && $(ji, Z.topVisible, j.topVisible) && zs(A, M, z, $("shape3d.top.color", Z.topColor, j.topColor) || f, R.getTexture($("shape3d.top.image", Z.topImage, j.topImage), e), $("shape3d.top.discard.selectable", Z.topDiscardSelectable, j.topDiscardSelectable), Z.top_vs, Z.top_uv, Z.top_ns, Z.top_is, $("shape3d.top.uv.offset", Z.topUvOffset, j.topUvOffset), $("shape3d.top.uv.scale", Z.topUvScale, j.topUvScale), c), Z.bottom_vs && $(Am, Z.bottomVisible, j.bottomVisible) && zs(A, M, z, $("shape3d.bottom.color", Z.bottomColor, j.bottomColor) || f, R.getTexture($("shape3d.bottom.image", Z.bottomImage, j.bottomImage), e), $("shape3d.bottom.discard.selectable", Z.bottomDiscardSelectable, j.bottomDiscardSelectable), Z.bottom_vs, Z.bottom_uv, Z.bottom_ns, Z.bottom_is, $("shape3d.bottom.uv.offset", Z.bottomUvOffset, j.bottomUvOffset), $("shape3d.bottom.uv.scale", Z.bottomUvScale, j.bottomUvScale), c), Z.from_vs && $(dg, Z.fromVisible, j.fromVisible) && zs(A, M, z, $("shape3d.from.color", Z.fromColor, j.fromColor) || f, R.getTexture($("shape3d.from.image", Z.fromImage, j.fromImage), e), $("shape3d.from.discard.selectable", Z.fromDiscardSelectable, j.fromDiscardSelectable), Z.from_vs, Z.from_uv, Z.from_ns, Z.from_is, $("shape3d.from.uv.offset", Z.fromUvOffset, j.fromUvOffset), $("shape3d.from.uv.scale", Z.fromUvScale, j.fromUvScale), c), Z.to_vs && $(gm, Z.toVisible, j.toVisible) && zs(A, M, z, $("shape3d.to.color", Z.toColor, j.toColor) || f, R.getTexture($("shape3d.to.image", Z.toImage, j.toImage), e), $("shape3d.to.discard.selectable", Z.toDiscardSelectable, j.toDiscardSelectable), Z.to_vs, Z.to_uv, Z.to_ns, Z.to_is, $("shape3d.to.uv.offset", Z.toUvOffset, j.toUvOffset), $("shape3d.to.uv.scale", Z.toUvScale, j.toUvScale), c), wi(A, M), D && Zo(R, D)
                }
            }, zs = function (f, A, G, v, H, B, r, n, V, s, p, U, w) {
                r && (w && un(f, w), Po(f, A.uDiffuse, v || k["color.empty"]), n ? gl(f, A, H, B, G.uv, n, p, U) : gl(f), th(f, G.vs, r, A.aPosition), th(f, G.ns, V, A.aNormal), s ? (Bq(f, G.is, s), Ck(f, 0, s.length)) : lo(f, 0, r.length / 3), n ? Se(f, A, H) : Se(f), w && zc(f))
            }, bi = function (c, g) {
                var D = c.s;
                if (g || (g = D(vb)), !g) return o;
                var T = Qn(g);
                if (T) return T;
                if ("text" === g) {
                    var O = {
                        amount: D("shape3d.text.amount"),
                        size: D("shape3d.text.size"),
                        font: D("shape3d.text.font"),
                        style: D("shape3d.text.style"),
                        weight: D("shape3d.text.weight"),
                        fill: D("shape3d.text.fill"),
                        curveSegments: D("shape3d.text.curveSegments"),
                        spacing: D("shape3d.text.spacing")
                    }, B = c.gv.getShape3dText(c.data), s = B;
                    for (var _ in O) s += "_" + (O[_] === v ? "U" : O[_]);
                    return c._cachedTextKey === s ? c._cachedTextGeometry : (c._cachedTextKey = s, c._cachedTextGeometry = w.createTextGeometry(B, O))
                }
                var _ = g;
                if (aq[g]) {
                    var Y = D("shape3d.side"), u = D("shape3d.side.from"), d = D("shape3d.side.to"), L = D(dg), z = D(gm);
                    3 > Y ? (Y = 0, u = 0, d = 0, L = !1, z = !1) : ((u == o || 0 > u) && (u = 0), (d == o || d > Y) && (d = Y), 0 === u && d === Y && (L = !1, z = !1)), _ += "-" + Y + "-" + u + "-" + d + "-" + L + "-" + z
                }
                if (Cf[g]) {
                    var x = D(ji);
                    _ += "-" + x
                }
                if (Vf[g]) {
                    var l = D(Am);
                    _ += "-" + l
                }
                if ("torus" === g) {
                    var P = D("shape3d.torus.radius");
                    0 > P ? P = 0 : P > .25 && (P = .25), _ += "-" + P
                }
                if (Mo[g]) {
                    var h = D(Jk);
                    _ += "-" + h
                }
                return T = If[_], T || ("box" === g ? T = w.createBoxModel() : Tg[g] ? T = Tg[g](x, l) : "sphere" === g ? T = w.createSphereModel(Y, u, d, L, z, h) : g === Rr ? T = w.createCylinderModel(Y, u, d, L, z, x, l) : "cone" === g ? T = w.createConeModel(Y, u, d, L, z, l) : "torus" === g && (T = w.createTorusModel(Y, u, d, L, z, P, h)), If[_] = T), T
            }, tk = function () {
                var y = ["vs", "ns", "uv", "top_vs", "top_ns", "top_uv", "bottom_vs", "bottom_ns", "bottom_uv", "from_vs", "from_ns", "from_uv", "to_vs", "to_ns", "to_uv", "er", "al"],
                    V = ["is", "top_is", "bottom_is", "from_is", "to_is"];
                return $ = vp(Xo.substr(Xo.indexOf("^#") + 2)), ad(w[vg(Hp + y[15] + "n" + y[16])]()) && iq() ? function (i) {
                    i && !i._complete_ && (i._complete_ = !0, i.vs && Al(i.ns) && (i.ns = nq(i.vs, i.is)), i.top_vs && Al(i.top_ns) && (i.top_ns = nq(i.top_vs, i.top_is)), i.bottom_vs && Al(i.bottom_ns) && (i.bottom_ns = nq(i.bottom_vs, i.bottom_is)), i.from_vs && Al(i.from_ns) && (i.from_ns = nq(i.from_vs, i.from_is)), i.to_vs && Al(i.to_ns) && (i.to_ns = nq(i.to_vs, i.to_is)), y.forEach(function (T) {
                        var E = i[T];
                        Ll(E) && (i[T] = new zk(E))
                    }), V.forEach(function (G) {
                        var I = i[G];
                        Ll(I) && (i[G] = new Aj(I))
                    }))
                } : void 0
            }(), eg = function (T, E) {
                var x = T[E];
                Ll(x) && (T[E] = new zk(x))
            };
        Mm(Pg, {
            _25Q: function (G) {
                G._16O = function (K, n, $, A, U, w, q, F, a) {
                    var h = this.info;
                    if (h) {
                        var k, Z, D, y, p, M, S = Nd();
                        if (Yo[n] ? (k = h.p3, Z = h.c1, D = h.c2) : uc[n] ? (Z = h.s1 || h.c1, D = h.s2 || h.c2) : (Z = h.t1 || h.c1, D = h.t2 || h.c2), k) M = Pm(n, Rn, $, A, F, a); else {
                            var T = sg(D, Z), g = vl(Z, D);
                            y = [0, -N(T[2], T[0]), I(T[1] / g)], p = "zyx", k = [(Z[0] + D[0]) / 2, (Z[1] + D[1]) / 2, (Z[2] + D[2]) / 2], M = Pm(n, [g, 0, 0], $, A, F, a)
                        }
                        return tj(S, M, k, A, U, w, q, K, y, p)
                    }
                    return gr
                }, G._80o = function (J, _, q) {
                    var T = this, g = T.shapeModel;
                    if (g) {
                        var k = T.gv;
                        Ci(k), xo(k, T.data, g, T, T.getBodyColor(), q)
                    }
                }, G.createLineModel = function (w, V, l, m, C) {
                    for (var q = this, b = q.s, W = yr(w, V, b(Jk)), Y = [], u = 0; u < W.length; u++) {
                        var H = W[u], J = H.length;
                        if (J > 1) {
                            var z = H[0];
                            Y.push(z.x, z.y, z.z);
                            for (var h = 1; J - 1 > h; h++) z = H[h], Y.push(z.x, z.y, z.z), Y.push(z.x, z.y, z.z);
                            z = H[J - 1], Y.push(z.x, z.y, z.z)
                        }
                    }
                    var x, O, B, U = b(m + ".color"), X = b(C), s = 0;
                    return X && (O = b(C + ".color"), x = b(C + ".pattern"), s = b(C + ".offset"), B = U), jh(q.gv, q.data, Y, O || U, B ? o : b(m + ".gradient.color"), l, x || b(m + ".pattern"), s, B), W
                }, G.createTubeModel = function (O, B, X, $) {
                    for (var y = this, l = y.s, Z = l("shape3d.side") || rd, I = l("shape3d.start.angle"), f = l("shape3d.sweep.angle"), Q = l(ji) ? l("shape3d.top.cap") : o, V = l(Am) ? l("shape3d.bottom.cap") : o, G = "flat" === Q, D = "flat" === V, J = G && ($ ? $.uv : l("shape3d.top.image")), k = D && ($ ? $.uv : l("shape3d.bottom.image")), U = $ ? $.uv : l("shape3d.image"), K = {
                        vs: [],
                        uv: U ? [] : o,
                        top_vs: G ? [] : o,
                        top_uv: J ? [] : o,
                        bottom_vs: D ? [] : o,
                        bottom_uv: k ? [] : o
                    }, b = yr(O, B, l(Jk), X), m = 0, P = b.length; P > m; m++) Ir(K, b[m], l(np), X, Z, I, f, Q, V);
                    if ($) {
                        var p = [];
                        Gl(y.gv, y.data, K, y, y.getBodyColor(), [], $, p), p.length && (ll($.vs, p), ll($.ns, nq(p)))
                    } else y.shapeModel = K;
                    return b
                }, G.getCache = function () {
                    var P = this.info;
                    if (P) {
                        var t = P.list;
                        if (t) {
                            var h = P.cache;
                            return h || (h = P.cache = jn(t)), h
                        }
                    }
                    return o
                }
            }
        });
        var Lb = function (S, y) {
            for (var L, w = 0, P = S.length, a = 0, K = P - 1; K >= a;) if (w = V(a + (K - a) / 2), L = S[w].length - y, 0 > L) a = w + 1; else {
                if (!(L > 0)) {
                    K = w;
                    break
                }
                K = w - 1
            }
            w = K;
            var m = S[w], j = m.point;
            return w === P - 1 || m.length === y || (j = (new Gd).subVectors(S[w + 1].point, j).normalize().multiplyScalar(y - m.length).add(j)), {
                point: j,
                tangent: m.tangent
            }
        }, jn = function (t) {
            for (var q, x, J = [], l = 0, W = 0; W < t.length; W++) {
                for (var p = t[W], g = 0; g < p.length; g++) {
                    q = p[g], x && (l += x.distanceTo(q));
                    var b = new Gd, L = p[g + 1];
                    L ? b.subVectors(L, q) : x ? b.subVectors(q, x) : b.x = 1, b.normalize(), J.push({
                        point: q,
                        length: l,
                        tangent: b
                    }), x = q
                }
                x = null
            }
            return J
        }, yr = function (z, k, s, W) {
            s = s || Nq;
            for (var F = [], x = 0, U = z.size(); U > x; x++) {
                var p = z.get(x);
                F.push(new Gd(p.x, p.e || 0, p.y))
            }
            k && (ki(k) && (k = k._as), k.length || (k = null));
            for (var y, l, L, b, Q, u = [], S = 0, K = 0, B = k ? k.length : U; B > K; K++) if (Q = k ? k[K] : 0 === K ? 1 : 2, 1 === Q) u.push(L = []), L.push(F[S++]); else if (2 === Q || 5 === Q) if (b = 2 === Q ? F[S++] : L[0], W) {
                var c = k ? k[K + 1] : B > K + 1 ? 2 : o;
                if (2 === c || 5 === c) {
                    var R = L[L.length - 1], d = 2 === c ? F[S] : L[0], h = (new Gd).subVectors(R, b),
                        E = (new Gd).subVectors(d, b), T = h.length(), w = E.length();
                    if (T && w) if (W > T / 2 && W > w / 2) L.push(b); else for (h.multiplyScalar(g(W, T / 2) / T).add(b), E.multiplyScalar(g(W, w / 2) / w).add(b), y = new Ed(h, b, E).getPoints(s), l = 0; s >= l; l++) L.push(y[l])
                } else L.push(b)
            } else L.push(b); else if (3 === Q) for (y = new Ed(L[L.length - 1], F[S++], F[S++]).getPoints(s), l = 1; s >= l; l++) L.push(y[l]); else if (4 === Q) for (y = new Sl(L[L.length - 1], F[S++], F[S++], F[S++]).getPoints(s), l = 1; s >= l; l++) L.push(y[l]);
            return u
        }, _j = function (U) {
            for (var f, L, D = new Gd, s = [], c = [], N = [], y = 0, $ = U.length; $ > y; y++) f = U[y], L = U[y + 1], L ? D.subVectors(L, f) : D.subVectors(f, U[y - 1]), s.push(D.normalize().clone());
            var E, q, A, k, d = new Gd, K = new Gd, g = new Yi, X = 1e-4, w = Number.MAX_VALUE, W = s[0],
                Y = c[0] = new Gd, I = N[0] = new Gd;
            for (q = M(W.x), A = M(W.y), k = M(W.z), w >= q && (w = q, d.set(1, 0, 0)), w >= A && (w = A, d.set(0, 1, 0)), w >= k && d.set(0, 0, 1), K.crossVectors(W, d).normalize(), Y.crossVectors(W, K), I.crossVectors(W, Y), y = 1; $ > y; y++) c[y] = c[y - 1].clone(), N[y] = N[y - 1].clone(), K.crossVectors(s[y - 1], s[y]), K.length() > X && (K.normalize(), E = a(Fi(s[y - 1].dot(s[y]), -1, 1)), c[y].applyMatrix4(g.makeRotationAxis(K, E))), N[y].crossVectors(s[y], c[y]);
            return {B: N, T: s, N: c}
        }, Ir = function () {
            var Q = function (j) {
                for (var A = 1; A < arguments.length; A++) {
                    var I = arguments[A];
                    j.push(I.x, I.y, I.z)
                }
            }, z = function (e) {
                for (var $ = 1; $ < arguments.length; $++) {
                    var C = arguments[$].uv;
                    e.push(C[0], C[1])
                }
            }, a = function (n, j, X, $, s) {
                var u = -$ * c(s), H = $ * J(s);
                return new Gd(n.x + u * X.x + H * j.x, n.y + u * X.y + H * j.y, n.z + u * X.z + H * j.z)
            }, U = function (i, n, r, k, P, Z, X, H) {
                X = X || C;
                for (var x = [], f = X / P, z = 0; P >= z; z++) {
                    var W = a(i, n, r, k, z * f + Z);
                    x.push(W), H != o && (W.uv = [H, z / P])
                }
                return x
            }, Z = function (q, n, E, A, L, N, Y, l, w) {
                w = w || C;
                var s = n ? q.top_vs : q.bottom_vs;
                if (s) for (var Z = n ? q.top_uv : q.bottom_uv, T = w / Y, O = 0; Y > O; O++) {
                    var z, h;
                    n ? (z = O * T + l, h = (O + 1) * T + l) : (h = O * T + l, z = (O + 1) * T + l), Q(s, a(E, A, L, N, z), a(E, A, L, N, h), E), Z && Z.push(.5 - .5 * c(z), .5 - .5 * J(z), .5 - .5 * c(h), .5 - .5 * J(h), .5, .5)
                }
            };
            return function (d, P, I, _, c, f, C, a, q) {
                var D = P.length;
                if (D > 1) {
                    var X, L, E, x, n, $, k, B = _j(P), G = B.T, j = B.N, p = B.B;
                    "flat" === a && Z(d, !0, P[0], p[0], j[0], _, c, f, C), "flat" === q && Z(d, !1, P[D - 1], p[D - 1], j[D - 1], _, c, f, C);
                    var K, g, F = [], i = s(c / 2), N = "round" === a, Y = "round" === q, u = P[0], M = G[0], T = p[0],
                        m = j[0], S = P[D - 1], y = G[D - 1], h = p[D - 1], w = j[D - 1];
                    if (N) {
                        for (E = 1; i >= E; E++) j.splice(0, 0, m), p.splice(0, 0, T), G.splice(0, 0, M), g = -E / i * _, P.splice(0, 0, M.clone().multiplyScalar(g).add(u)), F[i - E] = e(_ * _ - g * g);
                        D += i
                    }
                    if (Y) {
                        for (E = 1; i >= E; E++) j.push(w), p.push(h), G.push(y), g = E / i * _, P.push(y.clone().multiplyScalar(g).add(S)), F[P.length - 1] = e(_ * _ - g * g);
                        D += i
                    }
                    if (d.uv) {
                        var J = 0, W = 0, l = [];
                        for (I && (J = I), n = P[0], l[0] = 0, E = 1; D > E; E++) x = P[E], l[E] = n.distanceTo(x), n = x, I || (J += l[E]);
                        for (K = [], E = 0; D > E; E++) W += l[E], K[E] = J ? W / J : 0
                    }
                    for (E = 0; D > E; E++) {
                        if (x = P[E], $ = p[E], k = j[E], X = U(x, $, k, F[E] === v ? _ : F[E], c, f, C, K ? K[E] : o), L) for (var t = 0; c > t; t++) {
                            var b = L[t], A = L[t + 1] || L[0], V = X[t], R = X[t + 1] || X[0];
                            Q(d.vs, A, b, V, V, R, A), d.uv && z(d.uv, A, b, V, V, R, A)
                        }
                        L = X
                    }
                }
            }
        }();
        Mm(w, {
            getLineLength: function (j) {
                return j[j.length - 1].length
            }, getLineOffset: function (e, z) {
                return Lb(e, z)
            }, getLineCacheInfo: function ($, k, L, y) {
                return jn(yr($, k, L, y))
            }
        });
        var fn = x.graph3d.RenderLite = {}, Bd = new Array(0), zj = fn.Buffer = function (X, q, J, H) {
            this.gl = X, this.buffer = X.createBuffer(), this.type = q || X.ARRAY_BUFFER, this.drawType = H || X.STATIC_DRAW, this.data = Bd, J && this.upload(J)
        };
        zj.prototype.upload = function (B, D, W) {
            W || this.bind();
            var h = this.gl;
            B = B || this.data, D = D || 0, this.data.byteLength >= B.byteLength ? h.bufferSubData(this.type, D, B) : h.bufferData(this.type, B, this.drawType), this.data = B
        }, zj.prototype.bind = function () {
            var g = this.gl;
            g.bindBuffer(this.type, this.buffer)
        }, zj.createVertexBuffer = function (L, q, M) {
            return new zj(L, L.ARRAY_BUFFER, q, M)
        }, zj.createIndexBuffer = function (r, X, T) {
            return new zj(r, r.ELEMENT_ARRAY_BUFFER, X, T)
        }, zj.create = function (R, e, v, M) {
            return new zj(R, e, M)
        }, zj.prototype.destroy = function () {
            this.gl.deleteBuffer(this.buffer)
        };
        var Cp = fn.Shader = function (H, e, L) {
            this.gl = H, this.program = si(H, e, L), this.attributes = Ap(H, this.program);
            var Q = Nk(H, this.program);
            this.uniforms = Vn(H, Q)
        };
        Cp.prototype.bind = function () {
            this.gl.useProgram(this.program)
        }, Cp.prototype.destroy = function () {
            this.gl
        };
        var si = function (x, z, Y) {
                var Q = Zl(x, x.VERTEX_SHADER, z), j = Zl(x, x.FRAGMENT_SHADER, Y);
                x.getShaderParameter(j, x.COMPILE_STATUS) || console.error(x.getError());
                var K = x.createProgram();
                return x.attachShader(K, Q), x.attachShader(K, j), x.linkProgram(K), x.getProgramParameter(K, x.LINK_STATUS) || (console.error("Pixi.js Error: Could not initialize shader."), console.error("gl.VALIDATE_STATUS", x.getProgramParameter(K, x.VALIDATE_STATUS)), console.error("gl.getError()", x.getError()), "" !== x.getProgramInfoLog(K) && console.warn("Pixi.js Warning: gl.getProgramInfoLog()", x.getProgramInfoLog(K)), x.deleteProgram(K), K = null), x.deleteShader(Q), x.deleteShader(j), K
            }, Zl = function (t, F, G) {
                var g = t.createShader(F);
                return t.shaderSource(g, G), t.compileShader(g), t.getShaderParameter(g, t.COMPILE_STATUS) ? g : (console.log(t.getShaderInfoLog(g)), null)
            }, Nk = function (f, R) {
                for (var B = {}, S = f.getProgramParameter(R, f.ACTIVE_UNIFORMS), Z = 0; S > Z; Z++) {
                    var $ = f.getActiveUniform(R, Z), h = $.name.replace(/\[.*?\]/, ""), i = rj(f, $.type);
                    B[h] = {type: i, size: $.size, location: f.getUniformLocation(R, h), value: fh(i, $.size)}
                }
                return B
            }, Ap = function (o, Y) {
                for (var d = {}, M = o.getProgramParameter(Y, o.ACTIVE_ATTRIBUTES), p = 0; M > p; p++) {
                    var B = o.getActiveAttrib(Y, p), z = rj(o, B.type);
                    d[B.name] = {type: z, size: mq(z), gl: o, location: o.getAttribLocation(Y, B.name), pointer: Ep}
                }
                return d
            }, Ep = function (r, k, U, Q, Z) {
                var w = this.gl;
                w.enableVertexAttribArray(this.location), w.bindBuffer(r.type, r.buffer), w.vertexAttribPointer(this.location, this.size, k || w.FLOAT, U || !1, Q || 0, Z || 0)
            }, mq = function (R) {
                return Ej[R]
            }, Ej = {
                "float": 1,
                vec2: 2,
                vec3: 3,
                vec4: 4,
                "int": 1,
                ivec2: 2,
                ivec3: 3,
                ivec4: 4,
                bool: 1,
                bvec2: 2,
                bvec3: 3,
                bvec4: 4,
                mat2: 4,
                mat3: 9,
                mat4: 16,
                sampler2D: 1
            }, rj = function (e, K) {
                if (!Nc) {
                    var N = H.keys(Vr);
                    Nc = {};
                    for (var f = 0; f < N.length; ++f) {
                        var O = N[f];
                        Nc[e[O]] = Vr[O]
                    }
                }
                return Nc[K]
            }, Nc = null, Vr = {
                FLOAT: "float",
                FLOAT_VEC2: "vec2",
                FLOAT_VEC3: "vec3",
                FLOAT_VEC4: "vec4",
                INT: "int",
                INT_VEC2: "ivec2",
                INT_VEC3: "ivec3",
                INT_VEC4: "ivec4",
                BOOL: "bool",
                BOOL_VEC2: "bvec2",
                BOOL_VEC3: "bvec3",
                BOOL_VEC4: "bvec4",
                FLOAT_MAT2: "mat2",
                FLOAT_MAT3: "mat3",
                FLOAT_MAT4: "mat4",
                SAMPLER_2D: "sampler2D"
            }, fh = function (B, D) {
                switch (B) {
                    case"float":
                        return 0;
                    case"vec2":
                        return new Float32Array(2 * D);
                    case"vec3":
                        return new Float32Array(3 * D);
                    case"vec4":
                        return new Float32Array(4 * D);
                    case"int":
                    case"sampler2D":
                        return 0;
                    case"ivec2":
                        return new Int32Array(2 * D);
                    case"ivec3":
                        return new Int32Array(3 * D);
                    case"ivec4":
                        return new Int32Array(4 * D);
                    case"bool":
                        return !1;
                    case"bvec2":
                        return yd(2 * D);
                    case"bvec3":
                        return yd(3 * D);
                    case"bvec4":
                        return yd(4 * D);
                    case"mat2":
                        return new Float32Array([1, 0, 0, 1]);
                    case"mat3":
                        return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
                    case"mat4":
                        return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
                }
            }, yd = function (W) {
                for (var K = new Array(W), F = 0; F < K.length; F++) K[F] = !1;
                return K
            }, Vn = function (Q, M) {
                var k = {data: {}};
                k.gl = Q;
                for (var h = H.keys(M), Y = 0; Y < h.length; Y++) {
                    var l = h[Y], U = l.split("."), T = U[U.length - 1], L = zb(U, k), O = M[l];
                    L.data[T] = O, L.gl = Q, H.defineProperty(L, T, {get: Do(T), set: rn(T, O)})
                }
                return k
            }, Do = function (c) {
                var f = Hh.replace("%%", c);
                return new Function(f)
            }, rn = function (G, h) {
                var q, Z = Xm.replace(/%%/g, G);
                return q = 1 === h.size ? Zh[h.type] : Pj[h.type], q && (Z += "\nthis.gl." + q + ";"), new Function("value", Z)
            }, zb = function (A, G) {
                for (var C = G, e = 0; e < A.length - 1; e++) {
                    var x = C[A[e]] || {data: {}};
                    C[A[e]] = x, C = x
                }
                return C
            }, Hh = ["return this.data.%%.value;"].join("\n"),
            Xm = ["this.data.%%.value = value;", "var location = this.data.%%.location;"].join("\n"), Zh = {
                "float": "uniform1f(location, value)",
                vec2: "uniform2f(location, value[0], value[1])",
                vec3: "uniform3f(location, value[0], value[1], value[2])",
                vec4: "uniform4f(location, value[0], value[1], value[2], value[3])",
                "int": "uniform1i(location, value)",
                ivec2: "uniform2i(location, value[0], value[1])",
                ivec3: "uniform3i(location, value[0], value[1], value[2])",
                ivec4: "uniform4i(location, value[0], value[1], value[2], value[3])",
                bool: "uniform1i(location, value)",
                bvec2: "uniform2i(location, value[0], value[1])",
                bvec3: "uniform3i(location, value[0], value[1], value[2])",
                bvec4: "uniform4i(location, value[0], value[1], value[2], value[3])",
                mat2: "uniformMatrix2fv(location, false, value)",
                mat3: "uniformMatrix3fv(location, false, value)",
                mat4: "uniformMatrix4fv(location, false, value)",
                sampler2D: "uniform1i(location, value)"
            }, Pj = {
                "float": "uniform1fv(location, value)",
                vec2: "uniform2fv(location, value)",
                vec3: "uniform3fv(location, value)",
                vec4: "uniform4fv(location, value)",
                "int": "uniform1iv(location, value)",
                ivec2: "uniform2iv(location, value)",
                ivec3: "uniform3iv(location, value)",
                ivec4: "uniform4iv(location, value)",
                bool: "uniform1iv(location, value)",
                bvec2: "uniform2iv(location, value)",
                bvec3: "uniform3iv(location, value)",
                bvec4: "uniform4iv(location, value)",
                sampler2D: "uniform1iv(location, value)"
            }, bj = x.Light = function () {
                yp(bj, this), this.s(qf, k[qf]), this.s(vb, "sphere"), this.s3(20, 20, 20)
            };
        rb("Light", ve, {
            _image: "light_icon", _icon: "light_icon", onStyleChanged: function (b, h, T) {
                bj.superClass.onStyleChanged.apply(this, arguments), b === qf && this.s("shape3d.color", T)
            }
        });
        var Ff = zq.Graph3dView = function (W, p) {
            var I = this;
            I._attributes = p || w.graph3dViewAttributes, I._25I = {}, I._view = po(1, I);
            var L = I._canvas = wg(I._view);
            L.addEventListener("webglcontextlost", function (N) {
                N.preventDefault(), vk(I), I._26I && I._doBufferGC(I._26I, !0), I._26I = o, I._1o.texture = o, I._35O = !0
            }, O), L.addEventListener("webglcontextrestored", function () {
                I._35O = !1, I.iv()
            }, O), I._batchIndexMap = {}, I._batchModelMap = {}, I._wireframeIndexMap = {}, I._wireframeModelMap = {}, I._wireframeIndexMapSwap = {}, I._wireframeModelMapSwap = {}, I._polylineIndexMap = {}, I._polylineIndexMap = {}, I._polylineIndexMapSwap = {}, I._polylineIndexMapSwap = {}, I._8O = [], I._7O = Nd(), I._6O = Nd(), I._1o = new Eb(I), I._30O = new xb(I), I._31O = new ip(I), I._32O = new An(I), I._raycaster = new oe(I), I._highlightHelper = new xp(I), I._postProcessing = new pf(I), I.vr = new Xl(I), I._33Q = !0, I._eye = Ah(w.graph3dViewEye), I._center = Ah(w.graph3dViewCenter), I._up = Ah(w.graph3dViewUp), I._lightChanged = !1, I._59O = [], I._spots = [], I._dirs = [], I._frameId = 0, I.overlappingBox = new Rp(I), I.dm(W ? W : new $r), I._coreInteractor = new xj(this), I.setInteractors([new Wh(I)])
        }, wm = {
            fogDisabled: 1,
            dashDisabled: 1,
            batchColorDisabled: 1,
            batchBlendDisabled: 1,
            batchBrightnessDisabled: 1
        }, ob = 0;
        Uc("Graph3dView", H, {
            ms_v: 1,
            ms_tip: 1,
            ms_gv: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _51o: 1,
            ms_ac: ["devicePixelRatio", "boundaries", "moveStep", "rotateStep", "editHelperDisabled", "sizeEditableFunc", "rotationEditableFunc", "editableFunc", "rotatable", "zoomable", "pannable", "walkable", "resettable", "mouseRoamable", Dg, ne, "firstPersonMode", Dl, "movableFunc", "gridVisible", "gridSize", "gridGap", "gridColor", "originAxisVisible", "centerAxisVisible", "axisXColor", "axisYColor", "axisZColor", "editSizeColor", "rectSelectable", "rectSelectBackground", "headlightRange", "headlightColor", "headlightIntensity", "headlightDisabled", "ortho", "orthoWidth", "fovy", "near", "far", wf, Wk, "up", "aspect", "fogDisabled", "fogColor", "fogNear", "fogFar", "dashDisabled", "batchColorDisabled", "batchBlendDisabled", "batchBrightnessDisabled", "hoverDelay"],
            _editable: !1,
            _editHelperDisabled: w.graph3dViewEditHelperDisabled,
            _devicePixelRatio: v,
            _boundaries: v,
            _moveStep: w.graph3dViewMoveStep,
            _rotateStep: w.graph3dViewRotateStep,
            _pannable: w.graph3dViewPannable,
            _rotatable: w.graph3dViewRotatable,
            _walkable: w.graph3dViewWalkable,
            _resettable: w.graph3dViewResettable,
            _zoomable: w.graph3dViewZoomable,
            _firstPersonMode: w.graph3dViewFirstPersonMode,
            _mouseRoamable: w.graph3dViewMouseRoamable,
            _gridVisible: w.graph3dViewGridVisible,
            _gridSize: w.graph3dViewGridSize,
            _gridGap: w.graph3dViewGridGap,
            _gridColor: w.graph3dViewGridColor,
            _originAxisVisible: w.graph3dViewOriginAxisVisible,
            _centerAxisVisible: w.graph3dViewCenterAxisVisible,
            _axisXColor: w.graph3dViewAxisXColor,
            _axisYColor: w.graph3dViewAxisYColor,
            _axisZColor: w.graph3dViewAxisZColor,
            _ortho: w.graph3dViewOrtho,
            _orthoWidth: w.graph3dViewOrthoWidth,
            _fovy: w.graph3dViewFovy,
            _near: w.graph3dViewNear,
            _far: w.graph3dViewFar,
            _headlightColor: w.graph3dViewHeadlightColor,
            _headlightIntensity: w.graph3dViewHeadlightIntensity,
            _headlightRange: w.graph3dViewHeadlightRange,
            _headlightDisabled: w.graph3dViewHeadlightDisabled,
            _rectSelectable: w.graph3dViewRectSelectable,
            _rectSelectBackground: w.graph3dViewRectSelectBackground,
            _editSizeColor: w.graph3dViewEditSizeColor,
            _autoMakeVisible: Mn,
            _fogDisabled: w.graph3dViewFogDisabled,
            _fogColor: w.graph3dViewFogColor,
            _fogNear: w.graph3dViewFogNear,
            _fogFar: w.graph3dViewFogFar,
            _dashDisabled: w.graph3dViewDashDisabled,
            _batchColorDisabled: w.graph3dViewBatchColorDisabled,
            _batchBlendDisabled: w.graph3dViewBatchBlendDisabled,
            _batchBrightnessDisabled: w.graph3dViewBatchBrightnessDisabled,
            setEye: function (h, W, l) {
                1 === arguments.length && (W = h[1], l = h[2], h = h[0]);
                var C = this._eye;
                C[0] = h, C[1] = W, C[2] = l, this.fp(wf, o, C)
            },
            setCenter: function (_, H, h) {
                1 === arguments.length && (H = _[1], h = _[2], _ = _[0]);
                var O = this._center;
                O[0] = _, O[1] = H, O[2] = h, this.fp(Wk, o, O)
            },
            setUp: function (k, y, G) {
                1 === arguments.length && (y = k[1], G = k[2], k = k[0]);
                var p = this._up;
                p[0] = k, p[1] = y, p[2] = G, this.fp("up", o, p)
            },
            getDevicePixelRatio: function () {
                return this._devicePixelRatio || Wo
            },
            isTransparentMask: function (r) {
                return r.s("transparent.mask")
            },
            getCoreInteractor: function () {
                return this._coreInteractor
            },
            getHighlightHelper: function () {
                return this._highlightHelper
            },
            getRaycaster: function () {
                return this._raycaster
            },
            getAspect: function () {
                var c = this, d = c._aspect;
                return d ? d : (d = c.getWidth() / c.getHeight(), d || 1.2)
            },
            getCanvas: function () {
                return this._canvas
            },
            setDataModel: function (f) {
                var C = this, v = C._dataModel, b = C._selectionModel;
                v !== f && (v && (v.ump(C.handleDataModelPropertyChange, C), v.umm(C.handleDataModelChange, C), v.umd(C.handleDataPropertyChange, C), b || v.sm().ums(C.handleSelectionChange, C)), C._dataModel = f, f.mp(C.handleDataModelPropertyChange, C), f.mm(C.handleDataModelChange, C), f.md(C.handleDataPropertyChange, C), b ? b._21I(f) : f.sm().ms(C.handleSelectionChange, C), C._postProcessing.handleDataModleChange(v, f), C.invalidateAll(!0), C.invalidateLight(), C.fp(Jq, v, f), C._canvas.style.background = f.getBackground() || "")
            },
            handleDataModelPropertyChange: function (y) {
                if ("background" === y.property) {
                    var d = this._canvas.style.background, l = y.newValue || "";
                    this._canvas.style.background = l, this.fp("canvasBackground", d, l)
                } else "envmap" === y.property && this.iv()
            },
            handleDataPropertyChange: function (x) {
                var P = x.data;
                this.invalidateData(P), kf(P) && "s:light.type" === x.property && this.invalidateLight()
            },
            invalidateLight: function () {
                this._lightChanged || (this._lightChanged = !0, this.iv())
            },
            onPropertyChanged: function (p) {
                var O = this, i = p.property;
                O.iv(), O._18Q = o, "eye" === i ? O._33Q = !0 : "devicePixelRatio" === i ? O._42(o, O.getDevicePixelRatio()) : wm[i] && vk(O)
            },
            _5O: function ($) {
                var i = $._22Q();
                return i ? new i(this, $) : o
            },
            getData3dUI: function (S) {
                var k = this._25I[S._id];
                return k === v && (k = this._5O(S), this._25I[S._id] = k), k
            },
            invalidateAll: function (R) {
                var N = this;
                if (R) {
                    for (var Z in N._25I) {
                        var e = N._25I[Z];
                        e && e.dispose()
                    }
                    N._25I = {}, N.iv(), uq(N)
                } else uq(N), N.dm().each(function (u) {
                    N.invalidateData(u)
                })
            },
            invalidateSelection: function () {
                var L = this;
                L.sm().each(function (T) {
                    L.invalidateData(T)
                })
            },
            invalidateData: function (K) {
                var D = this, g = D.getData3dUI(K);
                g && (g.iv(), D.iv()), uq(D, K)
            },
            getShape3dText: function (q) {
                return q.getStyle("shape3d.text") || this.getLabel(q)
            },
            invalidateBatch: function (J) {
                var _ = this, R = _._batchModelMap, T = R[J], n = [], Z = {};
                if (T) {
                    T.ds.forEach(function (Q) {
                        var L = _.getData3dUI(Q);
                        L && L.iv(), delete _._batchIndexMap[Q._id], n.push(Q._id)
                    }), delete R[J];
                    for (var G, d, A, C, e, K, Q, M, a, t = ["_wireframeModelMap", "_polylineModelMap", "_wireframeModelMapSwap", "_polylineModelMapSwap"], Y = ["_wireframeIndexMap", "_polylineIndexMap", "_wireframeIndexMapSwap", "_polylineIndexMapSwap"], U = 0; U < t.length; U++) {
                        var W = _[t[U]], h = _[Y[U]];
                        for (Z = {}, M = 0; M < n.length; M++) {
                            var N = h[n[M]];
                            if (N) {
                                delete h[n[M]], a = N.batch, G = W[a];
                                var V = N.begin, x = N.size, L = 3 * V, P = 3 * x, p = 4 * V, c = 4 * x;
                                for (d = G.ds, A = G.vs, C = G.cs, e = G.ps, K = G.ls, Q = N.index, G.invalidate = !0, d[Q] = v, Q = L; L + P > Q; Q++) A[Q] = v;
                                for (Q = p; p + c > Q; Q++) C[Q] = v;
                                for (Q = p; p + c > Q; Q++) e[Q] = v;
                                if (K) for (Q = L; L + P > Q; Q++) K[Q] = v;
                                Z[a] = !0
                            }
                        }
                        for (a in Z) {
                            G = W[a], d = G.ds, A = G.vs, C = G.cs, e = G.ps, K = G.ls;
                            var g = [];
                            for (Q = 0; Q < d.length; Q++) d[Q] !== v && g.push(d[Q]);
                            if (0 === g.length) delete W[a]; else {
                                for (G.ds = g, g = [], Q = 0; Q < A.length; Q++) A[Q] !== v && g.push(A[Q]);
                                for (G.vs = g, g = [], Q = 0; Q < C.length; Q++) C[Q] !== v && g.push(C[Q]);
                                for (G.cs = g, g = [], Q = 0; Q < e.length; Q++) e[Q] !== v && g.push(e[Q]);
                                if (G.ps = g, K) {
                                    for (g = [], Q = 0; Q < K.length; Q++) K[Q] !== v && g.push(K[Q]);
                                    G.ls = g
                                }
                            }
                        }
                    }
                    _.iv()
                }
            },
            handleDataModelChange: function (_) {
                var c = this, z = _.kind, O = _.data;
                if ("add" === z) c.invalidateData(O), xf(O) && O.getEdgeGroup() && O.getEdgeGroup().eachSiblingEdge(c.invalidateData, c), kf(O) && c.invalidateLight(); else if (z === Pl) {
                    var R = O._id, T = c._25I[R];
                    T && (T.dispose(), delete c._25I[R], c.iv()), O === c._currentSubGraph && c.setCurrentSubGraph(o), uq(c, O), kf(O) && c.invalidateLight()
                } else z === Pr && (c.invalidateAll(!0), c.setCurrentSubGraph(o), uq(c), c.invalidateLight())
            },
            toCanvas: function (m, J, s) {
                var P = this, E = P.getGL();
                if (P.validate(), m) {
                    var b = E.getParameter(E.COLOR_CLEAR_VALUE);
                    xr(E, m)
                }
                P._42(o, 1);
                var R = P.getWidth(), _ = P.getHeight(), r = new Uint8Array(4 * R * _), z = wg(),
                    K = z.getContext("2d");
                E.readPixels(0, 0, R, _, E.RGBA, E.UNSIGNED_BYTE, r), zm(z, R, _, 1);
                for (var n = K.getImageData(0, 0, R, _), j = n.data, F = 0; F < j.length; F += 4) {
                    var k = F / 4, a = V(k / R), W = k - a * R;
                    k = 4 * ((_ - 1 - a) * R + W), j[k] = r[F], j[k + 1] = r[F + 1], j[k + 2] = r[F + 2], j[k + 3] = r[F + 3]
                }
                if (K.putImageData(n, 0, 0), m && xr(E, b), P._42(o, P.getDevicePixelRatio()), J && s) {
                    var v = wg(), N = v.getContext("2d");
                    return J = J, s = s, zm(v, J, s, 1), w.drawImage(N, z, 0, 0, J, s), v
                }
                return z
            },
            toDataURL: function (x, i) {
                var C = this, Z = C.getGL();
                if (C.validate(), x) {
                    var I = Z.getParameter(Z.COLOR_CLEAR_VALUE);
                    xr(Z, x)
                }
                C._42(o, 1);
                var L = C._canvas.toDataURL(i || "image/png", 1);
                return x && xr(Z, I), C._42(o, C.getDevicePixelRatio()), L
            },
            getGL: function () {
                var C = this, E = C._26I;
                if (C._prg, !E) try {
                    C._2O = {}, E = C._26I = C._canvas.getContext("webgl", C._attributes) || C._canvas.getContext("experimental-webgl", C._attributes), E._emptyTexture = Ib(E), E._emptyBlendTexture = Ib(E), E._bufPool = {}, E._id = ++ob, C._buffer = {
                        vs: dk(E),
                        ns: dk(E),
                        is: dk(E),
                        uv: dk(E),
                        batchColor: dk(E),
                        batchBlend: dk(E),
                        batchBrightness: dk(E),
                        lineDistance: dk(E)
                    }, C._1O = Tr(E);
                    var U = C._cube = {vs: dk(E), ns: dk(E), is: dk(E), uv: dk(E)};
                    zf(E, U.vs, we), zf(E, U.ns, lg), zf(E, U.uv, _d), Tj(E, U.is, Eo)
                } catch (A) {
                }
                return C.acquireProgram(), E
            },
            acquireProgram: function () {
                var K = this, w = K._26I;
                if (w) {
                    var n = x.Default.getImage(K.dm().getEnvmap()) ? !0 : !1, q = K._prg && K._prg.envMapFlag ? !0 : !1;
                    if (!K._prg || n !== q) {
                        var G = K._prg = w.createProgram();
                        if (!G) return o;
                        G.envMapFlag = n;
                        var E = K._dirs.length, h = K._spots.length, B = K._59O.length,
                            v = ["uPMatrix", "uMVMatrix", "uMMatrix", "uReflectivity", "uViewMatrix", "uUseEnvMap", "uEnvMap", "uCameraPosition", "uNMatrix", "uViewMatrix", "aNormal", "aUv", "uOffsetScale", "uDiffuse", "uBlend", "uBlendColor", "uBrightness", "uPartOpacity", "uAlphaTest", "uTransparent", "uTexture", "uBlendTexture", "uSampler", "uBlendSampler", "uDiscardSelectable", "uFix", "uPick", "uReverseFlip", "uFixPickReverseColor", "uBatchBrightness", "aBatchBrightness", "uBatchColor", "aBatchColor", "uBatchBlend", "aBatchBlend", "uDash", "aLineDistance", "uDashDistance", "uDashGapDistance", "uLight", "uHeadlightRange", "uHeadlightColor", "uFogColor", "uFogNear", "uFogFar"];
                        E && v.push("uDirColor", "uDirDirection"), h && v.push("uSpotColor", "uSpotRange", "uSpotAngle", "uSpotExponent", "uSpotPosition", "uSpotDirection"), B && v.push("uPointColor", "uPointRange", "uPointPosition"), xr(w, [0, 0, 0, 0]), w.clearDepth(1), w.enable(w.DEPTH_TEST), w.depthFunc(w.LEQUAL), w.enable(w.BLEND), w.blendFuncSeparate(w.SRC_ALPHA, w.ONE_MINUS_SRC_ALPHA, w.ONE, w.ONE_MINUS_SRC_ALPHA), gq || (Xo = vp(Xo.substring(0, Xo.indexOf("^#"))), ee = vp(ee), gq = !0);
                        var F = ["#define MAX_DIR " + E, "#define MAX_SPOT " + h, "#define MAX_POINT " + B, K._fogDisabled ? "" : "#define FOG", K._dashDisabled ? "" : "#define DASH", n ? "#define USE_ENVMAP" : "", K._batchColorDisabled ? "" : "#define BATCHCOLOR", K._batchBlendDisabled ? "" : "#define BATCHBLEND", K._batchBrightnessDisabled ? "" : "#define BATCHBRIGHTNESS", ""].join("\n"),
                            H = Lm(w, G, w.VERTEX_SHADER, Xo.replace("PREFIX", F));
                        w.getShaderParameter(H, w.COMPILE_STATUS) || console.error("compile vs shader faild, error info : ", w.getShaderInfoLog(H));
                        var R = Lm(w, G, w.FRAGMENT_SHADER, ee.replace("PREFIX", F));
                        w.getShaderParameter(R, w.COMPILE_STATUS) || console.error("compile fs shader faild, error info : ", w.getShaderInfoLog(R)), P ? v.push("aPosition") : (G.aPosition = 0, w.bindAttribLocation(G, 0, "aPosition")), w.linkProgram(G), v.forEach(function (B) {
                            G[B] = /^u/.test(B) ? w.getUniformLocation(G, B) : w.getAttribLocation(G, B)
                        }), w.useProgram(G), w.deleteShader(H), w.deleteShader(R)
                    }
                }
            },
            getBrightness: function (w) {
                var y = w.s("brightness"), r = this.isSelected(w) ? w.s("select.brightness") : o;
                return y == o ? r : r == o ? y : y * r
            },
            setHighlightMode: function (e) {
                var H;
                H = "selection" === e ? xp.Mode.Selection : "mouseover" === e ? xp.Mode.MouseOver : xp.Mode.Disable, this._highlightHelper.mode = H
            },
            getHighlightMode: function () {
                var D = this._highlightHelper.mode;
                return D === xp.Mode.Selection ? "selection" : D === xp.Mode.MouseOver ? "mouseover" : "disable"
            },
            bindEnvMap: function (j) {
                var N = this, n = N._prg, U = 5, m = N.dm().getEnvmap(), w = x.Default.getImage(m);
                if (w) {
                    if (m !== N._lastEnvMap) {
                        N._envMapTexture && j.deleteTexture(N._envMapTexture);
                        var Y = N._envMapTexture = j.createTexture();
                        j.bindTexture(j.TEXTURE_CUBE_MAP, Y), j.texParameteri(j.TEXTURE_CUBE_MAP, j.TEXTURE_MAG_FILTER, j.LINEAR), j.texParameteri(j.TEXTURE_CUBE_MAP, j.TEXTURE_MIN_FILTER, j.LINEAR), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 0, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 1, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 2, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 3, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 4, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.texImage2D(j.TEXTURE_CUBE_MAP_POSITIVE_X + 5, 0, j.RGBA, j.RGBA, j.UNSIGNED_BYTE, w), j.bindTexture(j.TEXTURE_CUBE_MAP, null), N._lastEnvMap = m
                    }
                    j.activeTexture(j.TEXTURE0 + U), j.bindTexture(j.TEXTURE_CUBE_MAP, N._envMapTexture), j.uniform1i(n.uEnvMap, U)
                }
            },
            getWireframe: function (z) {
                var Q = z.s("wf.visible"), p = z.s("wf.width");
                return Q === !0 || p > 0 && "selected" === Q && this.isSelected(z) ? {
                    color: z.s("wf.color"),
                    width: p,
                    "short": z.s("wf.short"),
                    mat: z.s("wf.mat")
                } : void 0
            },
            _transformPointToViewSpace: function (K) {
                var k = [K[0], K[1], K[2]];
                return Jg(k, this._viewMatrix), k
            },
            _transformDirectionToViewSpace: function (E, T) {
                var a = [E[0], E[1], E[2]];
                Jg(a, this._viewMatrix);
                var b = T ? [T[0], T[1], T[2]] : [0, 0, 0];
                Jg(b, this._viewMatrix);
                var u = b[0] - a[0], t = b[1] - a[1], _ = b[2] - a[2], P = Math.sqrt(u * u + t * t + _ * _);
                return P ? [u / P, t / P, _ / P] : [u, t, _]
            },
            getWireframeGeometry: function (o) {
                return o.s("wf.geometry") ? {
                    color: o.s("wf.color"),
                    width: o.s("wf.width"),
                    mat: o.s("wf.mat"),
                    geometry: !0
                } : void 0
            },
            getBodyColor: function (t) {
                return t.s("body.color")
            },
            getMat: function (T) {
                return T.getMat ? T.getMat() : T.s("mat")
            },
            getFaceMat: function (H, U) {
                return H.getFaceMat ? H.getFaceMat(U) : H.s(U + ".mat")
            },
            getFaceBlend: function (N, W) {
                return N.s(W + ".blend") || N.s("all.blend")
            },
            getFaceColor: function (K, k) {
                return K.s(k + ".color") || K.s("all.color")
            },
            getFaceImage: function (r, Z) {
                return r.s(Z + ".image") || r.s("all.image")
            },
            getFaceBlendImage: function (t, V) {
                return t.s(V + ".blend.image") || t.s("all.blend.image")
            },
            getFaceDiscardSelectable: function (L, M) {
                var h = L.s(M + ".discard.selectable");
                return h == o ? L.s("all.discard.selectable") : h
            },
            getFaceUv: function (D, l) {
                return D.s(l + ".uv") || D.s("all.uv")
            },
            getFaceUvOffset: function (J, c) {
                return J.s(c + ".uv.offset") || J.s("all.uv.offset")
            },
            getFaceUvScale: function (W, K) {
                return W.s(K + ".uv.scale") || W.s("all.uv.scale")
            },
            getFaceLight: function (Y, N) {
                var F = Y.s(N + ".light");
                return F == o ? Y.s("all.light") : F
            },
            getFaceVisible: function (v, R) {
                var b = v.s(R + ".visible");
                return b == o ? v.s("all.visible") : b
            },
            getFaceOpacity: function (h, X) {
                var r = h.s(X + ".opacity");
                return r == o ? h.s("all.opacity") : r
            },
            getFaceTransparent: function (M, R) {
                var v = M.s(R + ".transparent");
                return v == o ? M.s("all.transparent") : v
            },
            getFaceReverseColor: function (f, X) {
                return f.s(X + ".reverse.color") || f.s("all.reverse.color")
            },
            getFaceReverseFlip: function (d, H) {
                var U = d.s(H + ".reverse.flip");
                return U == o ? d.s("all.reverse.flip") : U
            },
            getFaceReverseCull: function (s, d) {
                var E = s.s(d + ".reverse.cull");
                return E == o ? s.s("all.reverse.cull") : E
            },
            getTextureMap: function () {
                return this._2O
            },
            deleteTexture: function (q) {
                var O = this, W = O._2O[q];
                W && (delete O._2O[q], O.getGL().deleteTexture(W))
            },
            invalidateShape3dCachedImage: function (T) {
                var l = this.getData3dUI(T);
                l.invalidateCachedTexture(this.getGL())
            },
            isInteractive: function (U) {
                return U.s("interactive")
            },
            getTexture: function (O, N) {
                if (!O) return o;
                var Q = this, c = Q.getGL(), l = Q._2O[O];
                if (!l) {
                    var $ = Ui(O);
                    if (!$) return c._emptyTexture;
                    if ($.uuid || ($.uuid = x.Math.generateUUID()), $.tagName) {
                        if ($.dynamic) return Tr(c, $, Q._1O);
                        l = Q._2O[O] = Tr(c, $)
                    } else {
                        var t, G = N && N.s("shape3d.image.cache") && !Q.isInteractive(N), E = Q.vr.isPresenting();
                        if (E && (N._textureUpdateFrame === c._renderInfo.frame ? G = !0 : N._textureUpdateFrame = c._renderInfo.frame), G && (t = Q.getData3dUI(N), l = t.getCachedTexture()), !l) {
                            if (G) {
                                if (c._renderInfo.cacheTimeCost > w.graph3dMaxVectorCacheTime) return Q.redraw(), c._emptyTexture;
                                if (!Mc($, N)) return c._emptyTexture
                            }
                            var q, y = N && N.s("shape3d.fixSizeOnScreen"), A = y ? c.NEAREST : c.LINEAR;
                            y || N && N.s("shape3d.vector.dynamic") && (t || (t = Q.getData3dUI(N)), y = t.getVectorDynamicSize(), y && (q = Q.getDevicePixelRatio(), y[0] *= q, y[1] *= q));
                            var R, V, _ = N && N.s("shape3d.texture.scale") || 1;
                            if (y ? (q || (q = Q.getDevicePixelRatio()), R = y[0] > 0 ? y[0] : _ * Iq($, N) * q, V = y[1] > 0 ? y[1] : _ * Ne($, N) * q) : (R = _ * Iq($, N), V = _ * Ne($, N)), R >= 1 && V >= 1) {
                                var r = 0;
                                G && (r = Date.now());
                                var T = El(R, V);
                                if (!t && N && (t = Q.getData3dUI(N)), t && t.interactiveInfo) {
                                    var X = O;
                                    "object" == typeof X && (X = X.uuid || (X.uuid = x.Math.generateUUID()));
                                    var H = t.interactiveInfo[X] = {};
                                    T.interactiveInfo = H.bodyInfo = {
                                        compInfos: [],
                                        matrix: new Hf,
                                        rect: {x: 0, y: 0, width: R, height: V}
                                    }
                                }
                                Co(T, $, 0, 0, R, V, N, Q), T.interactiveInfo && (T.interactiveInfo = null), T.restore(), G || E ? (l = Tr(c, $n, null, A), t.setCachedTexture(l), c._renderInfo.cacheTimeCost += Date.now() - r, $n = null) : l = Tr(c, $n, Q._1O, A)
                            }
                        }
                    }
                }
                return l
            },
            redraw: function () {
                this.iv()
            },
            validateImpl: function () {
                var L = this;
                if (L._lightChanged) {
                    L._lightChanged = !1;
                    var i = [], C = [], V = [];
                    L.dm().each(function (R) {
                        if (kf(R)) {
                            var Q = R.s("light.type");
                            Q === lc ? i.push(R) : Q === ri ? C.push(R) : Q === rh && V.push(R)
                        }
                    }), (i.length !== L._59O.length || C.length !== L._spots.length || V.length !== L._dirs.length) && vk(L), L._59O = i, L._spots = C, L._dirs = V
                }
                L._42(), L._1o.iv()
            },
            getRenderInfo: function () {
                var c = this.getGL();
                return c ? c._renderInfo : void 0
            },
            getDebugTip: function () {
                var R = this, B = R.getRenderInfo();
                if (B) {
                    var G = R.getGL()._validBufCount || 0,
                        H = "Draw Calls: " + B.calls + "<br/>" + "Vertices: " + B.vertices + "<br/>" + "Faces: " + B.faces + "<br/>" + "Lines: " + B.lines + "<br/>" + "Buffer Count: " + G;
                    return R.vr.isPresenting() && (H += "<br/>VR fps: " + R.vr.getFps()), H
                }
            },
            _42: function (N, R) {
                var E = this;
                if (!E._35O && (!Ok || wo(Ok))) {
                    var q, K;
                    N && (N instanceof ve ? K = N : q = N);
                    var U = E._canvas, j = E.getGL(), m = E._prg;
                    if (j) {
                        var r = E.getWidth(), X = E.getHeight();
                        R ? N || zm(U, r, X, R) : (R = E.getDevicePixelRatio(), N || r === U.clientWidth && X === U.clientHeight || zm(U, r, X, R)), j.clear(j.COLOR_BUFFER_BIT), E.drawFilter || (j._renderInfo = {
                            calls: 0,
                            vertices: 0,
                            faces: 0,
                            lines: 0,
                            frame: N ? E._frameId : ++E._frameId,
                            cacheTimeCost: 0
                        });
                        var C = function () {
                            if (E.overlappingBox.clear(), E._81O = o, j.clear(j.DEPTH_BUFFER_BIT), Po(j, m.uBrightness, 1), Po(j, m.uOpacity, 1), Po(j, m.uPartOpacity, 1), j._picking = !!N, Po(j, m.uPick, !!N), Po(j, m.uTexture, !1), Po(j, m.uBlendTexture, !1), Po(j, m.uAlphaTest, k.alphaTest), Po(j, m.uTransparent, !1), Po(j, m.uFix, !1), Po(j, m.uBatchColor, !1), Po(j, m.uBatchBlend, !1), Po(j, m.uBatchBrightness, !1), Po(j, m.uReflectivity, E._envmapReflectivity || .5), Po(j, m.uCameraPosition, E.getEye()), Po(j, m.uPMatrix, E._projectMatrix = zr(E)), Po(j, m.uViewMatrix, yo(E, E._7O)), E.bindEnvMap(j), E._viewMatrix = ah(E._7O), N || (_b(E, j, m), E._fogDisabled || (Po(j, m.uFogColor, E._fogColor), Po(j, m.uFogNear, E._fogNear), Po(j, m.uFogFar, E._fogFar))), Af(j, m.aPosition), Af(j, m.aNormal), kn(j, m.aUv), kn(j, m.aBatchColor), kn(j, m.aBatchBlend), kn(j, m.aBatchBrightness), kn(j, m.aLineDistance), K) {
                                var J = j.getParameter(j.COLOR_CLEAR_VALUE);
                                j.clearColor(0, 0, 0, 0), j.disable(j.BLEND), kn(j, m.aNormal), zf(j, E._cube.vs, o, m.aPosition), Tj(j, E._cube.is), km(K, E, Pq, 0), km(K, E, es, 6), km(K, E, Kl, 12), km(K, E, Ym, 18), km(K, E, Tp, 24), km(K, E, Mh, 30), Af(j, m.aNormal), xr(j, J)
                            } else if (q) {
                                q.value = 2;
                                var J = j.getParameter(j.COLOR_CLEAR_VALUE);
                                j.clearColor(0, 0, 0, 0), j.disable(j.BLEND), E._95I(j, m, q), hk(E, q), zh(E, E._polylineModelMap, q), zh(E, E._wireframeModelMap, q), Po(j, m.uTransparent, !0), E._95I(j, m, q, !0), hk(E, q, !0), zh(E, E._polylineModelMap, q, !0), zh(E, E._wireframeModelMap, q, !0), Po(j, m.uTransparent, !1), j.clear(j.DEPTH_BUFFER_BIT), E._swapLineMap(), E._95I(j, m, q, !1, !0), zh(E, E._polylineModelMap, q), zh(E, E._wireframeModelMap, q), E._swapLineMap(), E._swapLineMap(), E._95I(j, m, q, !1, !0), zh(E, E._polylineModelMap, q), zh(E, E._wireframeModelMap, q), Po(j, m.uTransparent, !0), E._95I(j, m, q, !0, !0), zh(E, E._polylineModelMap, q, !0), zh(E, E._wireframeModelMap, q, !0), Po(j, m.uTransparent, !1), E._swapLineMap(), j.disable(j.DEPTH_TEST), E.drawFilter || E._30O._42(j, m, q), j.enable(j.DEPTH_TEST), xr(j, J)
                            } else j.disable(j.BLEND), E.drawSky(j, m), E._31O._42(j, m), E._95I(j, m), hk(E), zh(E, E._polylineModelMap), zh(E, E._wireframeModelMap), j.enable(j.BLEND), Po(j, m.uTransparent, !0), j.depthMask(!1), E._95I(j, m, o, !0), hk(E, o, !0), zh(E, E._polylineModelMap, o, !0), zh(E, E._wireframeModelMap, o, !0), j.depthMask(!0), Po(j, m.uTransparent, !1), j.clear(j.DEPTH_BUFFER_BIT), E._swapLineMap(), j.disable(j.BLEND), E._95I(j, m, o, !1, !0), zh(E, E._polylineModelMap), zh(E, E._wireframeModelMap), j.enable(j.BLEND), Po(j, m.uTransparent, !0), j.depthMask(!1), E._95I(j, m, o, !0, !0), zh(E, E._polylineModelMap, o, !0), zh(E, E._wireframeModelMap, o, !0), j.depthMask(!0), Po(j, m.uTransparent, !1), E._swapLineMap(), j.disable(j.DEPTH_TEST), j.disable(j.BLEND), E._32O._42(j, m), E._30O._42(j, m), E._highlightHelper._42(j, m), j.enable(j.DEPTH_TEST);
                            zf(j, o), Tj(j, o)
                        }, D = !1, c = r * R, W = X * R, O = E.vr;
                        O.enable && O._42(j, c, W, C) && (D = !0);
                        var f = E.envRenderer;
                        f && f.enable && f._42(j, c, W, C) && (D = !0);
                        var d = E._postProcessing;
                        d._42(j, c, W, C, N) && (D = !0), D || (E.setViewport(j, 0, 0, r * R, X * R), C()), E._33Q = !1, E.drawFilter || E.countFrame(), E._doBufferGC(j)
                    }
                }
            },
            enablePostProcessing: function (K, $) {
                return this._postProcessing.enableModule(K, $)
            },
            getPostProcessingModule: function (B) {
                return this._postProcessing.getModule(B)
            },
            setViewport: function (A, U, M, W, Y) {
                this._viewport = [U, M, W, Y], A.viewport(U, M, W, Y)
            },
            getViewport: function () {
                return this._viewport
            },
            setBufferGCInterval: function (B) {
                this._bufferGCInterval = B
            },
            _doBufferGC: function (l, D) {
                var p, J, b = l._bufPool, t = 0, x = 0, E = l._renderInfo.frame, Q = this._bufferGCInterval || 10;
                for (p in b) t++, J = b[p], J && (D || E - J._fid > Q ? (l.deleteBuffer(J._buf), J._buf = null, b[p] = null) : x++);
                if (t / 2 > x && t > 128) {
                    var X = {};
                    for (p in b) b[p] && (X[p] = b[p]);
                    l._bufPool = X
                }
                l._validBufCount = x
            },
            _swapLineMap: function () {
                var o = this;
                S = o._polylineModelMap, o._polylineModelMap = o._polylineModelMapSwap, o._polylineModelMapSwap = S, S = o._wireframeModelMap, o._wireframeModelMap = o._wireframeModelMapSwap, o._wireframeModelMapSwap = S, S = o._polylineIndexMap, o._polylineIndexMap = o._polylineIndexMapSwap, o._polylineIndexMapSwap = S, S = o._wireframeIndexMap, o._wireframeIndexMap = o._wireframeIndexMapSwap, o._wireframeIndexMapSwap = S
            },
            _updateSkyBox: function (y) {
                if (this._skyBox && y) {
                    var O = y.property, R = !1, C = this._skyBox;
                    if ("eye" === O || "forceUpdate" === O) {
                        var L = this._eye;
                        C.p3(L[0], L[1], L[2]), R = !0
                    }
                    if ("near" === O || "far" === O || "forceUpdate" === O) {
                        var j = this._near, c = this._far, p = C.getFinalScale3d();
                        if (p[0] /= 2, p[1] /= 2, p[2] /= 2, p[0] <= j || p[0] >= c || p[1] <= j || p[1] >= c || p[2] <= j || p[2] >= c) {
                            var e = 2 * j * c / (j + c), J = Math.min(p[0], p[1], p[2]), q = e / J, $ = C.getScale3d();
                            C.setScale3d($[0] * q, $[1] * q, $[2] * q), R = !0
                        }
                    }
                    R && this.invalidateData(C)
                }
            },
            getSkyBox: function () {
                return this._skyBox
            },
            setSkyBox: function (Z) {
                var r = this._skyBox;
                r && (this._skyBoxStyleMap && r.setStyleMap(this._skyBoxStyleMap), this._skyBoxStyleMap = null, this._skyBoxAnchor3d && r.setAnchor3d(this._skyBoxAnchor3d), this._skyBoxAnchor3d = null, this._skyBoxP3 && r.p3(this._skyBoxP3), this._skyBoxP3 = null), this._skyBox = Z, this.ump(this._updateSkyBox, this), Z && (Z.dm() && Z.dm().remove(Z), this._skyBoxStyleMap = x.Default.clone(Z.getStyleMap()), this._skyBoxAnchor3d = Z.getAnchor3d(), Z.setAnchor3d(.5, .5, .5), this._skyBoxP3 = Z.p3().slice(0), Z.s({
                    "shape3d.reverse.flip": !0,
                    "shape3d.reverse.cull": !1,
                    "all.reverse.flip": !0,
                    "all.reverse.cull": !1,
                    "front.reverse.flip": !0,
                    "front.reverse.cull": !1,
                    "back.reverse.flip": !0,
                    "back.reverse.cull": !1,
                    "left.reverse.flip": !0,
                    "left.reverse.cull": !1,
                    "right.reverse.flip": !0,
                    "right.reverse.cull": !1,
                    "top.reverse.flip": !0,
                    "top.reverse.cull": !1,
                    "bottom.reverse.flip": !0,
                    "bottom.reverse.cull": !1
                }), this.mp(this._updateSkyBox, this), this._updateSkyBox({property: "forceUpdate"})), this.fp("skyBox", r, Z)
            },
            drawSky: function (Y, J, j) {
                var P = this, e = P._skyBox;
                if (e) {
                    var R = P._headlightIntensity, s = as(P._headlightColor), J = P._prg;
                    1 !== R && (s = [s[0] * R, s[1] * R, s[2] * R]), Po(Y, J.uHeadlightColor, [s[0], s[1], s[2], 1]);
                    var N = P.getData3dUI(e);
                    if (N) {
                        var T, b = P.isOrtho();
                        b && (T = P._projectMatrix, P.setOrtho(!1), Po(Y, J.uPMatrix, P._projectMatrix = zr(P))), N._42(Y, J, j, function () {
                            return !0
                        }), b && (P.setOrtho(!0), Po(Y, J.uPMatrix, P._projectMatrix = T))
                    }
                    Y.clear(Y.DEPTH_BUFFER_BIT), Po(Y, J.uHeadlightColor, [s[0], s[1], s[2], P._headlightDisabled ? 1 : 0])
                }
            },
            _95I: function (H, f, x, q, U) {
                function E(Z) {
                    if (!!Z.s("shape3d.alwaysOnTop") == !!U && u.isVisible(Z) && (!A || z)) {
                        if (!x && u.isTransparentMask(Z)) return;
                        var e = u.getData3dUI(Z);
                        e && e._42(H, f, x, X)
                    }
                }

                var u = this, X = function (B) {
                    return q ? B : !B
                };
                u.sky && H.clear(H.DEPTH_BUFFER_BIT);
                var Z = u.drawFilter;
                Z ? u.dm().each(function (v) {
                    Z(v) || E(v)
                }) : u.dm().each(function (t) {
                    E(t)
                })
            },
            getLogicalPoint: function (k) {
                return ln(k, this._canvas)
            },
            isRectOverlapping: function (v) {
                var Y = this.getData3dUI(v);
                return Y._rectOverlapping
            },
            getHitFaceInfo: function (X) {
                X.target && (X = this.lp(X));
                var z = this.getDataInfoAt(X);
                if (z) {
                    var D = this._1o.face(z.data, Wg(X.x, X.y));
                    if (D) return {data: z.data, face: D}
                }
                return o
            },
            unproject: function (f, c) {
                var r = this, E = r.getWidth(), D = r.getHeight(), q = f.target ? r.lp(f) : f, p = q.x - E / 2,
                    w = q.y - D / 2, j = 2 * (p / E), Z = 2 * (-1 * w / D);
                c = c || 0;
                var M = Nd(), T = zr(r), _ = yo(r);
                Fr(M, T, _), Ee(M);
                var C = De([j, Z, c, 1], M);
                return [C[0] / C[3], C[1] / C[3], C[2] / C[3]]
            },
            getDataAt: function (c) {
                var x = this.getDataInfoAt(c);
                return x ? x.data : o
            },
            getDataInfoAt: function (d, a) {
                return d.target && (d = this.lp(d)), this._1o.get(Wg(d.x, d.y, a), !0)
            },
            getDatasInRect: function (J) {
                return this._1o.get(J)
            },
            setEditable: function (L) {
                var R = this, V = R._editable;
                R._editable = L, this.fp(Lj, V, L)
            },
            isEditable: function (v) {
                var U = this;
                return U._editable ? Un(v) ? v.s("3d.editable") ? U._editableFunc ? U._editableFunc(v) : !0 : !1 : !1 : !1
            },
            isSelectable: function ($) {
                return $.s("3d.selectable") && this.sm().isSelectable($)
            },
            isMovable: function (n) {
                var I = this;
                return xf(n) && n.getStyle(jk) !== qr ? !1 : n.s("3d.movable") ? I._movableFunc ? I._movableFunc(n) : !0 : !1
            },
            isSizeEditable: function (E) {
                return Un(E) ? this._sizeEditableFunc ? this._sizeEditableFunc(E) : !0 : !1
            },
            isRotationEditable: function (M) {
                return Un(M) && M.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(M) : !0 : !1
            },
            handleDelete: function () {
                this._editable && this.removeSelection()
            },
            zoomIn: function (R) {
                this.setZoom(Ab, R)
            },
            zoomOut: function (l) {
                this.setZoom(1 / Ab, l)
            },
            setZoom: function (U, e) {
                if (1 !== U) {
                    var N = this;
                    if (N._ortho) return N.setOrthoZoom(U, e), void 0;
                    N._14o && N._14o.stop(!0);
                    var m = 1 / U, s = N._eye, P = N._center, E = P[0] + (s[0] - P[0]) * m - s[0],
                        n = P[1] + (s[1] - P[1]) * m - s[1], G = P[2] + (s[2] - P[2]) * m - s[2];
                    if (!(vl(s, P) < N._moveStep && 1 > m)) {
                        if (e = Zq(e)) {
                            var j = Ah(s);
                            return e.action = function (F) {
                                N.fi({kind: N._zooming ? "betweenZoom" : "beginZoom"}), N._zooming = 1, s[0] = j[0] + E * F, s[1] = j[1] + n * F, s[2] = j[2] + G * F, N.fp(wf, o, s)
                            }, e._37o = function () {
                                delete N._14o, delete N._zooming, N.fi({kind: "endZoom"}), N.onZoomEnded()
                            }, N._14o = td(e)
                        }
                        s[0] += E, s[1] += n, s[2] += G, N.fp(wf, o, s)
                    }
                }
            },
            setOrthoZoom: function (G, C) {
                if (1 !== G) {
                    var l = this;
                    l._14o && l._14o.stop(!0);
                    var J = l._orthoWidth, s = J / G - J;
                    if (!(J < l._moveStep && G > 1)) return (C = Zq(C)) ? (C.action = function (j) {
                        l.fi({kind: l._zooming ? "betweenZoom" : "beginZoom"}), l._zooming = 1, l.setOrthoWidth(J + s * j)
                    }, C._37o = function () {
                        delete l._14o, delete l._zooming, l.fi({kind: "endZoom"}), l.onZoomEnded()
                    }, l._14o = td(C)) : (l.setOrthoWidth(J / G), void 0)
                }
            },
            getPositionInfo: function (O) {
                var A = this, B = A._eye, x = A._center, j = A.getAspect(),
                    L = O ? Hj(sg(x, B, !0), sg(O, B)) : vl(B, x);
                if (A._ortho) {
                    var _ = A._orthoWidth;
                    return {length: L, height: _ / j, width: _}
                }
                var U = 2 * u(A._fovy / 2) * L;
                return {length: L, height: U, width: U * j}
            },
            getCenterInfo: function () {
                var W = this;
                return W._81O || (W._81O = W.getPositionInfo()), Ah(W._81O)
            },
            rotate: function (b, L, O, h) {
                var d = this;
                if (b || L) {
                    h == o && (h = d._firstPersonMode), d._88O && d._88O.stop(!0);
                    var S = d._center, X = d._eye, W = d.getCenterInfo().length, w = h ? S : X, t = h ? X : S,
                        M = sg(w, t), A = N(M[0], M[2]), I = N(e(M[0] * M[0] + M[2] * M[2]), M[1]), u = h ? Wk : wf;
                    return h && (L = -L), (O = Zq(O)) ? (O.action = function (g) {
                        d.fi({kind: d._rotating ? "betweenRotate" : "beginRotate"}), d._rotating = 1;
                        var y = A + b * g, T = I + L * g;
                        T = ms(T), M[0] = W * J(T) * J(y), M[1] = W * c(T), M[2] = W * J(T) * c(y), w[0] = t[0] + M[0], w[1] = t[1] + M[1], w[2] = t[2] + M[2], d.fp(u, o, w)
                    }, O._37o = function () {
                        delete d._88O, delete d._rotating, d.fi({kind: "endRotate"}), d.onRotateEnded()
                    }, d._88O = td(O)) : (A += b, I += L, I = ms(I), M[0] = W * J(I) * J(A), M[1] = W * c(I), M[2] = W * J(I) * c(A), w[0] = t[0] + M[0], w[1] = t[1] + M[1], w[2] = t[2] + M[2], d.fp(u, o, w), void 0)
                }
            },
            pan: function (g, n, S, z) {
                if (g || n) {
                    var N = this;
                    z == o && (z = N._firstPersonMode), N._89O && N._89O.stop(!0);
                    var l = yo(N), $ = [l[0] * g, l[4] * g, l[8] * g], I = [l[1] * n, l[5] * n, l[9] * n],
                        Y = $[0] + I[0], H = $[1] + I[1], R = $[2] + I[2], u = N._center, p = N._eye;
                    if (z) {
                        var a = fo(N.getBoundaries(), p[0], p[2], p[0] + Y, p[2] + R, e(Y * Y + R * R));
                        Y = a[0], R = a[1]
                    }
                    if (S = Zq(S)) {
                        var i = Ah(p), y = Ah(u);
                        return S.action = function (T) {
                            N.fi({kind: N._panning ? "betweenPan" : "beginPan"}), N._panning = 1, u[0] = y[0] + Y * T, u[1] = y[1] + H * T, u[2] = y[2] + R * T, p[0] = i[0] + Y * T, p[1] = i[1] + H * T, p[2] = i[2] + R * T, N.fp(wf, o, p), N.fp(Wk, o, u)
                        }, S._37o = function () {
                            delete N._89O, delete N._panning, N.fi({kind: "endPan"}), N.onPanEnded()
                        }, N._89O = td(S)
                    }
                    u[0] += Y, u[1] += H, u[2] += R, p[0] += Y, p[1] += H, p[2] += R, N.fp(wf, o, p), N.fp(Wk, o, u)
                }
            },
            walk: function (E, Q, O) {
                if (E) {
                    var I = this;
                    O == o && (O = I._firstPersonMode), I._90O && I._90O.stop(!0);
                    var j = I._center, G = I._eye, d = sg(j, G, !0);
                    if (O) {
                        var v = fo(I.getBoundaries(), G[0], G[2], G[0] + d[0] * E, G[2] + d[2] * E, M(E));
                        if (E = vl(v), !E) return;
                        d = [v[0] / E, 0, v[1] / E]
                    }
                    if (Q = Zq(Q)) {
                        var e = Ah(G), r = Ah(j);
                        return Q.action = function (X) {
                            I.fi({kind: I._walking ? "betweenWalk" : "beginWalk"}), I._walking = 1;
                            var b = E * X;
                            G[0] = e[0] + d[0] * b, G[1] = e[1] + d[1] * b, G[2] = e[2] + d[2] * b, j[0] = r[0] + d[0] * b, j[1] = r[1] + d[1] * b, j[2] = r[2] + d[2] * b, I.fp(wf, o, G), I.fp(Wk, o, j)
                        }, Q._37o = function () {
                            delete I._90O, delete I._walking, I.fi({kind: "endWalk"}), I.onWalkEnded()
                        }, I._90O = td(Q)
                    }
                    G[0] += d[0] * E, G[1] += d[1] * E, G[2] += d[2] * E, j[0] += d[0] * E, j[1] += d[1] * E, j[2] += d[2] * E, I.fp(wf, o, G), I.fp(Wk, o, j)
                }
            },
            handleScroll: function (G, u) {
                G.preventDefault();
                var g = this, Y = g._moveStep, l = g.getDataInfoAt(G);
                if (l) {
                    var J = l.data;
                    if (J && g.isInteractive(J)) {
                        var j = g.intersectObject(G, J);
                        if (j) {
                            var t = j.part,
                                d = Ui(J.s(t + ".image") || J.s("shape3d." + t + ".image") || J.s("all.image") || J.s("shape3d.image"));
                            if (d && pe(d.scrollable, J, g)) return
                        }
                    }
                }
                g.isFirstPersonMode() ? g.isPannable() && g.pan(0, u > 0 ? Y : -Y) : g.isZoomable() && g.setZoom(0 > u ? 1 / Xf : Xf)
            },
            handlePinch: function (H, M) {
                this.isZoomable() && this.setZoom(M > H ? 1 / vs : vs)
            },
            reset: function () {
                this.setCenter(w.graph3dViewCenter), this.setEye(w.graph3dViewEye), this.setUp(w.graph3dViewUp)
            },
            moveSelection: function (E, m, R) {
                var F = this;
                F.dm().beginTransaction(), Xg(this.sm().toSelection(this.isMovable, this), E, m, R), F.dm().endTransaction()
            },
            getMoveMode: function (z, e) {
                var Y = e.s("3d.move.mode");
                if (Y) return Y;
                var B = "88", h = "89", J = "90";
                return sf(z) || Jh[B] && Jh[h] && Jh[J] ? "xyz" : Jh[B] && Jh[h] ? "xy" : Jh[B] && Jh[J] ? "xz" : Jh[h] && Jh[J] ? "yz" : Jh[B] ? "x" : Jh[h] ? "y" : Jh[J] ? "z" : "xz"
            },
            handleTick: function () {
                var G = this, d = !1, C = G._moveStep, H = C, y = !1, K = !0, A = G._rotateStep * (K ? -1 : 1);
                if (G.isWalkable() || (H = 0), G.isPannable() || (C = 0), G.isRotatable() || (A = 0), G._32Q) {
                    var D = (Ye() - G._32Q) / 50;
                    H *= D, C *= D, A *= D
                }
                G._31Q && (cj(G._31Q), delete G._31Q, delete G._32Q), vh() && (d = !0, G.pan(-C, 0, y, K)), nr() && (d = !0, G.pan(C, 0, y, K)), qd() && (d = !0, sf() ? G.pan(0, C, y, K) : G.walk(H, y, K)), ac() && (d = !0, sf() ? G.pan(0, -C, y, K) : G.walk(-H, y, K)), Jm() && (d = !0, G.rotate(-A, 0, y, K)), Ac() && (d = !0, G.rotate(A, 0, y, K)), pq() && (d = !0, G.rotate(0, -A / 2, y, K)), wb() && (d = !0, G.rotate(0, A / 2, y, K)), d && (G._32Q = Ye(), G._31Q = Wj(G.handleTick, G))
            },
            handleKeyDown: function (e) {
                var H = this;
                !Kg(e) && rs[e.keyCode] ? H.handleTick() : Hi(e) ? H.selectAll() : jp(e) ? H.handleDelete(e) : Hk(e) && this.isResettable() && H.reset()
            },
            checkDoubleClickOnNote: function (V, e, k) {
                var S = this;
                if (k === Ro) {
                    if (e.s("note.toggleable")) return e.s(Fg, !e.s(Fg)), S.fi({
                        kind: "toggleNote",
                        event: V,
                        data: e,
                        part: k
                    }), !0
                } else if (k === Oo && e.s("note2.toggleable")) return e.s(gn, !e.s(gn)), S.fi({
                    kind: "toggleNote2",
                    event: V,
                    data: e,
                    part: k
                }), !0;
                return !1
            },
            checkDoubleClickOnRotation: function (F, x, I) {
                return I === Ze ? (x.setRotationX(0), !0) : I === Ob ? (x.setRotationY(0), !0) : I === Gg ? (x.setRotationZ(0), !0) : !1
            },
            onRotateEnded: function () {
            },
            onWalkEnded: function () {
            },
            getViewRatio: function (m) {
                var R = this;
                if (R.isOrtho()) return R.getWidth() / R.getOrthoWidth();
                var P = R.getCenter(), r = R.getHeight(), U = R.getEye(), A = [P[0] - U[0], P[1] - U[1], P[2] - U[2]],
                    z = [m[0] - U[0], m[1] - U[1], m[2] - U[2]], q = Math.sqrt(A[0] * A[0] + A[1] * A[1] + A[2] * A[2]),
                    E = 1 / Math.tan(R.getFovy() / 2);
                return r * q * E / (z[0] * A[0] + z[1] * A[1] + z[2] * A[2])
            },
            inViewSpace: function (c) {
                var x, N = this, b = N._transformPointToViewSpace(c), C = N.getAspect(), H = N.getNear(),
                    W = N.getFar();
                return -b[2] < H || -b[2] > W ? !1 : N.isOrtho() ? (x = N.getOrthoWidth() / 2, Math.abs(b[0]) <= x && Math.abs(b[1] * C) <= x) : (x = Math.sqrt(b[0] * b[0] + b[1] * b[1] + b[2] * b[2]) * Math.tan(N.getFovy() / 2), Math.abs(b[1] <= x) && Math.abs(b[0]) <= x * C)
            },
            toViewPosition: function (C) {
                var n = this, J = n.getWidth() / 2, z = n.getHeight() / 2, p = n._18Q;
                return p && p._wh === J / z || (p = zr(n), n._18Q = Fr(p, p, yo(n)), n._18Q._wh = J / z), C = De([C[0], C[1], C[2], 1], p), {
                    x: J + J * C[0] / C[3],
                    y: z - z * C[1] / C[3]
                }
            },
            getHitPosition: function (b, X, y) {
                var a = this, e = a.getWidth(), x = a.getHeight(), g = b.target ? a.lp(b) : b, q = g.x - e / 2,
                    O = g.y - x / 2, H = a.getCenterInfo(), V = yo(a);
                X = X ? X : [0, 0, 0], y = y ? y : [0, 1, 0], q = q / e * H.width, O = -1 * O / x * H.height;
                var Z = [V[0] * q, V[4] * q, V[8] * q], U = [V[1] * O, V[5] * O, V[9] * O],
                    E = [Z[0] + U[0], Z[1] + U[1], Z[2] + U[2]], J = a.getCenter(),
                    m = Fe(a, X, y, [E[0] + J[0], E[1] + J[1], E[2] + J[2]]);
                return m ? m : [0, 0, 0]
            },
            intersectObject: function (w, j) {
                return this._raycaster.intersectObject(w, j)
            },
            intersectObjects: function (u, e, x) {
                return this._raycaster.intersectObjects(u, e, x)
            },
            getLineLength: function (n) {
                this.validate();
                var V = this.getData3dUI(n);
                if (V && V.getCache) {
                    var T = V.getCache();
                    if (T) return T[T.length - 1].length
                }
                return 0
            },
            getLineOffset: function (F, Y) {
                var E = this.getData3dUI(F);
                if (E && E.getCache) {
                    var X = E.getCache();
                    if (X) return Lb(X, Y)
                }
                return o
            },
            isLabelVisible: function () {
                return !0
            },
            isNoteVisible: function () {
                return !0
            },
            moveCamera: function (e, I, h) {
                var V = this, q = V.getEye();
                q = [q[0], q[1], q[2]];
                var A = V.getCenter();
                if (A = [A[0], A[1], A[2]], e || (e = q), I || (I = A), V._flyAnim && V._flyAnim.stop(!0), h = Zq(h), !h) return V.setEye(e[0], e[1], e[2]), V.setCenter(I[0], I[1], I[2]), delete V._flyAnim, !0;
                var L = [e[0] - q[0], e[1] - q[1], e[2] - q[2]], F = [I[0] - A[0], I[1] - A[1], I[2] - A[2]];
                return h.action = function (T) {
                    V.setCenter(A[0] + F[0] * T, A[1] + F[1] * T, A[2] + F[2] * T), V.setEye(q[0] + L[0] * T, q[1] + L[1] * T, q[2] + L[2] * T)
                }, h._37o = function () {
                    delete V._flyAnim
                }, V._flyAnim = td(h)
            },
            flyTo: function () {
                function b(X, _, r) {
                    if (r instanceof x.Node) {
                        n.fromArray(Zr(r, _.getMat(r)));
                        var v = r.getAnchor3d();
                        X.push((new Jd).set(0 - v.x, 0 - v.y, 0 - v.z).applyMatrix4(n)), X.push((new Jd).set(0 - v.x, 0 - v.y, 1 - v.z).applyMatrix4(n)), X.push((new Jd).set(0 - v.x, 1 - v.y, 0 - v.z).applyMatrix4(n)), X.push((new Jd).set(0 - v.x, 1 - v.y, 1 - v.z).applyMatrix4(n)), X.push((new Jd).set(1 - v.x, 0 - v.y, 0 - v.z).applyMatrix4(n)), X.push((new Jd).set(1 - v.x, 0 - v.y, 1 - v.z).applyMatrix4(n)), X.push((new Jd).set(1 - v.x, 1 - v.y, 0 - v.z).applyMatrix4(n)), X.push((new Jd).set(1 - v.x, 1 - v.y, 1 - v.z).applyMatrix4(n))
                    }
                }

                var K = new Jd, $ = new Jd, S = new Jd, G = new Jd, n = new Mq, h = new x.Math.Quaternion, V = new Bh;
                return function (m, D, k) {
                    var L = this;
                    if (k !== v) D = {animation: D, ratio: k}; else {
                        var F = typeof D;
                        ("boolean" === F || "object" === F && D.duration) && (D = {animation: D})
                    }
                    D = D || {}, K.fromArray(L.getEye()), $.fromArray(L.getCenter());
                    var I, A, e = [], t = D.center, r = D.distance === v;
                    if (t && S.fromArray(t), m instanceof x.Node) t || S.fromArray(m.p3()), r && (b(e, L, m), I = e.length); else {
                        if (m || (m = L.dm().getDatas()), !m.length) return;
                        if ((r || !t) && (e = [], m.forEach(function (S) {
                            b(e, L, S)
                        }), I = e.length), !I) return;
                        if (!t) {
                            for (S.set(0, 0, 0), A = 0; I > A; A++) S.add(e[A]);
                            S.multiplyScalar(1 / I)
                        }
                    }
                    if (L.setCenter(S.x, S.y, S.z), G.subVectors(K, $), D.direction || D.worldDirection) {
                        !D.worldDirection && m instanceof x.Node ? h.setFromEuler(V.set(m.r3(), m.getRotationMode(), !0)) : h.set(0, 0, 0, 1);
                        var s = G.length();
                        G.fromArray(D.worldDirection || D.direction).applyQuaternion(h).setLength(s)
                    }
                    if (r) {
                        for (var u, c, o, J, q, X = L.getNear(), W = 10, k = D.ratio || .8; W--;) {
                            for (L._eye[0] = G.x + S.x, L._eye[1] = G.y + S.y, L._eye[2] = G.z + S.z, u = zr(L), Fr(u, u, yo(L)), J = !0, q = -1 / 0, A = 0; I > A; A++) {
                                if (o = e[A], c = De([o.x, o.y, o.z, 1], u), c[3] < X && W) {
                                    G.multiplyScalar(2), J = !1;
                                    break
                                }
                                q = Math.max(q, Math.max(Math.abs(c[0]), Math.abs(c[1])) / k - c[3])
                            }
                            if (J) break
                        }
                        G.setLength(q + G.length()).add(S)
                    } else G.setLength(D.distance).add(S);
                    L._flyAnim && L._flyAnim.stop(!0);
                    var f = Zq(D.animation);
                    if (f) {
                        L.setEye(K.x, K.y, K.z), L.setCenter($.x, $.y, $.z);
                        var y = (new Jd).subVectors(G, K), a = (new Jd).subVectors(S, $), O = new Jd, l = new Jd;
                        return f.action = function (B) {
                            O.copy(K).addScaledVector(y, B), l.copy($).addScaledVector(a, B), L.setCenter(l.x, l.y, l.z), L.setEye(O.x, O.y, O.z)
                        }, f._37o = function () {
                            delete L._flyAnim
                        }, {lastEye: K, lastCenter: $, eye: G, center: S, animation: L._flyAnim = td(f)}
                    }
                    return L.setEye(G.x, G.y, G.z), delete L._flyAnim, {lastEye: K, lastCenter: $, eye: G, center: S}
                }
            }(),
            getBoundingBox: function () {
                function y(F, z, L) {
                    S.fromArray(Zr(L, z.getMat(L)));
                    var w = L.getAnchor3d();
                    F.push((new Jd).set(0 - w.x, 0 - w.y, 0 - w.z).applyMatrix4(S)), F.push((new Jd).set(0 - w.x, 0 - w.y, 1 - w.z).applyMatrix4(S)), F.push((new Jd).set(0 - w.x, 1 - w.y, 0 - w.z).applyMatrix4(S)), F.push((new Jd).set(0 - w.x, 1 - w.y, 1 - w.z).applyMatrix4(S)), F.push((new Jd).set(1 - w.x, 0 - w.y, 0 - w.z).applyMatrix4(S)), F.push((new Jd).set(1 - w.x, 0 - w.y, 1 - w.z).applyMatrix4(S)), F.push((new Jd).set(1 - w.x, 1 - w.y, 0 - w.z).applyMatrix4(S)), F.push((new Jd).set(1 - w.x, 1 - w.y, 1 - w.z).applyMatrix4(S))
                }

                var S = new Mq;
                return function (Y) {
                    if (Y = Y || this.sm().getSelection(), Y instanceof x.Node && (Y = [Y]), 0 === Y.length) return o;
                    var H = [];
                    Y.forEach(function (i) {
                        y(H, this, i)
                    }, this);
                    var h = [1 / 0, 1 / 0, 1 / 0], j = [-1 / 0, -1 / 0, -1 / 0];
                    return H.forEach(function (F) {
                        h[0] = Math.min(F.x, h[0]), h[1] = Math.min(F.y, h[1]), h[2] = Math.min(F.z, h[2]), j[0] = Math.max(F.x, j[0]), j[1] = Math.max(F.y, j[1]), j[2] = Math.max(F.z, j[2])
                    }), {min: h, max: j}
                }
            }()
        }), zq.RenderEnv = function (h) {
            this.gv = h, this.enable = !1
        }, H.defineProperties(zq.RenderEnv.prototype, {
            debugOn: {
                get: function () {
                    return this._debugOn
                }, set: function (Q) {
                    this._debugOn = Q, this.capture && this.capture()
                }
            }
        }), H.assign(zq.RenderEnv.prototype, {
            renderEnvToCube: function (_, G, r, j) {
                var P = this, c = P.gv;
                if (!_ || !G || !r) return P.enable = !1, P._42 = null, void 0;
                P.enable = !0;
                var q = Math.floor(j / _ * G), w = c.getGL(), B = P._renderTargets;
                B ? B.length < r && (B = P._renderTargets = B.concat(new Array(r - B.length))) : B = P._renderTargets = new Array(r);
                for (var k = 0; r > k; k++) B[k] ? B[k].setSize(w, j, q) : B[k] = new zq.RenderTarget(c, w, j, q);
                var i = !1;
                P.capture = function () {
                    i = !0, c._42(), i = !1
                };
                var g = new Jd, s = new Jd, l = new Jd, t = new Jd, f = (new Jd).setY(0), J = 2 * Math.PI / r,
                    $ = _ / 2 / Math.tan(Math.PI / r), o = 2 * Math.atan2(G / 2, $), C = _ / G;
                P._42 = function (h, m, k, a) {
                    var N = P._debugOn;
                    if (!i && !N) return !1;
                    g.copy(c.getEye()), t.copy(c.getCenter()).sub(g);
                    var M = Math.atan2(t.z, t.x), n = c.getNear(), W = c.getFovy(), G = c.getAspect();
                    s.copy(c.getCenter());
                    for (var A, L = 0; r > L; L++) if (A = B[L], f.setZ(Math.cos(M)).setX(Math.sin(M)).multiplyScalar($), M -= J, l.addVectors(g, f), c.setNear($), c.setCenter([l.x, l.y, l.z]), c.setFovy(o), c.setAspect(C), N) {
                        var e = Math.round(m / r);
                        h.viewport(e * L, 0, e, k), a()
                    } else Ue(h, A.frame), h.viewport(0, 0, A.width, A.height), h.clear(h.COLOR_BUFFER_BIT), a(), Bk(h), A.assureTexture();
                    return c.setNear(n), c.setCenter([s.x, s.y, s.z]), c.setFovy(W), c.setAspect(G), !0
                }, P.capture()
            }, getTextureInfo: function (W) {
                var h = this._renderTargets;
                if (!h) return null;
                var k = this._renderTargets[W];
                return k ? {index: W, texture: k.texture, textureName: k.uuid} : null
            }
        }), H.assign(zq.Graph3dView.prototype, {
            renderEnvToCube: function (d, i, H, k) {
                var y = this;
                y.envRenderer || (y.envRenderer = new zq.RenderEnv(y)), y.envRenderer.renderEnvToCube(d, i, H, k)
            }
        }), zq.RenderTarget = function (V, N, r, v, n) {
            var $ = this;
            n = n || {}, $.uuid = x.Math.generateUUID(), $.gv = V, $.init(V, N, n), $.setSize(N, r, v)
        }, H.assign(zq.RenderTarget.prototype, {
            init: function (x, f, Y) {
                var I = this, S = I.texture = f.createTexture();
                f.activeTexture(f.TEXTURE0), f.bindTexture(f.TEXTURE_2D, S), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_S, f.CLAMP_TO_EDGE), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_T, f.CLAMP_TO_EDGE), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MIN_FILTER, Y.minFilter || f.LINEAR), f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MAG_FILTER, Y.magFilter || f.LINEAR), f.bindTexture(f.TEXTURE_2D, null), I.render = f.createRenderbuffer(), I.frame = f.createFramebuffer(), x._2O[I.uuid] = S
            }, assureTexture: function () {
                var k = this, m = k.uuid, S = k.gv._2O;
                S[m] || (S[m] = k.texture)
            }, setSize: function (W, B, $) {
                var t = this;
                if (t.width !== B || t.height !== $) {
                    var N = W.RGBA, r = W.TEXTURE_2D, L = W.RENDERBUFFER, S = W.FRAMEBUFFER;
                    Hl(W, t.texture), W.texImage2D(r, 0, N, B, $, 0, N, W.UNSIGNED_BYTE, o), W.bindRenderbuffer(L, t.render), W.renderbufferStorage(L, W.DEPTH_COMPONENT16, B, $), Ue(W, t.frame), W.framebufferTexture2D(S, W.COLOR_ATTACHMENT0, r, t.texture, 0), W.framebufferRenderbuffer(S, W.DEPTH_ATTACHMENT, L, t.render), Hl(W, o), W.bindRenderbuffer(L, o), Bk(W), t.width = B, t.height = $
                }
            }, toCanvas: function () {
                var k = this, f = k.gv.getGL();
                Ue(f, k.frame);
                var H = k.width, u = k.height, q = new Uint8Array(4 * H * u);
                f.readPixels(0, 0, H, u, f.RGBA, f.UNSIGNED_BYTE, q), Bk(f);
                var S = G.createElement("canvas");
                S.width = H, S.height = u;
                var Z = S.getContext("2d"), T = Z.createImageData(H, u);
                return T.data.set(q), Z.putImageData(T, 0, 0), S
            }
        });
        var lb = zq.Interactor = function (b) {
            this.gv = b
        };
        Uc("Interactor", H, {
            ms_listener: 1, getView: function () {
                return this.gv.getView()
            }, setUp: function () {
                this.addListeners()
            }, tearDown: function () {
                this.removeListeners()
            }
        });
        var Wh = zq.DefaultInteractor = function (N) {
            yp(Wh, this, [N])
        };
        Uc("DefaultInteractor", lb, {
            handle_contextmenu: function (q) {
                Yd(q)
            }, handle_mousewheel: function (N) {
                this.gv.handleScroll(N, N.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (o) {
                2 === o.axis && this.gv.handleScroll(o, -o.detail)
            }, handle_keydown: function (O) {
                this.gv.handleKeyDown(O)
            }, handle_mousedown: function (N) {
                this.handle_touchstart(N)
            }, handle_touchstart: function (x) {
                Yd(x);
                var O = this, Z = O.gv, L = Di(x), g = Z.getDataInfoAt(x), $ = g ? g.data : o, G = g ? g.part : o,
                    N = Z.sm(), h = wd(x), i = $h(x);
                Z.setFocus(x) && (O._62O = o, O._57I = o, $ ? Kg(x) ? N.co($) ? N.rs($) : N.as($) : N.co($) || N.ss($) : L && (Kg(x) ? Z.isRectSelectable() && (O._62O = jr) : O._57I = Uj(x)), O._31Q && (cj(O._31Q), delete O._31Q, delete O._32Q), O._62O || (Z.isFirstPersonMode() && (sf(x) || i > 2 ? O._62O = "pan" : Z.isMouseRoamable() || Xp ? (O._62O = "roaming", O.foward = h && Di(x), O._32Q = Ye(), O._31Q = Wj(O.tick, O)) : L || (O._62O = "roaming")), O._62O || (L && h && bo[G] ? (O._62O = G, O.p3 = $.p3()) : L && h && Un($) && Z.isSelected($) ? Z.isMovable($) ? (O._62O = "move", O.p3 = $.p3(), O.movedata = $) : Z.isInteractive($) && (O._62O = "none") : Xp && (i > 2 ? O._62O = "pan" : 2 === i && (O.dist = vj(x), O._62O = "pinch")))), O.point = Z.lp(x), ce(O, x), qs(x) ? Z.handleDoubleClick(x, $, G) : Z.handleClick(x, $, G))
            }, tick: function () {
                var k = this, q = k.gv, F = q._moveStep;
                k.point && q.isWalkable() && (k._32Q && (F *= (Ye() - k._32Q) / 50), q.walk(k.foward ? F : -F), k._32Q = Ye(), k._31Q = Wj(k.tick, k))
            }, handle_mouseup: function (E) {
                this.handle_touchend(E)
            }, handle_touchend: function (G) {
                var j = this._57I;
                j && (vl(j, Uj(G)) <= 1 && this.gv.sm().cs(), this._57I = o)
            }, handleWindowMouseMove: function (w) {
                this.handleWindowTouchMove(w)
            }, handleWindowTouchMove: function (l) {
                var n, B, I = this, x = I.gv, v = I._62O, $ = I.point, q = x.dm(), W = x.lp(l), V = W.x - $.x,
                    w = W.y - $.y, k = x.getWidth(), G = x.getHeight();
                if (k && G) {
                    var R = -C * V / k, s = -C * w / G;
                    if ("roaming" === v) I.rotate(l, R / 2, s / 2); else if (v === Ze || v === Ob || v === Gg) x._86O || q.beginTransaction(), x.fi({
                        kind: x._86O ? "betweenEditRotation" : "beginEditRotation",
                        event: l
                    }), x._86O = 1, x.sm().each(function (n) {
                        if (Un(n) && x.isRotationEditable(n)) {
                            var G = M(R) > M(s) ? R : s;
                            v === Ze ? n.setRotationX(n.getRotationX() + G) : v === Ob ? n.setRotationY(n.getRotationY() + G) : v === Gg && n.setRotationZ(n.getRotationZ() + G)
                        }
                    }); else if ("move" === v || bo[v]) {
                        v === mr || v === qp || v === qm ? (x._87O || q.beginTransaction(), x.fi({
                            kind: x._87O ? "betweenEditScale" : "beginEditScale",
                            event: l
                        }), x._87O = 1) : (x._moving || q.beginTransaction(), x.fi({
                            kind: x._moving ? "betweenMove" : "beginMove",
                            event: l
                        }), x._moving = 1);
                        var h, f = I.p3, a = x.getPositionInfo(f), E = yo(x);
                        h = v === Km ? "x" : v === Fq ? "y" : v === dh ? "z" : v === mr ? "sx" : v === qp ? "sy" : v === qm ? "sz" : x.getMoveMode(l, I.movedata), V = V / k * a.width, w = -1 * w / G * a.height;
                        var t, d, S = [E[0] * V, E[4] * V, E[8] * V], Z = [E[1] * w, E[5] * w, E[9] * w],
                            _ = S[0] + Z[0], c = S[1] + Z[1], L = S[2] + Z[2], T = [f[0] + _, f[1] + c, f[2] + L],
                            g = sg(x.getEye(), T, !0);
                        if ("xyz" === h ? (t = T, x.moveSelection(_, c, L)) : "xz" === h ? (t = Fe(x, f, [0, 1, 0], T), t && x.moveSelection(t[0] - f[0], 0, t[2] - f[2])) : "xy" === h ? (t = Fe(x, f, [0, 0, 1], T), t && x.moveSelection(t[0] - f[0], t[1] - f[1], 0)) : "yz" === h ? (t = Fe(x, f, [1, 0, 0], T), t && x.moveSelection(0, t[1] - f[1], t[2] - f[2])) : "x" === h || "sx" === h ? (g[0] = 0, t = Fe(x, f, g, T), t && (d = t[0] - f[0], "x" === h ? x.moveSelection(d, 0, 0) : x.sm().each(function (q) {
                            Un(q) && x.isSizeEditable(q) && (n = q.getScaleX() + d / 100, B = n / q.getScaleX(), q.setScaleX(n), sf(l) && (q.setScaleY(q.getScaleY() * B), q.setScaleTall(q.getScaleTall() * B)))
                        }))) : "y" === h || "sy" === h ? (g[1] = 0, t = Fe(x, f, g, T), t && (d = t[1] - f[1], "y" === h ? x.moveSelection(0, d, 0) : x.sm().each(function (W) {
                            Un(W) && x.isSizeEditable(W) && (n = W.getScaleTall() + d / 100, B = n / W.getScaleTall(), W.setScaleTall(n), sf(l) && (W.setScaleY(W.getScaleY() * B), W.setScaleX(W.getScaleX() * B)))
                        }))) : ("z" === h || "sz" === h) && (g[2] = 0, t = Fe(x, f, g, T), t && (d = t[2] - f[2], "z" === h ? x.moveSelection(0, 0, d) : x.sm().each(function (S) {
                            Un(S) && x.isSizeEditable(S) && (n = S.getScaleY() + d / 100, B = n / S.getScaleY(), S.setScaleY(n), sf(l) && (S.setScaleX(S.getScaleX() * B), S.setScaleTall(S.getScaleTall() * B)))
                        }))), !t) return;
                        I.p3 = t
                    } else if (v === jr) {
                        var u = I.div;
                        u || (u = I.div = Hm(), Ur(I.getView(), u), u.op = $, u.style.background = x.getRectSelectBackground()), x.fi({
                            kind: x._rectSelecting ? "betweenRectSelect" : "beginRectSelect",
                            event: l
                        }), x._rectSelecting = 1, u.rect = an(u.op, W), Vq(u, u.rect)
                    } else if ("pinch" === v && 2 === $h(l)) {
                        x.fi({kind: x._pinching ? "betweenPinch" : "beginPinch", event: l}), x._pinching = 1;
                        var d = vj(l);
                        x.handlePinch(d, I.dist), I.dist = d
                    } else "pan" === v || sf(l) ? I.pan(l, V, w) : "none" === v || x.isFirstPersonMode() || (Di(l) ? I.rotate(l, R, s) : (I.pan(l, V, 0), x.isWalkable() && (x.fi({
                        kind: x._walking ? "betweenWalk" : "beginWalk",
                        event: l
                    }), x._walking = 1, x.walk(w / x.getHeight() * x.getCenterInfo().height))));
                    I.point = W
                }
            }, pan: function (P, W, z) {
                var x = this.gv;
                if (x.isPannable()) {
                    var Z = x.getWidth(), $ = x.getHeight();
                    if (!Z || !$) return;
                    var u = x.getCenterInfo(), C = W / Z * u.width, X = -1 * z / $ * u.height;
                    x.fi({kind: x._panning ? "betweenPan" : "beginPan", event: P}), x._panning = 1, x.pan(-C, -X)
                }
            }, rotate: function (r, K, c) {
                var p = this.gv;
                p.isRotatable() && (p.fi({
                    kind: p._rotating ? "betweenRotate" : "beginRotate",
                    event: r
                }), p._rotating = 1, p.rotate(K, c))
            }, handleWindowMouseUp: function (o) {
                this.handleWindowTouchEnd(o)
            }, handleWindowTouchEnd: function (u) {
                var P = this, a = P.gv, S = a.dm(), y = P.div;
                if (y) {
                    var X = a.getDatasInRect(y.rect);
                    if (!X.isEmpty()) {
                        var q = a.sm(), t = q.toSelection();
                        X.each(function (J) {
                            q.co(J) ? t.remove(J) : t.add(J)
                        }), q.ss(t)
                    }
                    Lg(y)
                }
                a._moving && (delete a._moving, a.fi({
                    kind: "endMove",
                    event: u
                }), a.onMoveEnded(), S.endTransaction()), a._panning && (delete a._panning, a.fi({
                    kind: "endPan",
                    event: u
                }), a.onPanEnded()), a._rotating && (delete a._rotating, a.fi({
                    kind: "endRotate",
                    event: u
                }), a.onRotateEnded()), a._86O && (delete a._86O, a.fi({
                    kind: "endEditRotation",
                    event: u
                }), S.endTransaction()), a._87O && (delete a._87O, a.fi({
                    kind: "endEditScale",
                    event: u
                }), S.endTransaction()), a._pinching && (delete a._pinching, a.fi({
                    kind: "endPinch",
                    event: u
                }), a.onPinchEnded()), a._rectSelecting && (delete a._rectSelecting, a.fi({
                    kind: "endRectSelect",
                    event: u
                }), a.onRectSelectEnded()), a._walking && (delete a._walking, a.fi({
                    kind: "endWalk",
                    event: u
                }), a.onWalkEnded()), P.dist = P.point = P._62O = P.p3 = P.movedata = P.div = P._57I = P._32Q = P._31Q = P.foward = o
            }
        });
        var dn = zq.MapInteractor = function (o) {
            yp(dn, this, [o]), this._minPhi = 0, this._maxPhi = 5 * Y / 12, this._keepHorizon = !0, this._threshold = 2, this._touchScaleThreshold = .05, this._touchRotateThreshold = .03, this._touchScaleCheckAccuracy = .01, this._panButton = "right"
        };
        Uc("MapInteractor", lb, {
            handle_contextmenu: function (W) {
                Yd(W)
            }, handle_mousewheel: function (f) {
                this.gv.handleScroll(f, f.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (X) {
                2 === X.axis && this.gv.handleScroll(X, -X.detail)
            }, handle_keydown: function (f) {
                this.gv.handleKeyDown(f)
            }, handle_mousedown: function (M) {
                this.handle_touchstart(M)
            }, handle_touchstart: function (S) {
                Yd(S);
                var H = this, k = H.gv;
                if (k.setFocus(S)) {
                    k.lp(S);
                    var T = k.getDataInfoAt(S), n = T ? T.data : o, a = T ? T.part : o;
                    if (!n || !k.isInteractive(n)) {
                        var f = H.editing = {point: k.lp(S)};
                        Xp ? f.touch = !0 : (f.touch = !1, f.pan = "left" === this.panButton === Di(S)), ce(H, S)
                    }
                    qs(S) ? k.handleDoubleClick(S, n, a) : k.handleClick(S, n, a)
                }
            }, handle_mouseup: function (Y) {
                this.handle_touchend(Y)
            }, handle_touchend: function () {
            }, handleWindowMouseMove: function (Y) {
                this.handleWindowTouchMove(Y)
            }, handleWindowTouchMove: function (u) {
                var W = this, n = W.gv, $ = W.editing;
                if ($) {
                    var i = n.lp(u), j = $.point, E = i.x - j.x, S = i.y - j.y;
                    if (!$.moved) {
                        if (Math.abs(E) < W.threshold && Math.abs(S) < W.threshold && !(u.touches && u.touches.length > 1)) return;
                        $.moved = !0
                    }
                    if ($.point = i, $.touch) {
                        var k = u.touches.length;
                        if (2 !== k) W.pan(u, E, S); else {
                            if (1 >= k) return;
                            var b = u.touches, O = {x: b[0].clientX, y: b[0].clientY},
                                h = {x: b[1].clientX, y: b[1].clientY}, I = {x: h.x - O.x, y: h.y - O.y},
                                D = $.lastCenter, F = Math.atan2(I.y, I.x), w = $.theta, H = 0;
                            w == o ? w = $.theta = F : (H = F - w, $.thetaStarted || Math.abs(H) > W.touchRotateThreshold ? ($.thetaStarted = !0, $.theta = F) : H = 0);
                            var y = Y * (O.y + h.y) / 2 / n.getHeight(), K = $.phi, L = 0;
                            K == o ? K = $.phi = y : (L = y - K, $.phiStarted || Math.abs(L) > W.touchRotateThreshold ? ($.phiStarted = !0, $.phi = y) : L = 0);
                            var p, c = Math.sqrt(I.x * I.x + I.y * I.y), X = $.vlen;
                            if (X) {
                                var T = O.x - D.x, N = O.y - D.y, l = h.x - D.x, R = h.y - D.y,
                                    m = Math.sqrt(T * T + N * N), U = Math.sqrt(l * l + R * R), Q = X / 2,
                                    r = W._sign2(m - Q), G = W._sign2(U - Q);
                                0 > r * G || 0 === r && 0 === G ? (p = 1, $.vlen = c) : (p || (p = c / X), $.scaleStarted || Math.abs(p - 1) > W.touchScaleThreshold ? ($.vlen = c, $.scaleStarted = !0) : p = 1)
                            } else X = $.vlen = c, p = 1;
                            1 !== p && n.setZoom(p), (L || H) && W.rotate(u, H, -L), $.lastCenter = {
                                x: (h.x + O.x) / 2,
                                y: (h.y + O.y) / 2
                            }
                        }
                    } else if ($.pan) W.pan(u, E, S); else {
                        var A = n.getWidth(), x = n.getHeight();
                        if (!A || !x) return;
                        var d = -C * E / A, g = -C * S / x;
                        W.rotate(u, d, g)
                    }
                }
            }, _sign2: function (N) {
                return Math.abs(N) < this._touchScaleCheckAccuracy ? 0 : N > 0 ? 1 : -1
            }, handleWindowMouseUp: function (o) {
                this.handleWindowTouchEnd(o)
            }, handleWindowTouchEnd: function (Y) {
                var V = this, u = V.editing;
                if (V.editing = null, u) {
                    var W = V.gv;
                    if (u.moved || u.pan !== ("left" === this.panButton)) W._panning = null, W._rotating = null, W.fi({
                        kind: u.pan ? "endPan" : "endRotate",
                        event: Y
                    }); else {
                        var r = W.getDataAt(Y);
                        r ? W.sm().setSelection([r]) : W.sm().clearSelection()
                    }
                }
            }, pan: function (c, I, V) {
                var Q = this, A = Q.gv;
                if (A.isPannable()) {
                    var H = A.getWidth(), L = A.getHeight();
                    if (H && L) {
                        var f = A.getCenterInfo(), J = -I / H * f.width, k = 1 * V / L * f.height;
                        A.fi({kind: A._panning ? "betweenPan" : "beginPan", event: c}), A._panning = 1;
                        var r = Q.keepHorizon, q = Q.editing.touch;
                        if ((q && c.touches && c.touches.length > 1 || !q && sf(c)) && (r = !r), !r) return A.pan(J, k);
                        if (J || k) {
                            var Y = yo(A), i = [Y[0] * J, Y[4] * J, Y[8] * J], F = [Y[1], 0, Y[9]],
                                C = Math.sqrt(F[0] * F[0] + F[2] * F[2]);
                            C && (F = [F[0] / C * k, 0, F[2] / C * k]);
                            var y = i[0] + F[0], x = i[1] + F[1], N = i[2] + F[2], T = A._center, g = A._eye;
                            T[0] += y, T[1] += x, T[2] += N, g[0] += y, g[1] += x, g[2] += N, A.fp(wf, o, g), A.fp(Wk, o, T)
                        }
                    }
                }
            }, rotate: function (l, c, z) {
                var J = this, L = J.gv;
                if (L.isRotatable()) {
                    var Z = L._center, b = L._eye, R = sg(b, Z), O = N(e(R[0] * R[0] + R[2] * R[2]), R[1]), g = O + z;
                    g = Math.max(J.minPhi, Math.min(J.maxPhi, g)), z = g - O, L.fi({
                        kind: L._rotating ? "betweenRotate" : "beginRotate",
                        event: l
                    }), L._rotating = 1, L.rotate(c, z)
                }
            }
        }), H.defineProperties(dn.prototype, {
            panButton: {
                get: function () {
                    return this._panButton
                }, set: function (g) {
                    this._panButton = g
                }
            }, minPhi: {
                get: function () {
                    return this._minPhi
                }, set: function (v) {
                    this._minPhi = v
                }
            }, maxPhi: {
                get: function () {
                    return this._maxPhi
                }, set: function (P) {
                    this._maxPhi = P
                }
            }, keepHorizon: {
                get: function () {
                    return this._keepHorizon
                }, set: function (U) {
                    this._keepHorizon = U
                }
            }, threshold: {
                get: function () {
                    return this._threshold
                }, set: function (y) {
                    this._threshold = y
                }
            }, touchScaleThreshold: {
                get: function () {
                    return this._touchScaleThreshold
                }, set: function (H) {
                    this._touchScaleThreshold = H
                }
            }, touchRotateThreshold: {
                get: function () {
                    return this._touchRotateThreshold
                }, set: function (w) {
                    this._touchRotateThreshold = w
                }
            }
        });
        var Eb = function (i) {
            this.gv = i
        };
        Jr(Eb, H, {
            _iv: !0, iv: function () {
                this._iv = !0
            }, face: function (M, y) {
                var T = this, l = T.gv.getGL();
                if (!l || !Un(M)) return o;
                var c = y.x, x = y.width, q = y.height, K = T.height - y.y - q, p = V(x / 2),
                    L = new Uint8Array(4 * x * q), O = 0;
                for (T.iv(), T.validate(M), Ue(l, T.frame), l.readPixels(c, K, x, q, l.RGBA, l.UNSIGNED_BYTE, L), Bk(l), T.iv(); p >= O; O++) for (var E = p - O, h = p + O, i = E; h >= i; i++) for (var s = E; h >= s; s++) if (i === E || i === h || s === E || s === h) {
                    var I = Ol.m[L[4 * (i * x + s)]];
                    if (I) return I
                }
            }, get: function (R, M) {
                this.validate();
                var p = this, K = p.gv.getGL();
                if (!K) return o;
                var A, I, y = R.x, W = R.width, e = R.height, z = p.height - R.y - e, w = V(W / 2),
                    b = new Uint8Array(4 * W * e), H = 0, Y = b.length, m = M ? o : new Pf, l = M ? o : {};
                if (Ue(K, p.frame), K.readPixels(y, z, W, e, K.RGBA, K.UNSIGNED_BYTE, b), Bk(K), M) {
                    for (; w >= H; H++) for (var u = w - H, d = w + H, v = u; d >= v; v++) for (var $ = u; d >= $; $++) if ((v === u || v === d || $ === u || $ === d) && (A = p.info(b, 4 * (v * W + $)))) return A
                } else for (; Y > H; H += 4) A = p.info(b, H), A && (I = A.data, l[I._id] || (m.add(I), l[I._id] = I));
                return m
            }, info: function (P, D) {
                return this.colorMap[(P[D] << 16) + (P[D + 1] << 8) + P[D + 2] + ((127 & P[D + 3]) << 24)]
            }, validate: function (I) {
                var E = this, F = E.gv, Y = F.getGL();
                if (Y) {
                    var d = F.getWidth(), a = F.getHeight(), r = Y.RGBA, u = Y.TEXTURE_2D, i = Y.RENDERBUFFER,
                        n = Y.FRAMEBUFFER;
                    E.texture || (E.texture = Tr(Y), E.render = Y.createRenderbuffer(), E.frame = Y.createFramebuffer()), (E.width !== d || E.height !== a) && (Hl(Y, E.texture), Y.texImage2D(u, 0, r, d, a, 0, r, Y.UNSIGNED_BYTE, o), Rh(Y, Y.TEXTURE_MIN_FILTER, Y.LINEAR), Y.bindRenderbuffer(i, E.render), Y.renderbufferStorage(i, Y.DEPTH_COMPONENT16, d, a), Ue(Y, E.frame), Y.framebufferTexture2D(n, Y.COLOR_ATTACHMENT0, u, E.texture, 0), Y.framebufferRenderbuffer(n, Y.DEPTH_ATTACHMENT, i, E.render), Hl(Y, o), Y.bindRenderbuffer(i, o), Bk(Y), E.width = d, E.height = a), E._iv && (E._iv = !1, Ue(Y, E.frame), F._42(I || (E.colorMap = {}), 1), Bk(Y))
                }
            }
        });
        var ip = function (x) {
            this.gv = x
        };
        Jr(ip, H, {
            gap: 0, size: 0, _42: function (W, D) {
                var H = this, U = H.gv, k = U._gridGap, L = U._gridSize;
                if (U._gridVisible) {
                    if (H.gap !== k || H.size !== L) {
                        for (var t = [], z = U._gridSize / 2, i = k * z, s = 0; 2 * z + 1 > s; s++) {
                            var w = 6 * s, v = 6 * (2 * z + 1) + w;
                            t[w] = -i, t[w + 1] = 0, t[w + 2] = -i + s * k, t[w + 3] = i, t[w + 4] = 0, t[w + 5] = -i + s * k, t[v] = -i + s * k, t[v + 1] = 0, t[v + 2] = -i, t[v + 3] = -i + s * k, t[v + 4] = 0, t[v + 5] = i
                        }
                        H.vs = new zk(t), H.gap = k, H.size = L
                    }
                    Ci(U), ib(W, D), gl(W), Ql(W, D, 1, U._gridColor, U._buffer.vs, H.vs), lo(W, 0, H.vs.length / 3, W.LINES), Se(W), jd(W, D)
                } else H.vs = H.gap = H.size = o
            }
        });
        var An = function (L) {
            this.gv = L
        };
        Jr(An, H, {
            _42: function (n, e) {
                var r = this.gv, d = r._buffer.vs, x = r._axisXColor, I = r._axisYColor, H = r._axisZColor,
                    V = r._originAxisVisible, i = r._centerAxisVisible;
                if (V || i) {
                    var F = P ? n.TRIANGLES : n.TRIANGLE_FAN, w = n.LINES;
                    if (Ci(r), ib(n, e), gl(n), V) {
                        var h = r.getCenterInfo(), Y = g(h.width, h.height) / 5, N = .8 * Y, s = .05 * Y;
                        Ql(n, e, 1.5, x, d, new zk([0, 0, 0, Y, 0, 0, N, s, 0, N, 0, s, N, -s, 0, N, 0, -s, N, s, 0, 0, 0, 0, 0, Y, 0, s, N, 0, 0, N, s, -s, N, 0, 0, N, -s, s, N, 0, 0, 0, 0, 0, 0, Y, s, 0, N, 0, s, N, -s, 0, N, 0, -s, N, s, 0, N])), lo(n, 0, 2, w), lo(n, 1, 6, F), Ql(n, e, o, I), lo(n, 7, 2, w), lo(n, 8, 6, F), Ql(n, e, o, H), lo(n, 14, 2, w), lo(n, 15, 6, F)
                    }
                    if (i) {
                        var B = r._center, _ = B[0], K = B[1], z = B[2], h = r.getPositionInfo(B);
                        Y = g(h.width, h.height) / 20, Ql(n, e, 1.5, x, d, new zk([_, K, z, _ + Y, K, z, _, K, z, _, K + Y, z, _, K, z, _, K, z + Y])), lo(n, 0, 2, w), Ql(n, e, o, I), lo(n, 2, 2, w), Ql(n, e, o, H), lo(n, 4, 2, w)
                    }
                    Se(n), jd(n, e)
                }
            }
        });
        var xp = function (A) {
            this.gv = A, this.onMouseOver = this.onMouseOver.bind(this), this.mode = xp.Mode.Disable
        };
        xp.Mode = {Disable: 0, Selection: 1, MouseOver: 2}, Jr(xp, H, {
            onMouseOver: function (J) {
                w.preventDefault(J);
                var K = this.gv.getDataAt(J);
                K !== this.mouseOverData && (this.mouseOverData = K, this.gv.iv())
            }, setFetchTargetFunc: function (x) {
                this.fetchTargetFunc = x
            }, _42: function (o, L) {
                var W, e = this, i = e._mode;
                if (i !== xp.Mode.Disable && (i === xp.Mode.Selection ? W = e.gv.sm().getSelection().toArray(function (D) {
                    return D.s("highlight.visible")
                }) : i === xp.Mode.MouseOver && e.mouseOverData && e.mouseOverData.s("highlight.visible") && (W = [e.mouseOverData]), e.fetchTargetFunc && (W = e.fetchTargetFunc(W)), W && W.length)) {
                    var Q = e.gv, X = Q.vr.isPresenting(), q = Q.getWidth();
                    if (X) {
                        var y = Q.getWidth;
                        q /= 2, Q.getWidth = function () {
                            return q
                        };
                        var c = Q.getViewport()
                    }
                    var m, V = Q.getDevicePixelRatio(), h = q * V, s = Q.getHeight() * V;
                    (m = e._renderTarget) ? m.setSize(o, h, s) : e._renderTarget = m = new zq.RenderTarget(Q, o, h, s), Ue(o, m.frame), Q.drawFilter = function (E) {
                        return W.indexOf(E) < 0 ? !0 : void 0
                    }, Q._42({}), Q.drawFilter = null, Bk(o), X && (Q.getWidth = y, Q.setViewport(o, c[0], c[1], c[2], c[3])), e.shader || (e.shader = new fn.Shader(o, bb.vs, bb.fs));
                    var T = e.shader;
                    if (e.shader.bind(), o.enable(o.BLEND), o.activeTexture(o.TEXTURE0 + 0), o.bindTexture(o.TEXTURE_2D, m.texture), T.uniforms.image = 0, T.uniforms.textureSize = [h, s], T.uniforms.edgeWidth = k["highlight.width"], e.highlightColor !== k["highlight.color"]) {
                        var Z = te(e.highlightColor = k["highlight.color"]);
                        e.highlightColorData = [Z[0] / 255, Z[1] / 255, Z[2] / 255, Z[3] / 255]
                    }
                    T.uniforms.edgeColor = e.highlightColorData, e.ibuffer ? (e.ibuffer.upload(), e.vbuffer.upload()) : (e.ibuffer = fn.Buffer.createIndexBuffer(o, new Uint16Array([0, 2, 1, 1, 2, 3])), e.vbuffer = fn.Buffer.createVertexBuffer(o, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))), T.attributes.pos.pointer(e.vbuffer), o.drawElements(o.TRIANGLES, 6, o.UNSIGNED_SHORT, 0), o.disable(o.BLEND), o.bindTexture(o.TEXTURE_2D, null), o.useProgram(L)
                }
            }
        }), H.defineProperties(xp.prototype, {
            mode: {
                get: function () {
                    return this._mode
                }, set: function (Y) {
                    var G = this._mode;
                    Y !== G && (this._mode = Y, Y === xp.Mode.MouseOver ? this.gv.getView().addEventListener("mousemove", this.onMouseOver, !1) : G === xp.Mode.MouseOver && this.gv.getView().removeEventListener("mousemove", this.onMouseOver))
                }
            }
        });
        var bb = {
                vs: ["attribute vec2 pos;", "varying vec2 vUv;", "void main(void) {", "gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);", "vUv = vec2(pos.x, 1.0 - pos.y);", "}"].join("\n"),
                fs: ["precision highp float;", "uniform sampler2D image;", "uniform vec2 textureSize;", "uniform float edgeWidth;", "uniform vec4 edgeColor;", "varying vec2 vUv;", "float getCol(vec2 coord) {", "return texture2D(image, coord).a;", "}", "void main() {", "vec2 cc = vUv;", "float center = getCol(cc);", "float dx = edgeWidth / textureSize.x;", "float dy = edgeWidth / textureSize.y;", "vec2 coord;", "float topLeft = getCol(cc+vec2(-dx, -dy));", "float top = getCol(cc+vec2(0.0, -dy));", "float topRight = getCol(cc+vec2(dx, -dy));", "float left = getCol(cc+vec2(-dx, 0.0));", "float right = getCol(cc+vec2(dx, 0.0));", "float bottomLeft = getCol(cc+vec2(-dx, dy));", "float bottom = getCol(cc+vec2(0.0, dy));", "float bottomRight = getCol(cc+vec2(dx, dy));", "float v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;", "float h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;", "float edge = sqrt(h * h + v * v);", "edge = smoothstep(0.9, 1.0, edge);", "if (edge < 0.5) {", "discard;", "}", "gl_FragColor = edgeColor;", "}"].join("\n")
            }, xb = function (S) {
                this.gv = S
            }, Km = "edit_tx", Fq = "edit_ty", dh = "edit_tz", Ze = "edit_rx", Ob = "edit_ry", Gg = "edit_rz",
            mr = "edit_sx", qp = "edit_sy", qm = "edit_sz", bo = {};
        bo[Km] = 1, bo[Fq] = 1, bo[dh] = 1, bo[Ze] = 1, bo[Ob] = 1, bo[Gg] = 1, bo[mr] = 1, bo[qp] = 1, bo[qm] = 1, Jr(xb, H, {
            _42: function (C, q, u) {
                var s = this, i = s.gv, E = i.sm().ld();
                if (E && i.isEditable(E) && !i.isEditHelperDisabled() && Un(E) && (!i.isFirstPersonMode() || !i.isMouseRoamable() && !Xp)) {
                    Ci(i);
                    var y, Y, e = i.isMovable(E), m = i.isRotationEditable(E), T = i.isSizeEditable(E),
                        D = i._axisXColor, d = i._axisYColor, K = i._axisZColor, l = i._editSizeColor, P = E.p3(),
                        M = vl(i.getEye(), P) / 10, j = M / (u ? 5 : 10), x = .7 * M, a = .4 * x, V = P[0], w = P[1],
                        v = P[2];
                    y = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], e && s._17O(C, q, E, u, Km, D, y, [V, w - j, v, V + x, w - j, v, V + x, w, v, V + x, w, v, V, w, v, V, w - j, v, V, w - j, v + j, V + x, w - j, v + j, V + x, w - j, v, V + x, w - j, v, V, w - j, v, V, w - j, v + j]), Y = V + x, T && s._17O(C, q, E, u, mr, l, y, [Y, w - j, v, Y + a, w - j, v, Y + a, w, v, Y + a, w, v, Y, w, v, Y, w - j, v, Y, w - j, v + j, Y + a, w - j, v + j, Y + a, w - j, v, Y + a, w - j, v, Y, w - j, v, Y, w - j, v + j]), Y += a, m && s._17O(C, q, E, u, Ze, D, y, [Y, w - j, v, Y + a, w - j, v, Y + a, w, v, Y + a, w, v, Y, w, v, Y, w - j, v, Y, w - j, v + j, Y + a, w - j, v + j, Y + a, w - j, v, Y + a, w - j, v, Y, w - j, v, Y, w - j, v + j]), y = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0], e && s._17O(C, q, E, u, Fq, d, y, [V, w, v, V, w + x, v, V - j, w + x, v, V - j, w + x, v, V - j, w, v, V, w, v, V, w, v, V, w, v - j, V, w + x, v - j, V, w + x, v - j, V, w + x, v, V, w, v]), Y = w + x, T && s._17O(C, q, E, u, qp, l, y, [V, Y, v, V, Y + a, v, V - j, Y + a, v, V - j, Y + a, v, V - j, Y, v, V, Y, v, V, Y, v, V, Y, v - j, V, Y + a, v - j, V, Y + a, v - j, V, Y + a, v, V, Y, v]), Y += a, m && s._17O(C, q, E, u, Ob, d, y, [V, Y, v, V, Y + a, v, V - j, Y + a, v, V - j, Y + a, v, V - j, Y, v, V, Y, v, V, Y, v, V, Y, v - j, V, Y + a, v - j, V, Y + a, v - j, V, Y + a, v, V, Y, v]), y = [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], e && s._17O(C, q, E, u, dh, K, y, [V, w, v, V, w, v + x, V, w - j, v + x, V, w - j, v + x, V, w - j, v, V, w, v, V, w - j, v, V - j, w - j, v, V - j, w - j, v + x, V - j, w - j, v + x, V, w - j, v + x, V, w - j, v]), Y = v + x, T && s._17O(C, q, E, u, qm, l, y, [V, w, Y, V, w, Y + a, V, w - j, Y + a, V, w - j, Y + a, V, w - j, Y, V, w, Y, V, w - j, Y, V - j, w - j, Y, V - j, w - j, Y + a, V - j, w - j, Y + a, V, w - j, Y + a, V, w - j, Y]), Y += a, m && s._17O(C, q, E, u, Gg, K, y, [V, w, Y, V, w, Y + a, V, w - j, Y + a, V, w - j, Y + a, V, w - j, Y, V, w, Y, V, w - j, Y, V - j, w - j, Y, V - j, w - j, Y + a, V - j, w - j, Y + a, V, w - j, Y + a, V, w - j, Y])
                }
            }, _17O: function (f, Q, y, F, h, d, X, c) {
                var I = this.gv._buffer;
                Ni(f, Q, F, !0, y, h), xm(f, Q, o, !0, o, !0, o, !1), Po(f, Q.uDiffuse, d), zf(f, I.vs, new zk(c), Q.aPosition), zf(f, I.ns, new zk(X), Q.aNormal), gl(f), lo(f, 0, 12), Se(f), wi(f, Q)
            }
        });
        var oe = x.Raycaster = function (K) {
            this.gv = K, this.maxTriangleTest = 1 / 0
        };
        rb("Raycaster", H, {
            intersect: function (a) {
                var H = this, t = H.gv, R = t.getDataAt(a);
                return R ? H.intersectObject(a, R) : null
            }, intersectObjects: function (o, O, w) {
                var W, N, C, Y, D = this, x = 1 / 0, z = o.origin || (new Jd).fromArray(D.gv.getEye()),
                    y = D.maxTriangleTest, U = [];
                return O.forEach(function (H) {
                    w && w(H) === !1 || H.s("intersect") !== !1 && U.push(H)
                }), U.sort(function (U, j) {
                    return z.distanceToSquared2(U.p3()) - z.distanceToSquared2(j.p3())
                }), D.countTriangles = 0, U.forEach(function (T) {
                    D.countTriangles > y || (W = D.intersectObject(o, T), W && (N = z.distanceToSquared(W.world), x > N && (C = T, Y = W, x = N)))
                }), D.countTriangles = 0, {data: C, intersect: Y}
            }, intersectObject: function (h, g) {
                if (h instanceof Tl) return this._intersectObjectImpl(h, g);
                var L, W, M = this, O = M.gv;
                W = O.unproject(h);
                var p = O.getEye();
                O.isOrtho() ? (L = sg(O.getCenter(), p), L[0] += L[0], L[1] += L[1], L[2] += L[2]) : L = p, L = new Jd(L);
                var c = new Jd(W).sub(L).normalize(), y = new x.Math.Ray(L, c);
                return M._intersectObjectImpl(y, g)
            }, _intersectObjectImpl: function () {
                function Z() {
                    var M = new Jd;
                    return M.subVectors(p, b), G.subVectors(k, b), M.cross(G).normalize(), M
                }

                function B(e, F, Q, L, g, $, S) {
                    return rq.barycoordFromPoint(e, F, Q, L, l), g.multiplyScalar(l.x), $.multiplyScalar(l.y), S.multiplyScalar(l.z), g.add($).add(S), g.clone()
                }

                var K = new Mq, n = new Mq, X = new Tl, $ = new Jd, s = new Jd, S = new Jd, h = new Jd, r = new Jd,
                    k = new Jd, b = new Jd, p = new Jd, J = new pm, v = new pm, z = new pm, G = new Jd,
                    H = {vs: we, is: Eo, uv: _d}, l = new Jd;
                return function (y, w) {
                    var W = this.gv.getData3dUI(w), g = w.mat || W.mat;
                    if (g) {
                        K.fromArray(g), n.getInverse(K), X.copy(y).applyMatrix4(n);
                        var Q, P, N = "body", d = W.shapeModel;
                        if (d || (d = bi(W)), d || (w instanceof x.Node && !(w instanceof x.Shape) ? (Q = !0, d = H) : (P = !0, d = [W.left, W.front, W.right, W.back, W.top, W.bottom])), !d) return console.log("Can not find shape model."), null;
                        Ll(d) || (d = [d]);
                        var q, e, I, T, U, j, O, t, u, E, V, c, m, Y, F, l, L = 1 / 0, G = ["", "top_", "bottom_"],
                            o = !1;
                        for (q = 0, e = d.length; e > q; q++) if (m = d[q]) for (I = 0, T = G.length; T > I; I++) if (Y = G[I], O = m[Y + "vs"], t = m[Y + "is"], u = m[Y + "uv"] || m[Y + "tuv"], O) {
                            if (F = m[Y + "boundingBox"]) {
                                var V = X.intersectBox(F);
                                if (!V) continue;
                                if (X.origin.distanceTo(V) > L) continue;
                                l = !1
                            } else m[Y + "boundingBox"] = F = new x.Math.Box3, l = !0;
                            for (U = 0, j = t ? t.length : O.length / 3; j > U; U += 3) this.countTriangles++, t ? (s.fromArray(O, 3 * t[U]), S.fromArray(O, 3 * t[U + 1]), h.fromArray(O, 3 * t[U + 2])) : (s.fromArray(O, 3 * U), S.fromArray(O, 3 * (U + 1)), h.fromArray(O, 3 * (U + 2))), l && (F.expandByPoint(s), F.expandByPoint(S), F.expandByPoint(h)), E = X.intersectTriangle(s, S, h, !0, $), E && (c = X.origin.distanceTo(E), L > c && (L = c, r.copy(E), k.copy(s), b.copy(S), p.copy(h), "" !== Y ? N = Y.slice(0, -1) : Q ? N = Ko[Math.floor(U / 6)] : P && (N = Ko[q]), u && (o = !0, t ? (J.fromArray(u, 2 * t[U]), v.fromArray(u, 2 * t[U + 1]), z.fromArray(u, 2 * t[U + 2])) : (J.fromArray(u, 2 * U), v.fromArray(u, 2 * (U + 1)), z.fromArray(u, 2 * (U + 2))))))
                        }
                        if (!isFinite(L)) return null;
                        var f, C = r.clone().applyMatrix4(K);
                        o && (f = B(r, k, b, p, J, v, z));
                        var R = Z(k, b, p), i = Z(k.applyMatrix4(K), b.applyMatrix4(K), p.applyMatrix4(K)),
                            D = X.direction.dot(R);
                        return D > 0 && (R.multiplyScalar(-1), i.multiplyScalar(-1)), {
                            world: C,
                            local: r.clone(),
                            worldNormal: i,
                            normal: R,
                            uv: f,
                            part: N
                        }
                    }
                }
            }()
        });
        var sn = function ($, D) {
            this.gv = $, this.s = function (n, P, H) {
                return P == o && (P = H), P == o ? D.getStyle(n) : pe(P, D, $)
            }, this.data = D
        };
        Jr(sn, H, {
            I3d: !0, ms_icons: 1, _iv: !0, iv: function () {
                this._iv = !0
            }, _42: function (e, G, D, u) {
                var x = this, f = x.data;
                if (!(f instanceof yg)) {
                    var T, X, U, V, j, M, n, S = x.gv, Y = f._id, N = x.s("shape3d.alwaysOnTop") ? null : x.s("batch"),
                        H = S._batchIndexMap, y = S._batchModelMap, R = S.isSelectable(f), p = S.getBrightness(f),
                        Z = p != o && 1 !== p;
                    if (x.needValidate(e)) {
                        if (U = kh(H, y, f, N), x.validate(U, N ? fe[N] || Cq : o), U && (V = H[Y], j = V.size = U.vs.length / 3 - V.begin, n = U.rs)) for (p = Z ? p : 1, M = 0; j > M; M++) n.push(p);
                        if (Un(f)) {
                            var b = S.getWireframeGeometry(f);
                            if (b) Kk(S, f, b); else {
                                var _ = S.getWireframe(f);
                                _ && Kk(S, f, _)
                            }
                        }
                        x.labelInfo = x.label2Info = x.noteInfo = x.note2Info = x._38o = o, x._24O(Fj, "getLabel"), x._24O(zp, "getLabel2"), x._26O(Ro, "getNote"), x._26O(Oo, "getNote2"), x._15O(), x.interactiveInfo = S.isInteractive(f) ? {} : o, x._iv = !1
                    }
                    Z && Po(e, G.uBrightness, p), Po(e, G.uAlphaTest, x.s("alphaTest")), Po(e, G.uUseEnvMap, f.s("envmap") ? !0 : !1), Po(e, G.uReflectivity, f.s("envmap") || .01), X = Ni(e, G, D, R, f, cl), X && (Gb(X, H[Y], y), Gb(X, S._polylineIndexMap[Y], S._polylineModelMap), Gb(X, S._wireframeIndexMap[Y], S._wireframeModelMap)), H[Y] || x._80o(e, G, u), S.isLabelVisible(f) && ((T = x.labelInfo) && (Ni(e, G, D, R, f, Fj), x._28O(T, Fj, u)), (T = x.label2Info) && (Ni(e, G, D, R, f, zp), x._28O(T, zp, u))), S.isNoteVisible(f) && ((T = x.noteInfo) && (Ni(e, G, D, R, f, Ro), x._29O(T, Ro, u)), (T = x.note2Info) && (Ni(e, G, D, R, f, Oo), x._29O(T, Oo, u))), (T = x._38o) && x._99O(e, G, T, D, R, u), Z && Po(e, G.uBrightness, 1)
                }
            }, needValidate: function () {
                return this._iv
            }, validate: function () {
            }, _16O: function () {
                return gr
            }, _80o: function () {
            }, dispose: function () {
            }, _calcAnchorMat: function (H) {
                if (H.hasOwnProperty("_anchor") || H.hasOwnProperty("_anchorElevation")) {
                    var U = H.getAnchor3d(), t = {x: U.x - .5, y: U.y - .5, z: U.z - .5}, B = Nd();
                    return uj(B, [-t.x, -t.y, -t.z]), B
                }
            }, getBodyColor: function (C) {
                var X = this.data, m = this.gv.getBodyColor(X);
                return m ? m : C ? X.getStyle(C) : o
            }, _24O: function (Y, s) {
                var J = this, p = J.data, $ = J.gv, D = J.s, z = $[s](p);
                if (z != o) {
                    var I = D(Y + ".scale"), S = D(Y + ".max"), f = J[Y + "Info"] = {
                        label: z,
                        textureScale: D(Y + ".texture.scale"),
                        color: $[s + "Color"](p),
                        font: D(Y + ".font"),
                        align: D(Y + ".align"),
                        background: $[s + "Background"](p)
                    }, O = f.rect = jg(f, z);
                    S > 0 && S < O.width && (f.labelWidth = O.width, O.width = S), O.x = O.y = 0, O.width *= I, O.height *= I, f.mat = J._16O(D(Y + ".autorotate"), D(Y + ".position"), O, D(Y + ".face"), D(Y + ".t3"), D(Y + ".r3"), D(Y + ".rotationMode"));
                    var k = O.width / 2, R = O.height / 2;
                    f.vs = new zk([-k, R, 0, -k, -R, 0, k, -R, 0, k, R, 0]), O.width /= I, O.height /= I
                }
            }, _26O: function (X, z) {
                var G = this, t = G.data, L = G.gv, k = G.s, K = L[z](t);
                if (K != o) {
                    var x = k(X + ".scale"), U = this[X + "Info"] = {
                        note: K,
                        textureScale: k(X + ".texture.scale"),
                        expanded: k(X + ".expanded"),
                        font: k(X + ".font"),
                        color: k(X + ".color"),
                        align: k(X + ".align"),
                        borderWidth: k(X + ".border.width"),
                        borderColor: k(X + ".border.color"),
                        background: L[z + "Background"](t)
                    };
                    if (U.expanded) {
                        var S = k(X + ".max"), R = jg(U, K);
                        R.width += 6, R.height += 2, S > 0 && S < R.width && (U.labelWidth = R.width, R.width = S);
                        var O = {x: -R.width / 2, y: -8 - R.height, width: R.width, height: R.height + 8}
                    } else O = {x: -6, y: -18, width: 12, height: 18};
                    U.mat = G._16O(k(X + ".autorotate"), k(X + ".position"), o, k(X + ".face"), k(X + ".t3"), k(X + ".r3"), k(X + ".rotationMode")), U.rect = O, 1 !== x && (O = Ah(O), O.x *= x, O.height *= x, O.y = -O.height, O.width *= x);
                    var Z = O.x, i = O.y, T = O.width, u = O.height;
                    U.vs = new zk([Z, -i, 0, Z, -i - u, 0, Z + T, -i - u, 0, Z + T, -i, 0])
                }
            }, _28O: function (P, F, V) {
                if (V(this.s(F + ".transparent"))) {
                    var W = P.rect, x = P.textureScale, D = W.width * x, R = W.height * x;
                    if (D >= 1 && R >= 1) {
                        var i = El(D, R);
                        1 !== x && (i.translate(i, W.x, W.y), i.scale(x, x), i.translate(i, -W.x, -W.y)), op(i, P), i.restore(), So(this, F, P.mat, P.vs, !0)
                    }
                }
            }, _29O: function (h, m, B) {
                if (B(this.s(m + ".transparent"))) {
                    var e = h.rect, Y = h.textureScale, F = e.x, M = e.y, E = e.width * Y, P = e.height * Y;
                    if (E >= 1 && P >= 1) {
                        e.x = e.y = 0;
                        var J = El(E, P);
                        1 !== Y && J.scale(Y, Y), nd(J, h), J.restore(), e.x = F, e.y = M, So(this, m, h.mat, h.vs, !1)
                    }
                }
            }, _99O: function (g, O, t, m, C, s) {
                if (t) {
                    var L = this, $ = L.gv, F = L.data, T = $._buffer, k = $._1O, A = t.icons;
                    for (var G in A) {
                        var B = A[G], Y = t.rects[G];
                        if (Y && s(pe(B.transparent, F, $))) {
                            Ni(g, O, m, C, F, G);
                            var R = pe(B.shape3d, F, $), w = R ? [R] : pe(B.names, F, $), l = w ? w.length : 0,
                                V = pe(B.textureScale, F, $) || 1, p = pe(B.light, F, $);
                            p == o && (p = R ? !0 : !1), xm(g, O, pe(B.blend, F, $), p, pe(B.opacity, F, $), pe(B.reverseFlip, F, $), pe(B.reverseColor, F, $), pe(B.reverseCull, F, $));
                            for (var v = 0; l > v; v++) {
                                var _ = w[v], I = Y[v];
                                if (Rj(L, I.mat), R) xo($, F, bi(L, R), L); else {
                                    var j = Ui(_);
                                    if (j) {
                                        var b = I.width * V, x = I.height * V;
                                        if (b >= 1 && x >= 1) {
                                            var E = El(b, x);
                                            Ng(E, j, pe(B.stretch, F, $), 0, 0, b, x, F, $), E.restore(), Tr(g, $n, k), gl(g, O, k, pe(B.discardSelectable, F, $), T.uv, ze), zf(g, T.vs, I.vs, O.aPosition), th(g, T.ns, Bo, O.aNormal), Bq(g, T.is, fl), Ck(g, 0, fl.length), Se(g, O, k)
                                        }
                                    }
                                }
                                Zo($)
                            }
                            wi(g, O)
                        }
                    }
                }
            }
        });
        var pp = function (i, w) {
            yp(pp, this, [i, w])
        };
        Jr(pp, sn, {
            _16O: function (l, d, a, Y, J, g, n, v, x) {
                var o = this.data, m = o.getFinalScale3d(), O = Pm(d, m, a, Y, v, x);
                if (o.hasOwnProperty("_anchor") || o.hasOwnProperty("_anchorElevation")) {
                    var D = o.getAnchor3d();
                    O[0] -= (D.x - .5) * m[0], O[1] -= (D.y - .5) * m[1], O[2] -= (D.z - .5) * m[2]
                }
                return tj(Nd(), O, o.p3(), Y, J, g, n, l, o.getFinalRotation3d(), o.getRotationMode())
            }, clear: function () {
                var H = this;
                H.faceMat = H.mat = H.shapeModel = H.left = H.right = H.front = H.back = H.top = H.bottom = H.csg = o
            }, needValidate: function (h) {
                if (this._iv) return this._validateFrameId = h._renderInfo.frame, !0;
                if (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen") || this.s("hide.overlapping.group")) {
                    var Z = h._renderInfo.frame;
                    if (this._validateFrameId !== Z) return this._validateFrameId = Z, !0
                }
                return !1
            }, validate: function (d, i) {
                var r = this, J = r.gv, R = r.data, G = r.shapeName = r.s(vb), y = bi(r, G);
                r._updateAutoRotation(), r._updateFixSize2d(), r._updateOverlapping(), (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen")) && (Vj(J, R, "_wireframeModelMap", "_wireframeIndexMap"), Vj(J, R, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"));
                var Q = Zr(R, J.getMat(R), y ? r.s("shape3d.scaleable") : !0), H = r._calcAnchorMat(R);
                if (H && Fr(Q, Q, H), R.mat = Q, r.clear(), y || !G) if (d) {
                    var b = [];
                    y ? Gl(J, R, y, r, r.getBodyColor(), [Q], d, b) : (Pc(J, R, d, i, Q, Pq, b, uh), Pc(J, R, d, i, Q, Kl, b, vf), Pc(J, R, d, i, Q, Tp, b, hm), Pc(J, R, d, i, Q, Mh, b, Le), Pc(J, R, d, i, Q, es, b, qh), Pc(J, R, d, i, Q, Ym, b, Lp)), b.length && (ll(d.vs, b), ll(d.ns, nq(b)))
                } else r.mat = Q, (r.shapeModel = y) || (r._cubeUvs = null, r.vf(Pq, 0), r.vf(Kl, 16), r.vf(es, 8), r.vf(Ym, 24), r.vf(Tp, 32), r.vf(Mh, 40))
            }, _updateAutoRotation: function () {
                var g = new Bh;
                return function () {
                    var y = this, B = y.data, K = y.s("shape3d.autorotate");
                    if (!K) return B._dynamicRotation && delete B._dynamicRotation, void 0;
                    var T, A = y.gv;
                    T = "string" == typeof K ? [K.indexOf("x") < 0 ? A._eye[0] : A._center[0], K.indexOf("y") < 0 ? A._eye[1] : A._center[1], K.indexOf("z") < 0 ? A._eye[2] : A._center[2]] : A._eye;
                    var D = A._center, S = B.p3(),
                        G = yn([S[0] + T[0] - D[0], S[1] + T[1] - D[1], S[2] + T[2] - D[2]], S, A._up), M = B.r3();
                    g.set(0, 0, 0, B.getRotationMode(), !0).setFromRotationMatrix(G), Math.abs(M[0] - g.x) < 1e-5 && Math.abs(M[1] - g.y) < 1e-5 && Math.abs(M[2] - g.z) < 1e-5 || (B._dynamicRotation = [g.x, g.y, g.z])
                }
            }(), _updateFixSize2d: function () {
                var y = this, w = y.data, H = y.s("shape3d.fixSizeOnScreen");
                if (!H) return w._dynamicScale3d && delete w._dynamicScale3d, void 0;
                var T = y.gv;
                w.getFinalScale3d();
                var M = Zr(w, T.getMat(w)), f = Jg([0, 0, 0], M), I = T.toViewPosition(f);
                if (!isNaN(I.x) && !isNaN(I.y)) {
                    var F = Jg([1, 0, 0], M), a = T.toViewPosition(F), i = Jg([0, 1, 0], M), O = T.toViewPosition(i),
                        B = a.x - I.x, X = O.y - I.y;
                    if (B && X) {
                        var D = w._dynamicScale3d || [1, 1, 1], s = Ui(w.s("shape3d.image")),
                            U = H[0] > 0 ? H[0] : s ? Iq(s, w) : 20, o = H[1] > 0 ? H[1] : s ? Ne(s, w) : 20,
                            d = Math.abs(B / U), A = Math.abs(X / o);
                        Math.abs(d - 1) < .001 && Math.abs(A - 1) < .001 || (w._dynamicScale3d = [D[0] / d, D[1] / A, D[2]])
                    }
                }
            }, _updateOverlapping: function () {
                var I = this, J = I.s("hide.overlapping.group");
                if (!J) return I._rectOverlapping && (I._rectOverlapping = v), void 0;
                var O, s, G, $ = I.gv, K = I.data, e = Zr(K, $.getMat(K)), h = 1 / 0, o = 1 / 0, F = -1 / 0, g = -1 / 0,
                    j = K.getAnchor3d(), n = j.x, E = j.y, U = j.z;
                for (O = 0; 8 > O; O++) {
                    if (s = Jg([(O >> 2) - n, (1 & O >> 1) - E, (1 & O) - U], e), G = $.toViewPosition(s), isNaN(G.x) || isNaN(G.y)) return;
                    h = Math.min(h, G.x), F = Math.max(F, G.x), o = Math.min(o, G.y), g = Math.max(g, G.y)
                }
                var d = {x: h, y: o, w: F - h, h: g - o};
                I._rectOverlapping = $.overlappingBox.isOverlapping(J, d)
            }, getVectorDynamicSize: function () {
                var w, R = this, i = R.s("shape3d"), y = R.data;
                if ("billboard" === i || "plane" === i || (w = y._currentCubeElementId) != o) {
                    var A, U, N = R.gv, $ = Zr(y, N.getMat(y)), v = y.getAnchor3d(), k = .5 - v.x, X = .5 - v.y,
                        Y = .5 - v.z, D = R.s("shape3d.vector.dynamic.maxsize"), T = function (u, b) {
                            u[0] += k, u[1] += X, u[2] += Y, b[0] += k, b[1] += X, b[2] += Y;
                            var q = N.toViewPosition(Jg(u, $)), F = N.toViewPosition(Jg(b, $)), J = q.x - F.x,
                                B = q.y - F.y;
                            return Math.min(D, Math.sqrt(J * J + B * B))
                        };
                    if ("billboard" === i) A = T([-.5, 0, 0], [.5, 0, 0]), U = T([0, -.5, 0], [0, .5, 0]); else if ("plane" === i) A = T([-.5, 0, 0], [.5, 0, 0]), U = T([0, 0, -.5], [0, 0, .5]); else if (y._currentCubeElementId != o) {
                        var d = 3 * Eo[w + 1], G = 3 * Eo[w], u = 3 * Eo[w + 2];
                        A = T([we[d], we[d + 1], we[d + 2]], [we[u], we[u + 1], we[u + 2]]), U = T([we[d], we[d + 1], we[d + 2]], [we[G], we[G + 1], we[G + 2]])
                    }
                    return [A, U]
                }
            }, getCachedTexture: function () {
                var M = this, G = M.data, t = G._currentCubeElementId;
                return t != o ? M._cubeCachedImage ? M._cubeCachedImage[t] : null : M._shape3dCachedImage
            }, setCachedTexture: function (l) {
                var N = this, K = N.data, q = K._currentCubeElementId;
                q != o ? (N._cubeCachedImage || (N._cubeCachedImage = {}), N._cubeCachedImage[q] = l) : N._shape3dCachedImage = l
            }, invalidateCachedTexture: function (a) {
                var S, N, K, z = this;
                if ((K = z._shape3dCachedImage) && (a.deleteTexture(K), z._shape3dCachedImage = null), N = z._cubeCachedImage) {
                    for (S in N) a.deleteTexture(N[S]);
                    z._cubeCachedImage = null
                }
            }, vf: function (c, D) {
                var U = this;
                if (U.gv.getFaceVisible(U.data, c)) {
                    var O = db(U, c);
                    O.mat && (U.faceMat = !0);
                    var N = O.uv;
                    if (N) {
                        var b = U._cubeUvs;
                        b || (b = U._cubeUvs = new zk([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]));
                        for (var y = 0; 8 > y; y++) b[D + y] = N[y]
                    }
                    return O
                }
            }, _80o: function (z, p, K) {
                var N = this;
                if (N._rectOverlapping) return !0;
                var u = N.shapeModel;
                if (u || !N.shapeName) {
                    var j = N.gv, S = N.data, U = j._cube;
                    Ci(j, N.mat), u ? xo(j, S, u, N, N.getBodyColor(), K) : (zf(z, U.vs, o, p.aPosition), zf(z, U.ns, o, p.aNormal), Tj(z, U.is), N._18O(z, p, N.left, 0, K), N._18O(z, p, N.front, 6, K), N._18O(z, p, N.right, 12, K), N._18O(z, p, N.back, 18, K), N._18O(z, p, N.top, 24, K), N._18O(z, p, N.bottom, 30, K)), Zo(j), N.faceMat && (N._18O(z, p, N.left, 0, K, !0), N._18O(z, p, N.front, 6, K, !0), N._18O(z, p, N.right, 12, K, !0), N._18O(z, p, N.back, 18, K, !0), N._18O(z, p, N.top, 24, K, !0), N._18O(z, p, N.bottom, 30, K, !0))
                }
            }, _18O: function (D, F, i, L, J, j) {
                if (i) {
                    if (!J(i.transparent)) return;
                    if (j && !i.mat || !j && i.mat) return;
                    var z = this.data.s("polygonOffset");
                    z && un(D, z), j && Ci(this.gv, i.mat);
                    var c = this, B = c.data;
                    B._currentCubeElementId = L;
                    var g = c.gv, l = g.getTexture(i.texture, B), N = i.uv, s = i.uvScale, e = i.uvOffset,
                        p = i.discardSelectable;
                    l ? N ? gl(D, F, l, p, g._buffer.uv, c._cubeUvs, e, s) : gl(D, F, l, p, g._cube.uv, o, e, s) : gl(D), xm(D, F, i.blend, i.light, i.opacity, i.reverseFlip, i.reverseColor, i.reverseCull), Po(D, F.uDiffuse, i.color || k["color.empty"]), Ck(D, L, 6), wi(D, F), Se(D, F, l), j && Zo(g), z && zc(D), B._currentCubeElementId = null
                }
            }
        });
        var er = function (m, O) {
            yp(er, this, [m, O])
        };
        Jr(er, sn, {
            _25Q: 1, validate: function (j) {
                var u = this, J = u.gv, R = u.data, U = u.s, y = U("edge.width"), Z = R._40I, P = R._41I;
                if (u.shapeModel = u.info = o, Z && P) {
                    var V, t, F, S, D, L, B, m, M, n, s = R.isLooped(), Q = U(jk), H = w.getEdgeType(Q);
                    if (H) {
                        var _ = H(R, Ei(u, J, R, s, Q), J, u._19Q);
                        if (!_.points || _.points.isEmpty()) return;
                        L = u.info = {}, B = _.segments, D = _.points, m = D.size();
                        for (var N = Z.getElevation(), h = P.getElevation(), O = 0; m > O; O++) {
                            var x = D.get(O);
                            x.e == o && (x.e = N + (h - N) * O / (m - 1))
                        }
                        M = qi(D.get(0)), n = qi(D.get(m - 1));
                        var I = m % 2;
                        0 === I ? (L.c1 = qi(D.get(m / 2 - 1)), L.c2 = qi(D.get(m / 2))) : L.p3 = qi(D.get((m - I) / 2)), L.s1 = M, L.s2 = qi(D.get(1)), L.t1 = qi(D.get(m - 2)), L.t2 = n
                    } else {
                        D = new Pf, L = u.info = {};
                        var l = U("edge.offset"), E = U("edge.center"), d = U("edge.source.t3"),
                            A = U("edge.target.t3"), q = Z.p3(), b = P.p3();
                        if (d && (q[0] += d[0], q[1] += d[1], q[2] += d[2]), A && (b[0] += A[0], b[1] += A[1], b[2] += A[2]), Q === qr) {
                            B = U("edge.segments");
                            var z = L.points = U(Ge) || oi;
                            if (m = z.size()) {
                                M = qi(z.get(0)), n = qi(z.get(m - 1)), !E && l && (F = sg(M, q, !0), l = g(l, vl(q, M)), q = [q[0] + F[0] * l, q[1] + F[1] * l, q[2] + F[2] * l], F = sg(b, n, !0), l = g(l, vl(n, b)), b = [b[0] - F[0] * l, b[1] - F[1] * l, b[2] - F[2] * l]);
                                var I = m % 2;
                                0 === I ? (V = qi(z.get(m / 2 - 1)), t = qi(z.get(m / 2))) : L.p3 = qi(z.get((m - I) / 2)), L.s1 = q, L.s2 = M, L.t1 = n, L.t2 = b
                            } else !E && l && (F = sg(b, q, !0), S = vl(q, b), l = nb(l, S), q = [q[0] + F[0] * l, q[1] + F[1] * l, q[2] + F[2] * l], b = [b[0] - F[0] * l, b[1] - F[1] * l, b[2] - F[2] * l]), V = q, t = b;
                            D.add({x: q[0], y: q[2], e: q[1]}), D.addAll(z), D.add({x: b[0], y: b[2], e: b[1]})
                        } else {
                            var p = Ei(u, J, R, s, Q);
                            if (u._19Q || (p = -p), s) {
                                var k = q[0], f = q[1], v = q[2], Y = Z.getTall() / 2 + p;
                                V = [k - p, f + Y, v], t = [k + p, f + Y, v], D.add({
                                    x: k - p,
                                    y: v,
                                    e: f
                                }), D.add({x: k - p, y: v, e: f + Y}), D.add({
                                    x: k + p,
                                    y: v,
                                    e: f + Y
                                }), D.add({x: k + p, y: v, e: f})
                            } else {
                                F = sg(b, q, !0), S = vl(q, b);
                                var W = {x: q[0], y: q[2]}, c = {x: b[0], y: b[2]}, a = le(o, W, c, p), r = a.x - W.x,
                                    C = a.y - W.y;
                                l = nb(l, S), F[0] *= l, F[1] *= l, F[2] *= l, V = [q[0] + F[0] + r, q[1] + F[1], q[2] + F[2] + C], t = [b[0] - F[0] + r, b[1] - F[1], b[2] - F[2] + C], E ? (D.add({
                                    x: q[0],
                                    y: q[2],
                                    e: q[1]
                                }), D.add({x: V[0], y: V[2], e: V[1]}), D.add({
                                    x: t[0],
                                    y: t[2],
                                    e: t[1]
                                }), D.add({x: b[0], y: b[2], e: b[1]})) : (D.add({
                                    x: V[0],
                                    y: V[2],
                                    e: V[1]
                                }), D.add({x: t[0], y: t[2], e: t[1]}))
                            }
                        }
                        L.c1 = V, L.c2 = t
                    }
                    L.list = U(vb) === Rr ? u.createTubeModel(D, B, y / 2, j) : u.createLineModel(D, B, y, "edge", "edge.dash")
                }
            }
        });
        var us = function (_, a) {
            yp(us, this, [_, a])
        };
        Jr(us, pp, {
            _80o: function (L, v, s) {
                var R = this, M = R.gv, S = R.shapeModel;
                Ci(M, R.mat), S ? xo(M, R.data, S, R, R.getBodyColor(), s) : ($k(R, L, v, R.left, s), $k(R, L, v, R.front, s), $k(R, L, v, R.right, s), $k(R, L, v, R.back, s), $k(R, L, v, R.top, s), $k(R, L, v, R.bottom, s)), Zo(M)
            }, validate: function (C, s) {
                var k, K, N = this, l = N.s, O = N.data, G = O.p3(), i = O._thickness / 2, D = O.isClosePath(),
                    B = O.getPoints(), U = O.getSegments(), $ = l(Jk), j = C && C.uv;
                if (N.clear(), 0 > i) K = N.shapeModel = Hb(B, U, l(ji), l(Am), $, l(np), O.getTall(), O.getShapeElevation(), D), l(sj) ? l("shape3d.image") || delete K.uv : (delete K.vs, delete K.ns, delete K.uv), l("shape3d.top.image") || delete K.top_uv, l("shape3d.bottom.image") || delete K.bottom_uv; else if (l(vb) === Rr) k = vi(B, U, $, D), K = N.shapeModel = {vs: []}, l("shape3d.image") && (K.uv = [], K.sum = l(np) || tp(k) || 1, K.len = 0), l(ji) && !D && (K.top_vs = [], l("shape3d.top.image") && (K.top_uv = [])), l(Am) && !D && (K.bottom_vs = [], l("shape3d.bottom.image") && (K.bottom_uv = [])), N._12O(k, i); else {
                    var Y, w, g, b, E, _, I, e, A, z;
                    if (k = vi(B, U, $, D), E = N.vf(es, j, !1, s), i && (_ = N.vf(Ym, j, !1, s), I = D ? o : N.vf(Pq, j, !1, s), e = D ? o : N.vf(Kl, j, !1, s), A = N.vf(Tp, j, !1, s), z = N.vf(Mh, j, !1, s)), i) {
                        for (var v = 0, J = k.length; J > v; v++) k[v] = N._tryRemoveBezierPoints(k[v], i);
                        N._12O(k, i)
                    } else E && k.forEach(function (C) {
                        if (b = C.length, b > 0) for (Y = C[0], g = 1; b > g; g++) w = C[g], N.addV(E.vs, Y, w), Y = w
                    });
                    N._20Q(k), C || (E && (E.ns = nq(E.vs), eg(E, "vs"), eg(E, Yb)), i && (_ && (_.ns = nq(_.vs), eg(_, "vs"), eg(_, Yb)), I && (I.ns = nq(I.vs), eg(I, "vs"), eg(I, Yb)), e && (e.ns = nq(e.vs), eg(e, "vs"), eg(e, Yb)), A && (A.ns = nq(A.vs), eg(A, "vs"), eg(A, Yb)), z && (z.ns = nq(z.vs), eg(z, "vs"), eg(z, Yb))))
                }
                var X = N.mat = Nd();
                uj(X, G), Sr(X, O.getFinalRotation3d(), O.getRotationMode());
                var W = O.getScale3d(), H = O._dynamicScale3d;
                H && (W[0] *= H[0], W[1] *= H[1], W[2] *= H[2]), Zb(X, W), uj(X, Dn(G)), C && (kc(N, X, C, K), N.clear())
            }, _20Q: function (U) {
                var $, m, q, w, L, A, s, I = this, r = I.front, E = I.back, H = I.top, X = I.bottom, b = r ? r.tuv : o,
                    P = E ? E.tuv : o, V = H ? H.tuv : o, g = X ? X.tuv : o, Y = 0;
                (b || P || V || g) && ($ = I.s(np) || tp(U) || 1, U.forEach(function (v) {
                    if (m = v.length, m > 0) for (A = v[0], q = 1; m > q; q++) s = v[q], w = Y / $, Y += vl(A, s), L = Y / $, I._14O(r, w, L), I._14O(E, 1 - L, 1 - w), I._14O(H, w, L), I._14O(X, w, L), A = s
                }))
            }, _14O: function (i, Y, S) {
                if (i) {
                    var o = i.uv, R = i.tuv;
                    if (R) {
                        if (o) var q = o[0] + (o[6] - o[0]) * Y, D = o[1] + (o[7] - o[1]) * Y,
                            I = o[2] + (o[4] - o[2]) * Y, p = o[3] + (o[5] - o[3]) * Y, z = o[2] + (o[4] - o[2]) * S,
                            y = o[3] + (o[5] - o[3]) * S, f = o[0] + (o[6] - o[0]) * S,
                            n = o[1] + (o[7] - o[1]) * S; else q = Y, D = 0, I = Y, p = 1, z = S, y = 1, f = S, n = 0;
                        R.push(I, p, z, y, f, n, f, n, q, D, I, p)
                    }
                }
            }, _13O: function (V) {
                var f = V.uv, P = V.tuv;
                P && (f ? P.push(f[2], f[3], f[4], f[5], f[6], f[7], f[6], f[7], f[0], f[1], f[2], f[3]) : P.push(0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1))
            }, _tryRemoveBezierPoints: function (c, V) {
                var K = c.length;
                if (4 > K) return c;
                var z, D, y, l, Z, d, k = !1, g = function (H) {
                    return c[H]
                }, W = function (v) {
                    return c[K - 1 - v]
                };
                for (Z = 0; 1 >= Z; Z++) for (d = Z ? W : g, D = d(0), y = d(1), z = 2; K - 1 > z; z++) if (l = d(z), !l.remove) if (l.b) {
                    var n = le(D, y, l, V);
                    n.adjust ? (l.remove = !0, k = !0) : (D = y, y = l)
                } else D = y, y = l;
                if (!k) return c;
                var J = [];
                for (z = 0; K > z; z++) c[z].remove || J.push(c[z]);
                return J
            }, _12O: function (S, A) {
                var m, V, q, p, N, D = this;
                S.forEach(function (S) {
                    if (N = S.length, N > 0) for (m = {
                        p: S[0],
                        n: !0
                    }, p = 1; N > p; p++) V = S[p], q = N - 1 > p ? S[p + 1] : o, D.addPoint(m, V, q, A, S)
                })
            }, addPoint: function (s, _, I, T, K) {
                var e, g, t, q, N, p, Y, R, r, P = this, d = s.p, $ = s.f, L = s.b, a = P.s("shape3d.side") || rd,
                    w = P.s("shape3d.start.angle"), V = P.s("shape3d.sweep.angle"), H = P.shapeModel,
                    A = P.data.isClosePath();
                if (s.n && (s.n = !1, $ = A && K.length > 2 ? le(K[K.length - 2], d, _, T) : le(o, d, _, T), L = Bf(d, $), H ? H.top_vs && P._10O(L, $, a, w, V, H.top_vs, H.top_uv) : (e = P.left) && (P.addV(e.vs, L, $), P._13O(e))), g = I ? le(d, _, I, T) : A && K.length > 2 ? le(d, _, K[1], T) : le(d, _, o, T), t = Bf(_, g), H) {
                    var c, z, i = H.vs, x = H.uv, S = H.sum;
                    for (x && (c = H.len / S, H.len += vl(d, _), z = H.len / S), p = P._9O(L, $, a, w, V), Y = P._9O(t, g, a, w, V), R = 0; a > R; R++) r = R + 1, ll(i, p[r]), ll(i, Y[R]), ll(i, p[R]), ll(i, Y[R]), ll(i, p[r]), ll(i, Y[r]), x && (q = R / a, N = r / a, x.push(c, N, z, q, c, q, z, q, c, N, z, N));
                    !I && H.bottom_vs && P._10O(t, g, a, w, V, H.bottom_vs, H.bottom_uv, !0)
                } else !I && (e = P.right) && (P.addV(e.vs, g, t), P._13O(e)), (e = P.front) && P.addV(e.vs, $, g), (e = P.back) && P.addV(e.vs, t, L), (e = P.top) && P.addH(e.vs, $, g, t, L, !0), (e = P.bottom) && P.addH(e.vs, L, t, g, $);
                s.p = _, s.f = g, s.b = t
            }, _10O: function (s, Q, i, Y, O, A, j, k) {
                var B, R, H = this, v = H.data, r = H._9O(s, Q, i, Y, O), o = (s.x + Q.x) / 2, g = (s.y + Q.y) / 2,
                    q = v.getShapeElevation(), I = 0;
                for (I = 0; i > I; I++) k ? (ll(A, r[I]), ll(A, r[I + 1])) : (ll(A, r[I + 1]), ll(A, r[I])), ll(A, [o, q, g]), j && (k ? (B = C * (I + 1) / i + Y, R = C * I / i + Y) : (B = C * I / i + Y, R = C * (I + 1) / i + Y), j.push(.5 - .5 * c(R), .5 - .5 * J(R), .5 - .5 * c(B), .5 - .5 * J(B), .5, .5))
            }, _9O: function (i, v, q, N, Q) {
                var g, A, p = this, X = p.data, _ = [], L = (i.x + v.x) / 2, Z = (i.y + v.y) / 2, D = X.getTall() / 2,
                    n = X.getShapeElevation(), t = 0;
                for (Q = Q || C; q >= t; t++) g = Q * t / q + N, A = c(g), _.push([L + (i.x - L) * A, n + D * J(g), Z + (i.y - Z) * A]);
                return _
            }, addV: function (B, l, E) {
                var n = l.x, O = l.y, t = E.x, o = E.y, v = this.data, L = v.getShapeElevation(), d = v.getTall() / 2;
                B.push(n, L - d, O, t, L - d, o, t, L + d, o, t, L + d, o, n, L + d, O, n, L - d, O)
            }, addH: function (n, l, i, b, Y, c) {
                var U = this.data, y = U.getTall() / 2, m = U.getShapeElevation() + (c ? y : -y);
                n.push(l.x, m, l.y, i.x, m, i.y, b.x, m, b.y, b.x, m, b.y, Y.x, m, Y.y, l.x, m, l.y)
            }, vf: function (c, p, I, z) {
                var Z, Y = this, b = Y.gv.getFaceVisible(Y.data, c);
                return (I || b) && (Z = db(Y, c, z), Z.vs = [], Z.tuv = b && (Z.texture || p) ? [] : o, Z.visible = b), Z
            }
        });
        var qj = function (i, U) {
            yp(qj, this, [i, U])
        };
        Jr(qj, sn, {
            _25Q: 1, validate: function (e) {
                var q = this, s = q.data, h = q.s, k = s.getPoints(), m = k.size();
                if (q.shapeModel = q.info = o, m > 1) {
                    var P = q.info = {}, E = s.getSegments(), u = s.getThickness(), K = qi(k.get(0)),
                        g = qi(k.get(m - 1)), i = m % 2;
                    0 === i ? (P.c1 = qi(k.get(m / 2 - 1)), P.c2 = qi(k.get(m / 2))) : P.p3 = qi(k.get((m - i) / 2)), P.s1 = K, P.s2 = qi(k.get(1)), P.t1 = qi(k.get(m - 2)), P.t2 = g, P.list = h(vb) === Rr ? q.createTubeModel(k, E, u / 2, e) : q.createLineModel(k, E, u, "shape.border", "shape.dash")
                }
                var f = s.p3(), A = q.mat = Nd();
                uj(A, f), Sr(A, s.getFinalRotation3d(), s.getRotationMode());
                var S = s.getScale3d(), t = s._dynamicScale3d;
                t && (S[0] *= t[0], S[1] *= t[1], S[2] *= t[2]), Zb(A, S), uj(A, Dn(f))
            }, _80o: function (e, y, c) {
                var V = this, D = V.shapeModel;
                if (D) {
                    var R = V.gv;
                    Ci(R, V.mat), xo(R, V.data, D, V, V.getBodyColor(), c), Zo(R)
                }
            }
        });
        var Xl = x.graph3d.VR = function (R) {
            var n = this;
            n.gv = R, n._controllers = [], n.switch = new ko(n), n._enable = !1, n._defaultCallLater = x.Default.callLater, n._defaultCancelLater = cj, "undefined" != typeof r && "VRFrameData" in r && (n._frameData = new r.VRFrameData), n.measureOflength = 1, n.eyesOffset = [0, 0, 0], n._orientation = new x.Math.Quaternion, n._lastHeadPose = [0, 0, 0], n._offsetToBeAdd = [0, 0, 0], n._fpsInfo = {
                time: 0,
                fps: 0,
                frames: 0
            }
        };
        Jr(Xl, H, {
            ms_fire: !0, _42: function (p, D, W, n) {
                var A = this, L = A.gv;
                if (!L.drawFilter && A._deviceInAction) {
                    var l = A._device;
                    if (l) {
                        var G = A._measureOflength;
                        l.depthNear = L.getNear() * G, l.depthFar = L.getFar() * G;
                        var U = A._offsetToBeAdd;
                        if (A.eyesOffset[0] += U[0], A.eyesOffset[1] += U[1], A.eyesOffset[2] += U[2], U[0] = 0, U[1] = 0, U[2] = 0, l.isPresenting === !1) return A._controllers.forEach(function (i) {
                            i && i.update()
                        }), L.iv(), !1;
                        var j = A._frameData;
                        l.getFrameData(j);
                        var X = j.pose.position;
                        if (X) {
                            var g = A.toViewPosition(X);
                            L.setEye(g), A._orientation.fromArray(j.pose.orientation);
                            var H = new x.Math.Vector3(0, 0, -10 * A._scaleFactor);
                            H.applyQuaternion(A._orientation), L.setCenter([g[0] + H.x, g[1] + H.y, g[2] + H.z])
                        }
                        A._controllers.forEach(function (E) {
                            E && E.update()
                        }), L.setViewport(p, 0, 0, D / 2, W), A._viewMatrix = A._copyViewMatrix(j.leftViewMatrix), A._projectMatrix = A._copyProjectMatrix(j.leftProjectionMatrix), n(), L.setViewport(p, D / 2, 0, D / 2, W), A._viewMatrix = A._copyViewMatrix(j.rightViewMatrix), A._projectMatrix = A._copyProjectMatrix(j.rightProjectionMatrix), n(), A._lastViewMatrix = A._viewMatrix, A._lastProjectMatrix = A._projectMatrix, A._viewMatrix = null, A._projectMatrix = null, A.submitFrame();
                        var m = Date.now(), T = A._fpsInfo;
                        return m - T.time > 1e3 ? (T.fps = Math.round(1e3 * (T.frames + 1) / (m - T.time)), T.time = m, T.frames = 0) : T.frames++, !0
                    }
                }
            }, onVRDisplayPresentChange: function () {
                var R = this.isPresenting();
                this._injectGraphView(R), this.fp("present", !R, R)
            }, getOrientation: function () {
                return this._orientation
            }, addController: function (r) {
                r = r || 0;
                var G = this, B = G.getController(r);
                return B ? B : (B = new cc(G, r), G._controllers.push(B), B)
            }, getController: function (S) {
                S = S || 0;
                for (var k = this._controllers, W = 0, Z = k.length; Z > W; W++) if (k[W] && k[W].id === S) return k[W];
                return null
            }, removeController: function (g) {
                g = g || 0;
                for (var p = this._controllers, A = 0, O = p.length; O > A; A++) if (p[A] && p[A].id === g) return p.splice(A, 1), !0;
                return !1
            }, getLastHeadPose: function () {
                return this._lastHeadPose
            }, toViewPosition: function (j, S) {
                var L = this, Q = L._scaleFactor, k = L._eyesOffset, r = L._lastHeadPose;
                return r[0] = j[0] * Q, r[1] = j[1] * Q, r[2] = j[2] * Q, S ? (S[0] = r[0] + k[0], S[1] = r[1] + k[1], S[2] = r[2] + k[2], S) : [r[0] + k[0], r[1] + k[1], r[2] + k[2]]
            }, addEyesOffset: function (C, E, L) {
                var K = this._offsetToBeAdd;
                K[0] += C, K[1] += E, K[2] += L
            }, _copyViewMatrix: function (A) {
                var O = this.dup(A), K = this._scaleFactor;
                O[12] *= K, O[13] *= K, O[14] *= K;
                var m = this._eyesOffset;
                if (m && (m[0] || m[1] || m[2])) {
                    var p = m[0], b = m[1], V = m[2];
                    O[12] -= O[0] * p + O[4] * b + O[8] * V, O[13] -= O[1] * p + O[5] * b + O[9] * V, O[14] -= O[2] * p + O[6] * b + O[10] * V
                }
                return O
            }, shutdown: function () {
                var I = this._device;
                I && I.isPresenting && I.exitPresent()
            }, isPresenting: function () {
                var v = this._device;
                return v && v.isPresenting
            }, _copyProjectMatrix: function (u) {
                var y = this.dup(u), s = this._scaleFactor;
                return y[14] *= s, y
            }, dup: function (c, D) {
                for (var U = c.length, K = D || new Array(U); U--;) K[U] = c[U];
                return K
            }, getViewMatrix: function (z) {
                var p = this._viewMatrix;
                return p ? this.dup(p, z) : void 0
            }, getProjectMatrix: function () {
                var L = this._projectMatrix;
                return L ? this.dup(L) : void 0
            }, submitFrame: function () {
                var k = this;
                if (k._enable && k._deviceInAction) {
                    var D = k._device;
                    D && D.isPresenting && (D.submitFrame(), k.gv.iv())
                }
            }, getFps: function () {
                return this._fpsInfo.fps
            }, intersectWorld: function (T) {
                var A = this.gv;
                return A.intersectObjects(T, A.dm().getDatas())
            }, setDevice: function (X) {
                var B = this;
                B._device = X
            }, _injectGraphView: function () {
                var v, L, o;
                return function (e) {
                    var a = this.gv;
                    if (!e) return v && (a.getWidth = v, a.getHeight = L, a.getDevicePixelRatio = o), void 0;
                    var E = this._device, l = E.getEyeParameters("left"), f = l.renderWidth, Q = l.renderHeight;
                    v = a.getWidth, L = a.getHeight, o = a.getDevicePixelRatio, a.getWidth = function () {
                        return 2 * f
                    }, a.getHeight = function () {
                        return Q
                    }, a.getDevicePixelRatio = function () {
                        return 1
                    }
                }
            }(), _injectCallLaterFunc: function (e) {
                var m = this;
                if (!e) return Wj = x.Default.callLater = m._defaultCallLater, cj = x.Default.cancelLater = m._defaultCancelLater, void 0;
                var m = this;
                Wj = x.Default.callLater = function (_, O, I, E) {
                    var g = m._device;
                    return g && g.isPresenting ? E ? Z(function () {
                        Wj(_, O, I)
                    }, E) : g.requestAnimationFrame(function () {
                        m._deviceInAction = !0, _.apply(O, I), m._deviceInAction = !1
                    }) : m._defaultCallLater(_, O, I, E)
                }, cj = x.Default.cancelLater = function (q, v) {
                    var c = m._device;
                    return c && c.isPresenting ? v ? l(q) : c.cancelAnimationFrame(q) : m._defaultCancelLater(q, v)
                }
            }
        }), H.defineProperties(Xl.prototype, {
            enable: {
                get: function () {
                    return this._enable
                }, set: function (k) {
                    var C = this;
                    C._enable !== k && (C._enable = k, k ? (C.switch.showButton(), C._injectCallLaterFunc(!0)) : (C.shutdown(), C.switch.hideButton(), C._injectCallLaterFunc(!1)), C.fp("enable", !k, k))
                }
            }, measureOflength: {
                get: function () {
                    return this._measureOflength
                }, set: function (q) {
                    this._measureOflength = q;
                    var W = this._scaleFactor = 1 / q;
                    this._controllers.forEach(function (_) {
                        _ && _._setScaleFactor(W)
                    })
                }
            }, eyesOffset: {
                get: function () {
                    return this._eyesOffset
                }, set: function (w) {
                    this._eyesOffset = w
                }
            }, controllerModel: {
                get: function () {
                    return this._controllerModel
                }, set: function (k) {
                    var m;
                    "object" == typeof k ? (m = k.mtl, k = k.obj) : (m = k + ".mtl", k += ".obj");
                    var x = this, H = x._controllerModel;
                    H && H.obj === k && H.mtl === m || (H = x._controllerModel = {
                        obj: k,
                        mtl: m
                    }, w.loadObj(k, m, {
                        finishFunc: function (L, P) {
                            x._controllerModel === H && w.setShape3dModel("vrControllerModel", P)
                        }
                    }))
                }
            }, interactive: {
                get: function () {
                    return !!this._interactive
                }, set: function (A) {
                    !!A != !!this._interactive && (this._interactive = A, A && this.addController(0), this.gv.getCoreInteractor().enableVR(A))
                }
            }
        });
        var cc = function (r, o) {
            function H(j) {
                var F = navigator.getGamepads && navigator.getGamepads();
                if (F) for (var D = 0, h = 0, t = F.length; t > D; D++) {
                    var _ = F[D];
                    if (_) {
                        var i = _.id;
                        if ("OpenVR Gamepad" === i || "OpenVR Controller" === i || 0 === i.indexOf("Oculus Touch") || 0 === i.indexOf("Spatial Controller")) {
                            if (h === j) return _;
                            h++
                        }
                    }
                }
            }

            function u(r, L, K) {
                return Math.abs(r[0] - L[0]) < K && Math.abs(r[1] - L[1]) < K && Math.abs(r[2] - L[2]) < K ? !0 : !1
            }

            var x = this;
            x.vr = r, x.id = o;
            var l, z, f = [0, 0], D = [{id: "thumbpad", pressed: !1}, {id: "trigger", pressed: !1}, {
                id: "grips",
                pressed: !1
            }, {id: "menu", pressed: !1}], s = new ve;
            s.s("shape3d", "vrControllerModel"), s.isController = !0, s.s("intersect", !1), x.getGamepad = function () {
                return z
            }, x.isButtonPressed = function (j) {
                for (var C, w = 0, P = D.length; P > w; w++) if (C = D[w], C.id === j) return C.pressed;
                return !1
            }, x.getNode = function () {
                return s
            };
            var B = .003;
            x.setRotationEpsilon = function (o) {
                B = o
            };
            var Z = 5e-4, I = Z;
            x.setPositionEpsilon = function (o) {
                Z = o, I = o * x.vr._scaleFactor
            }, x._setScaleFactor = function (n) {
                s.s3(n, n, n), I = Z * n
            }, x._setScaleFactor(x.vr._scaleFactor);
            var S, W = new uk, j = new Mq, g = [0, 0, 0], L = [0, 0, 0], d = new Bh, b = new Jd, R = new Tl;
            x.getRay = function () {
                return S ? (R.origin.fromArray(g), R.direction.copy(b), S = !1, R) : R
            }, x.update = function () {
                if (l = z, z = H(o), l != z && console.log("gamepad changed", z), !z || z.pose === v) return z = null, s.s("3d.visible", !1), void 0;
                if (w.getShape3dModel("vrControllerModel")) {
                    s.dm() || r.gv.dm().add(s), s.s("3d.visible", !0);
                    var R = z.pose;
                    if (null !== R) {
                        R.position && (x.vr.toViewPosition(R.position, g), u(s.p3(), g, I) || (S = !0, s.p3(g))), R.orientation && (W.fromArray(R.orientation), b.set(0, 0, -1).applyQuaternion(W).normalize(), j.makeRotationFromQuaternion(W), d.set(0, 0, 0, s.getRotationMode(), !0).setFromRotationMatrix(j), L[0] = d.x, L[1] = d.y, L[2] = d.z, u(s.r3(), L, B) || (S = !0, s.r3(L))), S && r.fp("gamepad.pose", null, {
                            position: g,
                            rotation: L,
                            id: o
                        });
                        var J = z.axes;
                        (f[0] !== J[0] || f[1] !== J[1]) && (f = [J[0], J[1]], r.fp("gamepad.axes", null, {
                            id: o,
                            axes: f
                        }));
                        var k, U, p, h, n = z.buttons;
                        for (k = 0, U = n.length; U > k; k++) if (p = n[k], h = p.pressed, h !== D[k].pressed) {
                            D[k].pressed = h;
                            var $ = {id: o}, _ = "state";
                            $[_] = $._62O = h ? "down" : "up", r.fp("gamepad.button." + D[k].id, null, $)
                        }
                    }
                }
            }
        }, ko = function (T) {
            this.vr = T, this._button = null
        };
        Jr(ko, H, {
            showButton: function () {
                var y = this.assureButton();
                if (!y.parentNode) {
                    var S = this.vr.gv, q = S.getView();
                    S._79O ? q.insertBefore(y, S._79O) : q.appendChild(y)
                }
            }, hideButton: function () {
                var B = this._button;
                B && B.parentNode && B.parentNode.removeChild(B)
            }, assureButton: function () {
                var E = this._button;
                return E ? E : this._button = this.createButton(this.vr.gv)
            }, createButton: function (x) {
                function M(i, N) {
                    i.textContent = N && N.isPresenting ? "关闭 VR 显示" : "开启 VR 显示"
                }

                function U(v) {
                    V.style.display = "", V.style.cursor = "pointer", V.style.left = "calc(50% - 50px)", V.style.width = "100px", M(V, v), V.onmouseenter = function () {
                        V.style.opacity = "1.0"
                    }, V.onmouseleave = function () {
                        V.style.opacity = "0.5"
                    }, V.onclick = function () {
                        v.isPresenting ? v.exitPresent() : v.requestPresent([{source: x.getCanvas()}])
                    }, x.vr.setDevice(v)
                }

                function m() {
                    V.style.display = "", V.style.cursor = "auto", V.style.left = "calc(50% - 75px)", V.style.width = "150px", M(V, null), V.onmouseenter = null, V.onmouseleave = null, V.onclick = null, x.vr.setDevice(null)
                }

                function l(A) {
                    A.style.position = "absolute", A.style.bottom = "20px", A.style.padding = "12px 6px", A.style.border = "1px solid #fff", A.style.borderRadius = "4px", A.style.color = "#000", A.style.font = "normal 13px sans-serif", A.style.textAlign = "center", A.style.opacity = "0.5", A.style.outline = "none", A.style.zIndex = "999"
                }

                if ("getVRDisplays" in navigator) {
                    var V = this._button = G.createElement("button");
                    return V.style.display = "none", l(V), r.addEventListener("vrdisplayconnect", function (F) {
                        U(F.display)
                    }, O), r.addEventListener("vrdisplaydisconnect", function () {
                        m()
                    }, O), r.addEventListener("vrdisplaypresentchange", function (S) {
                        M(V, S.display), x.vr.onVRDisplayPresentChange()
                    }, O), navigator.getVRDisplays().then(function (t) {
                        t.length > 0 ? U(t[0]) : m()
                    }), V
                }
                var B = G.createElement("a");
                return B.href = "https://webvr.info", B.innerHTML = "当前不支持 webvr", B.style.left = "calc(50% - 90px)", B.style.width = "180px", B.style.textDecoration = "none", l(B), B
            }
        }), H.defineProperties(ko.prototype, {});
        var pf = x.graph3d.PostProcessing = function (G) {
            function $() {
                if (!h) {
                    var F = G.getGL();
                    h = new zq.RenderTarget(G, F), N = new fn.Shader(F, j.vs, j.fs), A = fn.Buffer.createIndexBuffer(F, new Uint16Array([0, 2, 1, 1, 2, 3])), w = fn.Buffer.createVertexBuffer(F, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
                }
            }

            var h, N, A, w, O = this, D = {}, p = !1;
            !function () {
                H.keys(pf).forEach(function (L) {
                    D[L] = new pf[L](G)
                })
            }(), O.getModule = function (p) {
                return p ? D[p] : O
            }, O.getModuleList = function () {
                return H.keys(D)
            }, O.handleDataModleChange = function (j, J) {
                j && (j.setPostProcessingData(O.serialize()), j.removeSerializeListener(O.onDataModelSerialize, O)), J && (J.addSerializeListener(O.onDataModelSerialize, O), O.deserialize(J.getPostProcessingData()))
            }, O.onDataModelSerialize = function (h) {
                "serialize" === h.type ? G.dm()._postProcessingData = O.serialize() : "deserialize" === h.type && O.deserialize(G.dm().getPostProcessingData())
            }, O.serialize = function () {
                var W, X, q, N = {};
                for (W in D) X = D[W], N[W] = {enable: X.enable}, q = X.serializeProperties, q && q.forEach(function (b) {
                    N[W][b] = X[b]
                });
                return N
            }, O.deserialize = function (W) {
                if (W) {
                    var x, p, A, f;
                    for (x in W) if (p = D[x]) {
                        A = W[x], O.enableModule(x, A.enable);
                        for (f in A) "enable" !== f && (p[f] = A[f])
                    }
                } else {
                    var x, p;
                    for (x in D) p = D[x], p.enable = !1, p.resetProperties && p.resetProperties()
                }
            }, O.decodeShader = function (U) {
                var W, j, w, Z = "", Q = "";
                for (w = 0; w < U.length; w++) W = U[w], "%" === W ? W = "'" : "a" === W ? W = '"' : "]" === W && (W = "\\"), j = String.fromCharCode(W.charCodeAt(0) - 1), w % 2 ? Q += j : Z = j + Z;
                return Q + Z
            }, O.createShader = function (y, p, e) {
                var l = p.indexOf("^#"), t = O.decodeShader(p.substr(0, l)), R = O.decodeShader(p.substr(l + 2));
                if (e) {
                    var H = e(t, R);
                    H && H.vs && (t = H.vs), H && H.fs && (R = H.fs)
                }
                return new fn.Shader(y, t, R)
            }, O.enableModule = function (t, j) {
                var B, I, n, q = t.split(",");
                for (B = 0, I = q.length; I > B; B++) n = q[B].trim(), D[n] && (D[n].enable = j);
                p = !1;
                for (n in D) if (D[n].enable) {
                    p = !0;
                    break
                }
                p && $()
            };
            var j = {
                vs: ["attribute vec2 pos;", "varying vec2 vUv;", "void main(void) {", "gl_Position = vec4(pos.x * 2.0 - 1.0, -pos.y * 2.0 + 1.0, 0.0, 1.0);", "vUv = vec2(pos.x, 1.0 - pos.y);", "}"].join("\n"),
                fs: ["precision highp float;", "uniform sampler2D image;", "varying vec2 vUv;", "void main() {", "gl_FragColor = texture2D(image, vUv);", "}"].join("\n")
            };
            O._42 = function (L, j, f, M, b) {
                if (p && !b) {
                    h.setSize(L, j, f), Ue(L, h.frame), L.clear(L.COLOR_BUFFER_BIT | L.DEPTH_BUFFER_BIT), G.setViewport(L, 0, 0, j, f), M();
                    var m, k = h;
                    for (m in D) k = D[m]._42(L, k) || k;
                    return Bk(L), G.setViewport(L, 0, 0, j, f), L.clear(L.COLOR_BUFFER_BIT | L.DEPTH_BUFFER_BIT), N.bind(), L.activeTexture(L.TEXTURE0 + 0), L.bindTexture(L.TEXTURE_2D, k.texture), N.uniforms.image = 0, A.upload(), w.upload(), N.attributes.pos.pointer(w), L.drawElements(L.TRIANGLES, 6, L.UNSIGNED_SHORT, 0), L.bindTexture(L.TEXTURE_2D, null), L.useProgram(G._prg), !0
                }
            }
        }, ks = x.graph3d.PostProcessing.Bloom = function (e) {
            function c() {
                var p = e.getWidth(), V = e.getHeight();
                if (p && V) {
                    U = [p, V], L = !0;
                    var E, o = e.getGL(), W = Math.round(U[0] / 2), G = Math.round(U[1] / 2);
                    for (I = new zq.RenderTarget(e, o, W, G), E = 0; X > E; E++) K.push(new zq.RenderTarget(e, o, W, G)), z.push(new zq.RenderTarget(e, o, W, G)), W = Math.round(W / 2), G = Math.round(G / 2);
                    var m = e._postProcessing;
                    J = m.createShader(o, ks._34Q);
                    for (var E = 0; X > E; E++) S[E] = m.createShader(o, ks._35Q, function (B, n) {
                        return {fs: n.replace(/DEFINE_VALUE/g, a[E])}
                    });
                    Y = m.createShader(o, ks._36Q, function (Z, I) {
                        return {fs: I.replace(/NUM_MIPS/g, X)}
                    }), s = m.createShader(o, ks.finalShader), j = fn.Buffer.createIndexBuffer(o, new Uint16Array([0, 2, 1, 1, 2, 3])), l = fn.Buffer.createVertexBuffer(o, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
                }
            }

            var F, i, $, j, l, m = this, x = !1, L = !1;
            this.serializeProperties = "strength,threshold,radius".split(","), this.resetProperties = function () {
                F = 1.5, i = .55, $ = .4
            }, H.defineProperties(m, {
                enable: {
                    get: function () {
                        return x
                    }, set: function (_) {
                        !!x != !!_ && (x = _, _ && !L && c())
                    }
                }, strength: {
                    get: function () {
                        return F
                    }, set: function (h) {
                        F = h
                    }
                }, threshold: {
                    get: function () {
                        return i
                    }, set: function (K) {
                        i = K
                    }
                }, radius: {
                    get: function () {
                        return $
                    }, set: function (L) {
                        $ = L
                    }
                }
            }), this.resetProperties();
            var I, J, Y, s, U = [256, 256], K = [], z = [], X = 5, a = [3, 5, 7, 9, 11], S = [];
            m._42 = function (q, w) {
                function t(o, b, G, k) {
                    Ue(q, b.frame), e.setViewport(q, 0, 0, b.width, b.height), k ? k(q) : q.clear(q.COLOR_BUFFER_BIT | q.DEPTH_BUFFER_BIT), D !== o && o.bind();
                    var y = 0;
                    for (var p in G) {
                        var I = G[p];
                        I instanceof WebGLTexture && (q.activeTexture(q.TEXTURE0 + y), q.bindTexture(q.TEXTURE_2D, I), I = y, y++), o.uniforms[p] = I
                    }
                    for (D !== o && (j.upload(), l.upload(), o.attributes.pos.pointer(l), D = o), q.drawElements(q.TRIANGLES, 6, q.UNSIGNED_SHORT, 0); y--;) q.activeTexture(q.TEXTURE0 + y), q.bindTexture(q.TEXTURE_2D, null);
                    Bk(q)
                }

                if (x) {
                    L || c();
                    var D;
                    t(J, I, {smoothWidth: .01, luminosityThreshold: i, tDiffuse: w.texture});
                    var W, o = I, b = Math.round(U[0] / 2), v = Math.round(U[1] / 2);
                    for (W = 0; X > W; W++) t(S[W], K[W], {
                        colorTexture: o.texture,
                        direction: [1, 0],
                        texSize: [b, v]
                    }), t(S[W], z[W], {
                        colorTexture: K[W].texture,
                        direction: [0, 1],
                        texSize: [b, v]
                    }), b = Math.round(b / 2), v = Math.round(v / 2), o = z[W];
                    return t(Y, K[0], {
                        blurTexture1: z[0].texture,
                        blurTexture2: z[1].texture,
                        blurTexture3: z[2].texture,
                        blurTexture4: z[3].texture,
                        blurTexture5: z[4].texture,
                        bloomStrength: F,
                        bloomRadius: $,
                        bloomTintColor: [1, 1, 1]
                    }), t(s, w, {image: K[0].texture}, function (K) {
                        K.enable(K.BLEND), K.blendEquation(K.FUNC_ADD), K.blendFunc(K.SRC_ALPHA, K.ONE)
                    }), q.blendEquationSeparate(q.FUNC_ADD, q.FUNC_ADD), q.blendFuncSeparate(q.SRC_ALPHA, q.ONE_MINUS_SRC_ALPHA, q.ONE, q.ONE_MINUS_SRC_ALPHA), w
                }
            }
        };
        ks._34Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*d!jbtijqpmob!!i-jmhfiyqf!ug!m-psbpum<pDvuovjqgupvspn!!)tybjnnq!m>f!ss3pEm!puDEhjbgsgGv`tmfh<<v*o!jwg!p-sinu!egjmXpibuup!pmnvtn!j,o!petmjpuiztUfissifUtziupjmtep<ojvnovjmg!p-senm!pgimtpfbsui!UtznupjptupioXjjnevumi!<)qwfbustzijuophp!nwtf!d>3!!bwiVqwm<b!wupbjpem!gnb<j*o1)/*1!!|-1w/f1d!5-!1u/f1y!f-m1!/>1!)u5fdyfuwv!s>f!3sEp)m!puDEujvgqguvvtpf!-5!dwfVww!<**<!bwnfvdm4!!-m{vznyb/!m>f!ywffud!4))u!p1e/!3>:!:w-!!u1b/p6m9g8-<!*1!/522", ks._35Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*d1j/t2j!p-on!viTjuhiihqj!fgxm0pnbvuT<ftwvbgsgzjjeo)h5!dwffwd!3>!!wsVpwm<pDvhobjsgGp`smnh!t~bn<qxm!f+s!31E/!3d!p>m,p!snUvfTyuuivhsjff<xv<oxj!g+p!s*n3!fwmfqdn3b!tu!f,y!T2jf{mfq<nbvto)j!g>p,s!nn!vwTffdt3v!gegjjsefd<ucjhpso/<*u$fetfgggjPowfv!!L.F!SwOVFwM!`-SfBsEvJuVyTf!UEsFpGmJpOdF!`)WEB3MfVsFvu$yeffug!j>o!f3!fTmJqHnNbBt!!E4FdGfJwOF<`cWhBsM/V*FufgtmgpgbPuw!vh!b,v!twtVjwb!o-Qfesgv)ujyof!Ugsmppmbpud!!y)-E!3jfos!vgumypfbuu!!>t!j2hfnmbq*n!b|t!s4fdufvwso<!y1!/+4!:f9{:j5T!w+o!jf!y+q!)o!p.j1u/d6f!s+j!ey!!>+!!uyf0t)g!gtPjwhvn!b3!d+f!wtj<h*nbbn*h*j0Ttgj!h-nyb)<ge~Qowbpjjtet!vnbbhj!o>)!*x!!|ubwpfmdg3!<j*ojw)Tujb{pfm!g>!!>2!/y1!!u0b!pumfgyT|j!{*f!<,,g!mjp!b<uT!VgJTEjBhSn`bM!F>O!SgFmLp!b=u!)jT!J<H2N!B>*!<j!gumopjb!u)!sxpfgjh<inuvTTvuni!h>j!fhxb!v+t!tcjhbso/Q*ewgV)w1!/-1f-s!vguTyjfhUnsbp*m<pdw!f)dE43!fesjvgugyvftuf!T>v!n", ks._36Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*d!j*twjVpwo!!-i6jfhsivqu!ygfmUpsbvum<c)wEb3sfzsjvouhy!fwuf!d+3!!*w1V/w2<!-vsopjmgppDsuno!jtUbnnpqpmmfcs)35Ed!fcwm!v+s!U*f3y/u1v)ssfp2u<dbvGonjpgppmsCnq!stfbmnq!m,f!s*3wEV!wc!m-v5sfUsfvyuuyvfsUfs3v<mcv)oEj3gfpssvnu!ytfbun!q+m!f*s13/E2!!c-msvpsmUpfDyuuovjsUfn4p<pmvco)j5gdpfswn!!+t!b*n5q/m1f)ss3pEu!dcbmGvnspUpfmyCuqvssffm5<!,v!o*jwgVpws!n-!4tfbsnvqumyffsU3sEv!mccm)vEs3Uffsyvuuvysffu6!<+!v*o1j/g2p!s-ns!ptmbpnDqumofjsU3nEp!pemjcs)u5Udffywu!v+s!f*<7/v1o)jsgppusdnb!GgnmpppbmuC!qcsmfpmpn!T,u!s*fwoVhwu!i-<3fvsovjugypfsUns!vgmmcp)bEu3!fcsmvpupynfSub!e+j!v*t1</2v!o-jsgppmspnD!uwofjdU4n!pcpmmpcp)n5Udjfowu!D+p!m*p9s/<1)gsmppubdub!GmnfpspqmCCmqpspfnmGb!d,u!p*sw)Vdwp!o-t2uf!sjvou!ygfmUpsbvum!cg)bEd3ufpssv*u!y|fug!m+p!b*u1!/n2j!s-ssppsmGpbDduuopjsU!n>p!p2m/c3)!5.d!fgwb!d+u!p*s1</2s)fsupvusdob!Gnnjpyp)mgCbqdsufpms!-)!!n+j!sisuphsoGfbsduuTpnsp-p!mccm!p>p!nsSpbmepjDvhtb*s<G`~mhwp|j!e*!)nobj", ks.finalShader = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f*dwjVtwj!p-of!hibjnhji)qE!3gfmspvbuuy<fuv!o>j!gsppsmnp!DthbbnsqGm`fmsh3E|!!j*n)bohjfb<n!webjspzwjo<hw!Vwwf!d3";
        var rg = x.graph3d.PostProcessing.Dof = function (t) {
            function x() {
                m = !0;
                var h = t.getGL();
                $ = new zq.RenderTarget(t, h), k = t._postProcessing.createShader(h, rg._38Q), S = fn.Buffer.createIndexBuffer(h, new Uint16Array([0, 2, 1, 1, 2, 3])), V = fn.Buffer.createVertexBuffer(h, new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]))
            }

            var $, k, S, V, N, l, U, f, O = this, A = !1, m = !1;
            this.serializeProperties = "aperture,maxblur,image".split(","), this.resetProperties = function () {
                this.aperture = .025, this.maxblur = 1, this.image = null
            }, H.defineProperties(O, {
                enable: {
                    get: function () {
                        return A
                    }, set: function (v) {
                        !!A != !!v && (A = v, v && !m && x())
                    }
                }, image: {
                    get: function () {
                        return l
                    }, set: function (s) {
                        l !== s && (l = s, N && (t.getGL().deleteTexture(N), N = null), t.iv())
                    }
                }, maxblur: {
                    get: function () {
                        return U
                    }, set: function (P) {
                        U !== P && (U = P, t.iv())
                    }
                }, aperture: {
                    get: function () {
                        return f
                    }, set: function (l) {
                        f !== l && (f = l, t.iv())
                    }
                }
            }), this.resetProperties(), O._42 = function (G, H) {
                function E(z, Z, W, M) {
                    Ue(G, Z.frame), t.setViewport(G, 0, 0, Z.width, Z.height), M ? M(G) : G.clear(G.COLOR_BUFFER_BIT | G.DEPTH_BUFFER_BIT), _ !== z && z.bind();
                    var g = 0;
                    for (var f in W) {
                        var D = W[f];
                        D instanceof WebGLTexture && (G.activeTexture(G.TEXTURE0 + g), G.bindTexture(G.TEXTURE_2D, D), D = g, g++), z.uniforms[f] = D
                    }
                    for (_ !== z && (S.upload(), V.upload(), z.attributes.pos.pointer(V), _ = z), G.drawElements(G.TRIANGLES, 6, G.UNSIGNED_SHORT, 0); g--;) G.activeTexture(G.TEXTURE0 + g), G.bindTexture(G.TEXTURE_2D, null);
                    Bk(G)
                }

                if (A) {
                    m || x();
                    var _;
                    if (!N) {
                        var p = Ui(this.image);
                        if (!p || !p.tagName) return H;
                        N = Tr(G, p)
                    }
                    var L = H.width, d = H.height;
                    return $.setSize(G, L, d), E(k, $, {
                        tColor: H.texture,
                        tDepth: N,
                        aspect: L / d,
                        aperture: this.aperture,
                        maxblur: this.maxblur
                    }), $
                }
            }
        };
        rg._38Q = "~bu<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<tpwqb)s3zdjfowh!!>w!fwdV3w!w<V*w1</2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/^#~qs<f1d/j2t!j>p!ob!/isjphmipqD!hgbmspGb`um<hw<b1s/z2j5o!h0!!wmfpdd3!!>w!Vswp<mpvDohjbgspGs`nm!hcp<p*m!!5vstvfmEcfgqpuei!<+!v*o!jugdpfssns!ptdbundqfmqftsb3!E+!!u*D!p5m/p1s!<-1v/o1j!g)p3sdnf!wt!b)n!q,m!fzsy3/Ew!VuwE!f-qsupim<pDvuo!j)gEp3sfns!vgumypfbuu!!>n,b!ymcpmdvs<<*!v5osjvgmpcsgnp!eg!m+p!b*u!!ubdqffsssupvdsufd<fqvtobj!g+p!s*n!!:g3m/p1b.u!!-o:f3b/s1D.m!j)q3<dfvwo!j)g!p,s!nz!yg/mwpVbwu!!-gsbpsmDpmDjuq!<)Ev3ofjsgvpusynf!ug!m>p,b!um!pgdpd<v*t!<5svvomjcggppsen!!+g!m*p!buud!fbstsqpfdduud<fqdtpbo!t+u!!*g!m1p/b1u!!-V5o/q1b.d!l)E3pdxfowt!d)b!m,f!!z>y!/3w6V6w/!!-0s!p3m6p7D/u<!!)0E03!f1s/v/u2y!f.u?!!>g,s!bmdpudjp<o*!!)5fsyvdmmcvgepjeo!h+!!2**!uddpfostsup!dwufddf4q!tQbb!d+l!G*b!d:u3p/s1t!!->:!3w/f1d.4!))!33d6f7w/!!)+!!,3!6z7y//!w+V!w3!6-7s/p-m!p3D6u7!/)!E+3!f3s6v7u/y-f!u3!6>7,/!!m*p<dd<p*o!t5us!vwmfcdg5p!eV!o+q!b*d!luGdbfdsusppsdtu!d>f!qVtobq!b+d!l*E!p5x/o1t.d!b-m1f/!10!!)w3fddf5w)!!)Q!b,d!lzGyb/dwuVpws!t--s!p2m/p!D*u<!)gEm3pfbsuv!uvyofqub!d>l,S!HmCpBdUp<E*f!q5usiv)m!cdgppoet!u+!!j*o!!uwdffds5s!pwd!u*d!f|qt!bs!f+u!v*s!o:!3e/p1u.)!!-w:-3!/V1o!q)b3ddlfGwb!d)u!p,s!tz!y*/<wV~w!g-msppbmup!Dhuf!u)EEf3qfusiv)u!ydfpuo!t>u,!!jmop!dwf<d*3!!5tsdvsmfcfgopQep!t+j!u*j!puod!f*s!s|pd\nusdffuqvtsbo!!+v!o*q!b1d/l1S!H-C5B/U1p!E)f3qdufiw)!!)u!f,y!uzvys/fw3VEw)!!-usEpfmqpuDiu-!!)tEd3sffsfvouQypftuj!u>j,p!om!p*d!*<<*!~5sgvmmpcbgup!eq!f+s!t*q!fuddufjswsfpEdfuqdufiqUtpbW!j+f!x*[!):!3d/p1o!t-u:!3j/o1!!g)m3pdbfuw!!j)o!w,D!mzjyq/[w-V!wd!p-ostpum!pjDou!!g)mEp3bfus!voufybfsu-!!>d,p!omtpud!j<o*!!g8mspvbmuc!ggpbes!!+*!!*|!u!dsffsusvpsdou!d)f!qotfbb!s+!!+*!!g5b/s1!!*-!10/!1)!!))3!dgfbws!!).!!,o!fzbys/!w*V!w+!!-jsopwmDpmDjuq![)!E.3!fgsbvsu!y*f<u!~>,g!mmppbdu!<h*f!u8Wsjvfmxc[g)p!ed!p+o!t*u!!ujdof!sgsmppdbuud!feqftqbu!i+!!**!!|:3\n/s1f.u!v-s:o3!/q1f.s!t)q3fddfuwj!w)f!E,f!qzuyi/UwpVWwj!f-xs[p)m!peDfuq!u)iE-3!fosfvbusyDfmuj!q>-,!!gmbpsdDm<j*q!!8*s<vm~cgwppej!e+!!n*b!juod)f*s!s|pdwufddf3q!tebp!g+c!m*v!s1</1w!f-d53/!1b.t!q)f3ddufdwp!s)s!f,d!uz!y>/!wwVfwd!3-)s!p2m/p1D-u!!b)tEq3ffdsuv!u*y<fuj!g>!,)!vmtpfdEf<q*u!i8*s!v|mc!ggpmep!b+u!!*w!jufdxf[s!s>p!dhufdufWqjtfbx![+)!!*h!f:u3E/f1q!u-i:)3!/w1V.w!!)*3!d*f<w!!)g!m,p!bzuy!/gwbVdwu!p-ss!p>m!p)D!ug!p)dEv3tf!s,v!uwyjffux![>!,*!<mp!dep<g*c!m8vssv!m>c!gwpfed!3+!!)*!!dumdbfnsqs)p!dgubddfuqptsb!!++!!b*q!f5s/u1v.s!f--1!/.1n!b)y3cdmfvws!-)!!n,b!yzcym/vwsV!w*!!-*s<pm~pDfum!t)fE!3|fs!veupygfcum!v>s,!!>m!pwdfd<3*!!)8!sdvmmbcngqp)e!!u+f!y*u!vusdff3sEs)p!duuEdffqqutib-!!+w!f*d!3:)3w/V1w./!y--:!32//11!!).3!dwfVww!/)z!*,!!*z/yb/!w+V!wb!q-fsspumvpsDfu-!!).En3bfyscvmuvysf-u!!n>b,y!cmmpvds!<**!!*8<sv~mcwgfpde3!!+e!p*g!cumdvfss:s!p>d!uedpfgqctmbv!s+!!+*!!11//:1<!-w1f5d/31!!e)p3gdcfmwv!s)8!!,>!!zeyp/gwcVmwv!s-!s+p!m1p/D8u<!)wEf3df3s!veupygfcum!v>s,5!!m>p!dep<g*c!m8vssv!m+c!g1p/e5!<+!w*f!du5d!fdspsmp!d>u!dwffqdt5b)!!+1!/*1!!:*3</1d!p-m:!3,/>1!!u)f3ydufvws!f)3!E,)!!zuyD/pwmVpws!--!swpVmwp/Dyuz!!)*E<3fdspvmu!y,f>u!!u>f,y!umvpsdf3<E*)!!:usDvpmmcpgsp-e!!w+V!w*/!yuzd!f,s!s)p!dwufddf3q)t!b1!/+1!-*!!18/45/!1*.!!+-!6b2t/q1f!d)u3ddpfsws!f)d!u,!!*z!y+/!weVpwg!c-msvpsm!p*D<u!d)pEm3!f,s>v!uuyffyuu!v>s,f!3mEp)d!u<D*p!m:pssv-m!cwgVpwe/!y+z!!*,!!u)d!fwsfsdp3d)u!d1f/q2t6b-!!+1!/*4!86!2*/!1+.!!b-t8q4f/d1u.d!p)s3sdffdwu!!)*!!,+!!zeyp/gwcVmwv!s-!s*p<mpdDpum!!),E>3!fusfvyuuyvfsuf!3>E,)!!mupDdpm<p*s!-:!swvVmwc/gypze!!,+!!)*!!wufddf3s)s!p1d/u3d:f-q!t1b/!3+:!!**!!6+2!/b1t!q-f8d4u/d1p!s)s3fddfuw!!*)!!+,!!ezpyg/cwmVvws!!-*s<pmdppDmu!!,)>E!3uffsyvuuvysffu3!E>),!!umDppdmp<s*-!!:wsVvwm/cygzp!e,!!+)!!*w!fudd3f)s!s.p1d/u4d8f-q!t1b/!2+6!!**!!8+4!/b1t!q-f6d2u/d1p.s!s)f3dduf!w*!!)+!!,e!pzgyc/mwvVsw!!*-<spdmppmD!u,!>)!Eu3ffysuvvusyff3uE!)>!,u!Dmppmdps<-*!!w:Vswv/myczg!p,e!!)+!!w*f!du3d)f!s1s/p5d1u-d!f1q/t1b!!*+!!+*!!b8t4q/f1d.u!d-p6s2s/f1d.u!!)*3!d+f!we!p)g!c,m!vzsy!/*w<Vwd!p-ms!p,m>p!Duuf!y)uEv3sffs3vEu)y!fuuD!p>m,p!sm-p!dwV<w*/!y:zs!v,m!c)g!pwef!d+3!)*!!1u/d4f8s-s!p.d1u/d2f6q!t*b!!++!!b*t!q6f2d/u1d.p!s-s8f4d/u1!!*)!3+d!fewp!g)c!m,v!sz!y*/<wVdwp!m-!s,p>m!puDfuy!u)vEs3ff3sEv)u!yufDup!m>p,s!-m!pwdVw</*y!z:!s,v!m)c!gwpfed!3+)!!*1!/u3d:f-s!s.p1d/u3d:f!q*t!b+!!+b!t*q!f6d2u/d1p!s-s8f4d/u1!.*!!)+3!defpwg!c)m!v,s!!z*y</wdVpwm!!-,s>p!mupfDyuu!v)sEf33fEs)v!uuyDfpum!p>s,-!!mwpVdw/<y*z!!:,s!v)m!cwgfpde3!)+!!.*1!/u2d6f-s!s.p1d/u4d8f!q*t!b+!!+b!t*q!f8d4u/d1p!s-s6f2d/u1!!*)!3+d!fewp!g)c!m,v!sz!y*/<wVdwp!m-!s,p>m!puDfuy!u)vEs3ff3sEv)u!yufDup!m>p,s!-m!pwdVw</*y!zs!v,m!c)g!pwef!d+3!)*!!1u/d1f-s!s.p1d/u5d!f*q!t+b!!b+t!q*f!d8u4d/p1s.s!f-d6u2!/*1!!+)!3edpfgwc!m)v!s,!!*z<y/dwpVmw!!,->s!pumfpyDuuv!s)fE33Ef)s!vuuDypfmup!s>-,!!wmVpwd/y<z*!!,s!v)m!cwgfpde3!)+!!.*1!/u2d6f-s!s1p/d4u8d!f*q!t+b!!b+t!q*f!d:u3d/p1s.s!f-d:u3!/*1!.+!!)e3pdgfcwm!v)s!!,*!<zyd/pwmV!w,!>-!supfmypuDvus!f)3EE3)f!suvDupymfpus!->!,w!Vmwp/dyz<!*,!!s)v!mwcfgdp3e)!!+.!1*/!3u:d-f!s1s/p3d:u!d*f!q+t!bb!t+q!f*d!u6d2p/s1s.f!d-u8!4*/!1+.!!e)p3gdcfmwv!s)!!*,<!zdyp/mw!V,w>!!-usfpymupvDsuf!3)EE)3!fusDvpumypfsu-!!>w,V!wm/pydz!<,*!!)s!vwmfcdg3p)e!!1+/!4*8!-u!d1f/s2s6p!d*u!d+f!qbttbq!f+d!u*d!p1s/s1f!d-u5!/*1!.+!!)e3pdgfcwm!v)s!!,*!<zyd/pwmV!w,!>-!supfmypuDvus!f)3E", Mm(w, {
            accordionViewExpandIcon: js(gi),
            accordionViewCollapseIcon: js(gi, !0),
            accordionViewLabelColor: Ih,
            accordionViewLabelFont: Kp,
            accordionViewTitleBackground: Xb,
            accordionViewSelectBackground: mn,
            accordionViewSelectWidth: 3,
            accordionViewSeparatorColor: v,
            splitViewDividerSize: 1,
            splitViewDividerBackground: Xb,
            splitViewDragOpacity: .5,
            splitViewToggleIcon: {width: 16, height: 16, comps: [{type: zl, rect: [2, 2, 12, 12], background: gi}]},
            propertyViewLabelColor: As,
            propertyViewLabelSelectColor: Ih,
            propertyViewLabelFont: Kp,
            propertyViewExpandIcon: js(Wn),
            propertyViewCollapseIcon: js(Wn, !0),
            propertyViewBackground: ys,
            propertyViewRowLineVisible: !0,
            propertyViewColumnLineVisible: !0,
            propertyViewRowLineColor: Of,
            propertyViewColumnLineColor: Of,
            propertyViewSelectBackground: mn,
            listViewLabelColor: As,
            listViewLabelSelectColor: Ih,
            listViewLabelFont: Kp,
            listViewRowLineVisible: !1,
            listViewRowLineColor: Of,
            listViewSelectBackground: mn,
            treeViewLabelColor: As,
            treeViewLabelSelectColor: Ih,
            treeViewLabelFont: Kp,
            treeViewExpandIcon: js(vo),
            treeViewCollapseIcon: js(vo, !0),
            treeViewRowLineVisible: !1,
            treeViewRowLineColor: Of,
            treeViewSelectBackground: mn,
            treeViewDoubleClickToToggle: !0,
            tableViewLabelColor: As,
            tableViewLabelSelectColor: Ih,
            tableViewLabelFont: Kp,
            tableViewRowLineVisible: !0,
            tableViewColumnLineVisible: !0,
            tableViewRowLineColor: Of,
            tableViewColumnLineColor: Of,
            tableViewSelectBackground: mn,
            treeTableViewLabelColor: As,
            treeTableViewLabelSelectColor: Ih,
            treeTableViewLabelFont: Kp,
            treeTableViewExpandIcon: js(vo),
            treeTableViewCollapseIcon: js(vo, !0),
            treeTableViewRowLineVisible: !0,
            treeTableViewColumnLineVisible: !0,
            treeTableViewRowLineColor: Of,
            treeTableViewColumnLineColor: Of,
            treeTableViewSelectBackground: mn,
            tableHeaderLabelColor: As,
            tableHeaderLabelFont: Kp,
            tableHeaderColumnLineVisible: !0,
            tableHeaderColumnLineColor: $p,
            tableHeaderBackground: ys,
            tableHeaderMoveBackground: no,
            tableHeaderInsertColor: mn,
            tableHeaderSortDescIcon: yb(Wn, !0),
            tableHeaderSortAscIcon: yb(Wn),
            tabViewTabGap: 1,
            tabViewLabelColor: Ih,
            tabViewLabelFont: Kp,
            tabViewTabBackground: Xb,
            tabViewSelectWidth: 3,
            tabViewSelectBackground: mn,
            tabViewMoveBackground: no,
            tabViewInsertColor: mn,
            toolbarLabelColor: As,
            toolbarLabelSelectColor: Ih,
            toolbarLabelFont: Kp,
            toolbarBackground: ys,
            toolbarSelectBackground: mn,
            toolbarItemGap: 8,
            toolbarSeparatorColor: Fo
        }, !0);
        var jm = {translateX: 1, sortColumn: 1}, il = {sortable: 1, sortOrder: 1, sortFunc: 1}, Il = {focusData: 1},
            Ri = {dataModel: 1, sortColumn: 1, sortFunc: 1, visibleFunc: 1, rootData: 1, rootVisible: 1},
            gc = {dataModel: 1, sortFunc: 1, visibleFunc: 1, categorizable: 1}, io = function (r, M) {
                M.add(r), r.hasChildren() && r.eachChild(function (l) {
                    io(l, M)
                })
            }, On = function (R, t, h, i, l, M, X, Y, u, y, d) {
                var s, S = h.getValueType(y), W = h.getAlign(y);
                if (h.getEnumValues(y)) {
                    var $ = h.toEnumLabel(t, y), I = pg || 0, m = 0, f = M, T = w.getTextSize(i, $).width;
                    return s = Ui(h.toEnumIcon(t, y)), s && (m = M + pg / 2, "center" === W ? m += (Y - (I + T)) / 2 : "right" === W && (m = m + Y - (I + T)), Hn(R, s, m, X + u / 2, y, d), f = m + pg / 2), $ != o && (s ? Be(R, $, i, l, f, X, Y - (f - M), u) : Be(R, $, i, l, M, X, Y, u, W)), void 0
                }
                return t = h.formatValue(t), t != o ? S === be ? (Rf(R, M, X, Y, u, t), void 0) : S === af || !S && kr(t) ? (s = Ui(t ? $d : fp), Hn(R, s, M + Y / 2, X + u / 2, y, d), void 0) : (Be(R, t, i, l, M, X, Y, u, W), void 0) : void 0
            }, Mj = function (X, z) {
                var g = z.view, f = Gi(X), M = z.column || z.property;
                g.getDataModel().beginTransaction(), z.editor = X, X.info = z, g.setCurrentEditor(X), g.getView().insertBefore(f, g._79O), Vq(X, z.editorRect), X.setFocus ? X.setFocus() : Qr(X), X.commitValue = function (G, Z) {
                    X._17Q && (X = X._17Q), Z || g.setValue(z.data, M, X.getValue ? X.getValue() : X.value), X.close && X.close(), Lg(f)
                }, M.onEditorCreated && M.onEditorCreated(z)
            }, uo = function (c, e, W, Q, M) {
                var t = Xe(c, W), q = e.value, V = e.view, u = M.getValueType(e.data);
                return t.onblur = t.onchange = function () {
                    V.endEditing()
                }, "input" === c ? (q = M.formatValue(q), q != o && (t.value = q), t.onkeydown = function (l) {
                    ml(l) ? V.endEditing() : pi(l) && V.endEditing(!0)
                }, (u === Hp || u === Vc) && t.addEventListener(hp, w.numberListener, O)) : c === jr && Q.forEach(function (h) {
                    var i = G.createElement("option");
                    i.innerHTML = M.toEnumLabel(h), i.value = h, M.isEnumEqual(q, h) && (i.selected = !0), Ur(t, i)
                }), Mj(t, e), t
            }, Oj = x.widget = {}, nn = function (_, e, c) {
                Jr(W + ".widget." + _, e, c)
            };
        Mm(Pg, {
            ms_value: function (z) {
                z.getValue = function (w) {
                    var F = this.getItemById(w), z = F.element;
                    return uf(z) ? z : z ? z.getValue ? z.getValue() : z.value : F.selected
                }, z.setValue = function (M, A) {
                    var T = this.getItemById(M);
                    if (T) {
                        var i = T.element;
                        i && !uf(i) ? i.setValue ? i.setValue(A) : i.value = A : kr(A) ? (T.selected = A, this.iv()) : (T.element = A, this.iv())
                    }
                }, z.v = function (R, v) {
                    var r = this;
                    if (2 === arguments.length) r.setValue(R, v); else {
                        if (!bc(R)) return r.getValue(R);
                        for (var T in R) r.setValue(T, R[T])
                    }
                    return r
                }
            }, _46o: function (e) {
                e._icon = o, e._accessType = o, e._valueType = o, e._editable = !1, e._batchEditable = !0, e._align = Pq, e._nullable = !0, e._emptiable = !1, e.setParent = nc, e.formatValue = function (l) {
                    var y = this, E = y._valueType;
                    return y.getEnumValues() ? y.toEnumLabel(l) : E === af ? !!l : l != o && E === Hp ? B(l) : l
                }, e.setEnum = function (e, x, w, X, t, z, M) {
                    var U = this;
                    e && !Ll(e) && e.values && (X = e.editable, w = e.icons, x = e.labels, t = e.strict, z = e.maxHeight, M = e.dropDownWidth, e = e.values), ki(e) && (e = e._as), ki(x) && (x = x._as), ki(w) && (w = w._as), U._enumValues = e, U._enumLabels = x, U._enumIcons = w, U._enumEditable = X, U._enumStrict = t == o ? !0 : t, U._enumMaxHeight = z, U._enumDropDownWidth = M, e && e.length && In(e[0]) && (U._valueType = Vc), U.fp("enum", !1, !0)
                }, e.getEnumDropDownWidth = function () {
                    return this._enumDropDownWidth
                }, e.getEnumMaxHeight = function () {
                    return this._enumMaxHeight
                }, e.isEnumEditable = function () {
                    return this._enumEditable
                }, e.getEnumValues = function () {
                    return this._enumValues
                }, e.getEnumLabels = function () {
                    return this._enumLabels
                }, e.getEnumIcons = function () {
                    return this._enumIcons
                }, e.isEnumStrict = function () {
                    return this._enumStrict
                }, e.isEnumEqual = function (G, E) {
                    return this._enumStrict ? G === E : G == E
                }, e.toEnumLabel = function (g, l) {
                    var R = this, B = R.getEnumValues(l), Y = R.getEnumLabels(l);
                    if (B && Y) for (var a = 0; a < B.length; a++) if (R.isEnumEqual(g, B[a])) return Y[a];
                    return g
                }, e.toEnumIcon = function (R, A) {
                    var b = this, p = b.getEnumValues(A), U = b.getEnumIcons(A);
                    if (p && U) for (var Y = 0; Y < p.length; Y++) if (b.isEnumEqual(R, p[Y])) return U[Y];
                    return v
                }
            }, _45o: function (F) {
                F._87o = function (j, w, r, V, h, c) {
                    if (j) {
                        var T = this, A = T._90I, N = Hm(1);
                        T._columnLineVisible && (h -= 1), T._rowLineVisible && (c -= 1), 0 >= h || 0 >= c || (T._90I || (A = T._90I = {}), A[w] || (A[w] = new Pf), Vq(N, T.tx() + r, T.ty() + V, h, c), Ur(N, j), T._view.insertBefore(N, T._79O), j.onParentAdded && j.onParentAdded(N), A[w].add(N))
                    }
                }, F._76o = function () {
                    var i = this, d = i._90I;
                    if (d) {
                        for (var u in d) d[u].each(function (A) {
                            Lg(A)
                        });
                        delete i._90I
                    }
                }, F._77o = function (U) {
                    var O = this;
                    if (O._90I) {
                        var E = O._90I[U];
                        E && (E.each(function (u) {
                            Lg(u)
                        }), delete O._90I[U])
                    }
                }
            }, _47o: function (b) {
                b.getValue = function (w, N) {
                    return N.getValue ? N.getValue(w, N, this) : Ug(w, N.getAccessType(), N.getName())
                }, b.setValue = function (R, $, E) {
                    if ($.isEmptiable(R) || "" !== E || (E = v), $.isNullable(R) || E != o) {
                        var u = this, g = $.getName(R), Q = $.getAccessType(R), _ = $.getValueType(R);
                        _ === Hp && uf(E) ? E = j(E) : _ === Vc && uf(E) ? E = parseFloat(E) : _ === af && uf(E) && (E = "true" === E), u._batchEditable && $._batchEditable && u.isSelected(R) ? u.sm().each(function (B) {
                            $.setValue ? $.setValue(B, $, E, u) : Zp(B, Q, g, E)
                        }) : $.setValue ? $.setValue(R, $, E, u) : Zp(R, Q, g, E)
                    }
                }, b.setCurrentEditor = function (H) {
                    this.endEditing(), this._currentEditor = H, this.redraw()
                }, b.isEditing = function (p, q) {
                    var z = this, W = z._currentEditor;
                    if (!W) return !1;
                    if (q) {
                        var Y = W.info;
                        return Y ? (Y.column || Y.property) === q && Y.data === p : !1
                    }
                    return !0
                }, b.endEditing = function (F) {
                    var h = this, e = h._currentEditor;
                    e && (delete h._currentEditor, e.commitValue && e.commitValue(e.info, F), h.redraw(), h.getDataModel().endTransaction())
                }, b.beginEditing = function (I) {
                    this.endEditing();
                    var e = this, O = I.column || I.property;
                    if (O.beginEditing) O.beginEditing(I); else {
                        var n = I.data, J = I.value, C = e.getSelectBackground(n), c = O.getEnumValues(n),
                            s = O.getSlider(n), V = O.getColorPicker(n);
                        if (s) {
                            var m = qq(Oj.Slider, s);
                            return m.setValue(J), m.getView().onblur = function () {
                                e.endEditing()
                            }, m.isInstant() && (m.onValueChanged = function () {
                                e.setValue(n, O, m.getValue())
                            }), Mj(m, I), void 0
                        }
                        if (V || O.getValueType(n) === be) {
                            var D = qq(Oj.ColorPicker, V);
                            return D.setValue(J), D.onClosed = function () {
                                e.endEditing()
                            }, D.isInstant() && (D.onValueChanged = function (s, w) {
                                e.setValue(n, O, w)
                            }), Mj(D, I), D.open(), void 0
                        }
                        if (c) {
                            if (Oj.ComboBox) {
                                var u = new Oj.ComboBox;
                                u.setValue(J), u.setValues(c), u.setLabels(O.getEnumLabels(n)), u.setIcons(O.getEnumIcons(n)), u.setEditable(O.isEnumEditable(n)), u.setStrict(O.isEnumStrict(n)), u.setMaxHeight(O.getEnumMaxHeight(n)), u.setDropDownWidth(O.getEnumDropDownWidth(n)), u.onClosed = function () {
                                    e.endEditing()
                                }, Mj(u, I), u.open()
                            } else uo(jr, I, C, c, O);
                            return
                        }
                        var W = O.getValueType(n);
                        if (W === af || kr(J)) return e.setValue(n, O, !J), void 0;
                        if (O.getItemEditor(n)) {
                            var U = bd(O.getItemEditor(n)), G = new U(n, O, e, I), Z = G.getView();
                            return Z._17Q = G, G.setValue(J), fr(Z), Mj(Z, I), G.editBeginning && G.editBeginning(), void 0
                        }
                        uo("input", I, C, o, O)
                    }
                }
            }, _44o: function (D) {
                D.init = function (u) {
                    var K = this, T = K.th = new Kd(u), g = K._view = po(1, K);
                    K.tv = K._tableView = u, Ur(g, T.getView()), Ur(g, u.getView()), T.mp(function (D) {
                        D.property === ns && K.iv()
                    }), K.iv()
                }, D.getTableView = function () {
                    return this.tv
                }, D.getTableHeader = function () {
                    return this.th
                }, D.getDataModel = function () {
                    return this.tv.dm()
                }, D.getColumnModel = function () {
                    return this.tv.getColumnModel()
                }, D.setColumns = function (a) {
                    this.tv.setColumns(a)
                }, D.addColumns = function (S) {
                    this.tv.addColumns(S)
                }, D.endEditing = function () {
                    this.tv.endEditing()
                }, D.validateImpl = function () {
                    var U = this, R = U.th, Q = hj(R), j = {x: 0, y: 0, width: U.getWidth(), height: Q};
                    Vq(R, j), j.y = Q, j.height = n(0, U.getHeight() - Q), Vq(U.tv, j)
                }
            }, ms_vs: function (C) {
                C._41o = function () {
                    return this._29I.height < this._59I
                }, C._43o = function () {
                    var A = this;
                    A._41o() && (A._58I || (Z(function () {
                        A._94O()
                    }, No), A.iv()), A._58I = new Date)
                }, C._94O = function () {
                    var m = this;
                    if (m._58I) {
                        var V = new Date;
                        V.getTime() - m._58I.getTime() >= No ? (delete m._58I, m.iv()) : Z(function () {
                            m._94O()
                        }, No)
                    }
                }, C._93I = function () {
                    var L = this, $ = L._27I;
                    if (L._58I || !L._autoHideScrollBar) {
                        $ || Ur(L._79O, $ = L._27I = Hm());
                        var q = L._29I, u = q.height, d = L._59I, z = L.getScrollBarSize(), v = q.width - z - 2,
                            x = u * (-L.ty() / d), a = u * (u / d), Y = $.style;
                        d > u ? (_g > a && (x = x + a / 2 - _g / 2, 0 > x && (x = 0), x + _g > u && (x = u - _g), a = _g), Y.visibility = Td, Y.background = L.getScrollBarColor(), Y.borderRadius = z / 2 + Od, Vq($, v, x, z, a)) : Y.visibility = Sm
                    } else $ && ($.style.visibility = Sm)
                }
            }, ms_hs: function (X) {
                X._40o = function () {
                    return this._29I.width < this._91I
                }, X._42o = function () {
                    var f = this;
                    f._40o() && (f._95O || (Z(function () {
                        f._94I()
                    }, No), f.iv()), f._95O = new Date)
                }, X._94I = function () {
                    var u = this;
                    if (u._95O) {
                        var d = new Date;
                        d.getTime() - u._95O.getTime() >= No ? (delete u._95O, u.iv()) : Z(function () {
                            u._94I()
                        }, No)
                    }
                }, X._92I = function () {
                    var Q = this, B = Q._28I;
                    if (Q._95O || !Q._autoHideScrollBar) {
                        B || Ur(Q._79O, B = Q._28I = Hm());
                        var e = Q._29I, R = e.width, S = Q._91I, X = Q.getScrollBarSize(), $ = e.height - X - 2,
                            q = R * (-Q.tx() / S), c = R * (R / S), L = B.style;
                        S > R ? (_g > c && (q = q + c / 2 - _g / 2, 0 > q && (q = 0), q + _g > R && (q = R - _g), c = _g), L.visibility = Td, L.background = Q.getScrollBarColor(), L.borderRadius = X / 2 + Od, Vq(B, q, $, c, X)) : L.visibility = Sm
                    } else B && (B.style.visibility = Sm)
                }
            }
        }), Rc($d, Fn(16, 16, [{type: ap, rect: [1, 1, 14, 14], background: mn}, {
            type: Fc,
            rect: [1, 1, 14, 14],
            width: 1,
            color: Dj
        }, {
            type: Up,
            points: [13, 3, 7, 12, 4, 8],
            borderWidth: 2,
            borderColor: "#FFF"
        }])), Rc(fp, Fn(16, 16, {type: Fc, rect: [1, 1, 14, 14], width: 1, color: Dj})), Rc(oq, Fn(16, 16, [{
            type: dl,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: Dj,
            background: "#FFF"
        }, {type: dl, rect: [4, 4, 8, 8], background: mn}])), Rc(Dh, Fn(16, 16, {
            type: dl,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: Dj
        })), Pg._15Q = function (_) {
            _._29I = wp, _._59I = 0, _._91I = 0, _._5o = function ($) {
                var J = this;
                J._30I = new Pf, J._rows = new Pf, J._rowMap = {}, J._31I = 0, J._14I = 0, J._view = po(1, J), J._canvas = wg(J._view), Ur(J._view, J._79O = Hm()), J.dm($ ? $ : new $r)
            }, _.getCheckIcon = function (L) {
                var d = this.sm(), p = d.co(L);
                return d.sg() ? Ui(p ? oq : Dh) : Ui(p ? $d : fp)
            }, _.checkData = function (o) {
                var f = this.sm(), k = f.co(o);
                f.sg() && k || (this._32o = 1, k ? f.rs(o) : f.as(o), delete this._32o)
            }, _.getDataAt = function (C) {
                C.target && (C = this.lp(C));
                var l = V(C.y / this._rowHeight), D = this._rows;
                return 0 > l || l >= D.size() ? o : D.get(l)
            }, _.onDataDoubleClicked = function () {
            }, _.onDataClicked = function () {
            }, _.adjustTranslateX = function () {
                return 0
            }, _.adjustTranslateY = function (p) {
                var J = this.getHeight() - this._59I;
                return J > p && (p = J), p > 0 ? 0 : B(p)
            }, _.onPropertyChanged = function (I) {
                var m = this, E = I.property;
                Ri[E] ? m.ivm() : Il[E] || m.redraw(), E === ed ? m._42o() : E === Tc && m._43o()
            }, _.getLabel = function (o) {
                return o.toLabel()
            }, _.getLabelFont = function () {
                return this._labelFont
            }, _.getLabelColor = function (U) {
                var n = this;
                if (n.isCheckMode()) {
                    if (n._focusData === U) return n._labelSelectColor
                } else if (n.isSelected(U)) return n._labelSelectColor;
                return n._labelColor
            }, _.getStartRowIndex = function () {
                return this._31I
            }, _.getEndRowIndex = function () {
                return this._14I
            }, _.getRowDatas = function () {
                return this._rows
            }, _.getRowIndex = function (P) {
                return this._rowMap[P._id]
            }, _.getRowSize = function () {
                return this._rows.size()
            }, _.getViewRect = function () {
                return Ah(this._29I)
            }, _.isVisible = function (W) {
                return this._visibleFunc ? this._visibleFunc(W) : !0
            }, _.getCurrentSortFunc = function () {
                return this._sortFunc
            }, _.setDataModel = function (h) {
                var d = this, H = d._dataModel, s = d._selectionModel;
                H !== h && (H && (H.umm(d.handleDataModelChange, d), H.umd(d.handleDataPropertyChange, d), H.umh(d.handleHierarchyChange, d), s || H.sm().ums(d.handleSelectionChange, d)), d._dataModel = h, h.mm(d.handleDataModelChange, d), h.md(d.handleDataPropertyChange, d), h.mh(d.handleHierarchyChange, d), s ? s._21I(h) : h.sm().ms(d.handleSelectionChange, d), d.fp("dataModel", H, h))
            }, _.validateModel = function () {
                var f = this;
                f._rows.clear(), f._rowMap = {}, f.buildChildren(f._dataModel._roots);
                var Y = f._rows = f._rows.toList(f.isVisible, f), p = 0, B = f.getCurrentSortFunc(), Z = Y.size();
                for (B && Y.sort(B); Z > p; p++) f._rowMap[Y.get(p)._id] = p
            }, _.buildChildren = function (s) {
                var r = this;
                s.each(function (O) {
                    r._rows.add(O), r.buildChildren(O._children)
                })
            }, _.handleDataModelChange = function () {
                this.ivm()
            }, _.handleDataPropertyChange = function (V) {
                "parent" === V.property ? this.ivm() : this.invalidateData(V.data)
            }, _.handleHierarchyChange = function () {
                this.ivm()
            }, _.handleSelectionChange = function (q) {
                q.datas.each(this.invalidateData, this), this.onSelectionChanged(q)
            }, _.onSelectionChanged = function (V) {
                var b = this, Z = b.sm();
                !b.isAutoMakeVisible() || 1 !== Z.size() || "set" !== V.kind && "append" !== V.kind || b._32o || b.makeVisible(Z.ld())
            }, _.handleBackgroundClick = function (P) {
                Di(P) && !this.isCheckMode() && this.sm().cs()
            }, _.makeVisible = function (r) {
                r && (this._23I = r, this.iv())
            }, _.scrollToIndex = function (Y) {
                var s = this, e = s._29I, A = e.height, J = s._rowHeight, M = J * Y;
                Y >= 0 && Y < s._rows.size() && A > 0 && (M + J > e.y + A ? s.ty(-M + A - J) : M < e.y && s.ty(-M))
            }, _.autoScroll = function (Y, D) {
                var O = this, c = O._rowHeight, j = c, E = c / 4, F = O._29I, z = O.lp(Y), h = {x: O.tx(), y: O.ty()};
                return c > 0 && F && (z.x - F.x < j ? O.translate(E, 0) : F.x + F.width - z.x < j && O.translate(-E, 0), z.y - F.y < j ? O.translate(0, E) : F.y + F.height - z.y < j && O.translate(0, -E)), h.x = O.tx() - h.x, h.y = O.ty() - h.y, D && (D.x += h.x, D.y += h.y), h
            }, _.getTopRowOrderSelection = function () {
                var N = this.sm().getTopSelection(), Q = {}, f = new Pf;
                return N.each(function (Z) {
                    Q[Z._id] = Z
                }), this._rows.each(function (t) {
                    Q[t._id] && f.add(t)
                }), f
            }, _.getRowOrderSelection = function () {
                var $ = new Pf;
                return this._rows.each(function (P) {
                    this.isSelected(P) && $.add(P)
                }, this), $
            }, _.ivm = function () {
                this.invalidateModel()
            }, _.invalidateModel = function () {
                var S = this;
                S._96I || (S._96I = 1, S._32I = 1, delete S._24I), S.iv()
            }, _.redraw = function () {
                var _ = this;
                _._32I || (_._32I = 1, delete _._24I, _.iv())
            }, _.invalidateData = function (B) {
                var v = this;
                y ? v.redraw() : v._32I || (v._24I || (v._24I = {}), v._24I[B._id] = B, v.iv())
            }, _.getFocusData = function () {
                return this._focusData
            }, _.setFocusDataById = function (j) {
                this.setFocusData(this.dm().getDataById(j))
            }, _.setFocusData = function (k) {
                var u = this, h = u._focusData;
                h !== k && (u._focusData = k, u.fp("focusData", h, k), h && u.invalidateData(h), k && (u.invalidateData(k), u.isAutoMakeVisible() && u.makeVisible(k)))
            }, _.drawRowBackground = function (O, A, G, p, k, z, H) {
                var b = this, j = b.isCheckMode();
                (A === b._focusData && j || G && !j) && Rf(O, p, k, z, H, b.getSelectBackground(A))
            }, _.drawData = function (N, $, h) {
                var m = this, b = m._rowHeight, q = b * h, o = m._29I, Q = o.x, Y = o.width;
                N.save(), N.beginPath(), N.rect(Q, q, Y, b), N.clip(), m._87o(m.drawRow(N, $, m.isSelected($), Q, q, Y, b), h, Q, q, Y, b), N.restore(), m._rowLineVisible && Rf(N, Q, q + b - 1, Y, 1, m._rowLineColor)
            }, _._12I = function (a) {
                var L = this, n = L._31I, m = L._29I, z = m.x, D = m.y, Z = m.width, Q = m.height;
                for (a.beginPath(), a.rect(z, D, Z, Q), a.clip(), a.clearRect(z, D, Z, Q), L._76o(), L._93db(a); n < L._14I; n++) L.drawData(a, L._rows.get(n), n);
                L._92db(a)
            }, _._13I = function (y) {
                for (var H, x = this, h = x._rowHeight, p = x._29I, E = p.x, o = p.width, A = x._31I, d = x._30I; A < x._14I; A++) H = x._rows.get(A), x._24I[H._id] && d.add({
                    data: H,
                    index: A
                });
                d.isEmpty() || (y.beginPath(), d.each(function (e) {
                    y.rect(E, e.index * h, o, h)
                }), y.clip(), d.each(function (G) {
                    y.clearRect(E, G.index * h, o, h)
                }), d.each(function (r) {
                    x._77o(r.index)
                }), x._93db(y), d.each(function (c) {
                    x.drawData(y, c.data, c.index)
                }), x._92db(y), d.clear())
            }, _.preValidateModel = function () {
                this.endEditing && this.endEditing()
            }, _.validateImpl = function () {
                var t = this, i = t._canvas, U = t.getWidth(), g = t.getHeight(), B = t._rowHeight, C = t._32I;
                (U !== i.clientWidth || g !== i.clientHeight) && (zm(i, U, g), C = 1);
                var v = A && !z;
                t._96I && !v && (t.preValidateModel(), t.validateModel());
                var q = t._29I, T = {x: -t.tx(), y: -t.ty(), width: U, height: g}, c = t._rows.size(), f = Jb(i),
                    m = t._23I;
                C || _n(T, q) || (C = 1), t._29I = T, t._59I = c * B + t.getScrollBarSize(), t._31I = V(T.y / B), t._14I = s((T.y + T.height) / B), t._31I < 0 && (t._31I = 0), t._14I > c && (t._14I = c), t._99I && C && t._99I(), Ec(f, t.tx(), t.ty(), 1), C ? t._12I(f) : t._24I && t._13I(f), t._93I(), t._92I(), f.restore(), t._32I = t._24I = t._96I = o, m && (t.scrollToIndex(t.getRowIndex(m)), delete t._23I), t.tx(t.tx()), t.ty(t.ty())
            }
        }, Pg._48o = function (U) {
            U._rootVisible = !0, U._rootData = o, U._35o = function () {
                this._expandMap = {}, this._levelMap = {}
            }, U.validateModel = function () {
                var i = this, H = i._rootData;
                i._rows.clear(), i._levelMap = {}, i._rowMap = {}, i._currentLevel = 0, H ? i._rootVisible ? i.isVisible(H) && i.buildData(H) : i.buildChildren(H) : i.buildChildren(), delete i._currentLevel
            }, U.buildData = function (G) {
                var L = this, k = G._id, I = L._rows;
                L._rowMap[k] = I.size(), I.add(G), L._levelMap[k] = L._currentLevel, L.isExpanded(G) && (L._currentLevel++, L.buildChildren(G), L._currentLevel--)
            }, U.buildChildren = function (q) {
                var Z = this, w = q ? q._children : Z._dataModel._roots, n = Z.getCurrentSortFunc();
                n && Z.isChildrenSortable(q) ? w.toList(Z.isVisible, Z).sort(n).each(Z.buildData, Z) : w.each(function (P) {
                    Z.isVisible(P) && Z.buildData(P)
                })
            }, U.getLevel = function (g) {
                return this._levelMap[g._id]
            }, U.getToggleIcon = function (M) {
                var D = this, T = D._loader, y = D._collapseIcon;
                return T && !T.isLoaded(M) ? y : M.hasChildren() ? D.isExpanded(M) ? D._expandIcon : y : o
            }, U.isCheckMode = function () {
                return this._checkMode != o
            }, U.isChildrenSortable = function () {
                return !0
            }, U.handleDataModelChange = function (w) {
                var X = this;
                w.kind === Pl ? delete X._expandMap[w.data._id] : w.kind === Pr && (X._expandMap = {}), X.ivm()
            }, U.toggle = function (a) {
                var _ = this;
                _.isExpanded(a) ? _.collapse(a) : _.expand(a)
            }, U.isExpanded = function (q) {
                return 1 === this._expandMap[q._id]
            }, U.expand = function (h) {
                var B = this, J = B._loader;
                B.isExpanded(h) || (J && !J.isLoaded(h) && J.load(h), B._expandMap[h._id] = 1, B.ivm(), B.onExpanded(h))
            }, U.onExpanded = function () {
            }, U.collapse = function (r) {
                var w = this;
                w.isExpanded(r) && (delete w._expandMap[r._id], w.ivm(), w.onCollapsed(r))
            }, U.onCollapsed = function () {
            }, U.expandAll = function (m) {
                if (m) this.expand(m), m.eachChild(function (z) {
                    this.expandAll(z)
                }, this); else {
                    var _ = this;
                    _._dataModel.each(function (C) {
                        C.hasChildren() && (_._expandMap[C._id] = 1)
                    }), _.ivm()
                }
            }, U.collapseAll = function () {
                this._expandMap = {}, this.ivm()
            }, U.makeVisible = function ($) {
                if ($) {
                    var V = this;
                    if (!V._rootData || $.isDescendantOf(V._rootData)) {
                        for (var R = $._parent; R;) V.expand(R), R = R._parent;
                        V._23I = $, V.iv()
                    }
                }
            }, U.checkData = function (U) {
                var A, M = this, e = M._checkMode, I = M.sm(), H = I.co(U);
                if (!I.sg() || !H) {
                    if (M._32o = 1, e === ek) H ? I.rs(U) : I.as(U); else if (e === Rl) A = new Pf(U), A.addAll(U._children); else if ("descendant" === e) A = new Pf, io(U, A); else if ("all" === e && (A = new Pf, io(U, A), !H)) for (var z = U._parent; z;) A.add(z), z = z._parent;
                    A && (H ? I.rs(A) : I.as(A)), delete M._32o
                }
            }, U._97I = function (W, E, D, K, h, Y, R) {
                var f = this, i = f._indent, A = f._levelMap[E._id], m = f.getIconWidth(E), u = Ui(f.getToggleIcon(E));
                u ? (K += i * A, Hn(W, u, K + i / 2, h + R / 2, E, f), K += i) : K += i * (A + 1), f._checkMode && (Hn(W, f.getCheckIcon(E), K + i / 2, h + R / 2, E, f), K += i), f.drawIcon(W, E, K, h, m, R), f.drawLabel(W, E, K + m, h, R)
            }
        }, Pg._14Q = function (b) {
            b.getIcon = function (K) {
                return K.getIcon()
            }, b.getIconWidth = function (n) {
                return this.getIcon(n) ? this._indent : 0
            }, b.drawIcon = function (d, O, f, k, h, x) {
                if (h) {
                    var m = this, v = m.getBodyColor(O), V = Ui(m.getIcon(O), v);
                    V && (x -= m.isRowLineVisible() ? 1 : 0, Ng(d, V, nk, f, k, h, x, O, m, v), gd(d, m.getBorderColor(O), f, k, h, x))
                }
            }, b.drawLabel = function (j, X, R, Y, h) {
                var K = this;
                Be(j, K.getLabel(X), K.getLabelFont(X), K.getLabelColor(X), R, Y, 0, h)
            }
        }, Pg._50o = function (W) {
            W._98I = function () {
                var y = this, T = y._39o = new $r;
                y._60I = new Pf, T.mm(y._17o, y), T.md(y._18o, y), T.mh(y._19o, y)
            }, W.setColumns = function (x) {
                this._39o.clear(), this.addColumns(x)
            }, W.addColumns = function (g) {
                var T = this._39o;
                g.forEach(function (k) {
                    if (!(k instanceof Mp)) {
                        var f = bd(k.className);
                        k = qq(f ? f : Mp, k)
                    }
                    T.add(k)
                })
            }, W.onColumnClicked = function () {
            }, W.onCheckColumnClicked = function () {
            }, W._3Q = function (N) {
                for (var g, G = 0, V = this._60I, v = V.size(); v > G; G++) if (g = V.get(G), g.column === N) return g;
                return o
            }, W.getColumnAt = function (c) {
                var b = this._4Q(c);
                return b ? b.column : o
            }, W._4Q = function (P) {
                for (var i = this, Q = P.target ? i.lp(P).x : P.x, h = i._60I, M = 0; M < h.size(); M++) {
                    var T = h.get(M), d = T.startX;
                    if (Q >= d && Q < d + T.column.getWidth()) return T
                }
                return o
            }, W.getToolTip = function (T) {
                var E = this, n = E.getDataAt(T), h = E.getColumnAt(T);
                return n && h ? h.getToolTip(n, E) : o
            }, W.adjustTranslateX = function (f) {
                var d = this.getWidth() - this._91I;
                return d > f && (f = d), f > 0 ? 0 : B(f)
            }, W._99I = function () {
                var u = this, r = u._29I, F = u._60I;
                F.clear(), u._91I = 0, u._39o._roots.each(function (Y) {
                    if (Y.isVisible()) {
                        var Z = u._91I + Y.getWidth();
                        u._91I <= r.x + r.width && Z >= r.x && F.add({column: Y, startX: u._91I}), u._91I = Z
                    }
                }), u._91I += u.getScrollBarSize()
            }, W.drawData = function (p, R, J) {
                var c = this, X = c._rowHeight, g = X * J, E = c.isSelected(R), N = c._29I, y = N.x, d = N.width;
                c.drawRowBackground(p, R, E, y, g, d, X), c._60I.each(function (n) {
                    var T = n.column, G = n.startX, U = T.getWidth();
                    U > 0 && !c.isEditing(R, T) && (p.save(), p.beginPath(), p.rect(G, g, U, X), p.clip(), c._87o(c.drawCell(p, R, E, T, G, g, U, X), J, G, g, U, X), c._columnLineVisible && Rf(p, G + U - 1, g, 1, X, c._columnLineColor), p.restore())
                }), c._rowLineVisible && Rf(p, y, g + X - 1, d, 1, c._rowLineColor)
            }, W.drawCell = function (d, u, e, L, k, T, g, $) {
                var f = this;
                if (L.drawCell) return L.drawCell(d, u, e, L, k, T, g, $, f);
                var v = f.getValue(u, L);
                On(d, v, L, f.getLabelFont(u, L, v), f.getLabelColor(u, L, v), k, T, g, $, u, f)
            }, W.getColumnModel = function () {
                return this._39o
            }, W._17o = function () {
                this.redraw()
            }, W._18o = function (x) {
                var S = this;
                x.data === S._sortColumn && il[x.property] ? S.ivm() : (S._42o(), S.redraw())
            }, W._19o = function () {
                this.redraw()
            }, W.getCurrentSortFunc = function () {
                var g = this, B = g._sortColumn;
                if (B && B.isSortable()) {
                    var j = B.getSortFunc(), Z = Tf === B.getSortOrder() ? 1 : -1;
                    return j || (j = ho), function (V, _) {
                        return j.call(g, g.getValue(V, B), g.getValue(_, B), V, _) * Z
                    }
                }
                return g._sortFunc
            }, W.isCellEditable = function (D, t, d) {
                return t.isEditable() && this.isEditable() ? t.isCellEditable ? t.isCellEditable(D, t, d, this) : !0 : !1
            }, W._37O = function (c, t) {
                if (Di(t)) for (var m = this, U = m.lp(t), f = m._60I, G = m._rowHeight, J = m._29I, I = J.x, j = J.y, A = J.width, w = J.height, O = 0; O < f.size(); O++) {
                    var Z = f.get(O), V = Z.startX, k = Z.column, n = k.getWidth();
                    if (k !== m._31o && k !== m._4o && U.x >= V && U.x < V + n && m.isCellEditable(c, k, t)) {
                        var Y = {x: V, y: m.getRowIndex(c) * G, width: n, height: G},
                            i = {x: Y.x + m.tx(), y: Y.y + m.ty(), width: Y.width, height: Y.height}, K = 0, B = 0;
                        return Y.x < I ? K = Y.x - I : Y.x + Y.width > I + A && (K = Y.x + Y.width - I - A), K && (m.tx(m.tx() - K), i.x -= K), Y.y < j ? B = Y.y - j : Y.y + G > j + w && (B = Y.y + G - j - w), B && (m.ty(m.ty() - B), i.y -= B), m.beginEditing({
                            data: c,
                            column: k,
                            value: m.getValue(c, k),
                            event: t,
                            rect: Y,
                            editorRect: i,
                            view: m
                        }), void 0
                    }
                }
            }
        }, Oj.BaseItemEditor = function (o, Z, p, w) {
            this._data = o, this._column = Z, this._master = p, this._editInfo = w
        }, nn("BaseItemEditor", H, {
            ms_ac: ["data", "column", "master", "editInfo"], editBeginning: function () {
            }, getView: function () {
            }, getValue: function () {
            }, setValue: function () {
            }
        });
        var jq = x.Tab = function () {
            yp(jq, this)
        };
        rb("Tab", xk, {ms_ac: ["view", "closable", "disabled"], _icon: o, _closable: !1, _disabled: !1, setParent: nc});
        var Mp = x.Column = function () {
            yp(Mp, this)
        };
        rb("Column", xk, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", Td, Lj, yj, im, "align", be, "sortOrder", bg, "sortable", "clickable", "nullable", "emptiable", "slider", "colorPicker", "itemEditor"],
            _visible: !0,
            _width: 80,
            _sortOrder: Tf,
            _sortFunc: o,
            _sortable: !0,
            _clickable: !0,
            setWidth: function (v) {
                16 > v && (v = 16);
                var f = this._width;
                this._width = v, this.fp(im, f, v)
            },
            getToolTip: function (z, H) {
                return this.formatValue(H.getValue(z, this))
            }
        });
        var Uh = x.Property = function () {
            yp(Uh, this)
        };
        rb("Property", xk, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", Lj, yj, "categoryName", be, "align", "nullable", "emptiable", "slider", "itemEditor", "colorPicker"],
            _categoryName: o,
            getToolTip: function (k, h, n) {
                var R = this;
                return h ? R.formatValue(n.getValue(k, R)) : n.getPropertyName(R)
            }
        }), Oj.AccordionView = function () {
            var t = this;
            t._20o = {}, t._21o = new Pf, t._10o = o, t._9o = o, t._11o = o, t._view = po(0, t), t.iv()
        }, nn("AccordionView", H, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: [Bc, hl, "titleHeight", Yc, sp, "titleBackground", "selectWidth", qo, "orientation", "separatorColor"],
            _expandIcon: w.accordionViewExpandIcon,
            _collapseIcon: w.accordionViewCollapseIcon,
            _titleHeight: Wi,
            _labelColor: w.accordionViewLabelColor,
            _labelFont: w.accordionViewLabelFont,
            _titleBackground: w.accordionViewTitleBackground,
            _selectBackground: w.accordionViewSelectBackground,
            _selectWidth: w.accordionViewSelectWidth,
            _orientation: "v",
            _separatorColor: w.accordionViewSeparatorColor,
            onPropertyChanged: function () {
                this.iv()
            },
            getView: function () {
                return this._view
            },
            getTitles: function () {
                return this._21o
            },
            getCurrentTitle: function () {
                return this._10o
            },
            add: function (d, R, J, T) {
                var Y = this, v = Hm();
                if (Y._20o[d]) throw d + " already exists";
                v.onmousedown = Yd, v.style.cursor = Mg, v.addEventListener(Xp ? Hc : Lf, function (i) {
                    Yd(i)
                }, O), v.addEventListener(Xp ? Kb : hc, function (i) {
                    Yd(i), Di(i) && (Y._10o === d ? Y.collapse() : Y.expand(d))
                }, O), Ur(Y._view, v), Y._20o[d] = {
                    content: R,
                    div: v,
                    canvas: wg(v),
                    icon: T
                }, Y._21o.add(d), J && Y.expand(d), Y.iv()
            },
            remove: function (v) {
                var o = this, $ = o._20o[v];
                $ && (Lg($.div), delete o._20o[v], o._21o.remove(v), o.iv())
            },
            clear: function () {
                var u = this;
                u._21o.toArray().forEach(u.remove, u), u._20o = {}, u._21o.clear(), u.iv()
            },
            isExpanded: function (D) {
                return this._10o === D
            },
            expand: function (x) {
                var F = this;
                F._20o[x] && F._10o !== x && (F._10o = x, F.onExpanded(x), F.iv())
            },
            onExpanded: function () {
            },
            collapse: function () {
                var X = this;
                X._10o && (X.onCollapsed(X._10o), delete X._10o, X.iv())
            },
            onCollapsed: function () {
            },
            initCanvas: function (K, Z, X) {
                zm(K, Z, X);
                var f = Jb(K);
                return Ec(f, 0, 0, 1), f.clearRect(0, 0, Z, X), f
            },
            drawTitle: function (I, P, h, z, J) {
                var r = this, i = Ui(J.icon), U = r.isExpanded(P), v = r._titleHeight, o = r._titleBackground,
                    q = r._selectWidth, M = r._separatorColor, t = Ui(U ? r._expandIcon : r._collapseIcon), Y = q + 4;
                Rf(I, 0, 0, h, z, o), U && q && Rf(I, 0, 0, q, z, r._selectBackground), (U || r._21o.get(r._21o.size() - 1) !== P) && Rf(I, 0, z - 1, h, 1, M ? M : Cb(o)), i && (Hn(I, i, Y + Iq(i) / 2, v / 2), Y += Iq(i) + 2), Be(I, P, r.getLabelFont(P), r.getLabelColor(P), Y, 0, 0, v), t && Hn(I, t, h - Iq(t) / 2 - 4, v / 2)
            },
            validateImpl: function () {
                var S = this, R = S._view, k = 0, D = 0, p = S.getWidth(), V = S.getHeight(), G = S._titleHeight,
                    u = S._21o.size() * G, N = S._11o, A = S._9o;
                delete S._11o, delete S._9o, S._21o.each(function (O) {
                    var W, s, A = S._20o[O], C = A.content, v = S._10o === O;
                    mg(S) ? (Vq(A.div, k, 0, G, V), W = S.initCanvas(A.canvas, G, V), xi(W, 0, V), _e(W, -h), S.drawTitle(W, O, V, G, A), W.restore(), v ? (s = n(0, p - u), C && (S._11o = C, S._9o = Gi(C), Vq(C, k + G, 0, s, V)), k += G + s) : k += G) : (Vq(A.div, 0, D, p, G), W = S.initCanvas(A.canvas, p, G), S.drawTitle(W, O, p, G, A), W.restore(), v ? (s = n(0, V - u), C && (S._11o = C, S._9o = Gi(C), Vq(C, 0, D + G, p, s)), D += G + s) : D += G)
                });
                var T = S._9o;
                N && N !== S._11o && N.endEditing && N.endEditing(), T && T !== A && Ur(R, T), A && A !== T && Lg(A)
            }
        }), Oj.SplitView = function (J, T, O, x) {
            var a = this, M = a._dividerDiv = Hm(), v = a._60O = wg(), R = a._61O = wg(), N = v.style, c = R.style;
            a._view = po(1, a), Ur(a._view, M), N.msTouchAction = ao, N.pointerEvents = ao, N.cursor = Mg, c.msTouchAction = ao, c.pointerEvents = ao, c.cursor = Mg, J && a.setLeftView(J), T && a.setRightView(T), O && a.setOrientation(O), x != o && a.setPosition(x), a.setStatus(Im), new Lq(a)
        }, nn("SplitView", H, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: ["continuousLayout", "dividerSize", "dividerBackground", "toggleIcon", "togglable", "dragOpacity", "orientation", "draggable", "status"],
            _continuousLayout: !1,
            _position: .5,
            _togglable: !0,
            _orientation: "h",
            _draggable: !0,
            _dividerSize: w.splitViewDividerSize,
            _dividerBackground: w.splitViewDividerBackground,
            _dragOpacity: w.splitViewDragOpacity,
            _toggleIcon: w.splitViewToggleIcon,
            onPropertyChanged: function () {
                this.iv()
            },
            getDividerDiv: function () {
                return this._dividerDiv
            },
            getPosition: function () {
                return this._position
            },
            setPosition: function (M, Y) {
                var V = this, r = V._position;
                isNaN(M) || (Y || (V._82O = 0 > M ? -1 : M > 1 ? 1 : 0), V._position = M, V.fp(he, r, M))
            },
            getLeftView: function () {
                return this._leftView
            },
            setLeftView: function (A) {
                var v = this, w = v._leftView, R = v._view;
                if (v._leftView !== A) {
                    if (w && w !== v._rightView) {
                        var t = Gi(w);
                        t.parentNode === R && Lg(t)
                    }
                    if (v._leftView = A, A) {
                        var z = Gi(A);
                        z.parentNode !== R && R.insertBefore(z, v._dividerDiv)
                    }
                    v.fp("leftView", w, A)
                }
            },
            getRightView: function () {
                return this._rightView
            },
            setRightView: function (V) {
                var D = this, E = D._rightView, M = D._view;
                if (D._rightView !== V) {
                    if (E && E !== D._leftView) {
                        var P = Gi(E);
                        P.parentNode === M && Lg(P)
                    }
                    if (D._rightView = V, V) {
                        var r = Gi(V);
                        r.parentNode !== M && M.insertBefore(r, D._dividerDiv)
                    }
                    D.fp("rightView", E, V)
                }
            },
            validateImpl: function () {
                var q = this, R = q._draggable, i = q._position, E = q.getWidth(), t = q.getHeight(),
                    Z = q._dividerSize, D = q._dividerBackground, V = Xp ? 18 : 8, S = q._dividerDiv, Q = q._82O,
                    A = q._60O, b = q._61O, z = q._toggleIcon, W = q._status, T = S.style, o = null, y = Xp ? 20 : 4,
                    G = z.comps[0];
                Z >= V || 0 === Z ? q._coverDiv && (Lg(q._coverDiv), delete q._coverDiv) : q._coverDiv || (q._coverDiv = Hm(), P && (q._coverDiv.style.background = pn), Ur(S, q._coverDiv)), q._togglable ? A.parentNode || (Ur(S, A), Ur(S, b)) : (Lg(A), Lg(b));
                var I = q._coverDiv, s = q._leftView, f = q._rightView;
                if (mg(q)) {
                    if (Z > E && (Z = E), W === Im) if (1 === Q) var X = g(i, E),
                        w = n(0, E - Z - X); else -1 === Q ? (w = g(-i, E), X = n(0, E - Z - w)) : (X = B((E - Z) * i), w = n(0, E - Z - X)); else "cl" === W ? (X = 0, w = n(0, E - Z)) : "cr" === W && (w = 0, X = n(0, E - Z));
                    s && Vq(s, 0, 0, X, t), f && Vq(f, X + Z, 0, w, t), Vq(S, X, 0, Z, t), q._22o = X, I && (Vq(I, Z / 2 - V / 2, 0, V, t), I.style.cursor = R ? Vi : ""), S.style.cursor = R ? Vi : "";
                    var J = S.clientHeight / 2, K = S.clientWidth;
                    zm(A, K, K), Vq(A, 0, J - K - y, K, K), o = Jb(A), Ec(o, 0, 0, 1), G.rotation = -h, Co(o, z, 0, 0, K, K), o.restore(), zm(b, K, K), Vq(b, 0, J + y, K, K), o = Jb(b), Ec(o, 0, 0, 1), G.rotation = h, Co(o, z, 0, 0, K, K), o.restore()
                } else {
                    if (Z > t && (Z = t), W === Im) if (1 === Q) var d = g(i, t),
                        M = n(0, t - Z - d); else -1 === Q ? (M = g(-i, t), d = n(0, t - Z - M)) : (d = B((t - Z) * i), M = n(0, t - Z - d)); else "cl" === W ? (d = 0, M = n(0, t - Z)) : "cr" === W && (M = 0, d = n(0, t - Z));
                    s && Vq(s, 0, 0, E, d), f && Vq(f, 0, d + Z, E, M), Vq(S, 0, d, E, Z), q._22o = d, I && (Vq(I, 0, Z / 2 - V / 2, E, V), I.style.cursor = R ? Kh : ""), T.cursor = R ? Kh : "";
                    var F = S.clientWidth / 2, K = S.clientHeight;
                    zm(A, K, K), Vq(A, F - K - y, 0, K, K), o = Jb(A), Ec(o, 0, 0, 1), G.rotation = 0, Co(o, z, 0, 0, K, K), o.restore(), zm(b, K, K), Vq(b, F + y, 0, K, K), o = Jb(b), Ec(o, 0, 0, 1), G.rotation = Y, Co(o, z, 0, 0, K, K), o.restore()
                }
                T.background = D
            }
        });
        var Lq = function (e) {
            this.sv = e, this.addListeners()
        };
        Jr(Lq, H, {
            ms_listener: 1, getView: function () {
                return this.sv.getView()
            }, handle_touchstart: function (C) {
                var N = this, E = N.sv, c = E._dividerDiv, o = E._60O, Z = E._61O, G = E._status, $ = C.target;
                if ($ === o) G === Im ? E.setStatus("cl") : "cr" === G && E.setStatus(Im); else if ($ === Z) G === Im ? E.setStatus("cr") : "cl" === G && E.setStatus(Im); else if (wd(C) && ($ === c || $ === E._coverDiv) && (Yd(C), E.isDraggable())) {
                    E.getLeftView(), E.getRightView();
                    var L = N.maskDiv = Hm();
                    if (L.style.left = 0, L.style.top = 0, L.style.width = E.getWidth() + "px", L.style.height = E.getHeight() + "px", E.getView().appendChild(L), !E.isContinuousLayout()) {
                        var i = N.resizeDiv = Hm();
                        i.style.left = c.style.left, i.style.top = c.style.top, i.style.width = c.style.width, i.style.height = c.style.height, i.style.opacity = E.getDragOpacity(), i.style.background = E.getDividerBackground(), Ur(N.getView(), i)
                    }
                    N._lastAbsPosition = E._22o, N._86o = mg(E) ? Uj(C).x : Uj(C).y, ce(N, C)
                }
            }, handleWindowTouchMove: function (d) {
                wd(d) && this.update(d, this.sv.isContinuousLayout())
            }, handleWindowTouchEnd: function (b) {
                var G = this;
                G.update(b, !0), G.sv.setStatus(Im), G.maskDiv && Lg(G.maskDiv), G.resizeDiv && Lg(G.resizeDiv), G.maskDiv = G.resizeDiv = o
            }, handle_mousedown: function (j) {
                Di(j) && this.handle_touchstart(j)
            }, handleWindowMouseMove: function (V) {
                this.handleWindowTouchMove(V)
            }, handleWindowMouseUp: function (L) {
                this.handleWindowTouchEnd(L)
            }, update: function (F, C) {
                var p = this, l = p.sv, b = mg(l) ? l.getWidth() : l.getHeight(), S = l._dividerSize,
                    _ = p._lastAbsPosition - p._86o;
                mg(l) ? (_ += Uj(F).x, _ > b - S && (_ = b - S), 0 > _ && (_ = 0), p.resizeDiv && (p.resizeDiv.style.left = _ + Od)) : (_ += Uj(F).y, _ > b - S && (_ = b - S), 0 > _ && (_ = 0), p.resizeDiv && (p.resizeDiv.style.top = _ + Od)), C && b !== S && (1 === l._82O ? l.setPosition(_, 1) : -1 === l._82O ? l.setPosition(_ - b + S, 1) : l.setPosition(_ / (b - S), 1))
            }
        }), Oj.TabView = function () {
            var o = this, V = o._view = po(1, o), m = o._91O = Hm(1), b = o._tabModel = new $r, q = b.sm(),
                M = o.invalidate;
            o._7o = new Pf, o._canvas = wg(m), Ur(V, m), Ur(V, o._92O = Hm(1)), q.setSelectionMode(Id), q.ms(o.handleSelectionChange, o), b.mm(M, o), b.md(M, o), b.mh(M, o), o._interactor = new wq(o), o.iv()
        }, nn("TabView", H, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_ty: 1,
            ms_lp: 1,
            ms_ac: ["movable", "tabGap", "tabHeight", "tabPosition", Yc, sp, "tabBackground", "selectWidth", qo, "moveBackground", "insertColor"],
            _tabPosition: Tp,
            _tabHeight: Wi,
            _tabGap: w.tabViewTabGap,
            _labelColor: w.tabViewLabelColor,
            _labelFont: w.tabViewLabelFont,
            _tabBackground: w.tabViewTabBackground,
            _selectWidth: w.tabViewSelectWidth,
            _selectBackground: w.tabViewSelectBackground,
            _moveBackground: w.tabViewMoveBackground,
            _insertColor: w.tabViewInsertColor,
            _movable: !0,
            handleSelectionChange: function () {
                this._selectionChanged = !0, this.invalidate()
            },
            getContentDiv: function () {
                return this._92O
            },
            getTitleDiv: function () {
                return this._91O
            },
            getTabModel: function () {
                return this._tabModel
            },
            add: function (N, h, x) {
                var f, C = this._tabModel;
                return N instanceof jq ? (f = N, h && f.setView(h)) : (f = new jq, f.setName(N), f.setView(h)), C.add(f), x && C.sm().ss(f), f
            },
            getLabel: function (T) {
                return T.toLabel()
            },
            onPropertyChanged: function () {
                this.iv()
            },
            _7Q: function (K) {
                this._23o = K, this.iv()
            },
            get: function (U) {
                var H = this, n = H._tabModel;
                if (In(U)) return n._roots.get(U);
                if (uf(U)) {
                    var z;
                    return n.each(function (m) {
                        U === H.getLabel(m) && (z = m)
                    }), z
                }
                return U instanceof jq ? U : o
            },
            select: function (e) {
                this._tabModel.sm().ss(this.get(e))
            },
            remove: function (Z) {
                var U = this;
                if (Z = U.get(Z)) {
                    var f = U._tabModel, m = f._roots.indexOf(Z);
                    U._tabModel.remove(Z), U.selectByIndex(--m)
                }
            },
            getCurrentTab: function () {
                return this._8o
            },
            hideTabView: function (W, V) {
                V.parentNode === this._92O && (nm(V) ? (V.style.display = $f, V._tab_ = W) : Lg(V), ti())
            },
            showTabView: function (R, g) {
                nm(g) && (g.style.display = "block", g._tab_ = R), g.parentNode !== this._92O && (Ur(this._92O, g), ti())
            },
            _24o: function () {
                var Z, r = this, W = r._8o, E = r._9o, h = r._tabModel.sm().ld();
                h && (Z = Gi(h.getView())), Z !== E && (E && (W.getView() && W.getView().endEditing && W.getView().endEditing(), r.hideTabView(W, E)), Z && r.showTabView(h, Z)), r._8o = h, r._9o = Z, W !== h && r.onTabChanged(W, h)
            },
            onTabClosing: function () {
                return !0
            },
            onTabChanged: function () {
            },
            onTabClosed: function (k, m) {
                this.selectByIndex(--m)
            },
            selectByIndex: function (G) {
                var P = this, m = P._tabModel, s = m.size();
                if (s && !m.sm().ld()) {
                    G == o && (G = 0), G >= s && (G = s - 1), 0 > G && (G = 0);
                    for (var O = G; O >= 0; O--) {
                        var p = P.get(O);
                        if (!p.isDisabled()) return P.select(p), p
                    }
                    for (O = G + 1; s > O; O++) if (p = P.get(O), !p.isDisabled()) return P.select(p), p
                }
            },
            getTabWidth: function (y) {
                var f = 4, g = Ui(y.getIcon());
                g && (f += Iq(g, y) + 4);
                var h = this.getLabel(y);
                return h && (f += Dp(this.getLabelFont(y), h).width + 4), y.isClosable() && (f += 10), f
            },
            drawTab: function (L, $, X, D, q, z, R) {
                var N, x = this, g = x._tabPosition, b = X + 4, c = x._selectWidth, u = Ui($.getIcon()),
                    W = $.isDisabled(), m = x.getLabelColor($), o = x.getLabelFont($), r = x.getLabel($),
                    s = x._selectBackground, j = g === Pq + "-vertical", d = g === Kl + "-vertical";
                (j || d) && (b = D + 4), W && (L.globalAlpha = _l), Rf(L, X, D, q, z, R), $ === x._8o && c && (g === Tp ? Rf(L, X, D + z - c, q, c, s) : g === Pq ? Rf(L, X + q - c, D, c, z, s) : g === Kl ? Rf(L, X, D, c, z, s) : j ? Rf(L, X + q - c, D, c, z, s) : d ? Rf(L, X, D, c, z, s) : Rf(L, X, D, q, c, s));
                var T = q / 2;
                if (j && (xi(L, T, D + z / 2), _e(L, Y), xi(L, -T, -D - z / 2)), u) {
                    var O = Ne(u, $), t = Iq(u, $);
                    if (j || d) {
                        var Q = X + q / 2, J = b + O / 2;
                        xi(L, Q, J), _e(L, h), xi(L, -Q, -J), Hn(L, u, X + q / 2, b + O / 2, $, x), xi(L, Q, J), _e(L, -h), xi(L, -Q, -J), b += O + 4
                    } else Hn(L, u, b + t / 2, D + z / 2, $, x), b += t + 4
                }
                return j || d ? (xi(L, q / 2, b + q / 2), _e(L, h), xi(L, -q / 2, -b - q / 2), Be(L, r, o, m, X, b, z, q), xi(L, q / 2, b + q / 2), _e(L, -h), xi(L, -q / 2, -b - q / 2)) : Be(L, r, o, m, b, D, q, z), j && (xi(L, T, D + z / 2), _e(L, -Y), xi(L, -T, -D - z / 2)), $.isClosable() && (N = d ? {
                    x: X + q - 12,
                    y: D + z - 12,
                    width: 12,
                    height: 12
                } : {
                    x: X + q - 12,
                    y: D + 2,
                    width: 12,
                    height: 12
                }, this.drawCloseIcon($, L, m, N)), W && (L.globalAlpha = 1), N
            },
            drawCloseIcon: function (O, n, V, M) {
                var f = M.x, l = M.y;
                n.strokeStyle = V, n.lineWidth = 1, n.beginPath(), n.moveTo(f + 2, l + 8), n.lineTo(f + 8, l + 2), n.moveTo(f + 8, l + 8), n.lineTo(f + 2, l + 2), n.stroke()
            },
            getTabAt: function (E) {
                var A = this._interactor._8Q(E);
                return A ? A.tab : null
            },
            validateImpl: function () {
                var v = this;
                v._24o();
                var j, g = v._canvas, _ = v._tabPosition, S = v._91O, h = v._92O, O = v._tabModel, Z = v.getWidth(),
                    m = v.getHeight(), e = v._tabHeight, I = v._7o, B = v._tabGap, l = _ === Tp, i = _ === Pq,
                    t = _ === Kl, w = _ === Pq + "-vertical", z = _ === Kl + "-vertical", D = v._23o, $ = 0;
                if ((i || t) && O._roots.each(function (b) {
                    $ = n(v.getTabWidth(b), $)
                }), l ? (Vq(S, 0, 0, Z, e), j = {
                    x: 0,
                    y: e,
                    width: Z,
                    height: n(0, m - e)
                }) : i ? (Vq(S, 0, 0, $, m), j = {
                    x: $,
                    y: 0,
                    width: n(0, Z - $),
                    height: m
                }) : t ? (Vq(S, Z - $, 0, $, m), j = {
                    x: 0,
                    y: 0,
                    width: n(0, Z - $),
                    height: m
                }) : w ? (Vq(S, 0, 0, e, m), j = {
                    x: e,
                    y: 0,
                    width: n(0, Z - e),
                    height: m
                }) : z ? (Vq(S, Z - e, 0, e, m), j = {
                    x: 0,
                    y: 0,
                    width: n(0, Z - e),
                    height: m
                }) : (Vq(S, 0, m - e, Z, e), j = {x: 0, y: 0, width: Z, height: n(0, m - e)}), Vq(h, j), w || z) {
                    v._9o && (j.x = 0, Vq(v._8o.getView(), j)), zm(g, e, m);
                    var J = Jb(g), p = 0;
                    if (Ec(J, 0, v.ty(), 1), J.clearRect(0, 0, e, m), I.clear(), O._roots.each(function (h) {
                        var z, V = v.getTabWidth(h);
                        D && D.tab === h || (z = v.drawTab(J, h, 0, p, e, V, v._tabBackground)), I.add({
                            _75o: z,
                            tab: h,
                            startY: p,
                            endY: p + V,
                            height: V
                        }), p += V + B
                    }), v._23Q = n(0, p - B), D) {
                        var C = D.position;
                        v.drawTab(J, D.tab, 0, D.startY, e, D.height, v._moveBackground), Rf(J, 0, C, e, 1, v._insertColor)
                    }
                    if (J.restore(), v._selectionChanged) {
                        v._selectionChanged = !1;
                        for (var X = v.ty(), c = 0; c < I.size(); c++) {
                            var k = I.get(c);
                            if (k.tab === v._8o) {
                                if (k.endY + X < 0) {
                                    v.ty(-k.startY);
                                    break
                                }
                                if (k.startY + X > m) {
                                    v.ty(m - k.endY);
                                    break
                                }
                            }
                        }
                    }
                    v.ty(v.ty())
                } else if (i || t) {
                    v._9o && (j.x = 0, Vq(v._8o.getView(), j)), zm(g, $, m);
                    var J = Jb(g), p = 0;
                    if (Ec(J, 0, v.ty(), 1), J.clearRect(0, 0, $, m), I.clear(), O._roots.each(function (y) {
                        var Y;
                        D && D.tab === y || (Y = v.drawTab(J, y, 0, p, $, e, v._tabBackground)), I.add({
                            _75o: Y,
                            tab: y,
                            startY: p,
                            endY: p + e,
                            height: e
                        }), p += e + B
                    }), v._23Q = n(0, p - B), D) {
                        var C = D.position;
                        v.drawTab(J, D.tab, 0, D.startY, $, D.height, v._moveBackground), Rf(J, 0, C, $, 1, v._insertColor)
                    }
                    if (J.restore(), v._selectionChanged) {
                        v._selectionChanged = !1;
                        for (var X = v.ty(), c = 0; c < I.size(); c++) {
                            var k = I.get(c);
                            if (k.tab === v._8o) {
                                if (k.endY + X < 0) {
                                    v.ty(-k.startY);
                                    break
                                }
                                if (k.startY + X > m) {
                                    v.ty(m - k.endY);
                                    break
                                }
                            }
                        }
                    }
                    v.ty(v.ty())
                } else {
                    v._9o && (j.y = 0, Vq(v._8o.getView(), j)), zm(g, Z, e);
                    var J = Jb(g), F = 0;
                    if (Ec(J, v.tx(), 0, 1), J.clearRect(0, 0, Z, e), I.clear(), O._roots.each(function (f) {
                        var m, u = v.getTabWidth(f);
                        D && D.tab === f || (m = v.drawTab(J, f, F, 0, u, e, v._tabBackground)), I.add({
                            _75o: m,
                            tab: f,
                            startX: F,
                            endX: F + u,
                            width: u
                        }), F += u + B
                    }), v._64I = n(0, F - B), D) {
                        var C = D.position;
                        v.drawTab(J, D.tab, D.startX, 0, D.width, e, v._moveBackground), Nj(J, v._insertColor, C, 0, e)
                    }
                    if (J.restore(), v._selectionChanged) {
                        v._selectionChanged = !1;
                        for (var U = v.tx(), c = 0; c < I.size(); c++) {
                            var k = I.get(c);
                            if (k.tab === v._8o) {
                                if (k.endX + U < 0) {
                                    v.tx(-k.startX);
                                    break
                                }
                                if (k.startX + U > Z) {
                                    v.tx(Z - k.endX);
                                    break
                                }
                            }
                        }
                    }
                    v.tx(v.tx())
                }
                for (var Q = [], H = h.children, c = 0; c < H.length; c++) {
                    var G = H[c], E = G._tab_;
                    E && !O.contains(E) && Q.push(G)
                }
                Q.forEach(function (R) {
                    h.removeChild(R)
                })
            }
        });
        var wq = function (T) {
            this.tv = T, this.addListeners()
        };
        Jr(wq, H, {
            ms_listener: 1, getView: function () {
                return this.tv._91O
            }, handle_mousewheel: function (C) {
                this.handleScroll(C, 10 * (C.wheelDelta / 40))
            }, handle_DOMMouseScroll: function (W) {
                this.handleScroll(W, 10 * -W.detail)
            }, handleScroll: function (r, t) {
                Yd(r);
                var Q = this.tv, T = Q._tabPosition;
                !Q._40o() || T !== Tp && T !== Mh || Q.tx(this.tv.tx() + t), !Q._41o() || T !== Pq && T !== Kl && T !== Pq + "-vertical" && T !== Kl + "-vertical" || Q.ty(this.tv.ty() + t)
            }, _8Q: function (X) {
                var E, e, v = this.tv, O = v._tabPosition, u = v._7o;
                if (O === Tp || O === Mh) {
                    var Y = v.lp(X).x;
                    for (E = 0; E < u.size(); E++) if (e = u.get(E), e.startX <= Y && Y <= e.endX) return e
                } else if (O === Pq || O === Kl || O === Pq + "-vertical" || O === Kl + "-vertical") {
                    var c = v.lp(X).y;
                    for (E = 0; E < u.size(); E++) if (e = u.get(E), e.startY <= c && c <= e.endY) return e
                }
                return o
            }, isClickable: function (z) {
                var D = this.tv, b = D._tabPosition, x = this._73o = this._8Q(z);
                return !D._40o() || b !== Tp && b !== Mh ? !D._41o() || b !== Pq && b !== Kl && b !== Pq + "-vertical" && b !== Kl + "-vertical" ? x && (!x.tab.isDisabled() || D.isMovable()) : !0 : !0
            }, handle_mousemove: function (A) {
                var G = this;
                fq ? G._74o = G._8Q(A) : G.getView().style.cursor = G.isClickable(A) ? Mg : ""
            }, handle_mousedown: function (p) {
                this.handle_mousemove(p), this.handle_touchstart(p)
            }, handle_touchstart: function (u) {
                var w = this, c = w.tv, b = c._tabPosition;
                Yd(u), Di(u) && w.isClickable(u) && (b === Tp || b === Mh ? (w.x = Uj(u).x, w.lp = c.lp(u), w.tx = c.tx()) : (w.y = Uj(u).y, w.lp = c.lp(u), w.ty = c.ty()), ce(w, u))
            }, handleWindowMouseMove: function (g) {
                this.handleWindowTouchMove(g)
            }, handleWindowTouchMove: function (u) {
                var e, D = this, W = D.tv, k = W._tabPosition, s = D._73o;
                if (k === Tp || k === Mh) {
                    if (e = Uj(u).x - D.x, !D._25o && !D.moving && M(e) > 2 && (W._40o() && !Kg(u) ? D._25o = 1 : s && W.isMovable() && (D.moving = 1)), D._25o) W.tx(D.tx + e); else if (D.moving) {
                        var o = D.lp.x + e, d = W._tabGap / 2;
                        W._7o.each(function (Z) {
                            var q = Z.endX, L = o - Z.startX < q - o;
                            o >= Z.startX && q >= o && W._7Q({
                                tab: s.tab,
                                startX: s.startX + e,
                                width: s.width,
                                front: L,
                                insertTab: Z.tab,
                                position: L ? n(0, Z.startX - d) : g(W._64I, q + d)
                            })
                        })
                    }
                } else if (e = Uj(u).y - D.y, !D._25o && !D.moving && M(e) > 2 && (W._41o() && !Kg(u) ? D._25o = 1 : s && W.isMovable() && (D.moving = 1)), D._25o) W.ty(D.ty + e); else if (D.moving) {
                    var K = D.lp.y + e, d = W._tabGap / 2;
                    W._7o.each(function (m) {
                        var H = m.endY, P = K - m.startY < H - K;
                        K >= m.startY && H >= K && W._7Q({
                            tab: s.tab,
                            startY: s.startY + e,
                            height: s.height,
                            front: P,
                            insertTab: m.tab,
                            position: P ? n(0, m.startY - d) : g(W._23Q, H + d)
                        })
                    })
                }
            }, handleWindowMouseUp: function (e) {
                this.handleWindowTouchEnd(e)
            }, handleWindowTouchEnd: function () {
                var T = this, d = T.tv, y = d._tabPosition, p = d.getTabModel(), q = p._roots, m = T._73o;
                if (T.moving) {
                    var K = d._23o;
                    if (K && K.insertTab !== K.tab) {
                        var X = K.tab, v = q.remove(X), f = q.indexOf(K.insertTab);
                        f >= 0 && (K.front || f++, f <= q.size() && (q.add(X, f), p._38I(X, v, f)))
                    }
                    d._7Q(o), delete T.moving
                } else if (!T._25o && m) {
                    X = m.tab;
                    var J = T._74o;
                    if (!J || J.tab === X) if (!X.isDisabled() && wc(m._75o, T.lp)) {
                        var x = function () {
                            var G = q.indexOf(X);
                            p.remove(X), d.onTabClosed(X, G)
                        };
                        d.onTabClosing(X, x) && x()
                    } else X.isDisabled() || d._8o === X || p.sm().ss(X)
                }
                T._25o = T._73o = T._74o = y === Tp || y === Mh ? T.x = T.lp = T.tx = o : T.y = T.lp = T.ty = o
            }
        }), Oj.PropertyView = function (K) {
            var N = this;
            N._view = po(1, N), N._canvas = wg(N._view), Ur(N._view, N._79O = Hm()), N._rows = new Pf, N._28o = new Pf, N._26o = {}, N._26Q = {};
            var D = N._propertyModel = new $r, V = N.ivm;
            D.mm(V, N), D.md(V, N), D.mh(V, N), N.dm(K ? K : new $r), new pl(N)
        }, nn("PropertyView", H, {
            ms_ac: [Yc, ue, sp, Lj, yj, "categorizable", hi, bg, Dl, Bc, hl, ym, Wc, xh, "selectRowIndex", qo, "background", ds, Uo, _f, Bl, Ho],
            ms_v: 1,
            ms_dm: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            _45o: 1,
            _47o: 1,
            ms_tip: 1,
            _29I: wp,
            _59I: 0,
            _9I: 0,
            _selectRowIndex: -1,
            _editable: !0,
            _batchEditable: !0,
            _categorizable: !0,
            _indent: pg,
            _background: w.propertyViewBackground,
            _expandIcon: w.propertyViewExpandIcon,
            _collapseIcon: w.propertyViewCollapseIcon,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoHideScrollBar: Nf,
            _selectBackground: w.propertyViewSelectBackground,
            _rowHeight: xl,
            _rowLineVisible: w.propertyViewRowLineVisible,
            _rowLineColor: w.propertyViewRowLineColor,
            _10I: .5,
            _columnLineVisible: w.propertyViewColumnLineVisible,
            _columnLineColor: w.propertyViewColumnLineColor,
            _labelColor: w.propertyViewLabelColor,
            _labelSelectColor: w.propertyViewLabelSelectColor,
            _labelFont: w.propertyViewLabelFont,
            getRows: function () {
                return this._rows
            },
            getColumnPosition: function () {
                return this._10I
            },
            setColumnPosition: function (D) {
                0 > D && (D = 0), D > 1 && (D = 1);
                var P = this, i = P._10I;
                P._10I = D, P.fp("columnPosition", i, D)
            },
            getPropertyName: function (V) {
                return V.toLabel()
            },
            getLabelFont: function () {
                return this._labelFont
            },
            getLabelColor: function (f, w, i) {
                return i === this._selectRowIndex ? this._labelSelectColor : this._labelColor
            },
            getPropertyFont: function () {
                return this._labelFont
            },
            getPropertyColor: function (l, O) {
                return O === this._selectRowIndex ? this._labelSelectColor : l.getColor() || this._labelColor
            },
            getCategoryFont: function () {
                return this._labelFont
            },
            getCategoryColor: function () {
                return this._labelColor
            },
            adjustTranslateX: function () {
                return 0
            },
            adjustTranslateY: function (R) {
                var o = this.getHeight() - this._59I;
                return o > R && (R = o), R > 0 ? 0 : B(R)
            },
            isExpanded: function (p) {
                if (!p) return !0;
                var u = this._26o[p];
                return u ? u.isExpanded : !(this._26Q[p] === !1)
            },
            toggle: function (K) {
                var r = this;
                r.isExpanded(K) ? r.collapse(K) : r.expand(K)
            },
            expandAll: function () {
                this.validate();
                for (var B in this._26o) this.expand(B)
            },
            expand: function (b) {
                if (b && b !== $f) {
                    var e = this, H = e._26o[b];
                    H && !H.isExpanded && (H.isExpanded = !0, e.onExpanded(b), e.ivm())
                }
            },
            onExpanded: function () {
            },
            collapseAll: function () {
                this.validate();
                for (var X in this._26o) this.collapse(X)
            },
            collapse: function (t) {
                if (t && t !== $f) {
                    var $ = this, y = $._26o[t];
                    y && y.isExpanded && (y.isExpanded = !1, $.onCollapsed(t), $.ivm())
                }
            },
            onCollapsed: function () {
            },
            getCategoryName: function (x) {
                if (!this.isCategorizable()) return $f;
                var U = x.getCategoryName();
                return U ? U : $f
            },
            getPropertyModel: function () {
                return this._propertyModel
            },
            handleSelectionChange: function () {
                this.ivm()
            },
            setDataModel: function (d) {
                var x = this, J = x._dataModel;
                J !== d && (J && (J.umd(x.handlePropertyChange, x), x._selectionModel || J.sm().ums(x.handleSelectionChange, x)), x._dataModel = d, d.md(x.handlePropertyChange, x), x._selectionModel ? x._selectionModel._21I(d) : d.sm().ms(x.handleSelectionChange, x), x.fp(Jq, J, d))
            },
            isVisible: function (n) {
                return this._visibleFunc ? this._visibleFunc(n) : !0
            },
            onPropertyChanged: function (i) {
                var M = this, G = i.property;
                gc[G] ? M.ivm() : M.iv(), G === Tc && M._43o()
            },
            getCurrentData: function () {
                return this._27o
            },
            updateCurrentData: function () {
                this._27o = this.sm().ld()
            },
            getRawProperties: function () {
                return this._27o ? this._propertyModel._roots : oi
            },
            handlePropertyChange: function (J) {
                this._27o === J.data && this.iv()
            },
            ivm: function () {
                this.invalidateModel()
            },
            invalidateModel: function () {
                var p = this;
                p._96I || (p.setSelectRowIndex(-1), p._96I = 1, p.iv())
            },
            redraw: function () {
                this.iv()
            },
            validateModel: function () {
                var I = this, M = I._rows, d = I._28o, P = {}, e = new Pf, g = I._27o;
                I.updateCurrentData(), g !== I._27o && I.endEditing(), M.clear(), d.clear(), I.getRawProperties().each(function (A) {
                    if (I.isVisible(A)) {
                        e.add(A);
                        var p = I.getCategoryName(A);
                        P[p] || (d.add(p, p === $f ? 0 : v), P[p] = {isExpanded: I.isExpanded(p), properties: new Pf})
                    }
                }), I._sortFunc && e.sort(I._sortFunc);
                for (var n in I._26o) I._26Q[n] = I.isExpanded(n);
                I._26o = P, d.each(function (S) {
                    S !== $f && M.add(S);
                    var V = P[S];
                    V.isExpanded && e.each(function (t) {
                        I.getCategoryName(t) === S && (V.properties.add(t), M.add({property: t, data: I._27o}))
                    }, I)
                })
            },
            validateImpl: function () {
                var W = this;
                W._76o(), W._96I && (W.validateModel(), delete W._96I);
                var A = W._canvas, k = W.getWidth(), M = W.getHeight(), b = -W.ty(), N = W._rowHeight, e = W._indent,
                    P = k - e, d = W._rows, Z = d.size(), v = W._9I = e + P * W._10I, h = W._59I = Z * N;
                zm(A, k, M), W._29I = {
                    x: 0,
                    y: b,
                    width: k,
                    height: M
                }, W._31I = V(b / N), W._14I = s((b + M) / N), W._31I < 0 && (W._31I = 0), W._14I > Z && (W._14I = Z);
                var y, C = Jb(A), I = W._background;
                Ec(C, 0, -b, 1), C.beginPath(), C.rect(0, b, k, M), C.clip(), C.clearRect(0, b, k, M), W._93db(C), I && Rf(C, 0, 0, e, h, I);
                for (var u = W._31I; u < W._14I; u++) {
                    var t = d.get(u), b = N * u;
                    if (uf(t)) I && Rf(C, e, b, P, N, I), y = Ui(W.isExpanded(t) ? W._expandIcon : W._collapseIcon), y && Ng(C, y, nk, 0, b, e, N), C.save(), C.beginPath(), C.rect(e, b, P, N), C.clip(), W.drawCategoryName(C, t, u, e, b, P, N), C.restore(); else {
                        var H = t.property, f = t.data, y = Ui(H.getIcon()),
                            g = W._selectRowIndex === u ? W.getSelectBackground() : o;
                        if (y && Ng(C, y, nk, 0, b, e, N), g && Rf(C, e, b, P, N, g), C.save(), C.beginPath(), C.rect(e, b, v - e, N), C.clip(), W.drawPropertyName(C, H, u, e, b, v - e, N), C.restore(), !W.isEditing(f, H)) {
                            var K = v + 1, j = k - v - 1;
                            C.save(), C.beginPath(), C.rect(K, b, j, N), C.clip(), W._87o(W.drawPropertyValue(C, H, W.getValue(f, H), u, K, b, j, N, f), u, K, b, j, N), C.restore()
                        }
                    }
                    W._rowLineVisible && Rf(C, e, b + N - 1, P, 1, W._rowLineColor)
                }
                W._columnLineVisible && (Rf(C, v, 0, 1, h, W._columnLineColor), Rf(C, k - 1, 0, 1, h)), W._92db(C), W._93I(), C.restore(), W.ty(W.ty())
            },
            drawCategoryName: function (o, b, c, P, z, x, a) {
                Be(o, b, this.getCategoryFont(b), this.getCategoryColor(b), P, z, x, a)
            },
            drawPropertyName: function (E, J, P, H, $, V, Q) {
                return J.drawPropertyName ? (J.drawPropertyName(E, J, P, H, $, V, Q, this), void 0) : (Be(E, this.getPropertyName(J), this.getPropertyFont(J, P), this.getPropertyColor(J, P), H, $, V, Q), void 0)
            },
            drawPropertyValue: function (u, c, O, L, a, p, Q, b, y) {
                return c.drawPropertyValue ? c.drawPropertyValue(u, c, O, L, a, p, Q, b, y, this) : (On(u, O, c, this.getLabelFont(c, O, L), this.getLabelColor(c, O, L), a, p, Q, b, y, this), void 0)
            },
            isPropertyEditable: function (H) {
                return H.isEditable() && this.isEditable()
            },
            setProperties: function (W) {
                this._propertyModel.clear(), this.addProperties(W)
            },
            addProperties: function (K) {
                if (K) {
                    var w = this._propertyModel;
                    K.forEach(function (M) {
                        if (!(M instanceof Uh)) {
                            var J = bd(M.className);
                            M = qq(J ? J : Uh, M)
                        }
                        w.add(M)
                    })
                }
            },
            getRowIndexAt: function (H) {
                var t = this, K = V(t.lp(H).y / t._rowHeight);
                return K >= 0 && K < t._rows.size() ? K : -1
            },
            getPropertyAt: function (D) {
                var u = this, N = u.getRowIndexAt(D);
                return N >= 0 ? u._rows.get(N).property : o
            },
            getToolTip: function (B) {
                var Z = this, k = Z.getPropertyAt(B), U = Z._27o;
                return k && U ? k.getToolTip(U, Z._9I < Z.lp(B).x, Z) : o
            }
        });
        var pl = function ($) {
            this.pv = $, this.addListeners()
        };
        Jr(pl, H, {
            ms_listener: 1, getView: function () {
                return this.pv._view
            }, setCursor: function (b) {
                this.getView().style.cursor = b
            }, clear: function () {
                var C = this;
                C._62O = C.cp = C.ty = C.p = o, C.setCursor(ek)
            }, handle_mousedown: function (V) {
                this.handle_touchstart(V)
            }, handle_touchstart: function (v) {
                var x = this, l = x.pv;
                Yd(v), l.setFocus(v) && (Di(v) ? (x.cp = Uj(v), x.ty = l.ty(), x.p = l.getColumnPosition(), x.handle_touchmove(v)) : l.setSelectRowIndex(l.getRowIndexAt(v)))
            }, handleWindowMouseUp: function () {
                this.clear()
            }, handleWindowTouchEnd: function () {
                this.clear()
            }, handle_mouseup: function (h) {
                this.handle_touchend(h)
            }, handle_touchend: function (K) {
                var O = this;
                if (O.cp && !O._62O) {
                    var L = O.pv, T = L.lp(K), F = T.x, f = T.y, e = L._indent, y = L.getRowIndexAt(K), Q = L._9I;
                    if (y >= 0) {
                        var C = L._rowHeight, v = C * y, p = L._rows.get(y), h = p.property;
                        if (uf(p)) Ui(L.isExpanded(p) ? L._expandIcon : L._collapseIcon) && F >= 0 && e >= F && f >= v && v + C >= f ? L.toggle(p) : qs(K) && L.toggle(p); else if (F > Q && L.isPropertyEditable(h, K)) {
                            var Z = {x: Q + 1, y: v, width: L.getWidth() - Q - 1, height: C},
                                W = {x: Z.x + L.tx(), y: Z.y + L.ty(), width: Z.width, height: Z.height}, s = 0,
                                a = L._29I;
                            Z.y < a.y ? s = Z.y - a.y : Z.y + C > a.y + a.height && (s = Z.y + C - a.y - a.height), s && (L.ty(L.ty() - s), W.y -= s), L.beginEditing({
                                data: p.data,
                                property: h,
                                value: L.getValue(p.data, h),
                                event: K,
                                rect: Z,
                                editorRect: W,
                                view: L
                            })
                        }
                    }
                    L.setSelectRowIndex(y)
                }
                O.clear()
            }, handleWindowMouseMove: function (Q) {
                this.handleWindowTouchMove(Q)
            }, handleWindowTouchMove: function (X) {
                var l = this, n = l.pv, e = l.ty, u = l.cp, w = Uj(X), _ = l._62O;
                if ("p" === _) n.setTranslateY(e + w.y - u.y); else if ("c" === _) {
                    var i = n.getWidth() - n._indent;
                    if (i > 16) {
                        var I = l.p - (u.x - w.x) / i, C = 16 / i;
                        C > I && (I = C), I > 1 - C && (I = 1 - C), n.setColumnPosition(I)
                    }
                } else "s" === _ && n.setTranslateY(e + (u.y - w.y) * n._59I / n._29I.height)
            }, handle_mousemove: function (s) {
                this.handle_touchmove(s)
            }, handle_touchmove: function (C) {
                if (!fq && Di(C)) {
                    var i = this, b = i.pv, t = M(b.lp(C).x - b._9I) <= (Xp ? 8 : 3);
                    i.cp ? i._62O || (t ? (i._62O = "c", ce(i)) : M(Uj(C).y - i.cp.y) >= 2 && (i._62O = i.isV(C) ? "s" : "p", ce(i))) : (t ? i.setCursor(Vi) : i.setCursor(ek), i.isV(C) && b._43o())
                }
            }, isV: function (q) {
                var I = this.pv, k = I._29I;
                return I._41o() && k.x + k.width - I.lp(q).x < Oi
            }, handle_mousewheel: function (t) {
                this.handleScroll(t, t.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (L) {
                2 === L.axis && this.handleScroll(L, -L.detail)
            }, handleScroll: function (n, Y) {
                var _ = this.pv;
                Yd(n), _.endEditing(), _.translate(0, Y * _.getRowHeight())
            }, handle_keydown: function (F) {
                var t = this.pv, J = t._rows.size(), Z = t._selectRowIndex + (pq(F) ? -1 : 1);
                (pq(F) || wb(F)) && (0 > Z && (Z = 0), Z >= J && (Z = J - 1), t.setSelectRowIndex(Z))
            }
        }), Oj.ListView = function (V) {
            this._5o(V), new ls(this)
        }, nn("ListView", H, {
            ms_ac: [Yc, ue, sp, ds, hi, Uo, _f, bg, Dl, ym, Wc, xh, ne, qo],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            _14Q: 1,
            ms_dm: 1,
            _45o: 1,
            _checkMode: !1,
            _indent: pg,
            _rowHeight: xl,
            _rowLineVisible: w.listViewRowLineVisible,
            _rowLineColor: w.listViewRowLineColor,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoMakeVisible: Mn,
            _autoHideScrollBar: Nf,
            _selectBackground: w.listViewSelectBackground,
            _labelColor: w.listViewLabelColor,
            _labelSelectColor: w.listViewLabelSelectColor,
            _labelFont: w.listViewLabelFont,
            isCheckMode: function () {
                return this._checkMode
            },
            setCheckMode: function (T) {
                var z = this, l = z._checkMode;
                z._checkMode = T, z.fp(lq, l, T)
            },
            drawRow: function (Z, D, r, s, w, C, T) {
                var l = this, c = 0, u = l._indent, I = l.getIconWidth(D);
                l.drawRowBackground(Z, D, r, s, w, C, T), l._checkMode && (Hn(Z, Ui(l.getCheckIcon(D)), c + u / 2, w + T / 2, D, l), c += u), l.drawIcon(Z, D, c, w, I, T), l.drawLabel(Z, D, c + I, w, T)
            }
        });
        var ls = function (a) {
            this.list = a, this._lastSelectDataTime = Ye(), this.addListeners()
        };
        Jr(ls, H, {
            ms_listener: 1, getView: function () {
                return this.list._view
            }, clear: function (m) {
                var w = this, t = w.list;
                m && "d" === w._62O && !w.dragCancel && t.handleDragAndDrop(m, "end"), t.draggingData && (t.draggingData = null, t.redraw()), w.dragCancel = w._62O = w._isV = w._isH = w.cp = w.tx = w.ty = o
            }, handle_mousedown: function (X) {
                this.handle_touchstart(X)
            }, handle_touchstart: function (q) {
                var h = this, r = h.list;
                if (Yd(q), r.setFocus(q)) {
                    var D = r.getDataAt(q);
                    h.cp = Uj(q), h.tx = r.tx(), h.ty = r.ty(), Di(q) ? D && r.handleDragAndDrop && !h.isV(q) && !h.isH(q) && (r.draggingData = D, r.redraw(), r.handleDragAndDrop(q, "prepare")) : (D && h._33o(q, D), h.clear(q))
                }
            }, handleWindowMouseUp: function (j) {
                this.clear(j)
            }, handleWindowTouchEnd: function (s) {
                this.clear(s)
            }, handle_mouseup: function (X) {
                this.handle_touchend(X)
            }, handle_touchend: function (J) {
                var m = this, n = m.list;
                if (!m._isV && !m._isH && m.cp && !m._62O) {
                    var v = n.getDataAt(J);
                    v ? (n.isCheckMode() ? m._34o(J, v) : m._33o(J, v), qs(J) ? n.onDataDoubleClicked(v, J) : n.onDataClicked(v, J)) : n.handleBackgroundClick(J)
                }
                m.clear(J)
            }, handleWindowMouseMove: function (c) {
                this.handleWindowTouchMove(c)
            }, handleWindowTouchMove: function (j) {
                var l = this, w = l.list, u = l._62O, h = l.tx, z = l.ty, W = l.cp, I = Uj(j), N = w._29I;
                "p" === u ? w.setTranslate(h + I.x - W.x, z + I.y - W.y) : "v" === u ? w.ty(z + (W.y - I.y) * w._59I / N.height) : "h" === u ? w.tx(h + (W.x - I.x) * w._91I / N.width) : "d" === u && (l.dragCancel || w.handleDragAndDrop(j, "between"))
            }, handle_mousemove: function (P) {
                this.handle_touchmove(P)
            }, handle_touchmove: function (h) {
                if (!fq && Di(h)) {
                    var m = this, T = m.list;
                    if (m._isV = m.isV(h), m._isH = m.isH(h), m.cp) {
                        if (!m._62O) {
                            if (vl(Uj(h), m.cp) < 2) return;
                            m._isV ? m._62O = "v" : m._isH ? m._62O = "h" : T.draggingData && !this.dragCancel ? (m._62O = "d", T.handleDragAndDrop(h, "begin")) : m._62O = "p", m._62O && "d" !== m._62O && T.draggingData && (T.draggingData = null, T.redraw()), ce(m)
                        }
                    } else m._isV && T._43o(), m._isH && T._42o()
                }
            }, isV: function (t) {
                var B = this.list, m = B._29I;
                return B._41o() && m.x + m.width - B.lp(t).x < Oi
            }, isH: function (D) {
                var u = this.list, C = u._29I;
                return u._40o() && C.y + C.height - u.lp(D).y < Oi
            }, handle_mousewheel: function ($) {
                this.handleScroll($, $.wheelDelta / 40, $.wheelDelta !== $.wheelDeltaX)
            }, handle_DOMMouseScroll: function (v) {
                this.handleScroll(v, -v.detail, 1)
            }, handleScroll: function (t, L, c) {
                var $ = this.list;
                Yd(t), $.endEditing && $.endEditing(), c && $._41o() ? $.translate(0, L * $.getRowHeight()) : $._40o() && $.translate(10 * L, 0)
            }, handle_keydown: function (y) {
                if (!w.isInput(y.target)) {
                    var R, k = this.list, M = k.sm(), a = k._rows, J = a.size();
                    if (Hi(y)) k.selectAll(); else if (jp(y)) k.handleDelete && k.handleDelete(y); else if (pi(y)) "d" !== this._62O || this.dragCancel || (k.handleDragAndDrop(y, "cancel"), this.dragCancel = !0); else if (Hk(y)) k.isCheckMode() && (R = k.getFocusData(), R && k.checkData(R)); else if (pq(y) || wb(y)) {
                        var d = k.isCheckMode();
                        if (R = d ? k.getFocusData() : M.ld()) {
                            var r = k.getRowIndex(R);
                            r >= 0 && (pq(y) ? 0 !== r && (R = a.get(r - 1), d ? k.setFocusData(R) : M.ss(R)) : r !== J - 1 && (R = a.get(r + 1), d ? k.setFocusData(R) : M.ss(R)))
                        } else J > 0 && (R = a.get(0), d ? k.setFocusData(R) : M.ss(R))
                    }
                }
            }, _34o: function ($, m) {
                var Y = this.list, x = Y.lp($).x;
                return x >= 0 && x <= Y._indent ? (Y.checkData(m), void 0) : (Y.setFocusData(m), void 0)
            }, _33o: function (D, c) {
                var H = this.list, n = H.sm(), Z = n.ld();
                if (Kg(D)) H.isSelected(c) ? n.rs(c) : n.as(c); else if (sf(D)) if (Z) for (var J = H.getRowIndex(Z), P = H.getRowIndex(c); J !== P;) J += P > J ? 1 : -1, n.as(H._rows.get(J)); else n.ss(c); else if (Di(D)) {
                    var l = Ye();
                    if (n.contains(c)) {
                        var B = l - this._lastSelectDataTime;
                        H.handleDataDoubleSelect && B > 500 && 1500 > B && H.handleDataDoubleSelect(D, c)
                    }
                    n.ss(c), this._lastSelectDataTime = l
                } else n.contains(c) || n.ss(c)
            }
        }), Oj.TreeView = function (A) {
            var T = this;
            T._35o(), T._5o(A), new Cs(T)
        }, nn("TreeView", H, {
            ms_ac: [Yc, ue, sp, "rootVisible", lq, "rootData", bg, Dl, ym, Wc, xh, hi, ds, Uo, _f, Bc, hl, ne, qo, "loader", "doubleClickToToggle"],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _checkMode: o,
            _indent: pg,
            _rowHeight: xl,
            _rowLineVisible: w.treeViewRowLineVisible,
            _rowLineColor: w.treeViewRowLineColor,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoHideScrollBar: Nf,
            _expandIcon: w.treeViewExpandIcon,
            _collapseIcon: w.treeViewCollapseIcon,
            _autoMakeVisible: Mn,
            _selectBackground: w.treeViewSelectBackground,
            _labelColor: w.treeViewLabelColor,
            _labelSelectColor: w.treeViewLabelSelectColor,
            _labelFont: w.treeViewLabelFont,
            _doubleClickToToggle: w.treeViewDoubleClickToToggle,
            drawRow: function (d, x, N, U, G, T, u) {
                var A = this;
                A.drawRowBackground(d, x, N, U, G, T, u), A._97I(d, x, N, 0, G, T, u)
            },
            isOnToggleIcon: function (o) {
                var A = this.getDataAt(o);
                if (A) {
                    var p = this.getIndent(), X = this.lp(o).x;
                    if (Ui(this.getToggleIcon(A))) {
                        var f = p * this.getLevel(A);
                        if (X >= f && f + p >= X) return !0
                    }
                }
                return !1
            }
        });
        var Cs = function (f) {
            yp(Cs, this, [f])
        };
        Jr(Cs, ls, {
            toggle: function (J, X, d, p) {
                var Z = this.list, A = Z.lp(J).x;
                if (Ui(Z.getToggleIcon(X))) {
                    var F = d * p;
                    if (A >= F && F + d >= A) return Z.toggle(X), !0
                }
                return Z.isDoubleClickToToggle() && qs(J) ? (Z.toggle(X), !0) : !1
            }, _34o: function (_, S) {
                var c = this.list, t = c.lp(_).x, y = c._levelMap[S._id], q = c._indent, M = q * (y + 1);
                return t >= M && M + q >= t ? (c.checkData(S), void 0) : (this.toggle(_, S, q, y) || c.setFocusData(S), void 0)
            }, _33o: function (C, M) {
                var i = this, Z = i.list;
                i.toggle(C, M, Z._indent, Z.getLevel(M)) || Cs.superClass._33o.call(i, C, M)
            }, handle_keydown: function (K) {
                if (Jm(K) || Ac(K)) {
                    var n = this.list, $ = n._rows, I = n.isCheckMode(), D = n.sm(), o = I ? n.getFocusData() : D.ld();
                    o ? o.hasChildren() && (Jm(K) ? n.collapse(o) : n.expand(o)) : $.size() > 0 && (o = $.get(0), I ? n.setFocusData(o) : D.ss(o))
                } else Cs.superClass.handle_keydown.call(this, K)
            }
        });
        var Tk = Oj.TableView = function (V) {
            this._98I(), this._5o(V), new on(this)
        };
        nn("TableView", H, {
            ms_ac: [Yc, ue, sp, "sortMode", Lj, yj, ds, Uo, _f, Bl, Ho, "sortColumn", bg, Dl, ym, Wc, xh, ne, qo],
            ms_v: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: qc,
            _editable: !0,
            _batchEditable: !1,
            _rowHeight: xl,
            _rowLineVisible: w.tableViewRowLineVisible,
            _rowLineColor: w.tableViewRowLineColor,
            _columnLineVisible: w.tableViewColumnLineVisible,
            _columnLineColor: w.tableViewColumnLineColor,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoHideScrollBar: Nf,
            _autoMakeVisible: Mn,
            _selectBackground: w.tableViewSelectBackground,
            _labelColor: w.tableViewLabelColor,
            _labelSelectColor: w.tableViewLabelSelectColor,
            _labelFont: w.tableViewLabelFont,
            getCheckColumn: function () {
                var B = this;
                if (!B._31o) {
                    var C = B._31o = new Mp;
                    C.setEditable(!0), C.setWidth(40), C.getValue = B.getCheckColumValue, C.drawCell = B.drawCheckColumnCell
                }
                return B._31o
            },
            isCheckMode: function () {
                return this._39o.contains(this._31o)
            },
            setCheckMode: function (G) {
                var l = this, K = l._39o, R = l.getCheckColumn();
                G !== l.isCheckMode() && (G ? K.add(R, 0) : K.remove(R), l.fp(lq, !G, G))
            },
            getCheckColumValue: function (V, M, l) {
                return l.isSelected(V)
            },
            drawCheckColumnCell: function (Z, k, P, X, n, O, N, D, W) {
                Hn(Z, W.getCheckIcon(k), n + N / 2, O + D / 2, k, W)
            }
        });
        var on = function (V) {
            yp(on, this, [V])
        };
        Jr(on, ls, {
            _34o: function (G, W) {
                var I = this.list, w = I._31o;
                if (I.isCellEditable(W, w, G)) {
                    var e = I._3Q(w), y = I.lp(G).x;
                    if (e && y >= e.startX && y < e.startX + w.getWidth()) return I.checkData(W), void 0
                }
                I._37O(W, G), I.setFocusData(W)
            }, _33o: function (J, W) {
                this.list._37O(W, J), on.superClass._33o.apply(this, arguments)
            }
        });
        var $m = Oj.TreeTableView = function (y) {
            var P = this, D = P._4o = new Mp;
            P._35o(), P._98I(), P._5o(y), D.setDisplayName("Name"), D.setEditable(!0), D.setWidth(180), D.drawCell = Jp, D.getValue = _o, P._39o.add(D), new ir(P)
        }, Jp = function (v, F, O, E, H, M, d, z, D) {
            D._97I(v, F, O, H, M, d, z)
        }, _o = function (u, w, Y) {
            return Y.getLabel(u)
        };
        nn("TreeTableView", H, {
            ms_ac: [Yc, ue, sp, "sortMode", Lj, yj, hi, lq, "rootData", "rootVisible", bg, Dl, "sortColumn", Bc, hl, ym, Wc, xh, ne, _f, ds, Uo, Bl, Ho, qo, "loader"],
            ms_v: 1,
            ms_bnb: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: qc,
            _checkMode: o,
            _editable: !0,
            _batchEditable: !1,
            _indent: pg,
            _rowHeight: xl,
            _rowLineVisible: w.treeTableViewRowLineVisible,
            _rowLineColor: w.treeTableViewRowLineColor,
            _columnLineVisible: w.treeTableViewColumnLineVisible,
            _columnLineColor: w.treeTableViewColumnLineColor,
            _expandIcon: w.treeTableViewExpandIcon,
            _collapseIcon: w.treeTableViewCollapseIcon,
            _scrollBarColor: Ki,
            _scrollBarSize: pk,
            _autoHideScrollBar: Nf,
            _autoMakeVisible: Mn,
            _selectBackground: w.treeTableViewSelectBackground,
            _labelColor: w.treeTableViewLabelColor,
            _labelSelectColor: w.treeTableViewLabelSelectColor,
            _labelFont: w.treeTableViewLabelFont,
            getTreeColumn: function () {
                return this._4o
            }
        });
        var ir = function (k) {
            yp(ir, this, [k])
        };
        Jr(ir, ls, {
            _34o: function (_, D) {
                var B = this.list, T = B._4o, O = B._3Q(T), W = B.lp(_).x;
                if (O) {
                    var S = B._indent, a = O.startX + S * B.getLevel(D);
                    if (Ui(B.getToggleIcon(D)) && W >= a && a + S >= W) return B.toggle(D), void 0;
                    if (B.isCellEditable(D, T) && (a += S, W >= a && a + S >= W)) return B.checkData(D), void 0
                }
                B._37O(D, _), B.setFocusData(D)
            }, _33o: function (P, L) {
                var z = this.list, w = z.lp(P).x;
                if (Ui(z.getToggleIcon(L))) {
                    var d = z._3Q(z._4o);
                    if (d) {
                        var i = z._indent, x = d.startX + i * z.getLevel(L);
                        if (w >= x && x + i >= w) return z.toggle(L), void 0
                    }
                }
                z._37O(L, P), ir.superClass._33o.apply(this, arguments)
            }
        });
        var Kd = Oj.TableHeader = function (i) {
            var x = this, v = x._view = po(1, x), q = x._39o = i.getColumnModel(), V = x.iv;
            x.tv = x._tableView = i, x._60I = new Pf, x._canvas = wg(v), v.style.background = w.tableHeaderBackground || "", v.style.height = Wf + Od, q.mm(V, x), q.md(V, x), q.mh(V, x), i.mp(function (b) {
                jm[b.property] && x.iv()
            }, x), new en(x), x.iv()
        };
        nn("TableHeader", H, {
            ms_v: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_ac: ["checkIcon", "sortDescIcon", "sortAscIcon", Yc, sp, hi, "moveBackground", "insertColor", Bl, Ho, "resizable", "movable"],
            _checkIcon: fp,
            _movable: !0,
            _resizable: !0,
            _labelColor: w.tableHeaderLabelColor,
            _labelFont: w.tableHeaderLabelFont,
            _columnLineColor: w.tableHeaderColumnLineColor,
            _columnLineVisible: w.tableHeaderColumnLineVisible,
            _sortDescIcon: w.tableHeaderSortDescIcon,
            _sortAscIcon: w.tableHeaderSortAscIcon,
            _moveBackground: w.tableHeaderMoveBackground,
            _insertColor: w.tableHeaderInsertColor,
            _indent: pg,
            getCheckIcon: function () {
                return this._checkIcon
            },
            getTableView: function () {
                return this.tv
            },
            getLabel: function (K) {
                return K.toLabel()
            },
            getLabelFont: function () {
                return this._labelFont
            },
            getLabelColor: function (W) {
                return W.getColor() || this._labelColor
            },
            getLabelAlign: function (D) {
                return D._align
            },
            onPropertyChanged: function () {
                this.iv()
            },
            _5Q: function (g) {
                this._61I = g, this.iv()
            },
            getLogicalPoint: function (q) {
                return ln(q, this._canvas, this.tv.tx())
            },
            validateImpl: function () {
                var B = this, M = B._canvas, F = B.getWidth(), x = B.getHeight(), r = B.tv, q = B._60I, C = B._61I,
                    Q = -r.tx(), h = 0;
                (F !== M.clientWidth || x !== M.clientHeight) && zm(M, F, x), q.clear(), B._39o._roots.each(function (b) {
                    if (b.isVisible()) {
                        var J = h + b.getWidth();
                        Q + F >= h && J >= Q && q.add({column: b, startX: h}), h = J
                    }
                });
                var m = Jb(M);
                if (Ec(m, -Q, 0, 1), m.beginPath(), m.rect(Q, 0, F, x), m.clip(), m.clearRect(Q, 0, F, x), q.each(function (I) {
                    var Z = I.column, A = I.startX, $ = Z.getWidth();
                    $ > 0 && (m.save(), m.beginPath(), m.rect(A, 0, $, x), m.clip(), C && C.column === Z || B.drawColumn(m, Z, A, 0, $, x), B._columnLineVisible && Rf(m, A + $ - 1, 0, 1, x, B._columnLineColor), m.restore())
                }), C) {
                    var A = C.column, h = C.startX, b = C.position, O = A.getWidth();
                    m.save(), m.beginPath(), m.rect(h, 0, O, x), m.clip(), m.fillStyle = B._moveBackground, m.fill(), B.drawColumn(m, A, h, 0, O, x), m.restore(), Nj(m, B._insertColor, b, 0, x)
                }
                m.restore()
            },
            _6Q: function (K) {
                var F = this.tv;
                return F._31o === K && F.sm().getSelectionMode() === cq
            },
            drawColumn: function (x, o, V, T, d, h) {
                var M = this, H = M.tv, y = Ui(o.getIcon()), i = M.getLabelAlign(o);
                if (M._6Q(o)) {
                    var e = Ui(M._checkIcon);
                    Hn(x, e, V + d / 2, T + h / 2, o, M)
                } else {
                    var U = M.getLabel(o), j = M.getLabelFont(o), E = M.getLabelColor(o), t = Dp(j, U).width,
                        P = y ? M._indent : 0;
                    i === Pq ? (y && Ng(x, y, nk, V, T, P, h), Be(x, U, j, E, V + P, T, d, h, Pq)) : i === Kl ? (y && Ng(x, y, nk, V + d - t - P, T, P, h), Be(x, U, j, E, V, T, d, h, Kl)) : (y && Ng(x, y, nk, V + (d - t - P) / 2, T, P, h), Be(x, U, j, E, V + (d - t + P) / 2, T, 0, h, Pq))
                }
                if (o.isSortable() && H.getSortColumn() === o && (y = Ui(o.getSortOrder() === Tf ? M._sortAscIcon : M._sortDescIcon))) {
                    var r = Iq(y, o) / 2 + 2;
                    Hn(x, y, i === Kl ? V + r : V + d - r, T + h / 2, o, H)
                }
            }
        });
        var en = function (U) {
            var C = this;
            C.th = U, C.tv = U._tableView, C.addListeners()
        };
        Jr(en, H, {
            ms_listener: 1, getView: function () {
                return this.th.getView()
            }, setCursor: function (c) {
                this.getView().style.cursor = c
            }, handle_mousemove: function (v) {
                if (!fq) {
                    var w = this;
                    delete w._29o, w.setCursor(ek);
                    for (var F = w.th, K = F._60I, N = F.lp(v).x, V = K.size() - 1; V >= 0; V--) {
                        var l = K.get(V), Z = l.column, D = l.startX + Z.getWidth();
                        if (F.isResizable() && M(D - N) <= (Xp ? 10 : 3)) return w._29o = l, w.setCursor(Vi), void 0;
                        N > l.startX && D > N && (w._29o = l), (Z.isClickable() || Z.isSortable() || F.isMovable() || w.tv.getCheckColumn && Z === w.tv.getCheckColumn()) && N > l.startX && D > N && w.setCursor(Mg)
                    }
                }
            }, handle_mousedown: function (p) {
                this.handle_touchstart(p)
            }, handle_touchstart: function (G) {
                var f = this;
                Yd(G), f.tv.endEditing(), f.handle_mousemove(G), f._29o && (f.x = Uj(G).x, f.lx = f.th.lp(G).x, f.w = f._29o.column.getWidth(), ce(f, G))
            }, handleWindowMouseMove: function (w) {
                this.handleWindowTouchMove(w)
            }, handleWindowTouchMove: function (_) {
                var K = this, Q = K.th, D = K.getView().style.cursor, m = K._29o, c = Uj(_).x - K.x;
                if (K.resizing || K.moving || (D === Vi ? K.resizing = 1 : Q.isMovable() && D === Mg && M(c) > 2 && (K.moving = 1)), K.resizing) m.column.setWidth(K.w + c); else if (K.moving) {
                    var T = K.lx + c;
                    Q._60I.each(function (K) {
                        var y = K.startX, i = y + K.column.getWidth();
                        if (T >= y && i >= T) {
                            var e = {
                                column: m.column,
                                startX: m.startX + c,
                                front: i - T > T - y,
                                insertColumn: K.column
                            };
                            e.position = e.front ? y : i, Q._5Q(e)
                        }
                    })
                }
            }, _16Q: function (f, I) {
                var R = this, d = R.tv, q = R.th, c = q._checkIcon;
                if (q._6Q(f)) {
                    var D = Ui(c), Y = R.lx, j = f.getWidth(), e = Iq(D, f);
                    if (Y >= I + j / 2 - e && I + j / 2 + e >= Y) {
                        q.setCheckIcon(c === $d ? fp : $d);
                        var _ = d.sm(), A = d._rows;
                        return c === $d ? _.rs(A) : _.ss(A), d.onCheckColumnClicked(f), !0
                    }
                }
                return !1
            }, handleWindowMouseUp: function (d) {
                this.handleWindowTouchEnd(d)
            }, handleWindowTouchEnd: function (P) {
                var Y = this, B = Y.tv, v = Y.th, T = Y._29o;
                if (Y.moving) {
                    var A = v._61I;
                    if (A && A.insertColumn !== A.column) {
                        var I = A.column, U = B.getColumnModel()._roots, u = U.remove(I), g = U.indexOf(A.insertColumn);
                        g >= 0 && (A.front || g++, g <= U.size() && (U.add(I, g), B.getColumnModel()._38I(I, u, g)))
                    }
                    v._5Q(o), delete Y.moving
                } else if (!Y.resizing && T) {
                    I = T.column;
                    var q = v.lp(P).x, m = T.startX, p = !0;
                    if (v.onColumnClicked) {
                        var Q = v.onColumnClicked(I, P, m);
                        Q === !1 && (p = !1)
                    }
                    if (p && q >= m && q <= m + I.getWidth() && !Y._16Q(I, m)) {
                        if (I.isSortable()) {
                            var z = B.getSortMode(), H = I.getSortOrder();
                            z === qc ? B.getSortColumn() === I ? (H === ro && B.setSortColumn(o), I.setSortOrder(H === Tf ? ro : Tf)) : B.setSortColumn(I) : "bistate" === z && (B.getSortColumn() === I ? I.setSortOrder(H === Tf ? ro : Tf) : B.setSortColumn(I))
                        }
                        B.onColumnClicked(I, P, m)
                    }
                }
                Y._29o = Y.resizing = Y.x = Y.lx = Y.w = o
            }
        }), Oj.TablePane = function (r) {
            this.init(new Tk(r))
        }, nn("TablePane", H, {ms_v: 1, _44o: 1}), Oj.TreeTablePane = function (U) {
            this.init(new $m(U))
        }, nn("TreeTablePane", H, {ms_v: 1, _44o: 1}), Oj.Toolbar = function (O) {
            var j = this, g = j._view = po(1, j), n = g.style;
            n.background = w.toolbarBackground || "", n.height = Wi + Od, j._canvas = wg(g), j._30o = new Pf, j._90I = new Pf, j.setItems(O || []), g.handleGroupSelectedChanged = function ($) {
                if ($.isSelected()) {
                    var p = $.getGroupId();
                    null != p && j._items.forEach(function (B) {
                        var T = B.element;
                        T && T !== $ && T.setSelected && T.getGroupId && T.getGroupId() === p && T.setSelected(!1)
                    })
                }
            }, new yi(j)
        }, nn("Toolbar", H, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_lp: 1,
            ms_tip: 1,
            ms_value: 1,
            ms_ac: [lk, Yc, sp, ue, qo, "itemGap", "separatorColor", "currentItem", "stickToRight"],
            _labelColor: w.toolbarLabelColor,
            _labelSelectColor: w.toolbarLabelSelectColor,
            _labelFont: w.toolbarLabelFont,
            _selectBackground: w.toolbarSelectBackground,
            _itemGap: w.toolbarItemGap,
            _separatorColor: w.toolbarSeparatorColor,
            _stickToRight: !1,
            getSumWidth: function () {
                return this._64I
            },
            getToolTip: function (H) {
                var S = this.getItemInfoAt(H);
                return S ? S.item.toolTip : o
            },
            getLabelColor: function (w) {
                return w && w.selected && w.type !== $d && w.type !== mo ? this._labelSelectColor : this._labelColor
            },
            onPropertyChanged: function (Q) {
                this.iv(), Q.property === lk && this._items.forEach(function (M) {
                    sr(M)
                })
            },
            redraw: function () {
                this.iv()
            },
            addItem: function (z, O) {
                var x = this._items;
                O == o ? x.push(z) : x.splice(O, 0, z), this.fp(lk, o, x)
            },
            removeItem: function (Z) {
                if (Z) for (var A = this._items, v = 0; v < A.length; v++) Z === A[v] && (A.splice(v, 1), this.fp(lk, o, A))
            },
            removeItemById: function (n) {
                if (n != o) for (var w = this._items, v = 0; v < w.length; v++) if (n === w[v].id) {
                    var m = w.splice(v, 1)[0];
                    return this.fp(lk, o, w), m
                }
            },
            getItemById: function (e) {
                if (e != o) for (var a = this._items, G = 0; G < a.length; G++) {
                    var w = a[G];
                    if (e === w.id) return w
                }
            },
            setItemVisible: function (N, d) {
                var L = this.getItemById(N);
                L && (L.visible = d)
            },
            getItemInfos: function () {
                return this._30o
            },
            getItemInfoAt: function (L) {
                var U = this, B = 0, n = U._30o, r = U.lp(L), t = r.x, e = r.y;
                if (e >= 0 && e <= U.getHeight()) for (; B < n.size(); B++) {
                    var Z = n.get(B);
                    if (Z.startX <= t && t <= Z.endX) return Z
                }
                return o
            },
            drawItem: function (q, f, J, A, S) {
                if (f.visible === !1) return 0;
                if (gp(f.visible) && !f.visible()) return 0;
                var F = this, T = f.disabled;
                T && (q.globalAlpha = _l);
                var s = F.drawItemImpl(q, f, J, A, S), W = F._itemGap;
                return T && (q.globalAlpha = 1), this._currentItem !== f || "separator" === f || f.separator === !0 || f.unfocusable || gd(q, F._separatorColor, J - W / 2, 0, s + W, A), s
            },
            drawItemImpl: function (C, g, J, a, i) {
                var Z = this, E = Z._view, m = Z._itemGap, U = a / 2, p = g.type, c = g.element, Q = g.label;
                uf(c) && (Q = c, c = o);
                var T, h = Z.getLabelFont(g), z = Z.getLabelColor(g), D = g.selected, f = Ui(g.icon), l = Iq(f, g),
                    w = 0, W = l + (Q ? Dp(h, Q).width : 0);
                if ("separator" === g || g.separator === !0) return Nj(C, Z._separatorColor, J, a / 4, U), 1;
                if (c) {
                    f && Hn(C, f, J + l / 2, U, g, Z), Be(C, Q, h, z, J + l, 0, 0, a);
                    var G = Gi(c);
                    i || Z._90I.add(G), G.parentNode !== E && Ur(E, G), c.iv && c.iv(), c.validate && c.validate();
                    var r = G.getBoundingClientRect(), x = r.width, e = G.style;
                    return fr(G), e.left = Z.tx() + J + W + Od, e.top = (a - r.height) / 2 + Od, W + x
                }
                return p === mo ? T = Ui(D ? oq : Dh) : p === $d && (T = Ui(D ? $d : fp)), T ? (w = Iq(T, g), Hn(C, T, J + w / 2, U, g, Z), J += w, W += w) : D && Rf(C, J - m / 2, 0, W + m, a, Z.getSelectBackground(g)), f && Hn(C, f, J + l / 2, U, g, Z), Be(C, Q, h, z, J + l, 0, 0, a), W
            },
            validateImpl: function () {
                var X = this, k = X._canvas, m = X.getWidth(), I = X.getHeight(), r = X._30o, V = X._items;
                zm(k, m, I);
                var S = Jb(k), z = X._itemGap, K = z / 2;
                Ec(S, X.tx(), 0, 1), S.clearRect(0, 0, m, I);
                var x = X._90I;
                X._90I = new Pf, r.clear(), V.forEach(function (v) {
                    var m = X.drawItem(S, v, K, I);
                    r.add({item: v, startX: K, endX: K + m, width: m}), m && (K += m + z)
                }), x.each(function (w) {
                    X._90I.contains(w) || Lg(w)
                });
                var _ = X._64I;
                X._64I = n(0, K), S.restore(), X._stickToRight ? (X._65O = 0, S = Jb(k), K = m - X._64I + z, Ec(S, 0, 0, 1), S.clearRect(0, 0, m, I), r.clear(), V.forEach(function (i) {
                    var G = X.drawItem(S, i, K, I, !0);
                    r.add({item: i, startX: K, endX: K + G, width: G}), G && (K += G + z)
                }), S.restore()) : X.tx(X.tx()), _ !== X._64I && X.onSumWidthChanged(_, X._64I)
            },
            onSumWidthChanged: function () {
            },
            handleClick: function (b, C) {
                var H = this, F = b.type, L = b.action, x = b.groupId, c = b.selected;
                b.disabled || (x != o ? c || (b.selected = !0, this._items.forEach(function (e) {
                    e.groupId === x && b !== e && (e.selected = !1)
                }), L && b.action(b, H, C)) : F === $d || "toggle" === F ? (b.selected = !c, L && b.action(b, H, C)) : L && b.action(b, H, C)), ti(), H.iv()
            }
        });
        var yi = function (N) {
            this.tb = N, this.addListeners()
        };
        Jr(yi, H, {
            ms_listener: 1, getView: function () {
                return this.tb._view
            }, handle_mousewheel: function (k) {
                this.handleScroll(k, 10 * (k.wheelDelta / 40))
            }, handle_DOMMouseScroll: function (O) {
                this.handleScroll(O, 10 * -O.detail)
            }, handleScroll: function (_, L) {
                Yd(_);
                var M = this.tb;
                M.isScrollable() && !M._stickToRight && (M.tx(M.tx() + L), Fk())
            }, handle_mousemove: function (_) {
                var U = this;
                fq || U.setItem(_)
            }, handle_mouseout: function (v) {
                var Z = this;
                v.target === Z.getView() ? Z.tb.setCurrentItem(o) : Z.handle_mousemove(v)
            }, handle_mousedown: function (o) {
                this.handle_mousemove(o), this.handle_touchstart(o)
            }, handle_touchstart: function (M) {
                var G = this, n = G.tb, I = M.target;
                Di(M) && (I === G.getView() || I === n._canvas) && (Yd(M), n.setFocus(M) && (this.setItem(M, !0), (n.isScrollable() || G.info && !G.info.item.disabled) && (G.x = Uj(M).x, G.tx = n.tx(), ce(G, M))))
            }, handleWindowMouseMove: function (r) {
                this.handleWindowTouchMove(r)
            }, handleWindowTouchMove: function (i) {
                var G = this, P = G.tb;
                if (!P._stickToRight) {
                    var Q = Uj(i).x - G.x;
                    !G._25o && M(Q) > 2 && P.isScrollable() && (G._25o = 1), G._25o && P.tx(G.tx + Q)
                }
            }, handleWindowMouseUp: function (x) {
                this.handleWindowTouchEnd(x)
            }, handleWindowTouchEnd: function (Z) {
                var p = this, V = p.tb, l = p.info, t = p.tb.getItemInfoAt(Z);
                if (!p._25o && l) {
                    var r = l.item;
                    t && t.item === r && V.handleClick(r, Z)
                }
                p._25o = p.x = p.tx = o, p.setItem()
            }, setItem: function (V, X) {
                var u = this, j = u.tb, n = u.info = V ? j.getItemInfoAt(V) : o, P = n ? n.item : o;
                j.setCurrentItem(P), X && P && gp(P.onDown) && P.onDown(V)
            }
        }), Oj.BorderPane = function () {
            this._view = po(1, this), this.iv()
        }, nn("BorderPane", H, {
            ms_v: 1,
            ms_ac: ["topHeight", "bottomHeight", "leftWidth", "rightWidth"],
            ms_fire: 1,
            getLeftView: function () {
                return this._leftView
            },
            setLeftView: function (c, S) {
                this._12o("leftView", c), S != o && this.setLeftWidth(S)
            },
            getRightView: function () {
                return this._rightView
            },
            setRightView: function (Z, x) {
                this._12o("rightView", Z), x != o && this.setRightWidth(x)
            },
            getTopView: function () {
                return this._topView
            },
            setTopView: function (K, _) {
                this._12o("topView", K), _ != o && this.setTopHeight(_)
            },
            getBottomView: function () {
                return this._bottomView
            },
            setBottomView: function (x, R) {
                this._12o("bottomView", x), R != o && this.setBottomHeight(R)
            },
            getCenterView: function () {
                return this._centerView
            },
            setCenterView: function (S) {
                this._12o("centerView", S)
            },
            _12o: function (J, R) {
                var r = this, V = "_" + J, W = r._view, O = r[V];
                O !== R && (O && (O.getView ? Lg(O.getView()) : Lg(O)), r[V] = R, R && (R.getView ? Ur(W, R.getView(), 1) : Ur(W, R, 1)), r.fp(J, O, R))
            },
            onPropertyChanged: function () {
                this.iv()
            },
            validateImpl: function () {
                var A = this, T = A._topView, L = A._bottomView, s = A._leftView, I = A._rightView, E = A._centerView,
                    F = A.getWidth(), p = A.getHeight(), v = 0, O = 0, K = F, P = p, B = 0, Z = 0, z = 0, $ = 0;
                T && (B = A._topHeight == o ? hj(T) : A._topHeight, O = B), L && (Z = A._bottomHeight == o ? hj(L) : A._bottomHeight, P = p - Z), s && (z = A._leftWidth == o ? Bs(s) : A._leftWidth, v = z), I && ($ = A._rightWidth == o ? Bs(I) : A._rightWidth, K = F - $);
                var g = n(0, K - v), w = n(0, P - O);
                T && Vq(T, 0, 0, F, B), L && Vq(L, 0, P, F, Z), s && Vq(s, 0, O, z, w), I && Vq(I, K, O, $, w), E && Vq(E, v, O, g, w)
            }
        })
    }
}("undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : (0, eval)("this"), Object);